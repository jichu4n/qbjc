{"version":3,"sources":["../../qbjc/dist/lib/error-with-loc.js","../../qbjc/dist/lib/symbol-table.js","../../qbjc/dist/runtime/compiled-code.js","../../qbjc/dist/index.js","../../qbjc/dist/lib/ast.js","../../qbjc/dist/runtime/init-value.js","../../qbjc/dist/runtime/runtime.js","../../qbjc/dist/parser/lexer.js","../../qbjc/dist/runtime/builtins.js","../../qbjc/dist/lib/round-half-to-even.js","../../qbjc/dist/runtime/executor.js","../../qbjc/dist/runtime/qb-array.js","../../qbjc/dist/runtime/qb-udt.js","../../qbjc/dist/runtime/browser-platform.js","../ /^/.//.*$","../examples/cal.bas","../examples/check.bas","../examples/guess.bas","../examples/nibbles.bas","../examples/strtonum.bas","../../qbjc/dist/lib/types.js","../../qbjc/dist/compile.js","../../qbjc/dist/codegen/codegen.js","../../qbjc/dist/runtime/node-runtime-bundle.js","../../qbjc/dist/parser/parser.js","../../qbjc/dist/parser/grammar.js","../../qbjc/dist/semantic-analysis/semantic-analysis.js","../../qbjc/dist/lib/data-item.js","../../qbjc/dist/runtime/ansi-terminal-platform.js","../../qbjc/dist/runtime/ansi-terminal-key-code-map.js","external-link.tsx","help-dialog.tsx","examples.ts","open-dialog.tsx","config-manager.ts","settings-dialog.tsx","app-header.tsx","app-splash-screen.tsx","compile-result-dialog.tsx","pane-header.tsx","editor-pane.tsx","qbjc-manager.ts","messages-pane.tsx","output-screen-pane.tsx","run-fab.tsx","app.tsx","index.tsx"],"names":["__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","defineProperty","exports","value","ErrorWithLoc","_super","message","_a","_b","sourceFileName","loc","_this","sourceFileNamePrefix","locPrefix","line","col","Error","default","lookupSymbols","lookupSymbol","VarScope","VarType","symbolTable","name","find","symbol","toLowerCase","filter","PrintArgType","ExecutionDirectiveType","__createBinding","o","m","k","k2","undefined","enumerable","get","__exportStar","__importDefault","mod","__esModule","QbUdt","QbArray","RuntimePlatform","Executor","ExecutionError","compile","compile_1","require","executor_1","runtime_1","qb_array_1","qb_udt_1","AstVisitor","AstVisitorError","UnaryOp","BinaryOp","ExprType","isLhsExpr","InputType","PrintSep","CondLoopStructure","CaseExprType","isSingularTypeExpr","DataTypeExprType","DimType","StmtType","isFnProcOrDefFnProc","error_with_loc_1","types_1","proc","isFnOrDefFn","type","typeExpr","ARRAY","expr","VAR_REF","SUBSCRIPT","MEMBER","includes","node","accept","ProcType","SUB","FN","DEF_FN","visitProc","LABEL","visitLabelStmt","DIM","visitDimStmt","ASSIGN","visitAssignStmt","CONST","visitConstStmt","GOTO","visitGotoStmt","IF","visitIfStmt","SELECT","visitSelectStmt","COND_LOOP","visitCondLoopStmt","UNCOND_LOOP","visitUncondLoopStmt","EXIT_LOOP","visitExitLoopStmt","FOR","visitForStmt","NEXT","visitNextStmt","EXIT_FOR","visitExitForStmt","GOSUB","visitGosubStmt","RETURN","visitReturnStmt","CALL","visitCallStmt","EXIT_PROC","visitExitProcStmt","END","visitEndStmt","SWAP","visitSwapStmt","PRINT","visitPrintStmt","INPUT","visitInputStmt","DEF_TYPE","visitDefTypeStmt","DATA","visitDataStmt","READ","visitReadStmt","RESTORE","visitRestoreStmt","LITERAL","visitLiteralExpr","visitVarRefExpr","FN_CALL","visitFnCallExpr","BINARY_OP","visitBinaryOpExpr","UNARY_OP","visitUnaryOpExpr","visitSubscriptExpr","visitMemberExpr","JSON","stringify","acceptAll","nodes","map","throwError","ELEMENTARY_TYPE_INIT_VALUES","DataType","INTEGER","LONG","SINGLE","DOUBLE","STRING","typeSpec","dataType","isElementaryType","UDT","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","pop","length","push","__spreadArray","to","from","i","il","j","SCREEN_MODE_CONFIGS","moo_1","builtins_1","compiled_code_1","round_half_to_even_1","shouldStopExecution","mode","textModeDimensions","rows","cols","colorMap","Runtime","platform","roundHalfToEven","printFormatStringLexer","NUMBER","DOLLAR_SIGNS","match","lineBreaks","inputLexer","WHITESPACE","QUOTED_STRING","text","substr","COMMA","currentScreenMode","executeBuiltinProc","argTypeSpecs","args","_i","arguments","builtinProc","runContext","lookupBuiltin","BUILTIN_FNS","BUILTIN_SUBS","runtime","run","ptr","print","formatString","printWithFormatString","printWithDefaultFormat","VALUE","pieces","argIdx","reset","nextArg","token","split","integralFormat","fractionFormat","integralFormatLength","replace","formattedValue","Math","floor","padStart","toFixed","indexOf","join","args_1","arg","SEMICOLON","numPaddingChars","repeat","inputLine","prompt","setCursorVisibility","input","resultTypes","results","tokens","tokenIdx","errorMessage","resultIdx","resultType","errorMessagePrefix","tokenValue","numericValue","lexInput","isString","isNumeric","parseFloat","isNaN","trim","setScreenMode","configurable","Keywords","mooLexer","states","main","COMMENT","IDENTIFIER","keywordsTransformFn","keywords","caseInsensitiveKeywords","STRING_LITERAL","NUMERIC_LITERAL","HEX_LITERAL","parseInt","OCT_LITERAL","COLON","DOT","LPAREN","RPAREN","ADD","MUL","EXP","DIV","INTDIV","EQ","NE","GTE","LTE","GT","LT","comment","NEWLINE","TOKEN_TYPES_TO_DISCARD","lexer","Lexer","lastToken","isNextTokenFirstOnLine","tokenQueue","isFirstTokenOnLine","pushState","peek","save","chunk","state","formatError","has","tokenType","__assign","assign","s","singlebyte_1","symbol_table_1","overload","paramTypeSpecsList","paramTypeSpecs","doubleSpec","returnTypeSpec","abs","stringSpec","longSpec","strToBuf","atan","bufToStr","Buffer","cos","singleSpec","getCursorPosition","now","Date","getMonth","getDate","getFullYear","toString","exp","sign","toUpperCase","c","getChar","haystack","needle","integerSpec","start","arraySpec","array","dimensionSpecs","dimensionIdx","log","trimStart","startIdx","x","max","random","trimEnd","sin","sqrt","_c","getScreenSize","moveCursorTo","tan","getHours","getMinutes","getSeconds","midnight","setHours","getTime","beep","clearScreen","getColorName","fg","bg","currentScreenModeConfig","Number","isFinite","setFgColor","setBgColor","row","cursor","origPos","newX","newY","numSeconds","startTimeMs","nowMs","procs","shouldReturnIfArgTypeMismatch","builtinFnsMatchingName","builtinFn","every","paramTypeSpec","areMatchingElementaryTypes","isArray","round","data_item_1","init_value_1","module","stmt","EndDirective","isEndDirective","stmtExecutionDelayUs","currentModule","localStaticVarsMap","moduleLabelIndexMap","procLabelIndexMap","dataCursor","stmtIdx","itemIdx","defaultStmtExecutionDelayUs","executeModule","moduleOrCode","ctx","e_1","loadCompiledModule","buildLabelIndexMaps","restore","executeProc","bind","read","localVars","initVars","localSymbols","VAR","localStaticVars","globalVars","globalSymbols","tempVars","executeStmts","stmts","stopExecution","prevCtx","argPtrs","paramSymbols","procTypeName","STATIC_VAR","varSymbolTable","includeVarTypes","container","varSymbolTable_1","varType","labelIndexMap","gosubStates","_loop_1","this_1","errorArgs","directive","e_2","gotoLabel","gosubState","delay","nextStmtIdx","destLabel","dataItem","getNextDataItem","getDataItem","data","buildLabelIndexMap","name_1","forEach","idx","arrayTypeSpec","_values","init","elementTypeSpec","_typeSpec","currentDimensionArrays","minIdx","numElements","nextDimensionArrays","currentDimensionArrays_1","dimensionArray","nextDimensionArray","getIdx","qbIdx","maxIdx","udtTypeSpec","fieldSpecs","fieldSpec","clone","newQbUdt","isUdt","BrowserExecutor","BrowserPlatform","ansi_escapes_1","ansi_terminal_platform_1","terminal","code","moduleObj","Function","fn","delayInUs","t0","window","performance","setTimeout","write","cursorIdx","initialX","disposeFns","removeOnDataListenerFn","onData","splice","cursorBackward","cursorSavePosition","eraseEndLine","slice","cursorRestorePosition","cursorForward","console","charCodeAt","dispose","checkShouldStopExecutionIntervalId","setInterval","clearInterval","translateKeyCode","cursorGetPosition","opts","webpackContext","req","id","webpackContextResolve","__webpack_require__","keys","getType","typeSpec1","typeSpec2","ProcDefType","typeSpecName","areMatchingSingularTypes","isSingularType","isIntegral","procType","terser_1","codegen_1","parser_1","semantic_analysis_1","source","enableBundling","enableMinify","astModule","sourceMap","sourceMapContent","_d","minifiedCode","minifiedSourceMap","_e","minify","filename","content","CodeGenerator","lodash_1","source_map_1","ast_1","nodeRuntimeBundleCode","BINARY_OP_MAP","MOD","AND","OR","openForStmtStates","openLoopStmtStates","indent","nextGeneratedLabelIdx","indentWidth","compiledModuleSourceNode","visitModule","bundle","toStringWithSourceMap","sourceNode","SourceNode","add","chunks","lines","visitStmts","flattenDeep","generateLoc","createSourceNode","origOpenForStmtStatesLength","sourceNodes","forStmt","generateLabelStmt","varDecls","varDecl","dimType","SHARED","dimensionSpecExprs","generateVarRefCode","minIdxExpr","maxIdxExpr","createStmtSourceNode","targetExpr","generateAssignableValueCode","valueExpr","flatMap","constDefs","constDef","generateGotoCode","visitCondStmt","generateLabel","ifBranch","condExpr","labelPrefix","testValue","generateTempVarRef","testExpr","caseBranch","condExprs","RANGE","lowerBoundExpr","upperBoundExpr","COMP","rightExpr","generateCondExprCode","branchLabels","ifBranches","elseBranch","endIfLabel","nextBranchLabelIdx","nextBranchNode","nextBranchLabel","loopStartLabel","loopEndLabel","cond","isCondNegated","condStmt","loopStmt","endLabel","structure","COND_EXPR_BEFORE_STMTS","COND_EXPR_AFTER_STMTS","startLabel","stepValue","endValue","counterExpr","startExpr","stepExpr","endExpr","numForStmtStatesToClose","counterExprs","nextCounterExprString","_loop_2","this_2","visitProcCall","tempVarName","leftExpr","formatExpr","inputType","TOKENIZED","targetExprs","LINE","generateRunCode","valueString","OP_MAP","NEG","NOT","PARENS","arrayExpr","indexExprs","indexExpr","generateSubscriptCode","dimension","udtExpr","fieldName","tempVarPrefix","tempVarIdx","argExprs","argExpr","argTypeProps","shouldPassByRef","ARG","generateVarContainerCode","containerCode","lastIndexExprCode","executeProcCodePrefixMap","BUILTIN","MODULE","procDefType","values","outputLines","values_1","indentStr","varContainer","varScope","LOCAL","GLOBAL","targetTypeSpec","valueTypeSpec","valueCode","createParser","nearley_1","grammar_1","lexer_1","Parser","Grammar","fromCompiled","parser","feed","tree","discard","useLoc","tokenOrAstNode","buildBinaryOpExpr","$1","$2","$3","buildUnaryOpExpr","buildDataItem","grammar","ParserRules","concat","reduce","a","udts","STATIC","FUNCTION","$4","$5","params","isDefaultStatic","DEF","position","startsWith","DECLARE","$1_1","elementTypeExpr","TYPE","fieldSpecExprs","$2_1","TO","LET","ELSE","THEN","ELSEIF","$6","$7","$6_1","$6_2","$6_5","CASE","$5_1","$5_2","$5_3","IS","WHILE","WEND","DO","LOOP","UNTIL","EXIT","STEP","nextToken","SYSTEM","STOP","USING","location","flatten","arg1","arg2","DEFINT","ranges","DEFSNG","DEFDBL","DEFLNG","DEFSTR","minPrefix","maxPrefix","LOCATE","COLOR","$2_2","NaN","SEG","VIEW","AS","ELEMENTARY","ParserStart","SemanticAnalyzer","TYPE_SUFFIX_MAP","freeze","$","DEFAULT_DIMENSION_SPEC","udtStack","currentProc","defTypeMap","setUpDefTypeMap","visitUdt","preprocessProc","labels","getLabels","param","getTypeSpecForVarDeclOrParam","getDefaultTypeSpecFromName","labelLocMap","stmts_1","udt","udtStackIdx","udtsInCycle","fieldTypeSpec","fieldUdt","lookupUdtOrThrow","resolvedSymbol","moduleLocalSymbol","createLocalVarSymbol","addLocalSymbol","symbolProps","lookupLabelOrThrow","requireNumericExpr","exprs","exprs_1","requireElementaryTypeExpr","exprs_2","condExprs_1","exprs_3","resolvedSub","lookupSub","defType","range","fromCharCode","lookupFn","fnCallExpr","resolvedFn","subscriptExpr","leftTypeSpec","rightTypeSpec","requireNumericOperands","useCoercedNumericType","coerceNumericTypes","resolvedProc","argTypeSpec","isEqual","typeSpecs","RULES","operands","resultTypeSpec","matchingRule","getLocalSymbols","idxExprs","idxExprs_1","idxExpr","context","foundLabel","existingLabel","dataItemTypeName","throwDataItemTypeError","item","expectedTypeSpec","ansi_styles_1","ansi_terminal_key_code_map_1","AnsiTerminalPlatform","cursorTo","isCursorVisible","cursorShow","cursorHide","eraseScreen","colorName","open","bgColorName","ESC","NUL","ANSI_TERMINAL_KEY_CODE_MAP","ExternalLink","href","children","Link","target","style","fontSize","verticalAlign","marginLeft","ResourcesTab","Typography","variant","AboutTab","HelpDialog","observer","isOpen","onClose","theme","useTheme","isFullScreen","useMediaQuery","breakpoints","down","useState","activeTab","setActiveTab","Dialog","fullScreen","fullWidth","maxWidth","scroll","DialogTitle","display","Tabs","orientation","onChange","event","borderRight","palette","divider","indicatorColor","textColor","Tab","icon","backgroundColor","background","paper","overflowY","flex","height","paddingLeft","paddingRight","DialogActions","Button","onClick","color","EXAMPLE_SPECS","fileName","title","description","spec","DEFAULT_EXAMPLE","ConfirmationDialog","onConfirm","DialogContent","DialogContentText","useCallback","ExamplesTab","onSelect","onExampleClick","exampleIdx","EXAMPLES","List","subheader","ListItem","button","ListItemAvatar","Avatar","ListItemText","primary","secondary","UploadTab","selectedFiles","selectedFile","alignItems","justifyContent","acceptedFiles","filesLimit","showPreviews","showPreviewsInDropzone","ConfigKey","OpenDialog","editor","onChangeSourceFileName","selectedFileSpecRef","useRef","isOverwriteConfirmationDialogOpen","setIsOverwriteConfirmationDialogOpen","openSelectedFile","selectedFileSpec","current","setValue","fileSpec","trimmedSource","getValue","shouldConfirm","some","DEFAULT_SOURCE_FILE_NAME","DEFAULT_CONFIG","SOURCE_FILES","CURRENT_SOURCE_FILE_NAME","EDITOR_FONT_FAMILY","EDITOR_FONT_SIZE","EDITOR_THEME","EDITOR_KEYBINDINGS","SCREEN_FONT_FAMILY","SCREEN_FONT_SIZE","SCREEN_LETTER_SPACING","SCREEN_LINE_HEIGHT","EXECUTION_DELAY","EDITOR_THEME_GROUPS","EDITOR_THEMES","group","configManager","config","makeObservable","observable","setKey","action","load","sourceFiles","computed","currentSourceFile","setSourceFileName","setSourceFileContent","reaction","toJS","key","defaultValue","currentValue","localStorage","removeItem","setItem","rawValue","getItem","parse","warn","getKey","sourceFile","newSourceFileName","newContent","TextSettingEditorDialog","configKey","dividers","TextField","autoFocus","required","width","InputProps","disabled","SliderSettingEditorDialog","min","Slider","marks","valueLabelDisplay","marginTop","SingleChoiceSettingEditorDialog","groups","choices","listRef","selectedListItemRef","didScrollToSelectedListItem","scrollToSelectedListItem","scrollIntoView","scrollHeight","scrollTop","clientHeight","useEffect","overflowX","ref","padding","ListSubheader","choice","isSelected","selected","primaryTypographyProps","ListItemSecondaryAction","Radio","checked","SettingsDialog","isEditorFontDialogOpen","setIsEditorFontDialogOpen","isEditorFontSizeDialogOpen","setIsEditorFontSizeDialogOpen","isEditorThemeDialogOpen","setIsEditorThemeDialogOpen","isEditorKeybindingsDialogOpen","setIsEditorKeybindingsDialogOpen","isScreenFontDialogOpen","setIsScreenFontDialogOpen","isScreenFontSizeDialogOpen","setIsScreenFontSizeDialogOpen","isScreenLetterSpacingDialogOpen","setIsScreenLetterSpacingDialogOpen","isScreenLineHeightDialogOpen","setIsScreenLineHeightDialogOpen","isExecutionDelayDialogOpen","setIsExecutionDelayDialogOpen","AppHeader","isReady","onSaveClick","blob","Blob","saveAs","isOpenDialogOpen","setIsOpenDialogOpen","showOpenDialog","hideOpenDialog","isSettingsDialogOpen","setIsSettingsDialogOpen","showSettingsDialog","hideSettingsDialog","isHelpDialogOpen","setIsHelpDialogOpen","showHelpDialog","hideHelpDialog","AppBar","Toolbar","flexGrow","Tooltip","IconButton","typography","overline","AppSplashScreen","CompileResultType","Status","VISIBLE","status","setStatus","TRANSITIONING","HIDDEN","left","top","zIndex","transition","opacity","CircularProgress","COMPILE_RESULT_TYPE_SPECS","compileResultType","iconClass","TextBoxOutline","BUNDLE","NodejsIcon","CompileResultTypeSelect","React","menuAnchor","setMenuAnchor","onButtonClick","currentTarget","onMenuSelect","newValue","onMenuClose","IconClass","startIcon","endIcon","Menu","anchorEl","keepMounted","MenuItem","ListItemIcon","CompileResultDialog","moduleCompileResult","compileResult","_onClose","setCompileResultType","bundleCompileResult","setBundleCompileResult","editorRef","setIsFullScreen","enterFullScreen","resize","exitFullScreen","onCompileResultChange","editorConfigChangeListenerDisposerRef","ace","edit","useWorker","autorun","setOptions","fontFamily","setTheme","keybindings","setKeyboardHandler","setShowPrintMargin","session","setMode","setReadOnly","clearSelection","focus","destroy","disableTypography","marginRight","spacing","flexDirection","PaneHeader","Paper","elevation","square","TextFieldEditorDialog","valueProp","prevValueProp","QbjcMessageType","EditorPane","onReady","containerElRef","containerHeightBeforeFullScreenRef","containerEl","containerHeightBeforeFullScreen","initialContent","on","isSourceFileNameEditorDialogOpen","setIsSourceFileNameEditorDialogOpen","showSourceFileNameEditorDialog","hideSourceFileNameEditorDialog","QbjcManager","isRunning","messages","executor","pushMessage","clearMessages","updateSourceFileName","error","runInAction","ERROR","EXECUTION","startTs","endTs","INFO","selection","selectWordRight","MessagesPane","onLocClick","onShowCompileResultClick","scrollContainerRef","isScrolledToBottomRef","prevNumMessagesRef","scrollContainerEl","prevNumMessages","isScrolledToBottom","numMessages","onScroll","dense","disablePadding","messageType","ErrorIcon","warning","dark","hint","PlayCircleIcon","getMessageDisplayProps","Icon","iconElement","htmlColor","body2","paddingTop","paddingBottom","inset","marginBottom","OutputScreenPane","dimensions","terminalRef","fitAddOnRef","fitAddOn","fit","Terminal","convertEol","fitAddon","FitAddon","loadAddon","XtermWebfont","loadWebfontAndOpen","setOption","addEventListener","debounce","onResize","prevDimensionsJson","dimensionsJson","size","RunFab","qbjcManager","right","bottom","Fab","stop","darkTheme","createTheme","light","blue","contrastText","App","setDimensions","isCompileResultDialogOpen","setIsCompileResultDialogOpen","displayedCompileResult","setDisplayedCompileResult","showCompileResultDialog","hideCompileResultDialog","ThemeProvider","CssBaseline","Helmet","minSize","sizes","onDragEnd","horizontalSplit","gutterSize","overflow","direction","expandToMin","rightVerticalSplit","goToMessageLocInEditor","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6587d7d3.chunk.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** An error with source file and location info. */\nvar ErrorWithLoc = /** @class */ (function (_super) {\n    __extends(ErrorWithLoc, _super);\n    function ErrorWithLoc(message, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, loc = _b.loc;\n        var _this = _super.call(this, message) || this;\n        if (loc) {\n            var sourceFileNamePrefix = sourceFileName ? sourceFileName + \":\" : '';\n            var locPrefix = loc.line + \":\" + loc.col;\n            _this.message = \"\" + sourceFileNamePrefix + locPrefix + \" - \" + _this.message;\n            _this.loc = loc;\n        }\n        return _this;\n    }\n    return ErrorWithLoc;\n}(Error));\nexports.default = ErrorWithLoc;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupSymbols = exports.lookupSymbol = exports.VarScope = exports.VarType = void 0;\n/** Type of a variable symbol. */\nvar VarType;\n(function (VarType) {\n    /** Regular variable. */\n    VarType[\"VAR\"] = \"var\";\n    /** Static variable. */\n    VarType[\"STATIC_VAR\"] = \"staticVar\";\n    /** Constant. */\n    VarType[\"CONST\"] = \"const\";\n    /** FUNCTION or SUB argument. */\n    VarType[\"ARG\"] = \"arg\";\n})(VarType = exports.VarType || (exports.VarType = {}));\n/** Scope of a variable symbol. */\nvar VarScope;\n(function (VarScope) {\n    VarScope[\"LOCAL\"] = \"local\";\n    VarScope[\"GLOBAL\"] = \"global\";\n})(VarScope = exports.VarScope || (exports.VarScope = {}));\nfunction lookupSymbol(symbolTable, name) {\n    var _a;\n    return ((_a = symbolTable.find(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); })) !== null && _a !== void 0 ? _a : null);\n}\nexports.lookupSymbol = lookupSymbol;\nfunction lookupSymbols(symbolTable, name) {\n    return symbolTable.filter(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); });\n}\nexports.lookupSymbols = lookupSymbols;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PrintArgType = exports.ExecutionDirectiveType = void 0;\nvar ExecutionDirectiveType;\n(function (ExecutionDirectiveType) {\n    ExecutionDirectiveType[\"GOTO\"] = \"goto\";\n    ExecutionDirectiveType[\"GOSUB\"] = \"gosub\";\n    ExecutionDirectiveType[\"RETURN\"] = \"return\";\n    ExecutionDirectiveType[\"END\"] = \"end\";\n    ExecutionDirectiveType[\"EXIT_PROC\"] = \"exitProc\";\n})(ExecutionDirectiveType = exports.ExecutionDirectiveType || (exports.ExecutionDirectiveType = {}));\n/** Type of an argument to print(). */\nvar PrintArgType;\n(function (PrintArgType) {\n    PrintArgType[\"COMMA\"] = \"comma\";\n    PrintArgType[\"SEMICOLON\"] = \"semicolon\";\n    PrintArgType[\"VALUE\"] = \"value\";\n})(PrintArgType = exports.PrintArgType || (exports.PrintArgType = {}));\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QbUdt = exports.QbArray = exports.RuntimePlatform = exports.Executor = exports.ExecutionError = exports.compile = void 0;\nvar compile_1 = require(\"./compile\");\nObject.defineProperty(exports, \"compile\", { enumerable: true, get: function () { return __importDefault(compile_1).default; } });\n__exportStar(require(\"./lib/error-with-loc\"), exports);\n__exportStar(require(\"./lib/types\"), exports);\nvar executor_1 = require(\"./runtime/executor\");\nObject.defineProperty(exports, \"ExecutionError\", { enumerable: true, get: function () { return executor_1.ExecutionError; } });\nObject.defineProperty(exports, \"Executor\", { enumerable: true, get: function () { return __importDefault(executor_1).default; } });\nvar runtime_1 = require(\"./runtime/runtime\");\nObject.defineProperty(exports, \"RuntimePlatform\", { enumerable: true, get: function () { return runtime_1.RuntimePlatform; } });\nvar qb_array_1 = require(\"./runtime/qb-array\");\nObject.defineProperty(exports, \"QbArray\", { enumerable: true, get: function () { return __importDefault(qb_array_1).default; } });\nvar qb_udt_1 = require(\"./runtime/qb-udt\");\nObject.defineProperty(exports, \"QbUdt\", { enumerable: true, get: function () { return __importDefault(qb_udt_1).default; } });\n__exportStar(require(\"./runtime/compiled-code\"), exports);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AstVisitor = exports.AstVisitorError = exports.UnaryOp = exports.BinaryOp = exports.ExprType = exports.isLhsExpr = exports.InputType = exports.PrintSep = exports.CondLoopStructure = exports.CaseExprType = exports.isSingularTypeExpr = exports.DataTypeExprType = exports.DimType = exports.StmtType = exports.isFnProcOrDefFnProc = void 0;\nvar error_with_loc_1 = __importDefault(require(\"./error-with-loc\"));\nvar types_1 = require(\"./types\");\nfunction isFnProcOrDefFnProc(proc) {\n    return types_1.isFnOrDefFn(proc.type);\n}\nexports.isFnProcOrDefFnProc = isFnProcOrDefFnProc;\nvar StmtType;\n(function (StmtType) {\n    StmtType[\"LABEL\"] = \"label\";\n    StmtType[\"DIM\"] = \"dim\";\n    StmtType[\"ASSIGN\"] = \"assign\";\n    StmtType[\"CONST\"] = \"const\";\n    StmtType[\"GOTO\"] = \"goto\";\n    StmtType[\"IF\"] = \"if\";\n    StmtType[\"SELECT\"] = \"select\";\n    StmtType[\"COND_LOOP\"] = \"condLoop\";\n    StmtType[\"UNCOND_LOOP\"] = \"uncondLoop\";\n    StmtType[\"EXIT_LOOP\"] = \"exitLoop\";\n    StmtType[\"FOR\"] = \"for\";\n    StmtType[\"NEXT\"] = \"next\";\n    StmtType[\"EXIT_FOR\"] = \"exitFor\";\n    StmtType[\"GOSUB\"] = \"gosub\";\n    StmtType[\"RETURN\"] = \"return\";\n    StmtType[\"CALL\"] = \"call\";\n    StmtType[\"EXIT_PROC\"] = \"exitProc\";\n    StmtType[\"END\"] = \"end\";\n    StmtType[\"SWAP\"] = \"swap\";\n    StmtType[\"PRINT\"] = \"print\";\n    StmtType[\"INPUT\"] = \"input\";\n    StmtType[\"DEF_TYPE\"] = \"defType\";\n    StmtType[\"DATA\"] = \"data\";\n    StmtType[\"READ\"] = \"read\";\n    StmtType[\"RESTORE\"] = \"restore\";\n})(StmtType = exports.StmtType || (exports.StmtType = {}));\nvar DimType;\n(function (DimType) {\n    DimType[\"LOCAL\"] = \"local\";\n    DimType[\"SHARED\"] = \"shared\";\n    DimType[\"STATIC\"] = \"static\";\n})(DimType = exports.DimType || (exports.DimType = {}));\nvar DataTypeExprType;\n(function (DataTypeExprType) {\n    DataTypeExprType[\"ELEMENTARY\"] = \"elementary\";\n    DataTypeExprType[\"ARRAY\"] = \"array\";\n    DataTypeExprType[\"UDT\"] = \"udt\";\n})(DataTypeExprType = exports.DataTypeExprType || (exports.DataTypeExprType = {}));\nfunction isSingularTypeExpr(typeExpr) {\n    return typeExpr.type !== DataTypeExprType.ARRAY;\n}\nexports.isSingularTypeExpr = isSingularTypeExpr;\nvar CaseExprType;\n(function (CaseExprType) {\n    /** Single value expression. */\n    CaseExprType[\"VALUE\"] = \"value\";\n    /** Range, e.g. 1 TO 5. */\n    CaseExprType[\"RANGE\"] = \"range\";\n    /** Comparison operator, e.g. IS >= 5. */\n    CaseExprType[\"COMP\"] = \"comp\";\n})(CaseExprType = exports.CaseExprType || (exports.CaseExprType = {}));\nvar CondLoopStructure;\n(function (CondLoopStructure) {\n    CondLoopStructure[\"COND_EXPR_BEFORE_STMTS\"] = \"condExprBeforeStmts\";\n    CondLoopStructure[\"COND_EXPR_AFTER_STMTS\"] = \"condExprAfterStmts\";\n})(CondLoopStructure = exports.CondLoopStructure || (exports.CondLoopStructure = {}));\n/** An unimplemented statement that we can ignore for codegen purposes. */\nvar PrintSep;\n(function (PrintSep) {\n    PrintSep[\"COMMA\"] = \"comma\";\n    PrintSep[\"SEMICOLON\"] = \"semicolon\";\n})(PrintSep = exports.PrintSep || (exports.PrintSep = {}));\nvar InputType;\n(function (InputType) {\n    /** INPUT. */\n    InputType[\"TOKENIZED\"] = \"tokenized\";\n    /** LINE INPUT. */\n    InputType[\"LINE\"] = \"line\";\n})(InputType = exports.InputType || (exports.InputType = {}));\nfunction isLhsExpr(expr) {\n    return [ExprType.VAR_REF, ExprType.SUBSCRIPT, ExprType.MEMBER].includes(expr.type);\n}\nexports.isLhsExpr = isLhsExpr;\nvar ExprType;\n(function (ExprType) {\n    ExprType[\"LITERAL\"] = \"literal\";\n    ExprType[\"VAR_REF\"] = \"varRef\";\n    ExprType[\"FN_CALL\"] = \"fnCall\";\n    ExprType[\"BINARY_OP\"] = \"binaryOp\";\n    ExprType[\"UNARY_OP\"] = \"unaryOp\";\n    ExprType[\"SUBSCRIPT\"] = \"subscript\";\n    ExprType[\"MEMBER\"] = \"member\";\n})(ExprType = exports.ExprType || (exports.ExprType = {}));\nvar BinaryOp;\n(function (BinaryOp) {\n    BinaryOp[\"ADD\"] = \"add\";\n    BinaryOp[\"SUB\"] = \"sub\";\n    BinaryOp[\"MUL\"] = \"mul\";\n    BinaryOp[\"DIV\"] = \"div\";\n    BinaryOp[\"INTDIV\"] = \"intdiv\";\n    BinaryOp[\"EXP\"] = \"exp\";\n    BinaryOp[\"MOD\"] = \"mod\";\n    BinaryOp[\"AND\"] = \"and\";\n    BinaryOp[\"OR\"] = \"or\";\n    BinaryOp[\"EQ\"] = \"eq\";\n    BinaryOp[\"NE\"] = \"ne\";\n    BinaryOp[\"GT\"] = \"gt\";\n    BinaryOp[\"GTE\"] = \"gte\";\n    BinaryOp[\"LT\"] = \"lt\";\n    BinaryOp[\"LTE\"] = \"lte\";\n})(BinaryOp = exports.BinaryOp || (exports.BinaryOp = {}));\nvar UnaryOp;\n(function (UnaryOp) {\n    UnaryOp[\"NOT\"] = \"not\";\n    UnaryOp[\"NEG\"] = \"sub\";\n    UnaryOp[\"PARENS\"] = \"parens\";\n})(UnaryOp = exports.UnaryOp || (exports.UnaryOp = {}));\n/** Error thrown by AST visitors. */\nvar AstVisitorError = /** @class */ (function (_super) {\n    __extends(AstVisitorError, _super);\n    function AstVisitorError(message, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, node = _b.node;\n        return _super.call(this, message, { sourceFileName: sourceFileName, loc: node === null || node === void 0 ? void 0 : node.loc }) || this;\n    }\n    return AstVisitorError;\n}(error_with_loc_1.default));\nexports.AstVisitorError = AstVisitorError;\n/** Base class for AST visitors. */\nvar AstVisitor = /** @class */ (function () {\n    function AstVisitor() {\n    }\n    /** Invokes the visitor method corresponding to the specified AstNode. */\n    AstVisitor.prototype.accept = function (node) {\n        switch (node.type) {\n            case types_1.ProcType.SUB:\n            case types_1.ProcType.FN:\n            case types_1.ProcType.DEF_FN:\n                return this.visitProc(node);\n            case StmtType.LABEL:\n                return this.visitLabelStmt(node);\n            case StmtType.DIM:\n                return this.visitDimStmt(node);\n            case StmtType.ASSIGN:\n                return this.visitAssignStmt(node);\n            case StmtType.CONST:\n                return this.visitConstStmt(node);\n            case StmtType.GOTO:\n                return this.visitGotoStmt(node);\n            case StmtType.IF:\n                return this.visitIfStmt(node);\n            case StmtType.SELECT:\n                return this.visitSelectStmt(node);\n            case StmtType.COND_LOOP:\n                return this.visitCondLoopStmt(node);\n            case StmtType.UNCOND_LOOP:\n                return this.visitUncondLoopStmt(node);\n            case StmtType.EXIT_LOOP:\n                return this.visitExitLoopStmt(node);\n            case StmtType.FOR:\n                return this.visitForStmt(node);\n            case StmtType.NEXT:\n                return this.visitNextStmt(node);\n            case StmtType.EXIT_FOR:\n                return this.visitExitForStmt(node);\n            case StmtType.GOSUB:\n                return this.visitGosubStmt(node);\n            case StmtType.RETURN:\n                return this.visitReturnStmt(node);\n            case StmtType.CALL:\n                return this.visitCallStmt(node);\n            case StmtType.EXIT_PROC:\n                return this.visitExitProcStmt(node);\n            case StmtType.END:\n                return this.visitEndStmt(node);\n            case StmtType.SWAP:\n                return this.visitSwapStmt(node);\n            case StmtType.PRINT:\n                return this.visitPrintStmt(node);\n            case StmtType.INPUT:\n                return this.visitInputStmt(node);\n            case StmtType.DEF_TYPE:\n                return this.visitDefTypeStmt(node);\n            case StmtType.DATA:\n                return this.visitDataStmt(node);\n            case StmtType.READ:\n                return this.visitReadStmt(node);\n            case StmtType.RESTORE:\n                return this.visitRestoreStmt(node);\n            case ExprType.LITERAL:\n                return this.visitLiteralExpr(node);\n            case ExprType.VAR_REF:\n                return this.visitVarRefExpr(node);\n            case ExprType.FN_CALL:\n                return this.visitFnCallExpr(node);\n            case ExprType.BINARY_OP:\n                return this.visitBinaryOpExpr(node);\n            case ExprType.UNARY_OP:\n                return this.visitUnaryOpExpr(node);\n            case ExprType.SUBSCRIPT:\n                return this.visitSubscriptExpr(node);\n            case ExprType.MEMBER:\n                return this.visitMemberExpr(node);\n            default:\n                throw new Error(\"Unknown node type: \" + JSON.stringify(node));\n        }\n    };\n    /** Invokes the corresponding visitor methods for each of the provided AstNodes. */\n    AstVisitor.prototype.acceptAll = function (nodes) {\n        var _this = this;\n        return nodes.map(function (node) { return _this.accept(node); });\n    };\n    /** Throws an AstVisitorError for the corresponding AstNode. */\n    AstVisitor.prototype.throwError = function (message, node) {\n        throw new AstVisitorError(message, {\n            sourceFileName: this.sourceFileName,\n            node: node,\n        });\n    };\n    return AstVisitor;\n}());\nexports.AstVisitor = AstVisitor;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar qb_array_1 = __importDefault(require(\"./qb-array\"));\nvar qb_udt_1 = __importDefault(require(\"./qb-udt\"));\n/** Initial value for elementary data types. */\nvar ELEMENTARY_TYPE_INIT_VALUES = (_a = {},\n    _a[types_1.DataType.INTEGER] = 0,\n    _a[types_1.DataType.LONG] = 0,\n    _a[types_1.DataType.SINGLE] = 0.0,\n    _a[types_1.DataType.DOUBLE] = 0.0,\n    _a[types_1.DataType.STRING] = '',\n    _a);\nfunction initValue(typeSpec) {\n    var dataType = typeSpec.type;\n    if (types_1.isElementaryType(dataType)) {\n        return ELEMENTARY_TYPE_INIT_VALUES[dataType];\n    }\n    switch (typeSpec.type) {\n        case types_1.DataType.ARRAY:\n            return new qb_array_1.default(typeSpec);\n        case types_1.DataType.UDT:\n            return new qb_udt_1.default(typeSpec);\n        default:\n            throw new Error(\"Unknown type: \" + JSON.stringify(typeSpec));\n    }\n}\nexports.default = initValue;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SCREEN_MODE_CONFIGS = exports.RuntimePlatform = void 0;\nvar moo_1 = __importDefault(require(\"moo\"));\nvar types_1 = require(\"../lib/types\");\nvar builtins_1 = require(\"./builtins\");\nvar compiled_code_1 = require(\"./compiled-code\");\nvar round_half_to_even_1 = __importDefault(require(\"../lib/round-half-to-even\"));\n/** Interface for platform-specific runtime functionality. */\nvar RuntimePlatform = /** @class */ (function () {\n    function RuntimePlatform() {\n        /** Flag indicating we should stop executing.\n         *\n         * Setting this flag will cause blocking methods like `inputLine()` to exit early.\n         */\n        this.shouldStopExecution = false;\n    }\n    return RuntimePlatform;\n}());\nexports.RuntimePlatform = RuntimePlatform;\nexports.SCREEN_MODE_CONFIGS = [\n    {\n        mode: 0,\n        textModeDimensions: [{ rows: 80, cols: 25 }],\n        colorMap: [\n            'black',\n            'blue',\n            'green',\n            'cyan',\n            'red',\n            'magenta',\n            'yellow',\n            'white',\n            'gray',\n            'blueBright',\n            'greenBright',\n            'cyanBright',\n            'redBright',\n            'magentaBright',\n            'yellowBright',\n            'whiteBright',\n        ],\n    },\n];\n/** Runtime support library.\n *\n * This class provides the interface invoked by compiled code. It is platform-agnostic, and wraps\n * the low-level, platform-dependent functionality in the injected RuntimePlatform.\n */\nvar Runtime = /** @class */ (function () {\n    function Runtime(platform) {\n        this.platform = platform;\n        this.roundHalfToEven = round_half_to_even_1.default;\n        this.printFormatStringLexer = moo_1.default.compile({\n            NUMBER: /(?:[#,])*\\.#+|[#,]+/,\n            STRING: '&',\n            DOLLAR_SIGNS: /\\$+/,\n            LITERAL: {\n                match: /[^.#&\\$]+/,\n                lineBreaks: true,\n            },\n        });\n        /** Lexer for input(). */\n        this.inputLexer = moo_1.default.compile({\n            WHITESPACE: { match: /\\s+/, lineBreaks: true },\n            QUOTED_STRING: {\n                match: /\"[^\"]*\"/,\n                value: function (text) { return text.substr(1, text.length - 2); },\n                type: function () { return 'STRING'; },\n            },\n            COMMA: ',',\n            STRING: /[^,\\s]+/,\n        });\n        this.currentScreenMode = 0;\n    }\n    Runtime.prototype.executeBuiltinProc = function (name, argTypeSpecs) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var builtinProc, runContext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs) ||\n                            builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs);\n                        if (!builtinProc) {\n                            throw new Error(\"No matching built-in procedure found: \\\"\" + name + \"\\\"\");\n                        }\n                        if (argTypeSpecs.length !== args.length) {\n                            throw new Error(\"Argument types and values do not match: \" +\n                                (\"expected \" + argTypeSpecs.length + \" arguments, got \" + args.length));\n                        }\n                        runContext = {\n                            runtime: this,\n                            platform: this.platform,\n                            argTypeSpecs: argTypeSpecs,\n                            args: args,\n                        };\n                        return [4 /*yield*/, builtinProc.run.apply(builtinProc, __spreadArray(__spreadArray([], args.map(function (ptr) { return ptr[0][ptr[1]]; })), [runContext]))];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Runtime.prototype.print = function (formatString) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var line;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        line = formatString\n                            ? this.printWithFormatString(formatString, args)\n                            : this.printWithDefaultFormat(args);\n                        if (args.length === 0 ||\n                            args[args.length - 1].type === compiled_code_1.PrintArgType.VALUE) {\n                            line += '\\n';\n                        }\n                        return [4 /*yield*/, this.platform.print(line)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Implements PRINT USING format strings.\n     *\n     * This is a VERY incomplete implementation. Supported:\n     *\n     *   - Formatting numbers with ##.##\n     *   - Formatting string with &\n     */\n    Runtime.prototype.printWithFormatString = function (formatString, args) {\n        var pieces = [];\n        var argIdx = 0;\n        this.printFormatStringLexer.reset(formatString);\n        for (;;) {\n            while (argIdx < args.length && args[argIdx].type !== compiled_code_1.PrintArgType.VALUE) {\n                ++argIdx;\n            }\n            var nextArg = argIdx < args.length ? args[argIdx] : null;\n            var token = this.printFormatStringLexer.next();\n            if (!token) {\n                break;\n            }\n            switch (token.type) {\n                case 'NUMBER':\n                    if (!nextArg || typeof nextArg.value !== 'number') {\n                        throw new Error('Formatting error: expected number ' +\n                            (\"as argument #\" + (argIdx + 1) + \", got \" + typeof (nextArg === null || nextArg === void 0 ? void 0 : nextArg.value)));\n                    }\n                    var _a = token.value.split('.'), integralFormat = _a[0], fractionFormat = _a[1];\n                    // Not supporting commas yet.\n                    var integralFormatLength = integralFormat.replace(/,/, '').length;\n                    if (fractionFormat) {\n                        var formattedValue = (\"\" + Math.floor(nextArg.value)).padStart(integralFormatLength) +\n                            '.' +\n                            nextArg.value.toFixed(fractionFormat.length).split('.')[1];\n                        pieces.push(formattedValue);\n                    }\n                    else {\n                        var formattedValue = nextArg.value.toFixed(0).padStart(integralFormatLength) +\n                            (token.value.indexOf('.') >= 0 ? '.' : '');\n                        pieces.push(formattedValue);\n                    }\n                    ++argIdx;\n                    break;\n                case 'STRING':\n                    if (!nextArg || typeof nextArg.value !== 'string') {\n                        throw new Error(\"Formatting error: expected string as argument #\" + (argIdx + 1));\n                    }\n                    pieces.push(nextArg.value);\n                    ++argIdx;\n                    break;\n                case 'DOLLAR_SIGNS': {\n                    var value = void 0;\n                    if (token.value.length <= 1) {\n                        value = token.value;\n                    }\n                    else if (token.value.length === 2) {\n                        value = ' $';\n                    }\n                    else {\n                        value = '%$';\n                    }\n                    pieces.push(value);\n                    break;\n                }\n                case 'LITERAL':\n                    pieces.push(token.value);\n                    break;\n                default:\n                    throw new Error(\"Unexpected token type: \" + JSON.stringify(token));\n            }\n        }\n        return pieces.join('');\n    };\n    Runtime.prototype.printWithDefaultFormat = function (args) {\n        var PRINT_ZONE_LENGTH = 14;\n        var line = '';\n        for (var _i = 0, args_1 = args; _i < args_1.length; _i++) {\n            var arg = args_1[_i];\n            switch (arg.type) {\n                case compiled_code_1.PrintArgType.SEMICOLON:\n                    break;\n                case compiled_code_1.PrintArgType.COMMA:\n                    var numPaddingChars = PRINT_ZONE_LENGTH - (line.length % PRINT_ZONE_LENGTH);\n                    line += ' '.repeat(numPaddingChars);\n                    break;\n                case compiled_code_1.PrintArgType.VALUE:\n                    if (typeof arg.value === 'string') {\n                        line += \"\" + arg.value;\n                        break;\n                    }\n                    else if (typeof arg.value === 'number') {\n                        line += \"\" + (arg.value >= 0 ? ' ' : '') + arg.value + \" \";\n                        break;\n                    }\n                    else {\n                        // Fall through\n                    }\n                default:\n                    throw new Error(\"Unknown print arg: '\" + JSON.stringify(arg) + \"'\");\n            }\n        }\n        return line;\n    };\n    Runtime.prototype.inputLine = function (prompt) {\n        return __awaiter(this, void 0, void 0, function () {\n            var line;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!prompt) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.platform.print(prompt)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, this.platform.setCursorVisibility(true)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.platform.inputLine()];\n                    case 4:\n                        line = _a.sent();\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/, line];\n                }\n            });\n        });\n    };\n    Runtime.prototype.input = function (prompt) {\n        var resultTypes = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            resultTypes[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var results, line, tokens, tokenIdx, errorMessage, resultIdx, resultType, errorMessagePrefix, tokenValue, numericValue;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        results = [];\n                        return [4 /*yield*/, this.platform.print(prompt)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.inputLine('')];\n                    case 2:\n                        line = _a.sent();\n                        if (this.platform.shouldStopExecution) {\n                            return [2 /*return*/, results];\n                        }\n                        tokens = this.lexInput(line);\n                        tokenIdx = 0;\n                        errorMessage = null;\n                        for (resultIdx = 0; resultIdx < resultTypes.length; ++resultIdx) {\n                            resultType = resultTypes[resultIdx];\n                            errorMessagePrefix = \"Error parsing value \" + (resultIdx + 1) + \": \";\n                            // Consume comma token for result 1+.\n                            if (resultIdx > 0) {\n                                if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'COMMA') {\n                                    ++tokenIdx;\n                                }\n                                else {\n                                    errorMessage = errorMessagePrefix + \"Comma expected\";\n                                    break;\n                                }\n                            }\n                            // Consume value.\n                            if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'STRING') {\n                                tokenValue = tokens[tokenIdx].value;\n                                if (types_1.isString(resultType)) {\n                                    results.push(tokenValue);\n                                }\n                                else if (types_1.isNumeric(resultType)) {\n                                    numericValue = parseFloat(tokenValue);\n                                    if (isNaN(numericValue)) {\n                                        errorMessage = errorMessagePrefix + \"Invalid numeric value \\\"\" + tokenValue + \"\\\"\";\n                                        break;\n                                    }\n                                    else {\n                                        results.push(numericValue);\n                                    }\n                                }\n                                else {\n                                    throw new Error(\"Unexpected result type \" + resultType.type);\n                                }\n                                ++tokenIdx;\n                            }\n                            else {\n                                errorMessage = errorMessagePrefix + \"No value provided\";\n                                break;\n                            }\n                        }\n                        if (!(results.length === resultTypes.length)) return [3 /*break*/, 3];\n                        return [2 /*return*/, results];\n                    case 3:\n                        if (!(results.length < resultTypes.length)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.platform.print(\"\\n\" + (errorMessage ? errorMessage + \"\\n\" : '') + \"Redo from start\\n\")];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5: \n                    // This would indicate a logic error above - we should stop consuming from input once the\n                    // expected number of results has been reached.\n                    throw new Error(\"Too many results: expected \" + resultTypes.length + \", got \" + results.length);\n                    case 6: return [3 /*break*/, 0];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Runtime.prototype.lexInput = function (line) {\n        this.inputLexer.reset(line.trim());\n        var tokens = [];\n        for (;;) {\n            var token = this.inputLexer.next();\n            if (!token) {\n                break;\n            }\n            if (token.type !== 'WHITESPACE') {\n                tokens.push(token);\n            }\n        }\n        return tokens;\n    };\n    Runtime.prototype.setScreenMode = function (n) {\n        var screenMode = exports.SCREEN_MODE_CONFIGS.find(function (_a) {\n            var mode = _a.mode;\n            return mode === n;\n        });\n        if (!screenMode) {\n            throw new Error(\"Unsupported screen mode: \" + n);\n        }\n        this.currentScreenMode = n;\n    };\n    Object.defineProperty(Runtime.prototype, \"currentScreenModeConfig\", {\n        get: function () {\n            var _this = this;\n            return exports.SCREEN_MODE_CONFIGS.find(function (_a) {\n                var mode = _a.mode;\n                return mode === _this.currentScreenMode;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Runtime;\n}());\nexports.default = Runtime;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Keywords = void 0;\nvar moo_1 = __importDefault(require(\"moo\"));\n/** QBasic keywords.\n *\n * Note that the values must be lowercase!\n */\nvar Keywords;\n(function (Keywords) {\n    Keywords[\"AND\"] = \"and\";\n    Keywords[\"AS\"] = \"as\";\n    Keywords[\"CALL\"] = \"call\";\n    Keywords[\"CASE\"] = \"case\";\n    Keywords[\"COLOR\"] = \"color\";\n    Keywords[\"CONST\"] = \"const\";\n    Keywords[\"DATA\"] = \"data\";\n    Keywords[\"DECLARE\"] = \"declare\";\n    Keywords[\"DEF\"] = \"def\";\n    Keywords[\"DEFINT\"] = \"defint\";\n    Keywords[\"DEFSNG\"] = \"defsng\";\n    Keywords[\"DEFDBL\"] = \"defdbl\";\n    Keywords[\"DEFLNG\"] = \"deflng\";\n    Keywords[\"DEFSTR\"] = \"defstr\";\n    Keywords[\"DIM\"] = \"dim\";\n    Keywords[\"DO\"] = \"do\";\n    Keywords[\"DOUBLE\"] = \"double\";\n    Keywords[\"ELSE\"] = \"else\";\n    Keywords[\"ELSEIF\"] = \"elseif\";\n    Keywords[\"END\"] = \"end\";\n    Keywords[\"EXIT\"] = \"exit\";\n    Keywords[\"FUNCTION\"] = \"function\";\n    Keywords[\"FOR\"] = \"for\";\n    Keywords[\"GOSUB\"] = \"gosub\";\n    Keywords[\"GOTO\"] = \"goto\";\n    Keywords[\"IF\"] = \"if\";\n    Keywords[\"IS\"] = \"is\";\n    Keywords[\"INPUT\"] = \"input\";\n    Keywords[\"INTEGER\"] = \"integer\";\n    Keywords[\"LET\"] = \"let\";\n    Keywords[\"LINE\"] = \"line\";\n    Keywords[\"LOCATE\"] = \"locate\";\n    Keywords[\"LONG\"] = \"long\";\n    Keywords[\"LOOP\"] = \"loop\";\n    Keywords[\"MOD\"] = \"mod\";\n    Keywords[\"NEXT\"] = \"next\";\n    Keywords[\"NOT\"] = \"not\";\n    Keywords[\"OR\"] = \"or\";\n    Keywords[\"PRINT\"] = \"print\";\n    Keywords[\"READ\"] = \"read\";\n    Keywords[\"REM\"] = \"rem\";\n    Keywords[\"RESTORE\"] = \"restore\";\n    Keywords[\"RETURN\"] = \"return\";\n    Keywords[\"SEG\"] = \"seg\";\n    Keywords[\"SELECT\"] = \"select\";\n    Keywords[\"SHARED\"] = \"shared\";\n    Keywords[\"SINGLE\"] = \"single\";\n    Keywords[\"STATIC\"] = \"static\";\n    Keywords[\"STEP\"] = \"step\";\n    Keywords[\"STOP\"] = \"stop\";\n    Keywords[\"STRING\"] = \"string\";\n    Keywords[\"SUB\"] = \"sub\";\n    Keywords[\"SYSTEM\"] = \"system\";\n    Keywords[\"SWAP\"] = \"swap\";\n    Keywords[\"THEN\"] = \"then\";\n    Keywords[\"TO\"] = \"to\";\n    Keywords[\"TYPE\"] = \"type\";\n    Keywords[\"UNTIL\"] = \"until\";\n    Keywords[\"USING\"] = \"using\";\n    Keywords[\"VIEW\"] = \"view\";\n    Keywords[\"WEND\"] = \"wend\";\n    Keywords[\"WHILE\"] = \"while\";\n})(Keywords = exports.Keywords || (exports.Keywords = {}));\n/** moo lexer used internally by Lexer. */\nvar mooLexer = moo_1.default.states({\n    main: {\n        WHITESPACE: {\n            match: /\\s+/,\n            type: function (text) { return (text.includes('\\n') ? 'NEWLINE' : ''); },\n            lineBreaks: true,\n        },\n        COMMENT: {\n            match: /'/,\n            push: 'comment',\n        },\n        IDENTIFIER: {\n            match: /[a-zA-Z_][a-zA-Z0-9_]*(?:\\$|%|#|&|!)?/,\n            type: caseInsensitiveKeywords(Keywords),\n        },\n        STRING_LITERAL: {\n            match: /\"[^\"]*\"/,\n            value: function (text) { return text.substr(1, text.length - 2); },\n        },\n        NUMERIC_LITERAL: /(?:\\d*\\.\\d+|\\d+)/,\n        HEX_LITERAL: {\n            match: /&[hH][\\da-fA-F]+&?/,\n            type: function () { return 'NUMERIC_LITERAL'; },\n            value: function (text) { return \"\" + parseInt(text.substr(2), 16); },\n        },\n        OCT_LITERAL: {\n            match: /&[oO]?[0-7]+&?/,\n            type: function () { return 'NUMERIC_LITERAL'; },\n            value: function (text) { return \"\" + parseInt(text.match(/[0-7]+/)[0], 8); },\n        },\n        COLON: ':',\n        SEMICOLON: ';',\n        COMMA: ',',\n        DOT: '.',\n        LPAREN: '(',\n        RPAREN: ')',\n        ADD: '+',\n        SUB: '-',\n        MUL: '*',\n        EXP: '^',\n        DIV: '/',\n        INTDIV: '\\\\',\n        // Note: order matters in the comparison operators!\n        EQ: '=',\n        NE: '<>',\n        GTE: '>=',\n        LTE: '<=',\n        GT: '>',\n        LT: '<',\n    },\n    comment: {\n        COMMENT: {\n            match: /[^\\n]+/,\n            pop: 1,\n        },\n        NEWLINE: {\n            match: /\\n/,\n            pop: 1,\n            lineBreaks: true,\n        },\n    },\n}, 'main');\nvar TOKEN_TYPES_TO_DISCARD = ['WHITESPACE', 'COMMENT', 'REM'];\n/** Lexer for QBasic.\n *\n * This class wraps the moo lexer with some additional capabilities:\n *\n *   - Discard irrelevant tokens, based on https://github.com/no-context/moo/issues/81.\n *   - Set isFirstTokenOnLine flag on tokens to help disambiguate labels from statements.\n *   - Support lookahead with peek().\n *   - Store the last token for debugging output.\n */\nvar Lexer = /** @class */ (function () {\n    function Lexer(mooLexer) {\n        this.mooLexer = mooLexer;\n        this.lastToken = undefined;\n        this.isNextTokenFirstOnLine = true;\n        this.tokenQueue = [];\n    }\n    Lexer.prototype.next = function () {\n        if (this.tokenQueue.length > 0) {\n            return this.tokenQueue.pop();\n        }\n        var token;\n        do {\n            token = this.mooLexer.next();\n            if (token) {\n                this.lastToken = token;\n                token.isFirstTokenOnLine = this.isNextTokenFirstOnLine;\n                if (token.type === 'NEWLINE') {\n                    this.isNextTokenFirstOnLine = true;\n                }\n                else {\n                    this.isNextTokenFirstOnLine = false;\n                }\n                if (token.type === 'REM') {\n                    this.mooLexer.pushState('comment');\n                }\n            }\n        } while (token &&\n            token.type &&\n            TOKEN_TYPES_TO_DISCARD.includes(token.type));\n        return token;\n    };\n    Lexer.prototype.peek = function () {\n        var token = this.next();\n        this.tokenQueue.push(token);\n        return token;\n    };\n    Lexer.prototype.save = function () {\n        return this.mooLexer.save();\n    };\n    Lexer.prototype.reset = function (chunk, state) {\n        this.mooLexer.reset(chunk, state);\n        this.isNextTokenFirstOnLine = true;\n        this.lastToken = undefined;\n        this.tokenQueue = [];\n        return this;\n    };\n    Lexer.prototype.formatError = function (token, message) {\n        return this.mooLexer.formatError(token, message);\n    };\n    Lexer.prototype.has = function (tokenType) {\n        return this.mooLexer.has(tokenType);\n    };\n    return Lexer;\n}());\n// Based on https://github.com/no-context/moo/pull/85#issue-178701835\nfunction caseInsensitiveKeywords(map) {\n    var keywordsTransformFn = moo_1.default.keywords(map);\n    return function (text) { return keywordsTransformFn(text.toLowerCase()); };\n}\nvar lexer = new Lexer(mooLexer);\nexports.default = lexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupBuiltin = exports.BUILTIN_SUBS = exports.BUILTIN_FNS = void 0;\nvar singlebyte_1 = __importDefault(require(\"singlebyte\"));\nvar round_half_to_even_1 = __importDefault(require(\"../lib/round-half-to-even\"));\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\n/** Built-in functions. */\nexports.BUILTIN_FNS = __spreadArray(__spreadArray([\n    {\n        name: 'abs',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.abs(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'asc',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (s.length === 0) {\n                        throw new Error('Expected non-empty string in ASC()');\n                    }\n                    // We could use iconv-lite here instead:\n                    // return iconv.encode(s[0], 'cp437')[0];\n                    return [2 /*return*/, singlebyte_1.default.strToBuf(s[0], 'cp437')[0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'atn',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.atan(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'chr$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    // We could use iconv-lite here instead:\n                    // return iconv.decode(Buffer.from([n]), 'cp437');\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437')];\n                });\n            });\n        },\n    },\n    {\n        name: 'cdbl',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n];\n                });\n            });\n        },\n    },\n    {\n        name: 'cint',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'clng',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'cos',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.cos(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'csng',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.singleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n];\n                });\n            });\n        },\n    },\n    {\n        name: 'csrlin',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (_a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1: return [2 /*return*/, (_b.sent()).y + 1];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'date$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    return [2 /*return*/, [now.getMonth() + 1, now.getDate(), now.getFullYear()]\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\n                            .join('-')];\n                });\n            });\n        },\n    },\n    {\n        name: 'exp',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.exp(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'fix',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sign(n) * Math.floor(Math.abs(n))];\n                });\n            });\n        },\n    },\n    {\n        name: 'hex$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n.toString(16).toUpperCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'inkey$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (_a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var c;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getChar()];\n                        case 1:\n                            c = _b.sent();\n                            return [2 /*return*/, c !== null && c !== void 0 ? c : ''];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'input$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var result, c;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            result = [];\n                            _b.label = 1;\n                        case 1:\n                            if (!(result.length < n && !platform.shouldStopExecution)) return [3 /*break*/, 3];\n                            return [4 /*yield*/, platform.getChar()];\n                        case 2:\n                            c = _b.sent();\n                            if (c) {\n                                result.push(c);\n                            }\n                            return [3 /*break*/, 1];\n                        case 3: return [2 /*return*/, result.join('')];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'instr',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (haystack, needle) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, haystack.indexOf(needle) + 1];\n                });\n            });\n        },\n    },\n    {\n        name: 'instr',\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.integerSpec(),\n        run: function (start, haystack, needle) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, haystack.indexOf(needle, start - 1) + 1];\n                });\n            });\n        },\n    },\n    {\n        name: 'int',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.floor(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'lbound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'lbound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array, dimensionIdx) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (dimensionIdx < 1 ||\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\n                        throw new Error(\"Invalid dimension index: \" + dimensionIdx);\n                    }\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'lcase$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.toLowerCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'left$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(0, n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'len',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.length];\n                });\n            });\n        },\n    },\n    {\n        name: 'log',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.log(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'ltrim$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.trimStart()];\n                });\n            });\n        },\n    },\n    {\n        name: 'mid$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, startIdx, length) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(startIdx - 1, length)];\n                });\n            });\n        },\n    },\n    {\n        name: 'oct$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n.toString(8)];\n                });\n            });\n        },\n    },\n    {\n        name: 'peek',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    // STUB\n                    return [2 /*return*/, 0];\n                });\n            });\n        },\n    },\n    {\n        name: 'pos',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (_, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1: return [2 /*return*/, (_b.sent()).x + 1];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'right$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(Math.max(0, s.length - n))];\n                });\n            });\n        },\n    }\n], overload({\n    name: 'rnd',\n    returnTypeSpec: types_1.doubleSpec(),\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, Math.random()];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), [\n    {\n        name: 'rtrim$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, _a) {\n            var args = _a.args;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    return [2 /*return*/, s.trimEnd()];\n                });\n            });\n        },\n    },\n    {\n        name: 'sgn',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sign(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'sin',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sin(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'spc',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, ' '.repeat(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'space$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, ' '.repeat(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'sqr',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sqrt(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'str$',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, \"\" + (n >= 0 ? ' ' : '') + n];\n                });\n            });\n        },\n    },\n    {\n        name: 'string$',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (m, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437').repeat(m)];\n                });\n            });\n        },\n    },\n    {\n        name: 'string$',\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (m, s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (s.length === 0) {\n                        throw new Error(\"Empty string argument to STRING$\");\n                    }\n                    return [2 /*return*/, s[0].repeat(m)];\n                });\n            });\n        },\n    },\n    {\n        name: 'tab',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (col, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var _b, x, y, cols;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1:\n                            _b = _c.sent(), x = _b.x, y = _b.y;\n                            return [4 /*yield*/, platform.getScreenSize()];\n                        case 2:\n                            cols = (_c.sent()).cols;\n                            col = (Math.max(1, col) - 1) % cols;\n                            return [4 /*yield*/, platform.moveCursorTo(col, x <= col ? y : y + 1)];\n                        case 3:\n                            _c.sent();\n                            return [2 /*return*/, ''];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'tan',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.tan(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'time$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    return [2 /*return*/, [now.getHours(), now.getMinutes(), now.getSeconds()]\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\n                            .join(':')];\n                });\n            });\n        },\n    },\n    {\n        name: 'timer',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.longSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now, midnight, result;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    midnight = new Date(now);\n                    midnight.setHours(0, 0, 0, 0);\n                    result = (now.getTime() - midnight.getTime()) / 1000;\n                    return [2 /*return*/, result];\n                });\n            });\n        },\n    },\n    {\n        name: 'ubound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][1]];\n                });\n            });\n        },\n    },\n    {\n        name: 'ubound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array, dimensionIdx) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (dimensionIdx < 1 ||\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\n                        throw new Error(\"Invalid dimension index: \" + dimensionIdx);\n                    }\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][1]];\n                });\n            });\n        },\n    },\n    {\n        name: 'ucase$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.toUpperCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'val',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                var v;\n                return __generator(this, function (_a) {\n                    v = parseFloat(s);\n                    return [2 /*return*/, isNaN(v) ? 0 : v];\n                });\n            });\n        },\n    },\n]);\n/** Simple statements implemented as built-in subs. */\nexports.BUILTIN_SUBS = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([\n    {\n        name: 'beep',\n        paramTypeSpecs: [],\n        run: function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return __awaiter(this, void 0, void 0, function () {\n                var platform;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            platform = args.pop().platform;\n                            return [4 /*yield*/, platform.beep()];\n                        case 1:\n                            _a.sent();\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        },\n    }\n], overload({\n    name: 'cls',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        return [4 /*yield*/, platform.clearScreen()];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'color',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, platform, runtime, getColorName, fg, bg;\n            return __generator(this, function (_b) {\n                _a = args.pop(), platform = _a.platform, runtime = _a.runtime;\n                getColorName = function (n) {\n                    if (n < 0 || n >= runtime.currentScreenModeConfig.colorMap.length) {\n                        throw new Error(\"Invalid color: \" + n);\n                    }\n                    return runtime.currentScreenModeConfig.colorMap[n];\n                };\n                fg = args[0], bg = args[1];\n                if (Number.isFinite(fg)) {\n                    platform.setFgColor(getColorName(fg));\n                }\n                if (Number.isFinite(bg)) {\n                    platform.setBgColor(getColorName(bg));\n                }\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), overload({\n    name: '__def_seg',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'locate',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform, row, col, cursor, origPos, newX, newY;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        row = args[0], col = args[1], cursor = args[2];\n                        if (!(Number.isFinite(row) && Number.isFinite(col))) return [3 /*break*/, 2];\n                        return [4 /*yield*/, platform.moveCursorTo(col - 1, row - 1)];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 2:\n                        if (!(Number.isFinite(row) || Number.isFinite(col))) return [3 /*break*/, 5];\n                        return [4 /*yield*/, platform.getCursorPosition()];\n                    case 3:\n                        origPos = _a.sent();\n                        newX = Number.isFinite(col) ? col - 1 : origPos.x;\n                        newY = Number.isFinite(row) ? row - 1 : origPos.y;\n                        if (!(newX !== origPos.x || newY !== origPos.y)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, platform.moveCursorTo(newX, newY)];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5:\n                        if (!Number.isFinite(cursor)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, platform.setCursorVisibility(!!cursor)];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), [\n    {\n        name: 'play',\n        paramTypeSpecs: [types_1.stringSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    },\n    {\n        name: 'poke',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    }\n]), overload({\n    name: 'randomize',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'screen',\n    run: function (mode) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var runtime;\n            return __generator(this, function (_a) {\n                runtime = args.pop().runtime;\n                runtime.setScreenMode(mode);\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), overload({\n    name: 'sleep',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform, numSeconds, startTimeMs, nowMs, c;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        numSeconds = args.length > 0 ? args[0] : 0;\n                        startTimeMs = new Date().getTime();\n                        _a.label = 1;\n                    case 1: return [4 /*yield*/, platform.getChar()];\n                    case 2:\n                        c = _a.sent();\n                        nowMs = new Date().getTime();\n                        _a.label = 3;\n                    case 3:\n                        if (c === null &&\n                            (numSeconds <= 0 || nowMs - startTimeMs < numSeconds * 1000) &&\n                            !platform.shouldStopExecution) return [3 /*break*/, 1];\n                        _a.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: '__view_print',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec(), types_1.longSpec()]])), [\n    {\n        name: 'width',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    },\n]);\n/** Helper function to generate multiple signatures that map to the same built-in proc. */\nfunction overload(proc, paramTypeSpecsList) {\n    return paramTypeSpecsList.map(function (paramTypeSpecs) {\n        return (__assign(__assign({}, proc), { paramTypeSpecs: paramTypeSpecs }));\n    });\n}\nfunction lookupBuiltin(procs, name, argTypeSpecs, _a) {\n    var _b = _a === void 0 ? {} : _a, shouldReturnIfArgTypeMismatch = _b.shouldReturnIfArgTypeMismatch;\n    var builtinFnsMatchingName = symbol_table_1.lookupSymbols(procs, name);\n    var builtinFn = builtinFnsMatchingName.find(function (_a) {\n        var paramTypeSpecs = _a.paramTypeSpecs;\n        return paramTypeSpecs.length === argTypeSpecs.length &&\n            paramTypeSpecs.every(function (paramTypeSpec, i) {\n                return types_1.areMatchingElementaryTypes(paramTypeSpec, argTypeSpecs[i]) ||\n                    (types_1.isArray(paramTypeSpec) && types_1.isArray(argTypeSpecs[i]));\n            });\n    });\n    return (builtinFn !== null && builtinFn !== void 0 ? builtinFn : (shouldReturnIfArgTypeMismatch && builtinFnsMatchingName.length > 0\n        ? builtinFnsMatchingName[0]\n        : null));\n}\nexports.lookupBuiltin = lookupBuiltin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Round a number to integer using BASIC's round-half-to-even rule. */\nfunction roundHalfToEven(n) {\n    if (n - Math.floor(n) === 0.5) {\n        return Math.round(n / 2) * 2;\n    }\n    else {\n        return Math.round(n);\n    }\n}\nexports.default = roundHalfToEven;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExecutionError = void 0;\nvar data_item_1 = require(\"../lib/data-item\");\nvar error_with_loc_1 = __importDefault(require(\"../lib/error-with-loc\"));\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar compiled_code_1 = require(\"./compiled-code\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\nvar runtime_1 = __importDefault(require(\"./runtime\"));\nvar ExecutionError = /** @class */ (function (_super) {\n    __extends(ExecutionError, _super);\n    function ExecutionError(message, _a) {\n        var _b = _a === void 0 ? {} : _a, module = _b.module, stmt = _b.stmt;\n        return _super.call(this, message, {\n            sourceFileName: module === null || module === void 0 ? void 0 : module.sourceFileName,\n            loc: (stmt === null || stmt === void 0 ? void 0 : stmt.loc) ? { line: stmt.loc[0], col: stmt.loc[1] } : undefined,\n        }) || this;\n    }\n    return ExecutionError;\n}(error_with_loc_1.default));\nexports.ExecutionError = ExecutionError;\n/** Exception thrown to signal program termination via END. */\nvar EndDirective = /** @class */ (function (_super) {\n    __extends(EndDirective, _super);\n    function EndDirective() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isEndDirective = true;\n        return _this;\n    }\n    return EndDirective;\n}(Error));\n/** Manages the execution of a compiled program. */\nvar Executor = /** @class */ (function () {\n    function Executor(platform, _a) {\n        var _b = _a === void 0 ? {} : _a, stmtExecutionDelayUs = _b.stmtExecutionDelayUs;\n        this.platform = platform;\n        /** Current module being executed. */\n        this.currentModule = null;\n        /** Static vars, indexed by proc name. */\n        this.localStaticVarsMap = {};\n        /** Label index map for module-level statements. */\n        this.moduleLabelIndexMap = {};\n        /** Label index map for procs. */\n        this.procLabelIndexMap = {};\n        /** Cursor for READ. */\n        this.dataCursor = {\n            stmtIdx: 0,\n            itemIdx: 0,\n        };\n        this.stmtExecutionDelayUs =\n            stmtExecutionDelayUs !== null && stmtExecutionDelayUs !== void 0 ? stmtExecutionDelayUs : platform.defaultStmtExecutionDelayUs;\n    }\n    /** Executes a compiled module. */\n    Executor.prototype.executeModule = function (moduleOrCode) {\n        return __awaiter(this, void 0, void 0, function () {\n            var module, _a, ctx, e_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(typeof moduleOrCode === 'string')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.platform.loadCompiledModule(moduleOrCode)];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = moduleOrCode;\n                        _b.label = 3;\n                    case 3:\n                        module = _a;\n                        this.currentModule = module;\n                        this.buildLabelIndexMaps();\n                        this.localStaticVarsMap = {};\n                        this.restore();\n                        this.platform.shouldStopExecution = false;\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\n                    case 4:\n                        _b.sent();\n                        ctx = {\n                            runtime: new runtime_1.default(this.platform),\n                            executeProc: this.executeProc.bind(this),\n                            read: this.read.bind(this),\n                            restore: this.restore.bind(this),\n                            args: {},\n                            localVars: this.initVars(module.localSymbols, [\n                                symbol_table_1.VarType.VAR,\n                                symbol_table_1.VarType.CONST,\n                            ]),\n                            localStaticVars: {},\n                            globalVars: this.initVars(module.globalSymbols, [\n                                symbol_table_1.VarType.VAR,\n                                symbol_table_1.VarType.CONST,\n                            ]),\n                            tempVars: {},\n                        };\n                        _b.label = 5;\n                    case 5:\n                        _b.trys.push([5, 7, 8, 10]);\n                        return [4 /*yield*/, this.executeStmts(ctx, module.stmts, this.moduleLabelIndexMap)];\n                    case 6:\n                        _b.sent();\n                        return [3 /*break*/, 10];\n                    case 7:\n                        e_1 = _b.sent();\n                        if (e_1.isEndDirective) {\n                            // Swallow error\n                        }\n                        else {\n                            throw e_1;\n                        }\n                        return [3 /*break*/, 10];\n                    case 8:\n                        this.currentModule = null;\n                        this.moduleLabelIndexMap = {};\n                        this.procLabelIndexMap = {};\n                        this.localStaticVarsMap = {};\n                        this.restore();\n                        this.platform.shouldStopExecution = false;\n                        return [4 /*yield*/, this.platform.setCursorVisibility(true)];\n                    case 9:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Sets flag to stop execution. */\n    Executor.prototype.stopExecution = function () {\n        this.platform.shouldStopExecution = true;\n    };\n    Executor.prototype.executeProc = function (prevCtx, name) {\n        var argPtrs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            argPtrs[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var proc, args, i, ctx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        proc = symbol_table_1.lookupSymbol(this.currentModule.procs, name);\n                        if (!proc) {\n                            throw new Error(\"Procedure not found: \\\"\" + name + \"\\\"\");\n                        }\n                        // Init args.\n                        if (argPtrs.length !== proc.paramSymbols.length) {\n                            throw new Error('Incorrect number of arguments to ' +\n                                (types_1.procTypeName(proc.type) + \" \\\"\" + proc.name + \"\\\": \") +\n                                (\"expected \" + proc.paramSymbols.length + \", got \" + argPtrs.length));\n                        }\n                        args = {};\n                        for (i = 0; i < argPtrs.length; ++i) {\n                            args[proc.paramSymbols[i].name] = argPtrs[i];\n                        }\n                        // Init static vars.\n                        if (!this.localStaticVarsMap[proc.name]) {\n                            this.localStaticVarsMap[proc.name] = this.initVars(proc.localSymbols, [\n                                symbol_table_1.VarType.STATIC_VAR,\n                            ]);\n                        }\n                        ctx = __assign(__assign({}, prevCtx), { args: args, localVars: this.initVars(proc.localSymbols, [symbol_table_1.VarType.VAR, symbol_table_1.VarType.CONST]), localStaticVars: this.localStaticVarsMap[proc.name], tempVars: {} });\n                        if (!this.procLabelIndexMap[proc.name]) {\n                            throw new Error(\"Label index map not found for \\\"\" + proc.name + \"\\\"\");\n                        }\n                        return [4 /*yield*/, this.executeStmts(ctx, proc.stmts, this.procLabelIndexMap[proc.name])];\n                    case 1:\n                        _a.sent();\n                        // Return value.\n                        if (types_1.isFnOrDefFn(proc.type)) {\n                            return [2 /*return*/, ctx.localVars[proc.name]];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Executor.prototype.initVars = function (varSymbolTable, includeVarTypes) {\n        var container = {};\n        for (var _i = 0, varSymbolTable_1 = varSymbolTable; _i < varSymbolTable_1.length; _i++) {\n            var symbol = varSymbolTable_1[_i];\n            if (!includeVarTypes.includes(symbol.varType)) {\n                continue;\n            }\n            container[symbol.name] = init_value_1.default(symbol.typeSpec);\n        }\n        return container;\n    };\n    Executor.prototype.executeStmts = function (ctx, stmts, labelIndexMap) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gosubStates, stmtIdx, _loop_1, this_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        gosubStates = [];\n                        stmtIdx = 0;\n                        _loop_1 = function () {\n                            var stmt, errorArgs, directive, e_2, gotoLabel, gosubState;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        if (this_1.platform.shouldStopExecution) {\n                                            this_1.platform.shouldStopExecution = false;\n                                            throw new EndDirective();\n                                        }\n                                        stmt = stmts[stmtIdx];\n                                        errorArgs = { module: this_1.currentModule, stmt: stmt };\n                                        if (!(this_1.stmtExecutionDelayUs > 0)) return [3 /*break*/, 2];\n                                        return [4 /*yield*/, this_1.platform.delay(this_1.stmtExecutionDelayUs)];\n                                    case 1:\n                                        _b.sent();\n                                        _b.label = 2;\n                                    case 2:\n                                        directive = void 0;\n                                        if (!('run' in stmt)) return [3 /*break*/, 6];\n                                        _b.label = 3;\n                                    case 3:\n                                        _b.trys.push([3, 5, , 6]);\n                                        return [4 /*yield*/, stmt.run(ctx)];\n                                    case 4:\n                                        directive = _b.sent();\n                                        return [3 /*break*/, 6];\n                                    case 5:\n                                        e_2 = _b.sent();\n                                        if (e_2.isEndDirective) {\n                                            throw e_2;\n                                        }\n                                        else {\n                                            throw new ExecutionError(e_2.message, errorArgs);\n                                        }\n                                        return [3 /*break*/, 6];\n                                    case 6:\n                                        if (!directive) {\n                                            ++stmtIdx;\n                                            return [2 /*return*/, \"continue\"];\n                                        }\n                                        gotoLabel = function (label) {\n                                            stmtIdx = labelIndexMap[label];\n                                            if (stmtIdx === undefined) {\n                                                throw new ExecutionError(\"Label not found: \\\"\" + label + \"\\\"\", errorArgs);\n                                            }\n                                        };\n                                        switch (directive.type) {\n                                            case compiled_code_1.ExecutionDirectiveType.GOSUB:\n                                                gosubStates.push({\n                                                    nextStmtIdx: stmtIdx + 1,\n                                                });\n                                                gotoLabel(directive.destLabel);\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.GOTO:\n                                                gotoLabel(directive.destLabel);\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.RETURN:\n                                                if (gosubStates.length === 0) {\n                                                    throw new ExecutionError(\"RETURN without prior GOSUB\", errorArgs);\n                                                }\n                                                gosubState = gosubStates.pop();\n                                                if (directive.destLabel) {\n                                                    gotoLabel(directive.destLabel);\n                                                }\n                                                else {\n                                                    stmtIdx = gosubState.nextStmtIdx;\n                                                }\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.END:\n                                                throw new EndDirective();\n                                            case compiled_code_1.ExecutionDirectiveType.EXIT_PROC:\n                                                stmtIdx = stmts.length;\n                                                break;\n                                            default:\n                                                throw new ExecutionError(\"Unrecognized execution directive: \" + JSON.stringify(directive), errorArgs);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _a.label = 1;\n                    case 1:\n                        if (!(stmtIdx < stmts.length)) return [3 /*break*/, 3];\n                        return [5 /*yield**/, _loop_1()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 1];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Executor.prototype.read = function () {\n        var resultTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resultTypes[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var results, i, dataItem;\n            return __generator(this, function (_a) {\n                results = [];\n                for (i = 0; i < resultTypes.length; ++i) {\n                    dataItem = this.getNextDataItem();\n                    if (!dataItem) {\n                        throw new Error(\"Data exhausted at item \" + (i + 1));\n                    }\n                    try {\n                        results.push(data_item_1.getDataItem(dataItem, resultTypes[i]));\n                    }\n                    catch (e) {\n                        e.message = \"Error reading item \" + (i + 1) + \": \" + e.message;\n                        throw e;\n                    }\n                }\n                return [2 /*return*/, results];\n            });\n        });\n    };\n    Executor.prototype.getNextDataItem = function () {\n        var stmts = this.currentModule.stmts;\n        for (;;) {\n            if (this.dataCursor.stmtIdx >= stmts.length) {\n                return null;\n            }\n            var stmt = stmts[this.dataCursor.stmtIdx];\n            if (!('data' in stmt)) {\n                ++this.dataCursor.stmtIdx;\n                continue;\n            }\n            if (this.dataCursor.itemIdx >= stmt.data.length) {\n                ++this.dataCursor.stmtIdx;\n                this.dataCursor.itemIdx = 0;\n                continue;\n            }\n            return stmt.data[this.dataCursor.itemIdx++];\n        }\n    };\n    Executor.prototype.restore = function (destLabel) {\n        return __awaiter(this, void 0, void 0, function () {\n            var stmtIdx;\n            var _a, _b;\n            return __generator(this, function (_c) {\n                if (destLabel) {\n                    stmtIdx = this.moduleLabelIndexMap[destLabel];\n                    if (stmtIdx === undefined) {\n                        throw new Error(\"Label not found: \\\"\" + destLabel + \"\\\"\");\n                    }\n                    _a = [stmtIdx, 0], this.dataCursor.stmtIdx = _a[0], this.dataCursor.itemIdx = _a[1];\n                }\n                else {\n                    _b = [0, 0], this.dataCursor.stmtIdx = _b[0], this.dataCursor.itemIdx = _b[1];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    Executor.prototype.buildLabelIndexMaps = function () {\n        this.moduleLabelIndexMap = this.buildLabelIndexMap(this.currentModule.stmts);\n        for (var _i = 0, _a = this.currentModule.procs; _i < _a.length; _i++) {\n            var _b = _a[_i], name_1 = _b.name, stmts = _b.stmts;\n            this.procLabelIndexMap[name_1] = this.buildLabelIndexMap(stmts);\n        }\n    };\n    Executor.prototype.buildLabelIndexMap = function (stmts) {\n        var _this = this;\n        var labelIndexMap = {};\n        stmts.forEach(function (stmt, idx) {\n            if ('label' in stmt) {\n                if (stmt.label in labelIndexMap) {\n                    throw new ExecutionError(\"Duplicate label \\\"\" + stmt.label + \"\\\"\", {\n                        module: _this.currentModule,\n                        stmt: stmt,\n                    });\n                }\n                labelIndexMap[stmt.label] = idx;\n            }\n        });\n        return labelIndexMap;\n    };\n    return Executor;\n}());\nexports.default = Executor;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\n/** Runtime representation for QBasic arrays. */\nvar QbArray = /** @class */ (function () {\n    function QbArray(arrayTypeSpec) {\n        /** The underlying array storing the actual elements. */\n        this._values = [];\n        this.init(arrayTypeSpec.elementTypeSpec, arrayTypeSpec.dimensionSpecs);\n    }\n    /** Initializes the array with the provided spec, discarding any previous contents. */\n    QbArray.prototype.init = function (elementTypeSpec, dimensionSpecs) {\n        if (dimensionSpecs.length === 0) {\n            throw new Error('No dimension specs provided');\n        }\n        this._typeSpec = types_1.arraySpec(elementTypeSpec, dimensionSpecs);\n        this._values.length = 0;\n        var currentDimensionArrays = [this._values];\n        for (var i = 0; i < dimensionSpecs.length; ++i) {\n            var _a = dimensionSpecs[i], minIdx = _a[0], maxIdx = _a[1];\n            var numElements = maxIdx - minIdx + 1;\n            var nextDimensionArrays = [];\n            for (var _i = 0, currentDimensionArrays_1 = currentDimensionArrays; _i < currentDimensionArrays_1.length; _i++) {\n                var dimensionArray = currentDimensionArrays_1[_i];\n                if (i === dimensionSpecs.length - 1) {\n                    for (var j = 0; j < numElements; ++j) {\n                        dimensionArray.push(init_value_1.default(elementTypeSpec));\n                    }\n                }\n                else {\n                    for (var j = 0; j < numElements; ++j) {\n                        var nextDimensionArray = new Array();\n                        nextDimensionArrays.push(nextDimensionArray);\n                        dimensionArray.push(nextDimensionArray);\n                    }\n                }\n            }\n            currentDimensionArrays = nextDimensionArrays;\n        }\n    };\n    /** Translates a QBasic index into the index in the underlying array. */\n    QbArray.prototype.getIdx = function (dimensionIdx, qbIdx) {\n        var dimensionSpecs = this._typeSpec.dimensionSpecs;\n        if (!Number.isFinite(dimensionIdx) ||\n            dimensionIdx < 0 ||\n            dimensionIdx >= dimensionSpecs.length) {\n            throw new Error('Invalid dimension in getIndex: ' +\n                (\"expected number between 0 and \" + (dimensionSpecs.length - 1) + \", \") +\n                (\"got \" + dimensionIdx));\n        }\n        var _a = dimensionSpecs[dimensionIdx], minIdx = _a[0], maxIdx = _a[1];\n        if (!Number.isFinite(qbIdx) || qbIdx < minIdx || qbIdx > maxIdx) {\n            throw new Error(\"Index out of range for dimension \" + (dimensionIdx + 1) + \": \" +\n                (\"expected number between \" + minIdx + \" and \" + maxIdx + \", \") +\n                (\"got \" + qbIdx));\n        }\n        return qbIdx - minIdx;\n    };\n    Object.defineProperty(QbArray.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(QbArray.prototype, \"typeSpec\", {\n        get: function () {\n            return this._typeSpec;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return QbArray;\n}());\nexports.default = QbArray;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\n/** Runtime representation for QBasic user-defined types. */\nvar QbUdt = /** @class */ (function () {\n    function QbUdt(udtTypeSpec) {\n        /** The underlying array storing the actual elements. */\n        this._values = {};\n        this._typeSpec = __assign({}, udtTypeSpec);\n        this.init();\n    }\n    QbUdt.prototype.init = function () {\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\n            var fieldSpec = _a[_i];\n            this._values[fieldSpec.name] = init_value_1.default(fieldSpec.typeSpec);\n        }\n    };\n    QbUdt.prototype.clone = function () {\n        var newQbUdt = new QbUdt(this._typeSpec);\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\n            var fieldSpec = _a[_i];\n            var value = this._values[fieldSpec.name];\n            newQbUdt._values[fieldSpec.name] = types_1.isUdt(fieldSpec.typeSpec)\n                ? value.clone()\n                : value;\n        }\n        return newQbUdt;\n    };\n    Object.defineProperty(QbUdt.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(QbUdt.prototype, \"typeSpec\", {\n        get: function () {\n            return this._typeSpec;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return QbUdt;\n}());\nexports.default = QbUdt;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserExecutor = exports.BrowserPlatform = void 0;\nvar ansi_escapes_1 = __importDefault(require(\"ansi-escapes\"));\nvar ansi_terminal_platform_1 = __importDefault(require(\"./ansi-terminal-platform\"));\nvar executor_1 = __importDefault(require(\"./executor\"));\n/** RuntimePlatform for the browser environment based on xterm.js. */\nvar BrowserPlatform = /** @class */ (function (_super) {\n    __extends(BrowserPlatform, _super);\n    function BrowserPlatform(terminal) {\n        var _this = _super.call(this) || this;\n        _this.terminal = terminal;\n        // When running in the browser, delay is implemented as a busy loop as\n        // setImmediate will block input processing. So disabling delay by default.\n        _this.defaultStmtExecutionDelayUs = 0;\n        return _this;\n    }\n    BrowserPlatform.prototype.loadCompiledModule = function (code) {\n        return __awaiter(this, void 0, void 0, function () {\n            var match, fn, moduleObj;\n            return __generator(this, function (_a) {\n                match = code.match(/^(?:#![^\\n]+\\n)?([\\s\\S]+)$/);\n                if (!match) {\n                    throw new Error(\"Empty code string\");\n                }\n                fn = new Function('module', match[1]);\n                moduleObj = { exports: {} };\n                fn(moduleObj);\n                return [2 /*return*/, moduleObj.exports];\n            });\n        });\n    };\n    BrowserPlatform.prototype.delay = function (delayInUs) {\n        return __awaiter(this, void 0, void 0, function () {\n            var t0;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(typeof window === 'undefined' ||\n                            typeof window.performance === 'undefined')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, new Promise(function (resolve) {\n                                return setTimeout(resolve, Math.round(delayInUs / 1000));\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        t0 = performance.now();\n                        while ((performance.now() - t0) * 1000 < delayInUs) { }\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserPlatform.prototype.print = function (s) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.terminal.write(s);\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserPlatform.prototype.inputLine = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var text, cursorIdx, initialX, cols, disposeFns;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        text = [];\n                        cursorIdx = 0;\n                        return [4 /*yield*/, this.getCursorPosition()];\n                    case 1:\n                        initialX = (_a.sent()).x;\n                        return [4 /*yield*/, this.getScreenSize()];\n                    case 2:\n                        cols = (_a.sent()).cols;\n                        disposeFns = [];\n                        return [4 /*yield*/, new Promise(function (resolve) {\n                                var removeOnDataListenerFn = _this.terminal.onData(function (chunk) { return __awaiter(_this, void 0, void 0, function () {\n                                    return __generator(this, function (_a) {\n                                        switch (chunk) {\n                                            case '\\r':\n                                                this.print('\\n');\n                                                resolve();\n                                                break;\n                                            case '\\x7f': // backspace\n                                                if (text.length > 0 && cursorIdx > 0) {\n                                                    text.splice(--cursorIdx, 1);\n                                                    this.print(ansi_escapes_1.default.cursorBackward());\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(ansi_escapes_1.default.eraseEndLine);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                break;\n                                            case '\\x1b[3~': // delete\n                                                if (cursorIdx < text.length) {\n                                                    text.splice(cursorIdx, 1);\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(ansi_escapes_1.default.eraseEndLine);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                break;\n                                            case '\\x1b[C': // right\n                                                if (cursorIdx < text.length) {\n                                                    ++cursorIdx;\n                                                    this.print(chunk);\n                                                }\n                                                break;\n                                            case '\\x1b[D': // left\n                                                if (cursorIdx > 0) {\n                                                    --cursorIdx;\n                                                    this.print(chunk);\n                                                }\n                                                break;\n                                            case '\\x1b[F': // end\n                                                if (cursorIdx < text.length) {\n                                                    this.print(ansi_escapes_1.default.cursorForward(text.length - cursorIdx));\n                                                    cursorIdx = text.length;\n                                                }\n                                                break;\n                                            case '\\x1b[H': // home\n                                                if (cursorIdx > 0) {\n                                                    this.print(ansi_escapes_1.default.cursorBackward(cursorIdx));\n                                                    cursorIdx = 0;\n                                                }\n                                                break;\n                                            default:\n                                                // TODO: Support multi-line line editing.\n                                                if (chunk.match(/^[\\x20-\\x7e]$/) &&\n                                                    initialX + text.length < cols - 2) {\n                                                    // Printable ASCII\n                                                    text.splice(cursorIdx++, 0, chunk);\n                                                    this.print(chunk);\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                else {\n                                                    console.log(chunk\n                                                        .split('')\n                                                        .map(function (c) { return c.charCodeAt(0); })\n                                                        .join(', '));\n                                                }\n                                                break;\n                                        }\n                                        return [2 /*return*/];\n                                    });\n                                }); }).dispose;\n                                disposeFns.push(removeOnDataListenerFn);\n                                var checkShouldStopExecutionIntervalId = setInterval(function () {\n                                    if (_this.shouldStopExecution) {\n                                        resolve();\n                                    }\n                                }, 20);\n                                disposeFns.push(function () { return clearInterval(checkShouldStopExecutionIntervalId); });\n                            })];\n                    case 3:\n                        _a.sent();\n                        disposeFns.forEach(function (fn) { return fn(); });\n                        return [2 /*return*/, text.join('')];\n                }\n            });\n        });\n    };\n    BrowserPlatform.prototype.getChar = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, dispose;\n            var _this = this;\n            return __generator(this, function (_a) {\n                result = null;\n                dispose = this.terminal.onData(function (chunk) {\n                    result = _this.translateKeyCode(chunk.toString());\n                }).dispose;\n                return [2 /*return*/, new Promise(function (resolve) {\n                        setTimeout(function () {\n                            dispose();\n                            resolve(result);\n                        }, 20);\n                    })];\n            });\n        });\n    };\n    BrowserPlatform.prototype.getCursorPosition = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var dispose = _this.terminal.onData(function (chunk) {\n                            dispose();\n                            var match = chunk.toString().match(/\\[(\\d+)\\;(\\d+)R/);\n                            if (match) {\n                                var _a = [match[1], match[2]], row = _a[0], col = _a[1];\n                                var result = {\n                                    // ANSI row & col numbers are 1-based.\n                                    x: parseInt(col) - 1,\n                                    y: parseInt(row) - 1,\n                                };\n                                resolve(result);\n                            }\n                            else {\n                                reject();\n                            }\n                        }).dispose;\n                        _this.print(ansi_escapes_1.default.cursorGetPosition);\n                    })];\n            });\n        });\n    };\n    BrowserPlatform.prototype.getScreenSize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, {\n                        rows: this.terminal.rows,\n                        cols: this.terminal.cols,\n                    }];\n            });\n        });\n    };\n    return BrowserPlatform;\n}(ansi_terminal_platform_1.default));\nexports.BrowserPlatform = BrowserPlatform;\nvar BrowserExecutor = /** @class */ (function (_super) {\n    __extends(BrowserExecutor, _super);\n    function BrowserExecutor(terminal, opts) {\n        if (opts === void 0) { opts = {}; }\n        return _super.call(this, new BrowserPlatform(terminal), opts) || this;\n    }\n    return BrowserExecutor;\n}(executor_1.default));\nexports.BrowserExecutor = BrowserExecutor;\n","var map = {\n\t\"./cal.bas\": 252,\n\t\"./check.bas\": 253,\n\t\"./guess.bas\": 254,\n\t\"./nibbles.bas\": 255,\n\t\"./strtonum.bas\": 256\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 251;","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\r\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\r\\n\\r\\nDEFINT A-Z               ' Default variable type is integer\\r\\n\\r\\n' Define a data type for the names of the months and the\\r\\n' number of days in each:\\r\\nTYPE MonthType\\r\\n   Number AS INTEGER     ' Number of days in the month\\r\\n   MName AS STRING * 9   ' Name of the month\\r\\nEND TYPE\\r\\n\\r\\n' Declare procedures used:\\r\\nDECLARE FUNCTION IsLeapYear% (N%)\\r\\nDECLARE FUNCTION GetInput% (Prompt$, Row%, LowVal%, HighVal%)\\r\\n\\r\\nDECLARE SUB PrintCalendar (Year%, Month%)\\r\\nDECLARE SUB ComputeMonth (Year%, Month%, StartDay%, TotalDays%)\\r\\n\\r\\nDIM MonthData(1 TO 12) AS MonthType\\r\\n\\r\\n' Initialize month definitions from DATA statements below:\\r\\nFOR I = 1 TO 12\\r\\n   READ MonthData(I).MName, MonthData(I).Number\\r\\nNEXT\\r\\n\\r\\n' Main loop, repeat for as many months as desired:\\r\\nDO\\r\\n\\r\\n   CLS\\r\\n\\r\\n   ' Get year and month as input:\\r\\n   Year = GetInput(\\\"Year (1899 to 2099): \\\", 1, 1899, 2099)\\r\\n   Month = GetInput(\\\"Month (1 to 12): \\\", 2, 1, 12)\\r\\n\\r\\n   ' Print the calendar:\\r\\n   PrintCalendar Year, Month\\r\\n\\r\\n   ' Another Date?\\r\\n   LOCATE 13, 1         ' Locate in 13th row, 1st column\\r\\n   PRINT \\\"New Date? \\\";  ' Keep cursor on same line\\r\\n   LOCATE , , 1, 0, 13  ' Turn cursor on and make it one\\r\\n                        ' character high\\r\\n   Resp$ = INPUT$(1)    ' Wait for a key press\\r\\n   PRINT Resp$          ' Print the key pressed\\r\\n\\r\\nLOOP WHILE UCASE$(Resp$) = \\\"Y\\\"\\r\\nEND\\r\\n\\r\\n' Data for the months of a year:\\r\\nDATA January, 31, February, 28, March, 31\\r\\nDATA April, 30, May, 31, June, 30, July, 31, August, 31\\r\\nDATA September, 30, October, 31, November, 30, December, 31\\r\\n'\\r\\n' ====================== COMPUTEMONTH ========================\\r\\n'     Computes the first day and the total days in a month.\\r\\n' ============================================================\\r\\n'\\r\\nSUB ComputeMonth (Year, Month, StartDay, TotalDays) STATIC\\r\\n   SHARED MonthData() AS MonthType\\r\\n   CONST LEAP = 366 MOD 7\\r\\n   CONST NORMAL = 365 MOD 7\\r\\n\\r\\n   ' Calculate total number of days (NumDays) since 1/1/1899.\\r\\n\\r\\n   ' Start with whole years:\\r\\n   NumDays = 0\\r\\n   FOR I = 1899 TO Year - 1\\r\\n      IF IsLeapYear(I) THEN         ' If year is leap, add\\r\\n         NumDays = NumDays + LEAP   ' 366 MOD 7.\\r\\n      ELSE                          ' If normal year, add\\r\\n         NumDays = NumDays + NORMAL ' 365 MOD 7.\\r\\n      END IF\\r\\n   NEXT\\r\\n\\r\\n   ' Next, add in days from whole months:\\r\\n   FOR I = 1 TO Month - 1\\r\\n      NumDays = NumDays + MonthData(I).Number\\r\\n   NEXT\\r\\n\\r\\n   ' Set the number of days in the requested month:\\r\\n   TotalDays = MonthData(Month).Number\\r\\n\\r\\n   ' Compensate if requested year is a leap year:\\r\\n   IF IsLeapYear(Year) THEN\\r\\n\\r\\n      ' If after February, add one to total days:\\r\\n      IF Month > 2 THEN\\r\\n         NumDays = NumDays + 1\\r\\n\\r\\n      ' If February, add one to the month's days:\\r\\n      ELSEIF Month = 2 THEN\\r\\n         TotalDays = TotalDays + 1\\r\\n\\r\\n      END IF\\r\\n   END IF\\r\\n\\r\\n   ' 1/1/1899 was a Sunday, so calculating \\\"NumDays MOD 7\\\"\\r\\n   ' gives the day of week (Sunday = 0, Monday = 1, Tuesday = 2,\\r\\n   ' and so on) for the first day of the input month:\\r\\n   StartDay = NumDays MOD 7\\r\\nEND SUB\\r\\n'\\r\\n' ======================== GETINPUT ==========================\\r\\n'       Prompts for input, then tests for a valid range.\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION GetInput (Prompt$, Row, LowVal, HighVal) STATIC\\r\\n\\r\\n   ' Locate prompt at specified row, turn cursor on and\\r\\n   ' make it one character high:\\r\\n   LOCATE Row, 1, 1, 0, 13\\r\\n   PRINT Prompt$;\\r\\n\\r\\n   ' Save column position:\\r\\n   Column = POS(0)\\r\\n\\r\\n   ' Input value until it's within range:\\r\\n   DO\\r\\n      LOCATE Row, Column   ' Locate cursor at end of prompt\\r\\n      PRINT SPACE$(10)     ' Erase anything already there\\r\\n      LOCATE Row, Column   ' Relocate cursor at end of prompt\\r\\n      INPUT \\\"\\\", Value      ' Input value with no prompt\\r\\n   LOOP WHILE (Value < LowVal OR Value > HighVal)\\r\\n\\r\\n   ' Return valid input as value of function:\\r\\n   GetInput = Value\\r\\n\\r\\nEND FUNCTION\\r\\n'\\r\\n' ====================== ISLEAPYEAR ==========================\\r\\n'         Determines if a year is a leap year or not.\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION IsLeapYear (N) STATIC\\r\\n\\r\\n   ' If the year is evenly divisible by 4 and not divisible\\r\\n   ' by 100, or if the year is evenly divisible by 400, then\\r\\n   ' it's a leap year:\\r\\n   IsLeapYear = (N MOD 4 = 0 AND N MOD 100 <> 0) OR (N MOD 400 = 0)\\r\\nEND FUNCTION\\r\\n'\\r\\n' ===================== PRINTCALENDAR ========================\\r\\n'     Prints a formatted calendar given the year and month.\\r\\n' ============================================================\\r\\n'\\r\\nSUB PrintCalendar (Year, Month) STATIC\\r\\nSHARED MonthData() AS MonthType\\r\\n\\r\\n   ' Compute starting day (Su M Tu ...) and total days\\r\\n   ' for the month:\\r\\n   ComputeMonth Year, Month, StartDay, TotalDays\\r\\n   CLS\\r\\n   Header$ = RTRIM$(MonthData(Month).MName) + \\\",\\\" + STR$(Year)\\r\\n\\r\\n   ' Calculates location for centering month and year:\\r\\n   LeftMargin = (35 - LEN(Header$)) \\\\ 2\\r\\n\\r\\n   ' Print header:\\r\\n   PRINT TAB(LeftMargin); Header$\\r\\n   PRINT\\r\\n   PRINT \\\"Su    M   Tu    W   Th    F   Sa\\\"\\r\\n   PRINT\\r\\n\\r\\n   ' Recalculate and print tab to the first day\\r\\n   ' of the month (Su M Tu ...):\\r\\n   LeftMargin = 5 * StartDay + 1\\r\\n   PRINT TAB(LeftMargin);\\r\\n\\r\\n   ' Print out the days of the month:\\r\\n   FOR I = 1 TO TotalDays\\r\\n      PRINT USING \\\"##   \\\"; I;\\r\\n\\r\\n      ' Advance to the next line when the cursor\\r\\n      ' is past column 32:\\r\\n      IF POS(0) > 32 THEN PRINT\\r\\n   NEXT\\r\\n\\r\\nEND SUB\\r\\n\";","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\n\\nDIM Amount(1 TO 100)\\nCONST FALSE = 0, TRUE = NOT FALSE\\n\\nCLS\\n' Get account's starting balance:\\nINPUT \\\"Type starting balance, then press <ENTER>: \\\", Balance\\n\\n' Get transactions. Continue accepting input\\n' until the input is zero for a transaction,\\n' or until 100 transactions have been entered:\\nFOR TransacNum% = 1 TO 100\\n    PRINT TransacNum%;\\n    PRINT \\\") Enter transaction amount (0 to end): \\\";\\n    INPUT \\\"\\\", Amount(TransacNum%)\\n    IF Amount(TransacNum%) = 0 THEN\\n    TransacNum% = TransacNum% - 1\\n    EXIT FOR\\n    END IF\\nNEXT\\n\\n' Sort transactions in ascending order,\\n' using a \\\"bubble sort\\\":\\nLimit% = TransacNum%\\nDO\\n    Swaps% = FALSE\\n    FOR I% = 1 TO (Limit% - 1)\\n\\n    ' If two adjacent elements are out of order,\\n    ' switch those elements:\\n    IF Amount(I%) < Amount(I% + 1) THEN\\n        SWAP Amount(I%), Amount(I% + 1)\\n        Swaps% = I%\\n    END IF\\n    NEXT I%\\n\\n    ' Sort on next pass only to where last switch was made:\\n    Limit% = Swaps%\\n\\n' Sort until no elements are exchanged:\\nLOOP WHILE Swaps%\\n\\n' Print the sorted transaction array. If a transaction\\n' is greater than zero, print it as a \\\"CREDIT\\\"; if a\\n' transaction is less than zero, print it as a \\\"DEBIT\\\":\\nFOR I% = 1 TO TransacNum%\\n    IF Amount(I%) > 0 THEN\\n    PRINT USING \\\"CREDIT: $$#####.##\\\"; Amount(I%)\\n    ELSEIF Amount(I%) < 0 THEN\\n    PRINT USING \\\"DEBIT: $$#####.##\\\"; Amount(I%)\\n    END IF\\n\\n    ' Update balance:\\n    Balance = Balance + Amount(I%)\\nNEXT I%\\n\\n' Print the final balance:\\nPRINT\\nPRINT \\\"--------------------------\\\"\\nPRINT USING \\\"Final Balance: $$######.##\\\"; Balance\\nEND\\n \";","export default \"' Welcome to qbjc playground!\\n'\\n' qbjc is a QBasic to JavaScript compiler. The qbjc playground\\n' lets you edit and run QBasic / QuickBASIC programs directly in\\n' the browser.\\n'\\n' To get started:\\n'\\n' - Press the blue \\\"PLAY\\\" button below to run this program. The\\n'   result will be displayed in the \\\"OUTPUT\\\" window on the right.\\n'\\n' - Feel free to modify and play around with this program. You\\n'   can also check out some other example programs using the\\n'   \\\"Open\\\" button at the top.\\n' \\n\\nCLS\\nPRINT \\\"Hi! Welcome to qbjc playground!\\\"\\nPRINT\\n\\nINPUT \\\"What's your name? \\\", name$\\nPRINT\\nPRINT \\\"Hello, \\\"; name$; \\\"! Let's play a game! \\\"\\n\\nDO\\n  PRINT\\n  PlayNumberGuessingGame\\n  PRINT\\n  playAgain$ = InputYN$(\\\"Play again?\\\")\\n  PRINT\\nLOOP WHILE playAgain$ = \\\"Y\\\"\\n\\nPRINT\\nPRINT \\\"Thanks for playing \\\"; name$; \\\"! Have a great day!\\\"\\nPRINT\\n\\n\\nSUB PlayNumberGuessingGame\\n  PRINT \\\"I'll think of a number between 1 and 10, \\\";\\n  PRINT \\\"and you have 3 tries to guess it!\\\"\\n  answer = INT(RND * 10) + 1\\n  remainingTries = 3\\n  DO\\n    PRINT\\n    INPUT \\\"Enter your guess: \\\", guess\\n    IF answer = guess THEN\\n      PRINT \\\"Yay! You guessed the answer!\\\"\\n      EXIT DO\\n    ELSE\\n      remainingTries = remainingTries - 1\\n      IF remainingTries <= 0 THEN\\n        PRINT \\\"Sorry, you lost! The answer was\\\"; answer\\n        EXIT DO\\n      ELSEIF answer < guess THEN\\n        PRINT \\\"The answer is smaller than\\\"; guess\\n      ELSE\\n        PRINT \\\"The answer is larger than\\\"; guess\\n      END IF\\n    END IF\\n  LOOP\\nEND SUB\\n\\n\\nFUNCTION InputYN$(prompt$)\\n  PRINT prompt$; \\\" (Y/N)\\\";\\n  DO\\n    key$ = UCASE$(INKEY$)\\n  LOOP UNTIL key$ = \\\"Y\\\" OR key$ = \\\"N\\\"\\n  InputYN$ = key$\\nEND FUNCTION\\n\";","export default \"' Sample program from original QBasic distribution\\n' Source: https://archive.org/details/NibblesQbasic\\n\\n'\\n'                         Q B a s i c   N i b b l e s\\n'\\n'                   Copyright (C) Microsoft Corporation 1990\\n'\\n' Nibbles is a game for one or two players.  Navigate your snakes\\n' around the game board trying to eat up numbers while avoiding\\n' running into walls or other snakes.  The more numbers you eat up,\\n' the more points you gain and the longer your snake becomes.\\n'\\n' To run this game, press Shift+F5.\\n'\\n' To exit QBasic, press Alt, F, X.\\n'\\n' To get help on a BASIC keyword, move the cursor to the keyword and press\\n' F1 or click the right mouse button.\\n'\\n\\n'Set default data type to integer for faster game play\\nDEFINT A-Z\\n\\n'User-defined TYPEs\\nTYPE snakeBody\\n    row AS INTEGER\\n    col AS INTEGER\\nEND TYPE\\n\\n'This type defines the player's snake\\nTYPE snaketype\\n    head      AS INTEGER\\n    length    AS INTEGER\\n    row       AS INTEGER\\n    col       AS INTEGER\\n    direction AS INTEGER\\n    lives     AS INTEGER\\n    score     AS INTEGER\\n    scolor    AS INTEGER\\n    alive     AS INTEGER\\nEND TYPE\\n\\n'This type is used to represent the playing screen in memory\\n'It is used to simulate graphics in text mode, and has some interesting,\\n'and slightly advanced methods to increasing the speed of operation.\\n'Instead of the normal 80x25 text graphics using chr$(219) \\\"\\\", we will be\\n'using chr$(220)\\\"\\\" and chr$(223) \\\"\\\" and chr$(219) \\\"\\\" to mimic an 80x50\\n'pixel screen.\\n'Check out sub-programs SET and POINTISTHERE to see how this is implemented\\n'feel free to copy these (as well as arenaType and the DIM ARENA stmt and the\\n'initialization code in the DrawScreen subprogram) and use them in your own\\n'programs\\nTYPE arenaType\\n    realRow     AS INTEGER        'Maps the 80x50 point into the real 80x25\\n    acolor      AS INTEGER        'Stores the current color of the point\\n    sister      AS INTEGER        'Each char has 2 points in it.  .SISTER is\\nEND TYPE                          '-1 if sister point is above, +1 if below\\n\\n'Sub Declarations\\nDECLARE SUB SpacePause (text$)\\nDECLARE SUB PrintScore (NumPlayers%, score1%, score2%, lives1%, lives2%)\\nDECLARE SUB Intro ()\\nDECLARE SUB GetInputs (NumPlayers, speed, diff$, monitor$)\\nDECLARE SUB DrawScreen ()\\nDECLARE SUB PlayNibbles (NumPlayers, speed, diff$)\\nDECLARE SUB Set (row, col, acolor)\\nDECLARE SUB Center (row, text$)\\nDECLARE SUB DoIntro ()\\nDECLARE SUB Initialize ()\\nDECLARE SUB SparklePause ()\\nDECLARE SUB Level (WhatToDO, sammy() AS snaketype)\\nDECLARE SUB InitColors ()\\nDECLARE SUB EraseSnake (snake() AS ANY, snakeBod() AS ANY, snakeNum%)\\nDECLARE FUNCTION StillWantsToPlay ()\\nDECLARE FUNCTION PointIsThere (row, col, backColor)\\n\\n'Constants\\nCONST TRUE = -1\\nCONST FALSE = NOT TRUE\\nCONST MAXSNAKELENGTH = 1000\\nCONST STARTOVER = 1             ' Parameters to 'Level' SUB\\nCONST SAMELEVEL = 2\\nCONST NEXTLEVEL = 3\\n\\n'Global Variables\\nDIM SHARED arena(1 TO 50, 1 TO 80) AS arenaType\\nDIM SHARED curLevel, colorTable(10)\\n\\n    RANDOMIZE TIMER\\n    GOSUB ClearKeyLocks\\n    Intro\\n    GetInputs NumPlayers, speed, diff$, monitor$\\n    GOSUB SetColors\\n    DrawScreen\\n\\n    DO\\n      PlayNibbles NumPlayers, speed, diff$\\n    LOOP WHILE StillWantsToPlay\\n\\n    GOSUB RestoreKeyLocks\\n    COLOR 15, 0\\n    CLS\\nEND\\n\\nClearKeyLocks:\\n    DEF SEG = 0                     ' Turn off CapLock, NumLock and ScrollLock\\n    KeyFlags = PEEK(1047)\\n    POKE 1047, &H0\\n    DEF SEG\\n    RETURN\\n\\nRestoreKeyLocks:\\n    DEF SEG = 0                     ' Restore CapLock, NumLock and ScrollLock states\\n    POKE 1047, KeyFlags\\n    DEF SEG\\n    RETURN\\n\\nSetColors:\\n    IF monitor$ = \\\"M\\\" THEN\\n        RESTORE mono\\n    ELSE\\n        RESTORE normal\\n    END IF\\n\\n    FOR a = 1 TO 6\\n        READ colorTable(a)\\n    NEXT a\\n    RETURN\\n\\n           'snake1     snake2   Walls  Background  Dialogs-Fore  Back\\nmono:   DATA 15,         7,       7,     0,          15,            0\\nnormal: DATA 14,         13,      12,    1,          15,            4\\nEND\\n\\n'Center:\\n'  Centers text on given row\\nSUB Center (row, text$)\\n    LOCATE row, 41 - LEN(text$) / 2\\n    PRINT text$;\\nEND SUB\\n\\n'DrawScreen:\\n'  Draws playing field\\nSUB DrawScreen\\n\\n    'initialize screen\\n    VIEW PRINT\\n    COLOR colorTable(1), colorTable(4)\\n    CLS\\n\\n    'Print title & message\\n    Center 1, \\\"Nibbles!\\\"\\n    Center 11, \\\"Initializing Playing Field...\\\"\\n    \\n    'Initialize arena array\\n    FOR row = 1 TO 50\\n        FOR col = 1 TO 80\\n            arena(row, col).realRow = INT((row + 1) / 2)\\n            arena(row, col).sister = (row MOD 2) * 2 - 1\\n        NEXT col\\n    NEXT row\\nEND SUB\\n\\n'EraseSnake:\\n'  Erases snake to facilitate moving through playing field\\nSUB EraseSnake (snake() AS snaketype, snakeBod() AS snakeBody, snakeNum)\\n\\n    FOR c = 0 TO 9\\n        FOR b = snake(snakeNum).length - c TO 0 STEP -10\\n            tail = (snake(snakeNum).head + MAXSNAKELENGTH - b) MOD MAXSNAKELENGTH\\n            Set snakeBod(tail, snakeNum).row, snakeBod(tail, snakeNum).col, colorTable(4)\\n        NEXT b\\n    NEXT c\\n    \\nEND SUB\\n\\n'GetInputs:\\n'  Gets player inputs\\nSUB GetInputs (NumPlayers, speed, diff$, monitor$)\\n\\n    COLOR 7, 0\\n    CLS\\n\\n    DO\\n        LOCATE 5, 47: PRINT SPACE$(34);\\n        LOCATE 5, 20\\n        INPUT \\\"How many players (1 or 2)\\\"; num$\\n    LOOP UNTIL VAL(num$) = 1 OR VAL(num$) = 2\\n    NumPlayers = VAL(num$)\\n\\n    LOCATE 8, 21: PRINT \\\"Skill level (1 to 100)\\\"\\n    LOCATE 9, 22: PRINT \\\"1   = Novice\\\"\\n    LOCATE 10, 22: PRINT \\\"90  = Expert\\\"\\n    LOCATE 11, 22: PRINT \\\"100 = Twiddle Fingers\\\"\\n    LOCATE 12, 15: PRINT \\\"(Computer speed may affect your skill level)\\\"\\n    DO\\n        LOCATE 8, 44: PRINT SPACE$(35);\\n        LOCATE 8, 43\\n        INPUT gamespeed$\\n    LOOP UNTIL VAL(gamespeed$) >= 1 AND VAL(gamespeed$) <= 100\\n    speed = VAL(gamespeed$)\\n  \\n    speed = (100 - speed) * 2 + 1\\n\\n    DO\\n        LOCATE 15, 56: PRINT SPACE$(25);\\n        LOCATE 15, 15\\n        INPUT \\\"Increase game speed during play (Y or N)\\\"; diff$\\n        diff$ = UCASE$(diff$)\\n    LOOP UNTIL diff$ = \\\"Y\\\" OR diff$ = \\\"N\\\"\\n\\n    DO\\n        LOCATE 17, 46: PRINT SPACE$(34);\\n        LOCATE 17, 17\\n        INPUT \\\"Monochrome or color monitor (M or C)\\\"; monitor$\\n        monitor$ = UCASE$(monitor$)\\n    LOOP UNTIL monitor$ = \\\"M\\\" OR monitor$ = \\\"C\\\"\\n\\n    startTime# = TIMER                          ' Calculate speed of system\\n    FOR i# = 1 TO 1000: NEXT i#                 ' and do some compensation\\n    stopTime# = TIMER\\n    speed = speed * .5 / (stopTime# - startTime#)\\n\\nEND SUB\\n\\n'InitColors:\\n'Initializes playing field colors\\nSUB InitColors\\n    \\n    FOR row = 1 TO 50\\n        FOR col = 1 TO 80\\n            arena(row, col).acolor = colorTable(4)\\n        NEXT col\\n    NEXT row\\n\\n    CLS\\n   \\n    'Set (turn on) pixels for screen border\\n    FOR col = 1 TO 80\\n        Set 3, col, colorTable(3)\\n        Set 50, col, colorTable(3)\\n    NEXT col\\n\\n    FOR row = 4 TO 49\\n        Set row, 1, colorTable(3)\\n        Set row, 80, colorTable(3)\\n    NEXT row\\n\\nEND SUB\\n\\n'Intro:\\n'  Displays game introduction\\nSUB Intro\\n    SCREEN 0\\n    WIDTH 80, 25\\n    COLOR 15, 0\\n    CLS\\n\\n    Center 4, \\\"Q B a s i c   N i b b l e s\\\"\\n    COLOR 7\\n    Center 6, \\\"Copyright (C) Microsoft Corporation 1990\\\"\\n    Center 8, \\\"Nibbles is a game for one or two players.  Navigate your snakes\\\"\\n    Center 9, \\\"around the game board trying to eat up numbers while avoiding\\\"\\n    Center 10, \\\"running into walls or other snakes.  The more numbers you eat up,\\\"\\n    Center 11, \\\"the more points you gain and the longer your snake becomes.\\\"\\n    Center 13, \\\" Game Controls \\\"\\n    Center 15, \\\"  General             Player 1               Player 2    \\\"\\n    Center 16, \\\"                        (Up)                   (Up)      \\\"\\n    Center 17, \\\"P - Pause                \\\" + CHR$(24) + \\\"                      W       \\\"\\n    Center 18, \\\"                     (Left) \\\" + CHR$(27) + \\\"   \\\" + CHR$(26) + \\\" (Right)   (Left) A   D (Right)  \\\"\\n    Center 19, \\\"                         \\\" + CHR$(25) + \\\"                      S       \\\"\\n    Center 20, \\\"                       (Down)                 (Down)     \\\"\\n    Center 24, \\\"Press any key to continue\\\"\\n\\n    PLAY \\\"MBT160O1L8CDEDCDL4ECC\\\"\\n    SparklePause\\n\\nEND SUB\\n\\n'Level:\\n'Sets game level\\nSUB Level (WhatToDO, sammy() AS snaketype) STATIC\\n    \\n    SELECT CASE (WhatToDO)\\n\\n    CASE STARTOVER\\n        curLevel = 1\\n    CASE NEXTLEVEL\\n        curLevel = curLevel + 1\\n    END SELECT\\n\\n    sammy(1).head = 1                       'Initialize Snakes\\n    sammy(1).length = 2\\n    sammy(1).alive = TRUE\\n    sammy(2).head = 1\\n    sammy(2).length = 2\\n    sammy(2).alive = TRUE\\n\\n    InitColors\\n    \\n    SELECT CASE curLevel\\n    CASE 1\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 4: sammy(2).direction = 3\\n\\n\\n    CASE 2\\n        FOR i = 20 TO 60\\n            Set 25, i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 60: sammy(2).col = 20\\n        sammy(1).direction = 3: sammy(2).direction = 4\\n\\n    CASE 3\\n        FOR i = 10 TO 40\\n            Set i, 20, colorTable(3)\\n            Set i, 60, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n\\n    CASE 4\\n        FOR i = 4 TO 30\\n            Set i, 20, colorTable(3)\\n            Set 53 - i, 60, colorTable(3)\\n        NEXT i\\n        FOR i = 2 TO 40\\n            Set 38, i, colorTable(3)\\n            Set 15, 81 - i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 60: sammy(2).col = 20\\n        sammy(1).direction = 3: sammy(2).direction = 4\\n   \\n    CASE 5\\n        FOR i = 13 TO 39\\n            Set i, 21, colorTable(3)\\n            Set i, 59, colorTable(3)\\n        NEXT i\\n        FOR i = 23 TO 57\\n            Set 11, i, colorTable(3)\\n            Set 41, i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n\\n    CASE 6\\n        FOR i = 4 TO 49\\n            IF i > 30 OR i < 23 THEN\\n                Set i, 10, colorTable(3)\\n                Set i, 20, colorTable(3)\\n                Set i, 30, colorTable(3)\\n                Set i, 40, colorTable(3)\\n                Set i, 50, colorTable(3)\\n                Set i, 60, colorTable(3)\\n                Set i, 70, colorTable(3)\\n            END IF\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 7\\n        FOR i = 4 TO 49 STEP 2\\n            Set i, 40, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 8\\n        FOR i = 4 TO 40\\n            Set i, 10, colorTable(3)\\n            Set 53 - i, 20, colorTable(3)\\n            Set i, 30, colorTable(3)\\n            Set 53 - i, 40, colorTable(3)\\n            Set i, 50, colorTable(3)\\n            Set 53 - i, 60, colorTable(3)\\n            Set i, 70, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 9\\n        FOR i = 6 TO 47\\n            Set i, i, colorTable(3)\\n            Set i, i + 28, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 40: sammy(2).row = 15\\n        sammy(1).col = 75: sammy(2).col = 5\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n   \\n    CASE ELSE\\n        FOR i = 4 TO 49 STEP 2\\n            Set i, 10, colorTable(3)\\n            Set i + 1, 20, colorTable(3)\\n            Set i, 30, colorTable(3)\\n            Set i + 1, 40, colorTable(3)\\n            Set i, 50, colorTable(3)\\n            Set i + 1, 60, colorTable(3)\\n            Set i, 70, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    END SELECT\\nEND SUB\\n\\n'PlayNibbles:\\n'  Main routine that controls game play\\nSUB PlayNibbles (NumPlayers, speed, diff$)\\n\\n    'Initialize Snakes\\n    DIM sammyBody(MAXSNAKELENGTH - 1, 1 TO 2) AS snakeBody\\n    DIM sammy(1 TO 2) AS snaketype\\n    sammy(1).lives = 5\\n    sammy(1).score = 0\\n    sammy(1).scolor = colorTable(1)\\n    sammy(2).lives = 5\\n    sammy(2).score = 0\\n    sammy(2).scolor = colorTable(2)\\n                 \\n    Level STARTOVER, sammy()\\n    startRow1 = sammy(1).row: startCol1 = sammy(1).col\\n    startRow2 = sammy(2).row: startCol2 = sammy(2).col\\n\\n    curSpeed = speed\\n\\n    'play Nibbles until finished\\n\\n    SpacePause \\\"     Level\\\" + STR$(curLevel) + \\\",  Push Space\\\"\\n    gameOver = FALSE\\n    DO\\n        IF NumPlayers = 1 THEN\\n            sammy(2).row = 0\\n        END IF\\n\\n        number = 1          'Current number that snakes are trying to run into\\n        nonum = TRUE        'nonum = TRUE if a number is not on the screen\\n\\n        playerDied = FALSE\\n        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n        PLAY \\\"T160O1>L20CDEDCDL10ECC\\\"\\n\\n        DO\\n            'Print number if no number exists\\n            IF nonum = TRUE THEN\\n                DO\\n                    numberRow = INT(RND(1) * 47 + 3)\\n                    NumberCol = INT(RND(1) * 78 + 2)\\n                    sisterRow = numberRow + arena(numberRow, NumberCol).sister\\n                LOOP UNTIL NOT PointIsThere(numberRow, NumberCol, colorTable(4)) AND NOT PointIsThere(sisterRow, NumberCol, colorTable(4))\\n                numberRow = arena(numberRow, NumberCol).realRow\\n                nonum = FALSE\\n                COLOR colorTable(1), colorTable(4)\\n                LOCATE numberRow, NumberCol\\n                PRINT RIGHT$(STR$(number), 1);\\n                count = 0\\n            END IF\\n\\n            'Delay game\\n            FOR a# = 1 TO curSpeed:  NEXT a#\\n\\n            'Get keyboard input & Change direction accordingly\\n            kbd$ = INKEY$\\n            SELECT CASE kbd$\\n                CASE \\\"w\\\", \\\"W\\\": IF sammy(2).direction <> 2 THEN sammy(2).direction = 1\\n                CASE \\\"s\\\", \\\"S\\\": IF sammy(2).direction <> 1 THEN sammy(2).direction = 2\\n                CASE \\\"a\\\", \\\"A\\\": IF sammy(2).direction <> 4 THEN sammy(2).direction = 3\\n                CASE \\\"d\\\", \\\"D\\\": IF sammy(2).direction <> 3 THEN sammy(2).direction = 4\\n                CASE CHR$(0) + \\\"H\\\": IF sammy(1).direction <> 2 THEN sammy(1).direction = 1\\n                CASE CHR$(0) + \\\"P\\\": IF sammy(1).direction <> 1 THEN sammy(1).direction = 2\\n                CASE CHR$(0) + \\\"K\\\": IF sammy(1).direction <> 4 THEN sammy(1).direction = 3\\n                CASE CHR$(0) + \\\"M\\\": IF sammy(1).direction <> 3 THEN sammy(1).direction = 4\\n                CASE \\\"p\\\", \\\"P\\\": SpacePause \\\" Game Paused ... Push Space  \\\"\\n                CASE ELSE\\n            END SELECT\\n\\n            FOR a = 1 TO NumPlayers\\n                'Move Snake\\n                SELECT CASE sammy(a).direction\\n                    CASE 1: sammy(a).row = sammy(a).row - 1\\n                    CASE 2: sammy(a).row = sammy(a).row + 1\\n                    CASE 3: sammy(a).col = sammy(a).col - 1\\n                    CASE 4: sammy(a).col = sammy(a).col + 1\\n                END SELECT\\n\\n                'If snake hits number, respond accordingly\\n                IF numberRow = INT((sammy(a).row + 1) / 2) AND NumberCol = sammy(a).col THEN\\n                    PLAY \\\"MBO0L16>CCCE\\\"\\n                    IF sammy(a).length < (MAXSNAKELENGTH - 30) THEN\\n                        sammy(a).length = sammy(a).length + number * 4\\n                    END IF\\n                    sammy(a).score = sammy(a).score + number\\n                    PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                    number = number + 1\\n                    IF number = 10 THEN\\n                        EraseSnake sammy(), sammyBody(), 1\\n                        EraseSnake sammy(), sammyBody(), 2\\n                        LOCATE numberRow, NumberCol: PRINT \\\" \\\"\\n                        Level NEXTLEVEL, sammy()\\n                        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                        SpacePause \\\"     Level\\\" + STR$(curLevel) + \\\",  Push Space\\\"\\n                        IF NumPlayers = 1 THEN sammy(2).row = 0\\n                        number = 1\\n                        IF diff$ = \\\"P\\\" THEN speed = speed - 10: curSpeed = speed\\n                    END IF\\n                    nonum = TRUE\\n                    IF curSpeed < 1 THEN curSpeed = 1\\n                END IF\\n            NEXT a\\n\\n            FOR a = 1 TO NumPlayers\\n                'If player runs into any point, or the head of the other snake, it dies.\\n                IF PointIsThere(sammy(a).row, sammy(a).col, colorTable(4)) OR (sammy(1).row = sammy(2).row AND sammy(1).col = sammy(2).col) THEN\\n                    PLAY \\\"MBO0L32EFGEFDC\\\"\\n                    COLOR , colorTable(4)\\n                    LOCATE numberRow, NumberCol\\n                    PRINT \\\" \\\"\\n                   \\n                    playerDied = TRUE\\n                    sammy(a).alive = FALSE\\n                    sammy(a).lives = sammy(a).lives - 1\\n\\n                'Otherwise, move the snake, and erase the tail\\n                ELSE\\n                    sammy(a).head = (sammy(a).head + 1) MOD MAXSNAKELENGTH\\n                    sammyBody(sammy(a).head, a).row = sammy(a).row\\n                    sammyBody(sammy(a).head, a).col = sammy(a).col\\n                    tail = (sammy(a).head + MAXSNAKELENGTH - sammy(a).length) MOD MAXSNAKELENGTH\\n                    Set sammyBody(tail, a).row, sammyBody(tail, a).col, colorTable(4)\\n                    sammyBody(tail, a).row = 0\\n                    Set sammy(a).row, sammy(a).col, sammy(a).scolor\\n                END IF\\n            NEXT a\\n\\n        LOOP UNTIL playerDied\\n\\n        curSpeed = speed                ' reset speed to initial value\\n       \\n        FOR a = 1 TO NumPlayers\\n            EraseSnake sammy(), sammyBody(), a\\n\\n            'If dead, then erase snake in really cool way\\n            IF sammy(a).alive = FALSE THEN\\n                'Update score\\n                sammy(a).score = sammy(a).score - 10\\n                PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                \\n                IF a = 1 THEN\\n                    SpacePause \\\" Sammy Dies! Push Space! --->\\\"\\n                ELSE\\n                    SpacePause \\\" <---- Jake Dies! Push Space \\\"\\n                END IF\\n            END IF\\n        NEXT a\\n\\n        Level SAMELEVEL, sammy()\\n        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n     \\n    'Play next round, until either of snake's lives have run out.\\n    LOOP UNTIL sammy(1).lives = 0 OR sammy(2).lives = 0\\n\\nEND SUB\\n\\n'PointIsThere:\\n'  Checks the global  arena array to see if the boolean flag is set\\nFUNCTION PointIsThere (row, col, acolor)\\n    IF row <> 0 THEN\\n        IF arena(row, col).acolor <> acolor THEN\\n            PointIsThere = TRUE\\n        ELSE\\n            PointIsThere = FALSE\\n        END IF\\n    END IF\\nEND FUNCTION\\n\\n'PrintScore:\\n'  Prints players scores and number of lives remaining\\nSUB PrintScore (NumPlayers, score1, score2, lives1, lives2)\\n    COLOR 15, colorTable(4)\\n\\n    IF NumPlayers = 2 THEN\\n        LOCATE 1, 1\\n        PRINT USING \\\"#,###,#00  Lives: #  <--JAKE\\\"; score2; lives2\\n    END IF\\n\\n    LOCATE 1, 49\\n    PRINT USING \\\"SAMMY-->  Lives: #     #,###,#00\\\"; lives1; score1\\nEND SUB\\n\\n'Set:\\n'  Sets row and column on playing field to given color to facilitate moving\\n'  of snakes around the field.\\nSUB Set (row, col, acolor)\\n    IF row <> 0 THEN\\n        arena(row, col).acolor = acolor             'assign color to arena\\n        realRow = arena(row, col).realRow           'Get real row of pixel\\n        topFlag = arena(row, col).sister + 1 / 2    'Deduce whether pixel\\n                                                    'is on top, or bottom\\n        sisterRow = row + arena(row, col).sister    'Get arena row of sister\\n        sisterColor = arena(sisterRow, col).acolor  'Determine sister's color\\n\\n        LOCATE realRow, col\\n\\n        IF acolor = sisterColor THEN                'If both points are same\\n            COLOR acolor, acolor                           'Print chr$(219) \\\"\\\"\\n            PRINT CHR$(219);\\n        ELSE\\n            IF topFlag THEN                         'Since you cannot have\\n                IF acolor > 7 THEN                  'bright backgrounds\\n                    COLOR acolor, sisterColor       'determine best combo\\n                    PRINT CHR$(223);                'to use.\\n                ELSE\\n                    COLOR sisterColor, acolor\\n                    PRINT CHR$(220);\\n                END IF\\n            ELSE\\n                IF acolor > 7 THEN\\n                    COLOR acolor, sisterColor\\n                    PRINT CHR$(220);\\n                ELSE\\n                    COLOR sisterColor, acolor\\n                    PRINT CHR$(223);\\n                END IF\\n            END IF\\n        END IF\\n    END IF\\nEND SUB\\n\\n'SpacePause:\\n'  Pauses game play and waits for space bar to be pressed before continuing\\nSUB SpacePause (text$)\\n\\n    COLOR colorTable(5), colorTable(6)\\n    Center 11, \\\"\\\"\\n    Center 12, \\\" \\\" + LEFT$(text$ + SPACE$(29), 29) + \\\" \\\"\\n    Center 13, \\\"\\\"\\n    WHILE INKEY$ <> \\\"\\\": WEND\\n    WHILE INKEY$ <> \\\" \\\": WEND\\n    COLOR 15, colorTable(4)\\n\\n    FOR i = 21 TO 26            ' Restore the screen background\\n        FOR j = 24 TO 56\\n            Set i, j, arena(i, j).acolor\\n        NEXT j\\n    NEXT i\\n\\nEND SUB\\n\\n'SparklePause:\\n'  Creates flashing border for intro screen\\nSUB SparklePause\\n\\n    COLOR 4, 0\\n    a$ = \\\"*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    \\\"\\n    WHILE INKEY$ <> \\\"\\\": WEND 'Clear keyboard buffer\\n\\n    WHILE INKEY$ = \\\"\\\"\\n        FOR a = 1 TO 5\\n            LOCATE 1, 1                             'print horizontal sparkles\\n            PRINT MID$(a$, a, 80);\\n            LOCATE 22, 1\\n            PRINT MID$(a$, 6 - a, 80);\\n\\n            FOR b = 2 TO 21                         'Print Vertical sparkles\\n                c = (a + b) MOD 5\\n                IF c = 1 THEN\\n                    LOCATE b, 80\\n                    PRINT \\\"*\\\";\\n                    LOCATE 23 - b, 1\\n                    PRINT \\\"*\\\";\\n                ELSE\\n                    LOCATE b, 80\\n                    PRINT \\\" \\\";\\n                    LOCATE 23 - b, 1\\n                    PRINT \\\" \\\";\\n                END IF\\n            NEXT b\\n        NEXT a\\n    WEND\\n\\nEND SUB\\n\\n'StillWantsToPlay:\\n'  Determines if users want to play game again.\\nFUNCTION StillWantsToPlay\\n\\n    COLOR colorTable(5), colorTable(6)\\n    Center 10, \\\"\\\"\\n    Center 11, \\\"       G A M E   O V E R       \\\"\\n    Center 12, \\\"                               \\\"\\n    Center 13, \\\"      Play Again?   (Y/N)      \\\"\\n    Center 14, \\\"\\\"\\n\\n    WHILE INKEY$ <> \\\"\\\": WEND\\n    DO\\n        kbd$ = UCASE$(INKEY$)\\n    LOOP UNTIL kbd$ = \\\"Y\\\" OR kbd$ = \\\"N\\\"\\n\\n    COLOR 15, colorTable(4)\\n    Center 10, \\\"                                 \\\"\\n    Center 11, \\\"                                 \\\"\\n    Center 12, \\\"                                 \\\"\\n    Center 13, \\\"                                 \\\"\\n    Center 14, \\\"                                 \\\"\\n\\n    IF kbd$ = \\\"Y\\\" THEN\\n        StillWantsToPlay = TRUE\\n    ELSE\\n        StillWantsToPlay = FALSE\\n        COLOR 7, 0\\n        CLS\\n    END IF\\n\\nEND FUNCTION\\n\\n\";","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\r\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\r\\n\\r\\nDECLARE FUNCTION Filter$ (Txt$, FilterString$)\\r\\n\\r\\n' Input a line:\\r\\nLINE INPUT \\\"Enter a number with commas: \\\", A$\\r\\n\\r\\n' Look for only valid numeric characters (0123456789.-) in the\\r\\n' input string:\\r\\nCleanNum$ = Filter$(A$, \\\"0123456789.-\\\")\\r\\n\\r\\n' Convert the string to a number:\\r\\nPRINT \\\"The number's value = \\\"; VAL(CleanNum$)\\r\\nEND\\r\\n'\\r\\n' ========================== FILTER ==========================\\r\\n'         Takes unwanted characters out of a string by\\r\\n'        comparing them with a filter string containing\\r\\n'             only acceptable numeric characters\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION Filter$ (Txt$, FilterString$) STATIC\\r\\n   Temp$ = \\\"\\\"\\r\\n   TxtLength = LEN(Txt$)\\r\\n\\r\\n   FOR I = 1 TO TxtLength     ' Isolate each character in\\r\\n      C$ = MID$(Txt$, I, 1)   ' the string.\\r\\n\\r\\n      ' If the character is in the filter string, save it:\\r\\n      IF INSTR(FilterString$, C$) <> 0 THEN\\r\\n         Temp$ = Temp$ + C$\\r\\n      END IF\\r\\n   NEXT I\\r\\n\\r\\n   Filter$ = Temp$\\r\\nEND FUNCTION\\r\\n\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProcDefType = exports.procTypeName = exports.isFnOrDefFn = exports.ProcType = exports.typeSpecName = exports.areMatchingSingularTypes = exports.areMatchingElementaryTypes = exports.isSingularType = exports.isUdt = exports.isElementaryType = exports.isArray = exports.isString = exports.isIntegral = exports.isNumeric = exports.arraySpec = exports.stringSpec = exports.doubleSpec = exports.singleSpec = exports.longSpec = exports.integerSpec = exports.DataType = void 0;\n/** Overall type of the value. */\nvar DataType;\n(function (DataType) {\n    /** 16-bit integer */\n    DataType[\"INTEGER\"] = \"integer\";\n    /** 32-bit integer */\n    DataType[\"LONG\"] = \"long\";\n    /** 32-bit floating point. */\n    DataType[\"SINGLE\"] = \"single\";\n    /** 64-bit floating point. */\n    DataType[\"DOUBLE\"] = \"double\";\n    /** String. */\n    DataType[\"STRING\"] = \"string\";\n    /** Array. */\n    DataType[\"ARRAY\"] = \"array\";\n    /** User-defined data type, a.k.a. records. */\n    DataType[\"UDT\"] = \"udt\";\n})(DataType = exports.DataType || (exports.DataType = {}));\n// Helpers for creating DataTypeSpec instances.\nfunction integerSpec() {\n    return { type: DataType.INTEGER };\n}\nexports.integerSpec = integerSpec;\nfunction longSpec() {\n    return { type: DataType.LONG };\n}\nexports.longSpec = longSpec;\nfunction singleSpec() {\n    return { type: DataType.SINGLE };\n}\nexports.singleSpec = singleSpec;\nfunction doubleSpec() {\n    return { type: DataType.DOUBLE };\n}\nexports.doubleSpec = doubleSpec;\nfunction stringSpec() {\n    return { type: DataType.STRING };\n}\nexports.stringSpec = stringSpec;\nfunction arraySpec(elementTypeSpec, dimensionSpecs) {\n    return { type: DataType.ARRAY, elementTypeSpec: elementTypeSpec, dimensionSpecs: dimensionSpecs };\n}\nexports.arraySpec = arraySpec;\n// Helpers for type checking.\nfunction isNumeric(t) {\n    return [\n        DataType.INTEGER,\n        DataType.LONG,\n        DataType.SINGLE,\n        DataType.DOUBLE,\n    ].includes(getType(t));\n}\nexports.isNumeric = isNumeric;\nfunction isIntegral(t) {\n    return [DataType.INTEGER, DataType.LONG].includes(getType(t));\n}\nexports.isIntegral = isIntegral;\nfunction isString(t) {\n    return getType(t) === DataType.STRING;\n}\nexports.isString = isString;\nfunction isArray(t) {\n    return getType(t) === DataType.ARRAY;\n}\nexports.isArray = isArray;\nfunction isElementaryType(t) {\n    return isNumeric(t) || isString(t);\n}\nexports.isElementaryType = isElementaryType;\nfunction isUdt(t) {\n    return getType(t) === DataType.UDT;\n}\nexports.isUdt = isUdt;\nfunction isSingularType(t) {\n    return isElementaryType(t) || isUdt(t);\n}\nexports.isSingularType = isSingularType;\nfunction areMatchingElementaryTypes(typeSpec1, typeSpec2) {\n    return ((isNumeric(typeSpec1) && isNumeric(typeSpec2)) ||\n        (isString(typeSpec1) && isString(typeSpec2)));\n}\nexports.areMatchingElementaryTypes = areMatchingElementaryTypes;\nfunction areMatchingSingularTypes(typeSpec1, typeSpec2) {\n    return (areMatchingElementaryTypes(typeSpec1, typeSpec2) ||\n        (isUdt(typeSpec1) && isUdt(typeSpec2) && typeSpec1.name === typeSpec2.name));\n}\nexports.areMatchingSingularTypes = areMatchingSingularTypes;\nfunction typeSpecName(t) {\n    switch (t.type) {\n        case DataType.ARRAY:\n            return typeSpecName(t.elementTypeSpec) + \" array\";\n        case DataType.UDT:\n            return \"\\\"\" + t.name + \"\\\"\";\n        default:\n            return t.type;\n    }\n}\nexports.typeSpecName = typeSpecName;\nfunction getType(t) {\n    return typeof t === 'object' ? t.type : t;\n}\n/** Type of a procedure. */\nvar ProcType;\n(function (ProcType) {\n    /** SUB procedure. */\n    ProcType[\"SUB\"] = \"sub\";\n    /** FUNCTION procedure. */\n    ProcType[\"FN\"] = \"fn\";\n    /** DEF FN procedure. */\n    ProcType[\"DEF_FN\"] = \"defFn\";\n})(ProcType = exports.ProcType || (exports.ProcType = {}));\nfunction isFnOrDefFn(procType) {\n    return procType === ProcType.FN || procType === ProcType.DEF_FN;\n}\nexports.isFnOrDefFn = isFnOrDefFn;\n/** Returns the user-facing name of a ProcType. */\nfunction procTypeName(procType) {\n    var _a;\n    var NAMES = (_a = {},\n        _a[ProcType.SUB] = 'SUB procedure',\n        _a[ProcType.FN] = 'FUNCTION procedure',\n        _a[ProcType.DEF_FN] = 'DEF FN procedure',\n        _a);\n    return NAMES[procType];\n}\nexports.procTypeName = procTypeName;\n/** The type of a procedure definition. */\nvar ProcDefType;\n(function (ProcDefType) {\n    /** Built-in function. */\n    ProcDefType[\"BUILTIN\"] = \"builtin\";\n    /** User-defined function in the current module. */\n    ProcDefType[\"MODULE\"] = \"module\";\n})(ProcDefType = exports.ProcDefType || (exports.ProcDefType = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar terser_1 = require(\"terser\");\nvar codegen_1 = __importDefault(require(\"./codegen/codegen\"));\nvar parser_1 = __importDefault(require(\"./parser/parser\"));\nvar semantic_analysis_1 = __importDefault(require(\"./semantic-analysis/semantic-analysis\"));\nvar DEFAULT_SOURCE_FILE_NAME = 'source.bas';\n/** Compiles a QBasic program.\n *\n * This is the main entrypoint to qbjc's compiler.\n */\nfunction compile(_a) {\n    var source = _a.source, _b = _a.sourceFileName, sourceFileName = _b === void 0 ? DEFAULT_SOURCE_FILE_NAME : _b, enableBundling = _a.enableBundling, enableMinify = _a.enableMinify;\n    return __awaiter(this, void 0, void 0, function () {\n        var astModule, _c, code, sourceMap, sourceMapContent, _d, minifiedCode, minifiedSourceMap;\n        return __generator(this, function (_e) {\n            switch (_e.label) {\n                case 0:\n                    astModule = parser_1.default(source, { sourceFileName: sourceFileName });\n                    if (!astModule) {\n                        throw new Error(\"Invalid parse tree\");\n                    }\n                    // 2. Semantic analysis.\n                    semantic_analysis_1.default(astModule, { sourceFileName: sourceFileName });\n                    _c = codegen_1.default(astModule, {\n                        sourceFileName: sourceFileName,\n                        enableBundling: enableBundling,\n                    }), code = _c.code, sourceMap = _c.map;\n                    sourceMapContent = sourceMap.toString();\n                    if (!enableMinify) return [3 /*break*/, 2];\n                    return [4 /*yield*/, terser_1.minify(code, {\n                            sourceMap: {\n                                filename: sourceFileName,\n                                content: sourceMapContent,\n                            },\n                        })];\n                case 1:\n                    _d = _e.sent(), minifiedCode = _d.code, minifiedSourceMap = _d.map;\n                    if (minifiedCode && minifiedSourceMap) {\n                        code = minifiedCode;\n                        sourceMapContent = minifiedSourceMap;\n                    }\n                    _e.label = 2;\n                case 2: return [2 /*return*/, {\n                        source: source,\n                        sourceFileName: sourceFileName,\n                        code: code,\n                        map: sourceMapContent,\n                        astModule: astModule,\n                    }];\n            }\n        });\n    });\n}\nexports.default = compile;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGenerator = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar source_map_1 = require(\"source-map\");\nvar ast_1 = require(\"../lib/ast\");\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar compiled_code_1 = require(\"../runtime/compiled-code\");\n// Generated by src/tools/build-runtime-bundle.ts at build time.\nvar nodeRuntimeBundleCode = require('../runtime/node-runtime-bundle')\n    .default;\n/** Default indentation per level. */\nvar DEFAULT_INDENT_WIDTH = 4;\nvar BINARY_OP_MAP = (_a = {},\n    _a[ast_1.BinaryOp.ADD] = '+',\n    _a[ast_1.BinaryOp.SUB] = '-',\n    _a[ast_1.BinaryOp.MUL] = '*',\n    _a[ast_1.BinaryOp.DIV] = '/',\n    _a[ast_1.BinaryOp.MOD] = '%',\n    _a[ast_1.BinaryOp.AND] = '&&',\n    _a[ast_1.BinaryOp.OR] = '||',\n    _a[ast_1.BinaryOp.EQ] = '===',\n    _a[ast_1.BinaryOp.NE] = '!=',\n    _a[ast_1.BinaryOp.GT] = '>',\n    _a[ast_1.BinaryOp.GTE] = '>=',\n    _a[ast_1.BinaryOp.LT] = '<',\n    _a[ast_1.BinaryOp.LTE] = '<=',\n    _a);\n/** Code generation pass.\n *\n * Depends on semantic analysis info in the AST.\n */\nvar CodeGenerator = /** @class */ (function (_super) {\n    __extends(CodeGenerator, _super);\n    function CodeGenerator(module, opts) {\n        if (opts === void 0) { opts = {}; }\n        var _this = _super.call(this) || this;\n        _this.module = module;\n        /** Stack of open for loops in current context. */\n        _this.openForStmtStates = [];\n        /** Stack of open do loops in current context. */\n        _this.openLoopStmtStates = [];\n        /** Current indentation level. */\n        _this.indent = 0;\n        /** Current generated label index. */\n        _this.nextGeneratedLabelIdx = 1;\n        _this.opts = __assign({ sourceFileName: '', indentWidth: DEFAULT_INDENT_WIDTH, enableBundling: false }, opts);\n        _this.sourceFileName = _this.opts.sourceFileName;\n        return _this;\n    }\n    CodeGenerator.prototype.run = function () {\n        var compiledModuleSourceNode = this.visitModule(this.module);\n        return this.bundle(compiledModuleSourceNode).toStringWithSourceMap();\n    };\n    CodeGenerator.prototype.bundle = function (compiledModuleSourceNode) {\n        var sourceNode = new source_map_1.SourceNode();\n        if (this.opts.enableBundling) {\n            sourceNode.add('#!/usr/bin/env node\\n\\n');\n            sourceNode.add(compiledModuleSourceNode);\n            sourceNode.add(nodeRuntimeBundleCode);\n        }\n        else {\n            sourceNode.add(compiledModuleSourceNode);\n            sourceNode.add('module.exports = compiledModule;\\n');\n        }\n        return sourceNode;\n    };\n    CodeGenerator.prototype.visitModule = function (module) {\n        this.indent = 0;\n        var chunks = [];\n        chunks.push(this.lines('const compiledModule = {', +1, \"sourceFileName: \" + JSON.stringify(this.opts.sourceFileName) + \",\", \"localSymbols: \" + JSON.stringify(module.localSymbols) + \",\", \"globalSymbols: \" + JSON.stringify(module.globalSymbols) + \",\", ''));\n        chunks.push(this.lines('stmts: [', '', +1), this.visitStmts(module.stmts), this.lines(-1, '],', ''));\n        chunks.push(this.lines('procs: [', '', +1), this.acceptAll(module.procs), this.lines(-1, '],', ''));\n        chunks.push(this.lines(-1, '};', ''));\n        return new source_map_1.SourceNode(null, null, this.opts.sourceFileName, lodash_1.default.flattenDeep(chunks));\n    };\n    CodeGenerator.prototype.visitProc = function (node) {\n        var chunks = [];\n        chunks.push(this.lines('{', +1, this.generateLoc(node), \"type: '\" + node.type + \"',\", \"name: '\" + node.name + \"',\", \"localSymbols: \" + JSON.stringify(node.localSymbols) + \",\", \"paramSymbols: \" + JSON.stringify(node.paramSymbols) + \",\", 'stmts: [', '', +1), this.visitStmts(node.stmts), this.lines(-1, '],', -1, '},', ''));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitStmts = function (stmts) {\n        var origOpenForStmtStatesLength = this.openForStmtStates.length;\n        var sourceNodes = this.acceptAll(stmts);\n        if (this.openForStmtStates.length > origOpenForStmtStatesLength) {\n            this.throwError('FOR statement without corresponding NEXT statement', this.openForStmtStates[this.openForStmtStates.length - 1].forStmt);\n        }\n        return sourceNodes;\n    };\n    CodeGenerator.prototype.visitLabelStmt = function (node) {\n        return this.createSourceNode(node, this.generateLabelStmt(node, node.label));\n    };\n    CodeGenerator.prototype.visitDimStmt = function (node) {\n        var _this = this;\n        var chunks = [];\n        for (var _i = 0, _a = node.varDecls; _i < _a.length; _i++) {\n            var varDecl = _a[_i];\n            var typeExpr = varDecl.typeExpr;\n            var typeSpec = varDecl.symbol.typeSpec;\n            switch (typeExpr.type) {\n                case ast_1.DataTypeExprType.ARRAY:\n                    if (!types_1.isArray(typeSpec)) {\n                        this.throwError(\"Mismatch types: expected array, got \" + typeSpec.type, varDecl);\n                    }\n                    if (node.dimType === ast_1.DimType.SHARED &&\n                        typeExpr.dimensionSpecExprs.length === 0) {\n                        // SHARED statement only indicating scoping.\n                        continue;\n                    }\n                    chunks.push.apply(chunks, __spreadArray(__spreadArray([this.generateVarRefCode(varDecl, varDecl.symbol),\n                        '.init(',\n                        JSON.stringify(typeSpec.elementTypeSpec),\n                        ', ['], typeExpr.dimensionSpecExprs.map(function (_a) {\n                        var minIdxExpr = _a.minIdxExpr, maxIdxExpr = _a.maxIdxExpr;\n                        return [\n                            '[',\n                            minIdxExpr ? _this.accept(minIdxExpr) : '0',\n                            ', ',\n                            _this.accept(maxIdxExpr),\n                            '],',\n                        ];\n                    })), [']); ']));\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (chunks.length > 0) {\n            return this.createStmtSourceNode(node, function () { return chunks; });\n        }\n        else {\n            return new source_map_1.SourceNode();\n        }\n    };\n    CodeGenerator.prototype.visitAssignStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            return [\n                _this.accept(node.targetExpr),\n                ' = ',\n                _this.generateAssignableValueCode(node.valueExpr, node.targetExpr.typeSpec),\n                ';',\n            ];\n        });\n    };\n    CodeGenerator.prototype.visitConstStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray([], lodash_1.default.flatMap(node.constDefs, function (constDef) { return [\n            _this.generateVarRefCode(constDef, constDef.symbol) + \" = \",\n            _this.accept(constDef.valueExpr),\n            '; ',\n        ]; })); });\n    };\n    CodeGenerator.prototype.visitGotoStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(node.destLabel);\n        });\n    };\n    CodeGenerator.prototype.visitIfStmt = function (node) {\n        var _this = this;\n        return this.visitCondStmt(node, this.generateLabel(), function (ifBranch) { return _this.accept(ifBranch.condExpr); });\n    };\n    CodeGenerator.prototype.visitSelectStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var testValue = this.generateTempVarRef(labelPrefix + \"_test\");\n        return this.createSourceNode(node, this.createStmtSourceNode(node, function () { return [\n            testValue + \" = \",\n            _this.accept(node.testExpr),\n            ';',\n        ]; }), this.visitCondStmt(node, labelPrefix, function (caseBranch) {\n            var chunks = [];\n            for (var i = 0; i < caseBranch.condExprs.length; ++i) {\n                var condExpr = caseBranch.condExprs[i];\n                if (i > 0) {\n                    chunks.push(' || ');\n                }\n                switch (condExpr.type) {\n                    case ast_1.CaseExprType.VALUE:\n                        chunks.push(testValue + \" === \", _this.accept(condExpr.valueExpr));\n                        break;\n                    case ast_1.CaseExprType.RANGE:\n                        chunks.push(\"(\" + testValue + \" >= \", _this.accept(condExpr.lowerBoundExpr), \" && \" + testValue + \" <= \", _this.accept(condExpr.upperBoundExpr), ')');\n                        break;\n                    case ast_1.CaseExprType.COMP:\n                        chunks.push(testValue + \" \" + BINARY_OP_MAP[condExpr.op] + \" \", _this.accept(condExpr.rightExpr));\n                        break;\n                    default:\n                        _this.throwError(\"Unknown case expression type: \" + JSON.stringify(condExpr), node);\n                }\n            }\n            return chunks;\n        }), this.createStmtSourceNode(node, function () { return \"delete \" + testValue + \";\"; }));\n    };\n    CodeGenerator.prototype.visitCondStmt = function (node, labelPrefix, generateCondExprCode) {\n        var _this = this;\n        // Generate labels for each \"elseif\" branch, the else branch, and the \"end if\".\n        var branchLabels = [];\n        for (var i = 1; i < node.ifBranches.length; ++i) {\n            branchLabels.push({\n                node: node.ifBranches[i],\n                label: labelPrefix + \"_elif\" + i,\n            });\n        }\n        if (node.elseBranch && node.elseBranch.stmts.length > 0) {\n            branchLabels.push({\n                node: node.elseBranch,\n                label: labelPrefix + \"_else\",\n            });\n        }\n        var endIfLabel = labelPrefix + \"_endif\";\n        branchLabels.push({ node: null, label: endIfLabel });\n        var chunks = [];\n        var nextBranchLabelIdx = 0;\n        var _loop_1 = function (ifBranch) {\n            var _b = branchLabels[nextBranchLabelIdx], nextBranchNode = _b.node, nextBranchLabel = _b.label;\n            chunks.push(this_1.createStmtSourceNode(ifBranch, function () {\n                return lodash_1.default.flattenDeep([\n                    'if (!(',\n                    generateCondExprCode(ifBranch),\n                    \")) { \" + _this.generateGotoCode(nextBranchLabel) + \" }\",\n                ]);\n            }));\n            ++this_1.indent;\n            chunks.push(this_1.visitStmts(ifBranch.stmts));\n            if (nextBranchLabelIdx < branchLabels.length - 1) {\n                chunks.push(this_1.createStmtSourceNode(ifBranch, function () {\n                    return _this.generateGotoCode(endIfLabel);\n                }));\n            }\n            --this_1.indent;\n            chunks.push(this_1.generateLabelStmt(nextBranchNode, nextBranchLabel));\n            ++nextBranchLabelIdx;\n        };\n        var this_1 = this;\n        // Generate code for \"if\" and \"elseif\" branches.\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var ifBranch = _a[_i];\n            _loop_1(ifBranch);\n        }\n        // Generate code for \"else\" branch.\n        if (node.elseBranch && node.elseBranch.stmts.length > 0) {\n            ++this.indent;\n            chunks.push(this.visitStmts(node.elseBranch.stmts));\n            --this.indent;\n            chunks.push(this.generateLabelStmt(null, endIfLabel));\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitCondLoopStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var loopStartLabel = labelPrefix + \"_loopStart\";\n        var loopEndLabel = labelPrefix + \"_loopEnd\";\n        var cond = node.isCondNegated\n            ? [this.accept(node.condExpr)]\n            : ['!(', this.accept(node.condExpr), ')'];\n        var condStmt = this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([\n            'if ('\n        ], cond), [\n            \") { \" + _this.generateGotoCode(loopEndLabel) + \" }\",\n        ]); });\n        ++this.indent;\n        this.openLoopStmtStates.push({\n            loopStmt: node,\n            endLabel: loopEndLabel,\n        });\n        var stmts = this.visitStmts(node.stmts);\n        this.openLoopStmtStates.pop();\n        --this.indent;\n        var chunks = [];\n        chunks.push(this.generateLabelStmt(node, loopStartLabel));\n        switch (node.structure) {\n            case ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS:\n                chunks.push(condStmt, stmts);\n                break;\n            case ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS:\n                chunks.push(stmts, condStmt);\n                break;\n            default:\n                this.throwError(\"Unexpected loop structure: \" + JSON.stringify(node), node);\n        }\n        chunks.push(this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(loopStartLabel);\n        }), this.generateLabelStmt(node, loopEndLabel));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitUncondLoopStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var loopStartLabel = labelPrefix + \"_loopStart\";\n        var loopEndLabel = labelPrefix + \"_loopEnd\";\n        var chunks = [];\n        chunks.push(this.generateLabelStmt(node, loopStartLabel));\n        ++this.indent;\n        this.openLoopStmtStates.push({\n            loopStmt: node,\n            endLabel: loopEndLabel,\n        });\n        chunks.push(this.visitStmts(node.stmts));\n        this.openLoopStmtStates.pop();\n        --this.indent;\n        chunks.push(this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(loopStartLabel);\n        }), this.generateLabelStmt(node, loopEndLabel));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitExitLoopStmt = function (node) {\n        var _this = this;\n        if (this.openLoopStmtStates.length === 0) {\n            this.throwError(\"EXIT DO statement outside DO loop\", node);\n        }\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(_this.openLoopStmtStates[_this.openLoopStmtStates.length - 1].endLabel);\n        });\n    };\n    CodeGenerator.prototype.visitForStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var startLabel = labelPrefix + \"_loopStart\";\n        var endLabel = labelPrefix + \"_loopEnd\";\n        var stepValue = this.generateTempVarRef(labelPrefix + \"_step\");\n        var endValue = this.generateTempVarRef(labelPrefix + \"_end\");\n        this.openForStmtStates.push({\n            forStmt: node,\n            startLabel: startLabel,\n            endLabel: endLabel,\n            stepValue: stepValue,\n            endValue: endValue,\n        });\n        var chunks = [];\n        chunks.push(this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray(__spreadArray([], [\n            _this.accept(node.counterExpr),\n            ' = ',\n            _this.accept(node.startExpr),\n            '; ',\n        ]), [\n            stepValue + \" = \",\n            node.stepExpr ? _this.accept(node.stepExpr) : '1',\n            '; ',\n        ]), [endValue + \" = \", _this.accept(node.endExpr), ';']); }), this.generateLabelStmt(node, startLabel));\n        ++this.indent;\n        chunks.push(this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([], [\"const counterValue = \", _this.accept(node.counterExpr), '; ']), [\n            'if (',\n            \"(\" + stepValue + \" >= 0 && counterValue > \" + endValue + \") || \",\n            \"(\" + stepValue + \" < 0 && counterValue < \" + endValue + \")\",\n            \") { \" + _this.generateGotoCode(endLabel) + \" }\",\n        ]); }));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitNextStmt = function (node) {\n        var _this = this;\n        // Determine how many open FOR statements this NEXT statement will close.\n        var numForStmtStatesToClose = node.counterExprs.length || 1;\n        if (numForStmtStatesToClose > this.openForStmtStates.length) {\n            this.throwError(\"NEXT statement without corresponding FOR statement\", node);\n        }\n        // Verify that the counter expressions match the corresponding FOR statements.\n        for (var i = 0; i < node.counterExprs.length; ++i) {\n            var nextCounterExprString = this.accept(node.counterExprs[i]).toString();\n            var forStmt = this.openForStmtStates[this.openForStmtStates.length - 1 - i].forStmt;\n            var forStmtCounterExprString = this.accept(forStmt.counterExpr).toString();\n            if (nextCounterExprString !== forStmtCounterExprString) {\n                this.throwError(\"Counter #\" + (i + 1) + \" does not match corresponding FOR statement\", node);\n            }\n        }\n        // Generate code.\n        var chunks = [];\n        var _loop_2 = function (i) {\n            var _a = this_2.openForStmtStates.pop(), forStmt = _a.forStmt, startLabel = _a.startLabel, endLabel = _a.endLabel, stepValue = _a.stepValue, endValue = _a.endValue;\n            chunks.push(this_2.createStmtSourceNode(node, function () { return [\n                _this.accept(forStmt.counterExpr),\n                \" += \" + stepValue + \"; \",\n                _this.generateGotoCode(startLabel),\n            ]; }));\n            --this_2.indent;\n            chunks.push(this_2.generateLabelStmt(forStmt, endLabel));\n            chunks.push(this_2.createStmtSourceNode(forStmt, function () { return \"delete \" + stepValue + \"; delete \" + endValue + \";\"; }));\n        };\n        var this_2 = this;\n        for (var i = 0; i < numForStmtStatesToClose; ++i) {\n            _loop_2(i);\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitExitForStmt = function (node) {\n        var _this = this;\n        if (this.openForStmtStates.length === 0) {\n            this.throwError(\"EXIT FOR statement outside FOR loop\", node);\n        }\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(_this.openForStmtStates[_this.openForStmtStates.length - 1].endLabel);\n        });\n    };\n    CodeGenerator.prototype.visitGosubStmt = function (node) {\n        return this.createStmtSourceNode(node, function () {\n            return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.GOSUB + \"', destLabel: '\" + node.destLabel + \"' };\";\n        });\n    };\n    CodeGenerator.prototype.visitReturnStmt = function (node) {\n        return this.createStmtSourceNode(node, function () {\n            return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.RETURN + \"'\" + (node.destLabel ? \", destLabel: '\" + node.destLabel + \"'\" : '') + \" };\";\n        });\n    };\n    CodeGenerator.prototype.visitCallStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return [\n            _this.visitProcCall(node),\n            ';',\n        ]; });\n    };\n    CodeGenerator.prototype.visitExitProcStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.EXIT_PROC + \"' };\"; });\n    };\n    CodeGenerator.prototype.visitEndStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.END + \"' };\"; });\n    };\n    CodeGenerator.prototype.visitSwapStmt = function (node) {\n        var _this = this;\n        var tempVarName = this.generateLabel() + \"_temp\";\n        return this.createStmtSourceNode(node, function () { return [\n            _this.generateTempVarRef(tempVarName),\n            ' = ',\n            _this.accept(node.leftExpr),\n            '; ',\n            _this.accept(node.leftExpr),\n            ' = ',\n            _this.accept(node.rightExpr),\n            '; ',\n            _this.accept(node.rightExpr),\n            ' = ',\n            _this.generateTempVarRef(tempVarName),\n            '; ',\n            'delete ',\n            _this.generateTempVarRef(tempVarName),\n            ';',\n        ]; });\n    };\n    CodeGenerator.prototype.visitPrintStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([\n            'await ctx.runtime.print(',\n            node.formatExpr ? _this.accept(node.formatExpr) : 'null',\n            ', '\n        ], node.args.map(function (arg) {\n            return typeof arg === 'string'\n                ? \"{ type: '\" + arg + \"' }, \"\n                : _this.createSourceNode(arg, \"{ type: '\" + compiled_code_1.PrintArgType.VALUE + \"', value: \", _this.accept(arg), ' }, ');\n        })), [\n            ');',\n        ]); });\n    };\n    CodeGenerator.prototype.visitInputStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            switch (node.inputType) {\n                case ast_1.InputType.TOKENIZED:\n                    return __spreadArray([\n                        'const results = await ctx.runtime.input(',\n                        JSON.stringify(node.prompt) + \", \",\n                        node.targetExprs\n                            .map(function (expr) { return JSON.stringify(expr.typeSpec); })\n                            .join(', '),\n                        '); '\n                    ], node.targetExprs.map(function (expr, i) {\n                        return _this.createSourceNode(expr, _this.accept(expr), \" = results[\" + i + \"]; \");\n                    }));\n                case ast_1.InputType.LINE:\n                    return _this.createSourceNode(node.targetExprs[0], _this.accept(node.targetExprs[0]), \" = await ctx.runtime.inputLine(\" + JSON.stringify(node.prompt) + \");\");\n                default:\n                    _this.throwError(\"Unknown input type: \" + JSON.stringify(node.inputType), node);\n            }\n        });\n    };\n    CodeGenerator.prototype.visitDefTypeStmt = function (node) {\n        return new source_map_1.SourceNode();\n    };\n    CodeGenerator.prototype.visitDataStmt = function (node) {\n        return this.createSourceNode(node, this.lines('{', +1, this.generateLoc(node), \"data: \" + JSON.stringify(node.data) + \",\", -1, \"},\", ''));\n    };\n    CodeGenerator.prototype.visitReadStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray([\n            'const results = await ctx.read(',\n            node.targetExprs.map(function (expr) { return JSON.stringify(expr.typeSpec); }).join(', '),\n            '); '\n        ], node.targetExprs.map(function (expr, i) {\n            return _this.createSourceNode(expr, _this.accept(expr), \" = results[\" + i + \"]; \");\n        })); });\n    };\n    CodeGenerator.prototype.visitRestoreStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"ctx.restore(\" + (node.destLabel ? \"'\" + node.destLabel + \"'\" : '') + \");\"; });\n    };\n    CodeGenerator.prototype.createStmtSourceNode = function (node, generateRunCode) {\n        return this.createSourceNode(node, this.lines('{', +1, ''), this.lines(this.generateLoc(node), ''), this.lines('async run(ctx) { '), generateRunCode(), ' },\\n', this.lines(-1, '},', ''));\n    };\n    CodeGenerator.prototype.visitLiteralExpr = function (node) {\n        var valueString;\n        if (typeof node.value === 'string') {\n            valueString = JSON.stringify(node.value);\n        }\n        else if (typeof node.value === 'number') {\n            valueString = \"\" + node.value;\n        }\n        else {\n            this.throwError(\"Unrecognized literal value: \" + JSON.stringify(node.value), node);\n        }\n        return this.createSourceNode(node, valueString);\n    };\n    CodeGenerator.prototype.visitVarRefExpr = function (node) {\n        return this.createSourceNode(node, this.generateVarRefCode(node, node.symbol));\n    };\n    CodeGenerator.prototype.visitFnCallExpr = function (node) {\n        return this.visitProcCall(node);\n    };\n    CodeGenerator.prototype.visitBinaryOpExpr = function (node) {\n        var chunks = [];\n        switch (node.op) {\n            case ast_1.BinaryOp.EXP:\n                chunks.push('Math.pow(', this.accept(node.leftExpr), ', ', this.accept(node.rightExpr), ')');\n                break;\n            case ast_1.BinaryOp.INTDIV:\n                chunks.push('Math.floor(', this.accept(node.leftExpr), ' / ', this.accept(node.rightExpr), ')');\n                break;\n            default:\n                chunks.push('(', this.accept(node.leftExpr), \" \" + BINARY_OP_MAP[node.op] + \" \", this.accept(node.rightExpr), ')');\n                break;\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitUnaryOpExpr = function (node) {\n        var _a;\n        var OP_MAP = (_a = {},\n            _a[ast_1.UnaryOp.NEG] = '-',\n            _a[ast_1.UnaryOp.NOT] = '!',\n            _a[ast_1.UnaryOp.PARENS] = '',\n            _a);\n        return this.createSourceNode(node, '(', OP_MAP[node.op], this.accept(node.rightExpr), ')');\n    };\n    CodeGenerator.prototype.visitSubscriptExpr = function (node) {\n        var _this = this;\n        return this.createSourceNode.apply(this, __spreadArray([node,\n            this.accept(node.arrayExpr),\n            '.values'], node.indexExprs.map(function (indexExpr, i) { return [\n            '[',\n            _this.generateSubscriptCode(node.arrayExpr, i, indexExpr),\n            ']',\n        ]; })));\n    };\n    CodeGenerator.prototype.generateSubscriptCode = function (arrayExpr, dimension, indexExpr) {\n        return [\n            this.accept(arrayExpr),\n            \".getIdx(\" + dimension + \", \",\n            this.accept(indexExpr),\n            ')',\n        ];\n    };\n    CodeGenerator.prototype.visitMemberExpr = function (node) {\n        return this.createSourceNode(node, this.accept(node.udtExpr), \".values['\" + node.fieldName + \"']\");\n    };\n    CodeGenerator.prototype.visitProcCall = function (node) {\n        var _a;\n        var _this = this;\n        var argPtrs = [];\n        var tempVars = [];\n        var tempVarPrefix = null;\n        var tempVarIdx = 0;\n        for (var i = 0; i < node.argExprs.length; ++i) {\n            var argExpr = node.argExprs[i];\n            var _b = node.argTypeProps[i], paramTypeSpec = _b.paramTypeSpec, shouldPassByRef = _b.shouldPassByRef;\n            if (shouldPassByRef) {\n                switch (argExpr.type) {\n                    case ast_1.ExprType.VAR_REF:\n                        argPtrs.push(this.createSourceNode(argExpr, argExpr.symbol.varType === symbol_table_1.VarType.ARG\n                            ? \"ctx.args['\" + argExpr.symbol.name + \"']\"\n                            : \"[\" + this.generateVarContainerCode(argExpr, argExpr.symbol) + \", '\" + argExpr.symbol.name + \"']\"));\n                        break;\n                    case ast_1.ExprType.SUBSCRIPT:\n                        var containerCode = this.accept(__assign(__assign({}, argExpr), { indexExprs: argExpr.indexExprs.slice(0, argExpr.indexExprs.length - 1) }));\n                        var lastIndexExprCode = this.generateSubscriptCode(argExpr.arrayExpr, argExpr.indexExprs.length - 1, argExpr.indexExprs[argExpr.indexExprs.length - 1]);\n                        argPtrs.push(this.createSourceNode(argExpr, '[', containerCode, ', ', lastIndexExprCode, ']'));\n                        break;\n                    case ast_1.ExprType.MEMBER:\n                        argPtrs.push(this.createSourceNode(argExpr, '[', this.accept(argExpr.udtExpr), '.values, ', \"'\" + argExpr.fieldName + \"']\"));\n                        break;\n                    default:\n                        this.throwError(\"Unknown pass-by-reference expression type: \" + JSON.stringify(argExpr), argExpr);\n                }\n            }\n            else {\n                if (!tempVarPrefix) {\n                    tempVarPrefix = this.generateLabel();\n                }\n                var tempVarName = tempVarPrefix + \"_\" + tempVarIdx++;\n                tempVars.push({\n                    name: tempVarName,\n                    argExpr: argExpr,\n                    paramTypeSpec: paramTypeSpec,\n                });\n                argPtrs.push(\"[ctx.tempVars, '\" + tempVarName + \"']\");\n            }\n        }\n        var executeProcCodePrefixMap = (_a = {},\n            _a[types_1.ProcDefType.BUILTIN] = 'ctx.runtime.executeBuiltinProc(' +\n                (\"'\" + node.name + \"', \" + JSON.stringify(node.argExprs.map(function (_a) {\n                    var typeSpec = _a.typeSpec;\n                    return typeSpec;\n                }))),\n            _a[types_1.ProcDefType.MODULE] = \"ctx.executeProc(ctx, '\" + node.name + \"'\",\n            _a);\n        return this.createSourceNode.apply(this, __spreadArray(__spreadArray([node,\n            '(await (async () => {\\n',\n            this.lines(+1)], tempVars.map(function (_a) {\n            var name = _a.name, argExpr = _a.argExpr, paramTypeSpec = _a.paramTypeSpec;\n            return [\n                _this.lines(_this.generateTempVarRef(name) + \" = \"),\n                _this.generateAssignableValueCode(argExpr, paramTypeSpec),\n                ';\\n',\n            ];\n        })), [this.lines.apply(this, __spreadArray(__spreadArray([\"const result = await \" + executeProcCodePrefixMap[node.procDefType] + \", \" + argPtrs.join(', ') + \");\"], tempVars.map(function (_a) {\n                var name = _a.name;\n                return \"delete \" + _this.generateTempVarRef(name) + \";\";\n            })), ['return result;',\n                -1,\n                '})())']))]));\n    };\n    CodeGenerator.prototype.createSourceNode = function (node) {\n        var chunks = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            chunks[_i - 1] = arguments[_i];\n        }\n        return new source_map_1.SourceNode(node.loc.line, node.loc.col, this.opts.sourceFileName, lodash_1.default.flattenDeep(chunks));\n    };\n    CodeGenerator.prototype.lines = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        var outputLines = [];\n        for (var _a = 0, values_1 = values; _a < values_1.length; _a++) {\n            var value = values_1[_a];\n            if (typeof value === 'string') {\n                var indentStr = value\n                    ? ' '.repeat(this.opts.indentWidth * this.indent)\n                    : '';\n                outputLines.push(indentStr + value);\n            }\n            else if (typeof value === 'number') {\n                this.indent += value;\n            }\n            else {\n                throw new Error(\"Unexpected line value: \" + JSON.stringify(value));\n            }\n        }\n        return outputLines.join('\\n');\n    };\n    CodeGenerator.prototype.generateLabel = function () {\n        return \"$\" + this.nextGeneratedLabelIdx++;\n    };\n    CodeGenerator.prototype.generateLoc = function (node) {\n        return node.loc ? \"loc: [\" + node.loc.line + \", \" + node.loc.col + \"],\" : '';\n    };\n    CodeGenerator.prototype.generateLabelStmt = function (node, label) {\n        return this.lines.apply(this, __spreadArray(__spreadArray(['{',\n            +1], (node ? [this.generateLoc(node)] : [])), [\"label: '\" + label + \"',\", -1, \"},\", '']));\n    };\n    CodeGenerator.prototype.generateVarRefCode = function (node, symbol) {\n        var varContainer = this.generateVarContainerCode(node, symbol);\n        if (symbol.varType === symbol_table_1.VarType.ARG) {\n            return varContainer + \"['\" + symbol.name + \"'][0][\" + varContainer + \"['\" + symbol.name + \"'][1]]\";\n        }\n        else {\n            return varContainer + \"['\" + symbol.name + \"']\";\n        }\n    };\n    CodeGenerator.prototype.generateVarContainerCode = function (node, symbol) {\n        if (symbol.varType === symbol_table_1.VarType.ARG) {\n            return 'ctx.args';\n        }\n        else if (symbol.varScope === symbol_table_1.VarScope.LOCAL) {\n            switch (symbol.varType) {\n                case symbol_table_1.VarType.STATIC_VAR:\n                    return 'ctx.localStaticVars';\n                case symbol_table_1.VarType.VAR:\n                case symbol_table_1.VarType.CONST:\n                    return 'ctx.localVars';\n                default:\n                    this.throwError(\"Unexpected local var type: \" + JSON.stringify(symbol.varType), node);\n            }\n        }\n        else if (symbol.varScope === symbol_table_1.VarScope.GLOBAL) {\n            return 'ctx.globalVars';\n        }\n        else {\n            this.throwError(\"Unknown variable type or scope: \" + JSON.stringify(symbol), node);\n        }\n    };\n    CodeGenerator.prototype.generateAssignableValueCode = function (valueExpr, targetTypeSpec) {\n        var valueTypeSpec = valueExpr.typeSpec;\n        var valueCode = this.accept(valueExpr);\n        if (types_1.isIntegral(targetTypeSpec) && !types_1.isIntegral(valueTypeSpec)) {\n            return ['ctx.runtime.roundHalfToEven(', valueCode, ')'];\n        }\n        else if (types_1.isUdt(targetTypeSpec)) {\n            return [valueCode, '.clone()'];\n        }\n        else {\n            return valueCode;\n        }\n    };\n    CodeGenerator.prototype.generateGotoCode = function (destLabel) {\n        return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.GOTO + \"', destLabel: '\" + destLabel + \"' };\";\n    };\n    CodeGenerator.prototype.generateTempVarRef = function (label) {\n        return \"ctx.tempVars['\" + label + \"']\";\n    };\n    return CodeGenerator;\n}(ast_1.AstVisitor));\nexports.CodeGenerator = CodeGenerator;\nfunction codegen(module, opts) {\n    if (opts === void 0) { opts = {}; }\n    return new CodeGenerator(module, opts).run();\n}\nexports.default = codegen;\n","module.exports = { default: \"/******/ (() => { // webpackBootstrap\\n/******/ \\tvar __webpack_modules__ = ({\\n\\n/***/ 575:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\n\\nconst ansiEscapes = module.exports;\\n// TODO: remove this in the next major version\\nmodule.exports.default = ansiEscapes;\\n\\nconst ESC = '\\\\u001B[';\\nconst OSC = '\\\\u001B]';\\nconst BEL = '\\\\u0007';\\nconst SEP = ';';\\nconst isTerminalApp = process.env.TERM_PROGRAM === 'Apple_Terminal';\\n\\nansiEscapes.cursorTo = (x, y) => {\\n\\tif (typeof x !== 'number') {\\n\\t\\tthrow new TypeError('The `x` argument is required');\\n\\t}\\n\\n\\tif (typeof y !== 'number') {\\n\\t\\treturn ESC + (x + 1) + 'G';\\n\\t}\\n\\n\\treturn ESC + (y + 1) + ';' + (x + 1) + 'H';\\n};\\n\\nansiEscapes.cursorMove = (x, y) => {\\n\\tif (typeof x !== 'number') {\\n\\t\\tthrow new TypeError('The `x` argument is required');\\n\\t}\\n\\n\\tlet ret = '';\\n\\n\\tif (x < 0) {\\n\\t\\tret += ESC + (-x) + 'D';\\n\\t} else if (x > 0) {\\n\\t\\tret += ESC + x + 'C';\\n\\t}\\n\\n\\tif (y < 0) {\\n\\t\\tret += ESC + (-y) + 'A';\\n\\t} else if (y > 0) {\\n\\t\\tret += ESC + y + 'B';\\n\\t}\\n\\n\\treturn ret;\\n};\\n\\nansiEscapes.cursorUp = (count = 1) => ESC + count + 'A';\\nansiEscapes.cursorDown = (count = 1) => ESC + count + 'B';\\nansiEscapes.cursorForward = (count = 1) => ESC + count + 'C';\\nansiEscapes.cursorBackward = (count = 1) => ESC + count + 'D';\\n\\nansiEscapes.cursorLeft = ESC + 'G';\\nansiEscapes.cursorSavePosition = isTerminalApp ? '\\\\u001B7' : ESC + 's';\\nansiEscapes.cursorRestorePosition = isTerminalApp ? '\\\\u001B8' : ESC + 'u';\\nansiEscapes.cursorGetPosition = ESC + '6n';\\nansiEscapes.cursorNextLine = ESC + 'E';\\nansiEscapes.cursorPrevLine = ESC + 'F';\\nansiEscapes.cursorHide = ESC + '?25l';\\nansiEscapes.cursorShow = ESC + '?25h';\\n\\nansiEscapes.eraseLines = count => {\\n\\tlet clear = '';\\n\\n\\tfor (let i = 0; i < count; i++) {\\n\\t\\tclear += ansiEscapes.eraseLine + (i < count - 1 ? ansiEscapes.cursorUp() : '');\\n\\t}\\n\\n\\tif (count) {\\n\\t\\tclear += ansiEscapes.cursorLeft;\\n\\t}\\n\\n\\treturn clear;\\n};\\n\\nansiEscapes.eraseEndLine = ESC + 'K';\\nansiEscapes.eraseStartLine = ESC + '1K';\\nansiEscapes.eraseLine = ESC + '2K';\\nansiEscapes.eraseDown = ESC + 'J';\\nansiEscapes.eraseUp = ESC + '1J';\\nansiEscapes.eraseScreen = ESC + '2J';\\nansiEscapes.scrollUp = ESC + 'S';\\nansiEscapes.scrollDown = ESC + 'T';\\n\\nansiEscapes.clearScreen = '\\\\u001Bc';\\n\\nansiEscapes.clearTerminal = process.platform === 'win32' ?\\n\\t`${ansiEscapes.eraseScreen}${ESC}0f` :\\n\\t// 1. Erases the screen (Only done in case `2` is not supported)\\n\\t// 2. Erases the whole screen including scrollback buffer\\n\\t// 3. Moves cursor to the top-left position\\n\\t// More info: https://www.real-world-systems.com/docs/ANSIcode.html\\n\\t`${ansiEscapes.eraseScreen}${ESC}3J${ESC}H`;\\n\\nansiEscapes.beep = BEL;\\n\\nansiEscapes.link = (text, url) => {\\n\\treturn [\\n\\t\\tOSC,\\n\\t\\t'8',\\n\\t\\tSEP,\\n\\t\\tSEP,\\n\\t\\turl,\\n\\t\\tBEL,\\n\\t\\ttext,\\n\\t\\tOSC,\\n\\t\\t'8',\\n\\t\\tSEP,\\n\\t\\tSEP,\\n\\t\\tBEL\\n\\t].join('');\\n};\\n\\nansiEscapes.image = (buffer, options = {}) => {\\n\\tlet ret = `${OSC}1337;File=inline=1`;\\n\\n\\tif (options.width) {\\n\\t\\tret += `;width=${options.width}`;\\n\\t}\\n\\n\\tif (options.height) {\\n\\t\\tret += `;height=${options.height}`;\\n\\t}\\n\\n\\tif (options.preserveAspectRatio === false) {\\n\\t\\tret += ';preserveAspectRatio=0';\\n\\t}\\n\\n\\treturn ret + ':' + buffer.toString('base64') + BEL;\\n};\\n\\nansiEscapes.iTerm = {\\n\\tsetCwd: (cwd = process.cwd()) => `${OSC}50;CurrentDir=${cwd}${BEL}`,\\n\\n\\tannotation: (message, options = {}) => {\\n\\t\\tlet ret = `${OSC}1337;`;\\n\\n\\t\\tconst hasX = typeof options.x !== 'undefined';\\n\\t\\tconst hasY = typeof options.y !== 'undefined';\\n\\t\\tif ((hasX || hasY) && !(hasX && hasY && typeof options.length !== 'undefined')) {\\n\\t\\t\\tthrow new Error('`x`, `y` and `length` must be defined when `x` or `y` is defined');\\n\\t\\t}\\n\\n\\t\\tmessage = message.replace(/\\\\|/g, '');\\n\\n\\t\\tret += options.isHidden ? 'AddHiddenAnnotation=' : 'AddAnnotation=';\\n\\n\\t\\tif (options.length > 0) {\\n\\t\\t\\tret +=\\n\\t\\t\\t\\t\\t(hasX ?\\n\\t\\t\\t\\t\\t\\t[message, options.length, options.x, options.y] :\\n\\t\\t\\t\\t\\t\\t[options.length, message]).join('|');\\n\\t\\t} else {\\n\\t\\t\\tret += message;\\n\\t\\t}\\n\\n\\t\\treturn ret + BEL;\\n\\t}\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 566:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n/* module decorator */ module = __nccwpck_require__.nmd(module);\\n\\n\\nconst ANSI_BACKGROUND_OFFSET = 10;\\n\\nconst wrapAnsi256 = (offset = 0) => code => `\\\\u001B[${38 + offset};5;${code}m`;\\n\\nconst wrapAnsi16m = (offset = 0) => (red, green, blue) => `\\\\u001B[${38 + offset};2;${red};${green};${blue}m`;\\n\\nfunction assembleStyles() {\\n\\tconst codes = new Map();\\n\\tconst styles = {\\n\\t\\tmodifier: {\\n\\t\\t\\treset: [0, 0],\\n\\t\\t\\t// 21 isn't widely supported and 22 does the same thing\\n\\t\\t\\tbold: [1, 22],\\n\\t\\t\\tdim: [2, 22],\\n\\t\\t\\titalic: [3, 23],\\n\\t\\t\\tunderline: [4, 24],\\n\\t\\t\\toverline: [53, 55],\\n\\t\\t\\tinverse: [7, 27],\\n\\t\\t\\thidden: [8, 28],\\n\\t\\t\\tstrikethrough: [9, 29]\\n\\t\\t},\\n\\t\\tcolor: {\\n\\t\\t\\tblack: [30, 39],\\n\\t\\t\\tred: [31, 39],\\n\\t\\t\\tgreen: [32, 39],\\n\\t\\t\\tyellow: [33, 39],\\n\\t\\t\\tblue: [34, 39],\\n\\t\\t\\tmagenta: [35, 39],\\n\\t\\t\\tcyan: [36, 39],\\n\\t\\t\\twhite: [37, 39],\\n\\n\\t\\t\\t// Bright color\\n\\t\\t\\tblackBright: [90, 39],\\n\\t\\t\\tredBright: [91, 39],\\n\\t\\t\\tgreenBright: [92, 39],\\n\\t\\t\\tyellowBright: [93, 39],\\n\\t\\t\\tblueBright: [94, 39],\\n\\t\\t\\tmagentaBright: [95, 39],\\n\\t\\t\\tcyanBright: [96, 39],\\n\\t\\t\\twhiteBright: [97, 39]\\n\\t\\t},\\n\\t\\tbgColor: {\\n\\t\\t\\tbgBlack: [40, 49],\\n\\t\\t\\tbgRed: [41, 49],\\n\\t\\t\\tbgGreen: [42, 49],\\n\\t\\t\\tbgYellow: [43, 49],\\n\\t\\t\\tbgBlue: [44, 49],\\n\\t\\t\\tbgMagenta: [45, 49],\\n\\t\\t\\tbgCyan: [46, 49],\\n\\t\\t\\tbgWhite: [47, 49],\\n\\n\\t\\t\\t// Bright color\\n\\t\\t\\tbgBlackBright: [100, 49],\\n\\t\\t\\tbgRedBright: [101, 49],\\n\\t\\t\\tbgGreenBright: [102, 49],\\n\\t\\t\\tbgYellowBright: [103, 49],\\n\\t\\t\\tbgBlueBright: [104, 49],\\n\\t\\t\\tbgMagentaBright: [105, 49],\\n\\t\\t\\tbgCyanBright: [106, 49],\\n\\t\\t\\tbgWhiteBright: [107, 49]\\n\\t\\t}\\n\\t};\\n\\n\\t// Alias bright black as gray (and grey)\\n\\tstyles.color.gray = styles.color.blackBright;\\n\\tstyles.bgColor.bgGray = styles.bgColor.bgBlackBright;\\n\\tstyles.color.grey = styles.color.blackBright;\\n\\tstyles.bgColor.bgGrey = styles.bgColor.bgBlackBright;\\n\\n\\tfor (const [groupName, group] of Object.entries(styles)) {\\n\\t\\tfor (const [styleName, style] of Object.entries(group)) {\\n\\t\\t\\tstyles[styleName] = {\\n\\t\\t\\t\\topen: `\\\\u001B[${style[0]}m`,\\n\\t\\t\\t\\tclose: `\\\\u001B[${style[1]}m`\\n\\t\\t\\t};\\n\\n\\t\\t\\tgroup[styleName] = styles[styleName];\\n\\n\\t\\t\\tcodes.set(style[0], style[1]);\\n\\t\\t}\\n\\n\\t\\tObject.defineProperty(styles, groupName, {\\n\\t\\t\\tvalue: group,\\n\\t\\t\\tenumerable: false\\n\\t\\t});\\n\\t}\\n\\n\\tObject.defineProperty(styles, 'codes', {\\n\\t\\tvalue: codes,\\n\\t\\tenumerable: false\\n\\t});\\n\\n\\tstyles.color.close = '\\\\u001B[39m';\\n\\tstyles.bgColor.close = '\\\\u001B[49m';\\n\\n\\tstyles.color.ansi256 = wrapAnsi256();\\n\\tstyles.color.ansi16m = wrapAnsi16m();\\n\\tstyles.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);\\n\\tstyles.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);\\n\\n\\t// From https://github.com/Qix-/color-convert/blob/3f0e0d4e92e235796ccb17f6e85c72094a651f49/conversions.js\\n\\tObject.defineProperties(styles, {\\n\\t\\trgbToAnsi256: {\\n\\t\\t\\tvalue: (red, green, blue) => {\\n\\t\\t\\t\\t// We use the extended greyscale palette here, with the exception of\\n\\t\\t\\t\\t// black and white. normal palette only has 4 greyscale shades.\\n\\t\\t\\t\\tif (red === green && green === blue) {\\n\\t\\t\\t\\t\\tif (red < 8) {\\n\\t\\t\\t\\t\\t\\treturn 16;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (red > 248) {\\n\\t\\t\\t\\t\\t\\treturn 231;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn Math.round(((red - 8) / 247) * 24) + 232;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn 16 +\\n\\t\\t\\t\\t\\t(36 * Math.round(red / 255 * 5)) +\\n\\t\\t\\t\\t\\t(6 * Math.round(green / 255 * 5)) +\\n\\t\\t\\t\\t\\tMath.round(blue / 255 * 5);\\n\\t\\t\\t},\\n\\t\\t\\tenumerable: false\\n\\t\\t},\\n\\t\\thexToRgb: {\\n\\t\\t\\tvalue: hex => {\\n\\t\\t\\t\\tconst matches = /(?<colorString>[a-f\\\\d]{6}|[a-f\\\\d]{3})/i.exec(hex.toString(16));\\n\\t\\t\\t\\tif (!matches) {\\n\\t\\t\\t\\t\\treturn [0, 0, 0];\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tlet {colorString} = matches.groups;\\n\\n\\t\\t\\t\\tif (colorString.length === 3) {\\n\\t\\t\\t\\t\\tcolorString = colorString.split('').map(character => character + character).join('');\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst integer = Number.parseInt(colorString, 16);\\n\\n\\t\\t\\t\\treturn [\\n\\t\\t\\t\\t\\t(integer >> 16) & 0xFF,\\n\\t\\t\\t\\t\\t(integer >> 8) & 0xFF,\\n\\t\\t\\t\\t\\tinteger & 0xFF\\n\\t\\t\\t\\t];\\n\\t\\t\\t},\\n\\t\\t\\tenumerable: false\\n\\t\\t},\\n\\t\\thexToAnsi256: {\\n\\t\\t\\tvalue: hex => styles.rgbToAnsi256(...styles.hexToRgb(hex)),\\n\\t\\t\\tenumerable: false\\n\\t\\t}\\n\\t});\\n\\n\\treturn styles;\\n}\\n\\n// Make the export immutable\\nObject.defineProperty(module, 'exports', {\\n\\tenumerable: true,\\n\\tget: assembleStyles\\n});\\n\\n\\n/***/ }),\\n\\n/***/ 721:\\n/***/ ((module) => {\\n\\nvar hasOwn = Object.prototype.hasOwnProperty;\\nvar toString = Object.prototype.toString;\\n\\nfunction isPlainObject(obj) {\\n\\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval)\\n\\t\\treturn false;\\n\\n\\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\\n\\tvar has_is_property_of_method = hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\\n\\t// Not own constructor property must be Object\\n\\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method)\\n\\t\\treturn false;\\n\\n\\t// Own properties are enumerated firstly, so to speed up,\\n\\t// if last one is own, then all properties are own.\\n\\tvar key;\\n\\tfor ( key in obj ) {}\\n\\n\\treturn key === undefined || hasOwn.call( obj, key );\\n};\\n\\nmodule.exports = function extend() {\\n\\tvar options, name, src, copy, copyIsArray, clone,\\n\\t    target = arguments[0] || {},\\n\\t    i = 1,\\n\\t    length = arguments.length,\\n\\t    deep = false;\\n\\n\\t// Handle a deep copy situation\\n\\tif ( typeof target === \\\"boolean\\\" ) {\\n\\t\\tdeep = target;\\n\\t\\ttarget = arguments[1] || {};\\n\\t\\t// skip the boolean and the target\\n\\t\\ti = 2;\\n\\t}\\n\\n\\t// Handle case when target is a string or something (possible in deep copy)\\n\\tif ( typeof target !== \\\"object\\\" && typeof target !== \\\"function\\\") {\\n\\t\\ttarget = {};\\n\\t}\\n\\n\\tfor ( ; i < length; i++ ) {\\n\\t\\t// Only deal with non-null/undefined values\\n\\t\\tif ( (options = arguments[ i ]) != null ) {\\n\\t\\t\\t// Extend the base object\\n\\t\\t\\tfor ( name in options ) {\\n\\t\\t\\t\\tsrc = target[ name ];\\n\\t\\t\\t\\tcopy = options[ name ];\\n\\n\\t\\t\\t\\t// Prevent never-ending loop\\n\\t\\t\\t\\tif ( target === copy ) {\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// Recurse if we're merging plain objects or arrays\\n\\t\\t\\t\\tif ( deep && copy && ( isPlainObject(copy) || (copyIsArray = Array.isArray(copy)) ) ) {\\n\\t\\t\\t\\t\\tif ( copyIsArray ) {\\n\\t\\t\\t\\t\\t\\tcopyIsArray = false;\\n\\t\\t\\t\\t\\t\\tclone = src && Array.isArray(src) ? src : [];\\n\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tclone = src && isPlainObject(src) ? src : {};\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Never move original objects, clone them\\n\\t\\t\\t\\t\\ttarget[ name ] = extend( deep, clone, copy );\\n\\n\\t\\t\\t\\t// Don't bring in undefined values\\n\\t\\t\\t\\t} else if ( copy !== undefined ) {\\n\\t\\t\\t\\t\\ttarget[ name ] = copy;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t// Return the modified object\\n\\treturn target;\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 357:\\n/***/ (function(module) {\\n\\n(function(root, factory) {\\n  if (typeof define === 'function' && define.amd) {\\n    define([], factory) /* global define */\\n  } else if ( true && module.exports) {\\n    module.exports = factory()\\n  } else {\\n    root.moo = factory()\\n  }\\n}(this, function() {\\n  'use strict';\\n\\n  var hasOwnProperty = Object.prototype.hasOwnProperty\\n  var toString = Object.prototype.toString\\n  var hasSticky = typeof new RegExp().sticky === 'boolean'\\n\\n  /***************************************************************************/\\n\\n  function isRegExp(o) { return o && toString.call(o) === '[object RegExp]' }\\n  function isObject(o) { return o && typeof o === 'object' && !isRegExp(o) && !Array.isArray(o) }\\n\\n  function reEscape(s) {\\n    return s.replace(/[-\\\\/\\\\\\\\^$*+?.()|[\\\\]{}]/g, '\\\\\\\\$&')\\n  }\\n  function reGroups(s) {\\n    var re = new RegExp('|' + s)\\n    return re.exec('').length - 1\\n  }\\n  function reCapture(s) {\\n    return '(' + s + ')'\\n  }\\n  function reUnion(regexps) {\\n    if (!regexps.length) return '(?!)'\\n    var source =  regexps.map(function(s) {\\n      return \\\"(?:\\\" + s + \\\")\\\"\\n    }).join('|')\\n    return \\\"(?:\\\" + source + \\\")\\\"\\n  }\\n\\n  function regexpOrLiteral(obj) {\\n    if (typeof obj === 'string') {\\n      return '(?:' + reEscape(obj) + ')'\\n\\n    } else if (isRegExp(obj)) {\\n      // TODO: consider /u support\\n      if (obj.ignoreCase) throw new Error('RegExp /i flag not allowed')\\n      if (obj.global) throw new Error('RegExp /g flag is implied')\\n      if (obj.sticky) throw new Error('RegExp /y flag is implied')\\n      if (obj.multiline) throw new Error('RegExp /m flag is implied')\\n      return obj.source\\n\\n    } else {\\n      throw new Error('Not a pattern: ' + obj)\\n    }\\n  }\\n\\n  function objectToRules(object) {\\n    var keys = Object.getOwnPropertyNames(object)\\n    var result = []\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      var thing = object[key]\\n      var rules = [].concat(thing)\\n      if (key === 'include') {\\n        for (var j = 0; j < rules.length; j++) {\\n          result.push({include: rules[j]})\\n        }\\n        continue\\n      }\\n      var match = []\\n      rules.forEach(function(rule) {\\n        if (isObject(rule)) {\\n          if (match.length) result.push(ruleOptions(key, match))\\n          result.push(ruleOptions(key, rule))\\n          match = []\\n        } else {\\n          match.push(rule)\\n        }\\n      })\\n      if (match.length) result.push(ruleOptions(key, match))\\n    }\\n    return result\\n  }\\n\\n  function arrayToRules(array) {\\n    var result = []\\n    for (var i = 0; i < array.length; i++) {\\n      var obj = array[i]\\n      if (obj.include) {\\n        var include = [].concat(obj.include)\\n        for (var j = 0; j < include.length; j++) {\\n          result.push({include: include[j]})\\n        }\\n        continue\\n      }\\n      if (!obj.type) {\\n        throw new Error('Rule has no type: ' + JSON.stringify(obj))\\n      }\\n      result.push(ruleOptions(obj.type, obj))\\n    }\\n    return result\\n  }\\n\\n  function ruleOptions(type, obj) {\\n    if (!isObject(obj)) {\\n      obj = { match: obj }\\n    }\\n    if (obj.include) {\\n      throw new Error('Matching rules cannot also include states')\\n    }\\n\\n    // nb. error and fallback imply lineBreaks\\n    var options = {\\n      defaultType: type,\\n      lineBreaks: !!obj.error || !!obj.fallback,\\n      pop: false,\\n      next: null,\\n      push: null,\\n      error: false,\\n      fallback: false,\\n      value: null,\\n      type: null,\\n      shouldThrow: false,\\n    }\\n\\n    // Avoid Object.assign(), so we support IE9+\\n    for (var key in obj) {\\n      if (hasOwnProperty.call(obj, key)) {\\n        options[key] = obj[key]\\n      }\\n    }\\n\\n    // type transform cannot be a string\\n    if (typeof options.type === 'string' && type !== options.type) {\\n      throw new Error(\\\"Type transform cannot be a string (type '\\\" + options.type + \\\"' for token '\\\" + type + \\\"')\\\")\\n    }\\n\\n    // convert to array\\n    var match = options.match\\n    options.match = Array.isArray(match) ? match : match ? [match] : []\\n    options.match.sort(function(a, b) {\\n      return isRegExp(a) && isRegExp(b) ? 0\\n           : isRegExp(b) ? -1 : isRegExp(a) ? +1 : b.length - a.length\\n    })\\n    return options\\n  }\\n\\n  function toRules(spec) {\\n    return Array.isArray(spec) ? arrayToRules(spec) : objectToRules(spec)\\n  }\\n\\n  var defaultErrorRule = ruleOptions('error', {lineBreaks: true, shouldThrow: true})\\n  function compileRules(rules, hasStates) {\\n    var errorRule = null\\n    var fast = Object.create(null)\\n    var fastAllowed = true\\n    var unicodeFlag = null\\n    var groups = []\\n    var parts = []\\n\\n    // If there is a fallback rule, then disable fast matching\\n    for (var i = 0; i < rules.length; i++) {\\n      if (rules[i].fallback) {\\n        fastAllowed = false\\n      }\\n    }\\n\\n    for (var i = 0; i < rules.length; i++) {\\n      var options = rules[i]\\n\\n      if (options.include) {\\n        // all valid inclusions are removed by states() preprocessor\\n        throw new Error('Inheritance is not allowed in stateless lexers')\\n      }\\n\\n      if (options.error || options.fallback) {\\n        // errorRule can only be set once\\n        if (errorRule) {\\n          if (!options.fallback === !errorRule.fallback) {\\n            throw new Error(\\\"Multiple \\\" + (options.fallback ? \\\"fallback\\\" : \\\"error\\\") + \\\" rules not allowed (for token '\\\" + options.defaultType + \\\"')\\\")\\n          } else {\\n            throw new Error(\\\"fallback and error are mutually exclusive (for token '\\\" + options.defaultType + \\\"')\\\")\\n          }\\n        }\\n        errorRule = options\\n      }\\n\\n      var match = options.match.slice()\\n      if (fastAllowed) {\\n        while (match.length && typeof match[0] === 'string' && match[0].length === 1) {\\n          var word = match.shift()\\n          fast[word.charCodeAt(0)] = options\\n        }\\n      }\\n\\n      // Warn about inappropriate state-switching options\\n      if (options.pop || options.push || options.next) {\\n        if (!hasStates) {\\n          throw new Error(\\\"State-switching options are not allowed in stateless lexers (for token '\\\" + options.defaultType + \\\"')\\\")\\n        }\\n        if (options.fallback) {\\n          throw new Error(\\\"State-switching options are not allowed on fallback tokens (for token '\\\" + options.defaultType + \\\"')\\\")\\n        }\\n      }\\n\\n      // Only rules with a .match are included in the RegExp\\n      if (match.length === 0) {\\n        continue\\n      }\\n      fastAllowed = false\\n\\n      groups.push(options)\\n\\n      // Check unicode flag is used everywhere or nowhere\\n      for (var j = 0; j < match.length; j++) {\\n        var obj = match[j]\\n        if (!isRegExp(obj)) {\\n          continue\\n        }\\n\\n        if (unicodeFlag === null) {\\n          unicodeFlag = obj.unicode\\n        } else if (unicodeFlag !== obj.unicode && options.fallback === false) {\\n          throw new Error('If one rule is /u then all must be')\\n        }\\n      }\\n\\n      // convert to RegExp\\n      var pat = reUnion(match.map(regexpOrLiteral))\\n\\n      // validate\\n      var regexp = new RegExp(pat)\\n      if (regexp.test(\\\"\\\")) {\\n        throw new Error(\\\"RegExp matches empty string: \\\" + regexp)\\n      }\\n      var groupCount = reGroups(pat)\\n      if (groupCount > 0) {\\n        throw new Error(\\\"RegExp has capture groups: \\\" + regexp + \\\"\\\\nUse (?:  ) instead\\\")\\n      }\\n\\n      // try and detect rules matching newlines\\n      if (!options.lineBreaks && regexp.test('\\\\n')) {\\n        throw new Error('Rule should declare lineBreaks: ' + regexp)\\n      }\\n\\n      // store regex\\n      parts.push(reCapture(pat))\\n    }\\n\\n\\n    // If there's no fallback rule, use the sticky flag so we only look for\\n    // matches at the current index.\\n    //\\n    // If we don't support the sticky flag, then fake it using an irrefutable\\n    // match (i.e. an empty pattern).\\n    var fallbackRule = errorRule && errorRule.fallback\\n    var flags = hasSticky && !fallbackRule ? 'ym' : 'gm'\\n    var suffix = hasSticky || fallbackRule ? '' : '|'\\n\\n    if (unicodeFlag === true) flags += \\\"u\\\"\\n    var combined = new RegExp(reUnion(parts) + suffix, flags)\\n    return {regexp: combined, groups: groups, fast: fast, error: errorRule || defaultErrorRule}\\n  }\\n\\n  function compile(rules) {\\n    var result = compileRules(toRules(rules))\\n    return new Lexer({start: result}, 'start')\\n  }\\n\\n  function checkStateGroup(g, name, map) {\\n    var state = g && (g.push || g.next)\\n    if (state && !map[state]) {\\n      throw new Error(\\\"Missing state '\\\" + state + \\\"' (in token '\\\" + g.defaultType + \\\"' of state '\\\" + name + \\\"')\\\")\\n    }\\n    if (g && g.pop && +g.pop !== 1) {\\n      throw new Error(\\\"pop must be 1 (in token '\\\" + g.defaultType + \\\"' of state '\\\" + name + \\\"')\\\")\\n    }\\n  }\\n  function compileStates(states, start) {\\n    var all = states.$all ? toRules(states.$all) : []\\n    delete states.$all\\n\\n    var keys = Object.getOwnPropertyNames(states)\\n    if (!start) start = keys[0]\\n\\n    var ruleMap = Object.create(null)\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      ruleMap[key] = toRules(states[key]).concat(all)\\n    }\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      var rules = ruleMap[key]\\n      var included = Object.create(null)\\n      for (var j = 0; j < rules.length; j++) {\\n        var rule = rules[j]\\n        if (!rule.include) continue\\n        var splice = [j, 1]\\n        if (rule.include !== key && !included[rule.include]) {\\n          included[rule.include] = true\\n          var newRules = ruleMap[rule.include]\\n          if (!newRules) {\\n            throw new Error(\\\"Cannot include nonexistent state '\\\" + rule.include + \\\"' (in state '\\\" + key + \\\"')\\\")\\n          }\\n          for (var k = 0; k < newRules.length; k++) {\\n            var newRule = newRules[k]\\n            if (rules.indexOf(newRule) !== -1) continue\\n            splice.push(newRule)\\n          }\\n        }\\n        rules.splice.apply(rules, splice)\\n        j--\\n      }\\n    }\\n\\n    var map = Object.create(null)\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      map[key] = compileRules(ruleMap[key], true)\\n    }\\n\\n    for (var i = 0; i < keys.length; i++) {\\n      var name = keys[i]\\n      var state = map[name]\\n      var groups = state.groups\\n      for (var j = 0; j < groups.length; j++) {\\n        checkStateGroup(groups[j], name, map)\\n      }\\n      var fastKeys = Object.getOwnPropertyNames(state.fast)\\n      for (var j = 0; j < fastKeys.length; j++) {\\n        checkStateGroup(state.fast[fastKeys[j]], name, map)\\n      }\\n    }\\n\\n    return new Lexer(map, start)\\n  }\\n\\n  function keywordTransform(map) {\\n    var reverseMap = Object.create(null)\\n    var byLength = Object.create(null)\\n    var types = Object.getOwnPropertyNames(map)\\n    for (var i = 0; i < types.length; i++) {\\n      var tokenType = types[i]\\n      var item = map[tokenType]\\n      var keywordList = Array.isArray(item) ? item : [item]\\n      keywordList.forEach(function(keyword) {\\n        (byLength[keyword.length] = byLength[keyword.length] || []).push(keyword)\\n        if (typeof keyword !== 'string') {\\n          throw new Error(\\\"keyword must be string (in keyword '\\\" + tokenType + \\\"')\\\")\\n        }\\n        reverseMap[keyword] = tokenType\\n      })\\n    }\\n\\n    // fast string lookup\\n    // https://jsperf.com/string-lookups\\n    function str(x) { return JSON.stringify(x) }\\n    var source = ''\\n    source += 'switch (value.length) {\\\\n'\\n    for (var length in byLength) {\\n      var keywords = byLength[length]\\n      source += 'case ' + length + ':\\\\n'\\n      source += 'switch (value) {\\\\n'\\n      keywords.forEach(function(keyword) {\\n        var tokenType = reverseMap[keyword]\\n        source += 'case ' + str(keyword) + ': return ' + str(tokenType) + '\\\\n'\\n      })\\n      source += '}\\\\n'\\n    }\\n    source += '}\\\\n'\\n    return Function('value', source) // type\\n  }\\n\\n  /***************************************************************************/\\n\\n  var Lexer = function(states, state) {\\n    this.startState = state\\n    this.states = states\\n    this.buffer = ''\\n    this.stack = []\\n    this.reset()\\n  }\\n\\n  Lexer.prototype.reset = function(data, info) {\\n    this.buffer = data || ''\\n    this.index = 0\\n    this.line = info ? info.line : 1\\n    this.col = info ? info.col : 1\\n    this.queuedToken = info ? info.queuedToken : null\\n    this.queuedThrow = info ? info.queuedThrow : null\\n    this.setState(info ? info.state : this.startState)\\n    this.stack = info && info.stack ? info.stack.slice() : []\\n    return this\\n  }\\n\\n  Lexer.prototype.save = function() {\\n    return {\\n      line: this.line,\\n      col: this.col,\\n      state: this.state,\\n      stack: this.stack.slice(),\\n      queuedToken: this.queuedToken,\\n      queuedThrow: this.queuedThrow,\\n    }\\n  }\\n\\n  Lexer.prototype.setState = function(state) {\\n    if (!state || this.state === state) return\\n    this.state = state\\n    var info = this.states[state]\\n    this.groups = info.groups\\n    this.error = info.error\\n    this.re = info.regexp\\n    this.fast = info.fast\\n  }\\n\\n  Lexer.prototype.popState = function() {\\n    this.setState(this.stack.pop())\\n  }\\n\\n  Lexer.prototype.pushState = function(state) {\\n    this.stack.push(this.state)\\n    this.setState(state)\\n  }\\n\\n  var eat = hasSticky ? function(re, buffer) { // assume re is /y\\n    return re.exec(buffer)\\n  } : function(re, buffer) { // assume re is /g\\n    var match = re.exec(buffer)\\n    // will always match, since we used the |(?:) trick\\n    if (match[0].length === 0) {\\n      return null\\n    }\\n    return match\\n  }\\n\\n  Lexer.prototype._getGroup = function(match) {\\n    var groupCount = this.groups.length\\n    for (var i = 0; i < groupCount; i++) {\\n      if (match[i + 1] !== undefined) {\\n        return this.groups[i]\\n      }\\n    }\\n    throw new Error('Cannot find token type for matched text')\\n  }\\n\\n  function tokenToString() {\\n    return this.value\\n  }\\n\\n  Lexer.prototype.next = function() {\\n    var index = this.index\\n\\n    // If a fallback token matched, we don't need to re-run the RegExp\\n    if (this.queuedGroup) {\\n      var token = this._token(this.queuedGroup, this.queuedText, index)\\n      this.queuedGroup = null\\n      this.queuedText = \\\"\\\"\\n      return token\\n    }\\n\\n    var buffer = this.buffer\\n    if (index === buffer.length) {\\n      return // EOF\\n    }\\n\\n    // Fast matching for single characters\\n    var group = this.fast[buffer.charCodeAt(index)]\\n    if (group) {\\n      return this._token(group, buffer.charAt(index), index)\\n    }\\n\\n    // Execute RegExp\\n    var re = this.re\\n    re.lastIndex = index\\n    var match = eat(re, buffer)\\n\\n    // Error tokens match the remaining buffer\\n    var error = this.error\\n    if (match == null) {\\n      return this._token(error, buffer.slice(index, buffer.length), index)\\n    }\\n\\n    var group = this._getGroup(match)\\n    var text = match[0]\\n\\n    if (error.fallback && match.index !== index) {\\n      this.queuedGroup = group\\n      this.queuedText = text\\n\\n      // Fallback tokens contain the unmatched portion of the buffer\\n      return this._token(error, buffer.slice(index, match.index), index)\\n    }\\n\\n    return this._token(group, text, index)\\n  }\\n\\n  Lexer.prototype._token = function(group, text, offset) {\\n    // count line breaks\\n    var lineBreaks = 0\\n    if (group.lineBreaks) {\\n      var matchNL = /\\\\n/g\\n      var nl = 1\\n      if (text === '\\\\n') {\\n        lineBreaks = 1\\n      } else {\\n        while (matchNL.exec(text)) { lineBreaks++; nl = matchNL.lastIndex }\\n      }\\n    }\\n\\n    var token = {\\n      type: (typeof group.type === 'function' && group.type(text)) || group.defaultType,\\n      value: typeof group.value === 'function' ? group.value(text) : text,\\n      text: text,\\n      toString: tokenToString,\\n      offset: offset,\\n      lineBreaks: lineBreaks,\\n      line: this.line,\\n      col: this.col,\\n    }\\n    // nb. adding more props to token object will make V8 sad!\\n\\n    var size = text.length\\n    this.index += size\\n    this.line += lineBreaks\\n    if (lineBreaks !== 0) {\\n      this.col = size - nl + 1\\n    } else {\\n      this.col += size\\n    }\\n\\n    // throw, if no rule with {error: true}\\n    if (group.shouldThrow) {\\n      throw new Error(this.formatError(token, \\\"invalid syntax\\\"))\\n    }\\n\\n    if (group.pop) this.popState()\\n    else if (group.push) this.pushState(group.push)\\n    else if (group.next) this.setState(group.next)\\n\\n    return token\\n  }\\n\\n  if (typeof Symbol !== 'undefined' && Symbol.iterator) {\\n    var LexerIterator = function(lexer) {\\n      this.lexer = lexer\\n    }\\n\\n    LexerIterator.prototype.next = function() {\\n      var token = this.lexer.next()\\n      return {value: token, done: !token}\\n    }\\n\\n    LexerIterator.prototype[Symbol.iterator] = function() {\\n      return this\\n    }\\n\\n    Lexer.prototype[Symbol.iterator] = function() {\\n      return new LexerIterator(this)\\n    }\\n  }\\n\\n  Lexer.prototype.formatError = function(token, message) {\\n    if (token == null) {\\n      // An undefined token indicates EOF\\n      var text = this.buffer.slice(this.index)\\n      var token = {\\n        text: text,\\n        offset: this.index,\\n        lineBreaks: text.indexOf('\\\\n') === -1 ? 0 : 1,\\n        line: this.line,\\n        col: this.col,\\n      }\\n    }\\n    var start = Math.max(0, token.offset - token.col + 1)\\n    var eol = token.lineBreaks ? token.text.indexOf('\\\\n') : token.text.length\\n    var firstLine = this.buffer.substring(start, token.offset + eol)\\n    message += \\\" at line \\\" + token.line + \\\" col \\\" + token.col + \\\":\\\\n\\\\n\\\"\\n    message += \\\"  \\\" + firstLine + \\\"\\\\n\\\"\\n    message += \\\"  \\\" + Array(token.col).join(\\\" \\\") + \\\"^\\\"\\n    return message\\n  }\\n\\n  Lexer.prototype.clone = function() {\\n    return new Lexer(this.states, this.state)\\n  }\\n\\n  Lexer.prototype.has = function(tokenType) {\\n    return true\\n  }\\n\\n\\n  return {\\n    compile: compile,\\n    states: compileStates,\\n    error: Object.freeze({error: true}),\\n    fallback: Object.freeze({fallback: true}),\\n    keywords: keywordTransform,\\n  }\\n\\n}));\\n\\n\\n/***/ }),\\n\\n/***/ 7:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n/* module decorator */ module = __nccwpck_require__.nmd(module);\\n\\n\\nvar Module = __nccwpck_require__(282);\\nvar path = __nccwpck_require__(622);\\n\\nmodule.exports = function requireFromString(code, filename, opts) {\\n\\tif (typeof filename === 'object') {\\n\\t\\topts = filename;\\n\\t\\tfilename = undefined;\\n\\t}\\n\\n\\topts = opts || {};\\n\\tfilename = filename || '';\\n\\n\\topts.appendPaths = opts.appendPaths || [];\\n\\topts.prependPaths = opts.prependPaths || [];\\n\\n\\tif (typeof code !== 'string') {\\n\\t\\tthrow new Error('code must be a string, not ' + typeof code);\\n\\t}\\n\\n\\tvar paths = Module._nodeModulePaths(path.dirname(filename));\\n\\n\\tvar parent = module.parent;\\n\\tvar m = new Module(filename, parent);\\n\\tm.filename = filename;\\n\\tm.paths = [].concat(opts.prependPaths).concat(paths).concat(opts.appendPaths);\\n\\tm._compile(code, filename);\\n\\n\\tvar exports = m.exports;\\n\\tparent && parent.children && parent.children.splice(parent.children.indexOf(m), 1);\\n\\n\\treturn exports;\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 770:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\nvar extend = __nccwpck_require__(721);\\r\\n\\r\\nvar singlebyte = function(){\\r\\n   /* jshint indent: false */\\r\\n   if(!( this instanceof singlebyte )){\\r\\n      return new singlebyte();\\r\\n   }\\r\\n\\r\\n   this.encodings = [];\\r\\n\\r\\n   // CP437\\r\\n   this.learnEncoding('cp437', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xA2,   0xA3,   0xA5,  0x20A7, 0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,  0x2310,  0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x3B1,  0x3B2,  0x393,  0x3C0,  0x3A3,  0x3C3,  0x3BC,  0x3C4,\\r\\n      0x3A6,  0x398,  0x3A9,  0x3B4,  0x221E, 0x3C6,  0x3B5,  0x2229,\\r\\n      0x2261,  0xB1,  0x2265, 0x2264, 0x2320, 0x2321,  0xF7,  0x2248,\\r\\n      0xB0,   0x2219,  0xB7,  0x221A, 0x207F,  0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP850\\r\\n   this.learnEncoding('cp850', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xF8,   0xA3,   0xD8,   0xD7,  0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,   0xAE,   0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524,  0xC1,   0xC2,   0xC0,\\r\\n       0xA9,  0x2563, 0x2551, 0x2557, 0x255D,  0xA2,   0xA5,  0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C,  0xE3,   0xC3,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C,  0xA4,\\r\\n       0xF0,   0xD0,   0xCA,   0xCB,   0xC8,  0x131,   0xCD,   0xCE,\\r\\n       0xCF,  0x2518, 0x250C, 0x2588, 0x2584,  0xA6,   0xCC,  0x2580,\\r\\n       0xD3,   0xDF,   0xD4,   0xD2,   0xF5,   0xD5,   0xB5,   0xFE,\\r\\n       0xDE,   0xDA,   0xDB,   0xD9,   0xFD,   0xDD,   0xAF,   0xB4,\\r\\n       0xAD,   0xB1,  0x2017,  0xBE,   0xB6,   0xA7,   0xF7,   0xB8,\\r\\n       0xB0,   0xA8,   0xB7,   0xB9,   0xB3,   0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP858\\r\\n   this.learnEncoding('cp858', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xF8,   0xA3,   0xD8,   0xD7,  0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,   0xAE,   0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524,  0xC1,   0xC2,   0xC0,\\r\\n       0xA9,  0x2563, 0x2551, 0x2557, 0x255D,  0xA2,   0xA5,  0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C,  0xE3,   0xC3,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C,  0xA4,\\r\\n       0xF0,   0xD0,   0xCA,   0xCB,   0xC8,  0x20AC,   0xCD,   0xCE,\\r\\n       0xCF,  0x2518, 0x250C, 0x2588, 0x2584,  0xA6,   0xCC,  0x2580,\\r\\n       0xD3,   0xDF,   0xD4,   0xD2,   0xF5,   0xD5,   0xB5,   0xFE,\\r\\n       0xDE,   0xDA,   0xDB,   0xD9,   0xFD,   0xDD,   0xAF,   0xB4,\\r\\n       0xAD,   0xB1,  0x2017,  0xBE,   0xB6,   0xA7,   0xF7,   0xB8,\\r\\n       0xB0,   0xA8,   0xB7,   0xB9,   0xB3,   0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP808\\r\\n   this.learnEncoding('cp808', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x404,  0x454,  0x407,  0x457,  0x40E,  0x45E,\\r\\n       0xB0,  0x2219,  0xB7,  0x221A, 0x2116, 0x20AC, 0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP866\\r\\n   this.learnEncoding('cp866', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x404,  0x454,  0x407,  0x457,  0x40E,  0x45E,\\r\\n       0xB0,  0x2219,  0xB7,  0x221A, 0x2116,  0xA4,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP1125\\r\\n   this.learnEncoding('cp1125', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x490,  0x491,  0x404,  0x454,  0x406,  0x456,\\r\\n      0x407,  0x457,   0xB7,  0x221A, 0x2116,  0xA4,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // KOI8-R\\r\\n   this.learnEncoding('koi8-r', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x2553, 0x2554, 0x2555, 0x2556,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x255C, 0x255D, 0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x2562, 0x2563, 0x2564, 0x2565,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x256B, 0x256C,  0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // KOI8-U\\r\\n   this.learnEncoding('koi8-u', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x454,  0x2554, 0x456,  0x457,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x491,  0x255D, 0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x404,  0x2563, 0x406,  0x407,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x490,  0x256C,  0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // KOI8-RU\\r\\n   this.learnEncoding('koi8-ru', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x454,  0x2554, 0x456,  0x457,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x491,  0x45E,  0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x404,  0x2563, 0x406,  0x407,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x490,  0x40E,   0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // LATIN-1 aka ISO 8859-1 (Western European)\\r\\n   this.learnEncoding('latin-1', this.extendASCII([\\r\\n      0x80, 0x81, 0x82, 0x83, 0x84, 0x85, 0x86, 0x87,\\r\\n      0x88, 0x89, 0x8A, 0x8B, 0x8C, 0x8D, 0x8E, 0x8F,\\r\\n      0x90, 0x91, 0x92, 0x93, 0x94, 0x95, 0x96, 0x97,\\r\\n      0x98, 0x99, 0x9A, 0x9B, 0x9C, 0x9D, 0x9E, 0x9F,\\r\\n      0xA0, 0xA1, 0xA2, 0xA3, 0xA4, 0xA5, 0xA6, 0xA7,\\r\\n      0xA8, 0xA9, 0xAA, 0xAB, 0xAC, 0xAD, 0xAE, 0xAF,\\r\\n      0xB0, 0xB1, 0xB2, 0xB3, 0xB4, 0xB5, 0xB6, 0xB7,\\r\\n      0xB8, 0xB9, 0xBA, 0xBB, 0xBC, 0xBD, 0xBE, 0xBF,\\r\\n      0xC0, 0xC1, 0xC2, 0xC3, 0xC4, 0xC5, 0xC6, 0xC7,\\r\\n      0xC8, 0xC9, 0xCA, 0xCB, 0xCC, 0xCD, 0xCE, 0xCF,\\r\\n      0xD0, 0xD1, 0xD2, 0xD3, 0xD4, 0xD5, 0xD6, 0xD7,\\r\\n      0xD8, 0xD9, 0xDA, 0xDB, 0xDC, 0xDD, 0xDE, 0xDF,\\r\\n      0xE0, 0xE1, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6, 0xE7,\\r\\n      0xE8, 0xE9, 0xEA, 0xEB, 0xEC, 0xED, 0xEE, 0xEF,\\r\\n      0xF0, 0xF1, 0xF2, 0xF3, 0xF4, 0xF5, 0xF6, 0xF7,\\r\\n      0xF8, 0xF9, 0xFA, 0xFB, 0xFC, 0xFD, 0xFE, 0xFF\\r\\n   ]));\\r\\n\\r\\n   // Windows-1252\\r\\n   this.learnEncoding('cp1252', this.extendASCII([\\r\\n      0x20AC,  0x81,  0x201A, 0x192,  0x201E, 0x2026, 0x2020, 0x2021,\\r\\n      0x2C6,  0x2030, 0x160,  0x2039, 0x152,   0x8D,  0x017D,  0x8F,\\r\\n       0x90,  0x2018, 0x2019, 0x201C, 0x201D, 0x2022, 0x2013, 0x2014,\\r\\n      0x02DC, 0x2122, 0x161,  0x203A, 0x0153,  0x9D,  0x17E,  0x178,\\r\\n       0xA0,   0xA1,   0xA2,   0xA3,   0xA4,   0xA5,   0xA6,   0xA7,\\r\\n       0xA8,   0xA9,   0xAA,   0xAB,   0xAC,   0xAD,   0xAE,   0xAF,\\r\\n       0xB0,   0xB1,   0xB2,   0xB3,   0xB4,   0xB5,   0xB6,   0xB7,\\r\\n       0xB8,   0xB9,   0xBA,   0xBB,   0xBC,   0xBD,   0xBE,   0xBF,\\r\\n       0xC0,   0xC1,   0xC2,   0xC3,   0xC4,   0xC5,   0xC6,   0xC7,\\r\\n       0xC8,   0xC9,   0xCA,   0xCB,   0xCC,   0xCD,   0xCE,   0xCF,\\r\\n       0xD0,   0xD1,   0xD2,   0xD3,   0xD4,   0xD5,   0xD6,   0xD7,\\r\\n       0xD8,   0xD9,   0xDA,   0xDB,   0xDC,   0xDD,   0xDE,   0xDF,\\r\\n       0xE0,   0xE1,   0xE2,   0xE3,   0xE4,   0xE5,   0xE6,   0xE7,\\r\\n       0xE8,   0xE9,   0xEA,   0xEB,   0xEC,   0xED,   0xEE,   0xEF,\\r\\n       0xF0,   0xF1,   0xF2,   0xF3,   0xF4,   0xF5,   0xF6,   0xF7,\\r\\n       0xF8,   0xF9,   0xFA,   0xFB,   0xFC,   0xFD,   0xFE,   0xFF\\r\\n   ]));\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.isEncoding = function(encodingName){\\r\\n   if( Buffer.isEncoding(encodingName) ) return true;\\r\\n   for( var i = 0; i < this.encodings.length; i++ ){\\r\\n      if( this.encodings[i].name === encodingName ) return true;\\r\\n   }\\r\\n   return false;\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.learnEncoding = function(encodingName, encodingTable){\\r\\n   /*jshint bitwise: false */\\r\\n   if( Buffer.isEncoding(encodingName) ){\\r\\n      throw new Error(this.errors.BUFFER_ENCODING);\\r\\n   }\\r\\n\\r\\n   if( encodingTable.length !== 256 ){\\r\\n      throw new Error(this.errors.INVALID_TABLE_LENGTH);\\r\\n   }\\r\\n\\r\\n   var _this = this;\\r\\n   encodingTable = encodingTable.map(function(item){\\r\\n      var nextCode = item |0;\\r\\n      if( 0 > nextCode || nextCode > 0x10FFFF ){\\r\\n         throw new Error(_this.errors.OUT_OF_UNICODE);\\r\\n      }\\r\\n      return item;\\r\\n   });\\r\\n\\r\\n   if( this.isEncoding(encodingName) ){\\r\\n      for( var i = 0; i < this.encodings.length; i++ ){\\r\\n         if( this.encodings[i].name === encodingName ){\\r\\n            this.encodings[i].table = encodingTable;\\r\\n            return;\\r\\n         }\\r\\n      }\\r\\n   } else {\\r\\n      this.encodings.push({\\r\\n         name:  encodingName,\\r\\n         table: encodingTable\\r\\n      });\\r\\n   }\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.getEncodingTable = function(encodingName){\\r\\n   for( var i = 0; i < this.encodings.length; i++ ){\\r\\n      if( this.encodings[i].name === encodingName ){\\r\\n         return this.encodings[i].table;\\r\\n      }\\r\\n   }\\r\\n   return null;\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.extendASCII = function(extensionTable){\\r\\n   if( extensionTable.length !== 128 ){\\r\\n      throw new Error(this.errors.INVALID_EXTENSION);\\r\\n   }\\r\\n\\r\\n   var output = [];\\r\\n   for( var i = 0; i < 128; i++ ) output.push(i);\\r\\n   return output.concat(extensionTable);\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.bufToStr = function(buf, encoding, start, end){\\r\\n   /* jshint bitwise: false */\\r\\n   if(!( Buffer.isBuffer(buf) )){\\r\\n      throw new Error(this.errors.NOT_A_BUFFER);\\r\\n   }\\r\\n   if( Buffer.isEncoding(encoding) ){\\r\\n      return buf.toString(encoding, start, end);\\r\\n   }\\r\\n   var table = this.getEncodingTable(encoding);\\r\\n   if( table === null ) throw new Error(this.errors.UNKNOWN_ENCODING);\\r\\n\\r\\n   if( typeof end   === 'undefined' ) end   = buf.length;\\r\\n   if( typeof start === 'undefined' ) start = 0;\\r\\n\\r\\n   var output = '';\\r\\n   var sourceValue;\\r\\n   for( var i = start; i < end; i++ ){\\r\\n      sourceValue = table[ buf[i] ];\\r\\n      if( sourceValue <= 0xFFFF ){\\r\\n         output += String.fromCharCode(sourceValue);\\r\\n      } else if( 0x10000 <= sourceValue && sourceValue <= 0x10FFFF ){\\r\\n         sourceValue -= 0x10000;\\r\\n         output += String.fromCharCode( 0xD800 + (sourceValue >> 10) );\\r\\n         output += String.fromCharCode( 0xDC00 + (sourceValue & 0x3FF) );\\r\\n      } else throw new Error(this.errors.OUT_OF_UNICODE);\\r\\n   }\\r\\n   return output;\\r\\n};\\r\\n\\r\\nvar strToBufDefaults = {\\r\\n   defaultCode: 0x3F   // '?'\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.strToBuf = function(str, encoding, encodingOptions){\\r\\n   if( Buffer.isEncoding(encoding) ){\\r\\n      return new Buffer(str, encoding);\\r\\n   }\\r\\n   str = '' + str;\\r\\n   var options = extend({}, strToBufDefaults, encodingOptions);\\r\\n   var table = this.getEncodingTable(encoding);\\r\\n   if( table === null ) throw new Error(this.errors.UNKNOWN_ENCODING);\\r\\n   var output = [];\\r\\n   for( var i = 0; i < str.length; i++ ){\\r\\n      var charUnicode;\\r\\n      var thisCharCode = str.charCodeAt(i);\\r\\n      if( 0xD800 <= thisCharCode && thisCharCode <= 0xDBFF &&\\r\\n         i+1 < str.length\\r\\n      ){\\r\\n         var nextCharCode = str.charCodeAt(i+1);\\r\\n         if( 0xDC00 <= nextCharCode && nextCharCode <= 0xDFFF ){\\r\\n            charUnicode = 0x10000 + (thisCharCode - 0xD800)*0x400 +\\r\\n               (nextCharCode - 0xDC00);\\r\\n            i++;\\r\\n         } else {\\r\\n            charUnicode = thisCharCode;\\r\\n         }\\r\\n      } else {\\r\\n         charUnicode = thisCharCode;\\r\\n      }\\r\\n\\r\\n      var codeFoundIndex = table.indexOf(charUnicode);\\r\\n      if( codeFoundIndex < 0 ){\\r\\n         output.push(options.defaultCode);\\r\\n      } else {\\r\\n         output.push(codeFoundIndex);\\r\\n      }\\r\\n   }\\r\\n   return new Buffer(output);\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.errors = {\\r\\n   NOT_A_BUFFER : 'The given source is not a buffer!',\\r\\n   UNKNOWN_ENCODING : 'The given encoding is not defined!',\\r\\n   INVALID_TABLE_LENGTH : 'The encoding table must have 256 elements!',\\r\\n   INVALID_EXTENSION : 'The ASCII extension table must have 128 elements!',\\r\\n   BUFFER_ENCODING : \\\"Cannot redefine aNode's encoding!\\\",\\r\\n   OUT_OF_UNICODE : \\\"An encoding table's element is greater than 0x10FFFF!\\\"\\r\\n};\\r\\n\\r\\nmodule.exports = singlebyte();\\n\\n/***/ }),\\n\\n/***/ 962:\\n/***/ ((__unused_webpack_module, exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.getDataItem = exports.dataItemTypeName = void 0;\\nvar types_1 = __nccwpck_require__(521);\\nfunction dataItemTypeName(_a) {\\n    var _ = _a[0], value = _a[1];\\n    return value === null ? 'null' : typeof value;\\n}\\nexports.dataItemTypeName = dataItemTypeName;\\n/** Converts a data item to the expected type. */\\nfunction getDataItem(item, expectedTypeSpec) {\\n    var _ = item[0], value = item[1];\\n    if (types_1.isNumeric(expectedTypeSpec)) {\\n        switch (typeof value) {\\n            case 'number':\\n                return value;\\n            case 'object':\\n                return 0;\\n            default:\\n                throwDataItemTypeError(item, expectedTypeSpec);\\n        }\\n    }\\n    else if (types_1.isString(expectedTypeSpec)) {\\n        switch (typeof value) {\\n            case 'string':\\n                return value;\\n            case 'object':\\n                return '';\\n            default:\\n                throwDataItemTypeError(item, expectedTypeSpec);\\n        }\\n    }\\n    else {\\n        throw new Error(\\\"Unknown expected type spec: \\\" + JSON.stringify(expectedTypeSpec));\\n    }\\n}\\nexports.getDataItem = getDataItem;\\nfunction throwDataItemTypeError(item, expectedTypeSpec) {\\n    var _a = item[0], line = _a[0], col = _a[1], _ = item[1];\\n    throw new Error(\\\"expected \\\" + types_1.typeSpecName(expectedTypeSpec) + \\\", \\\" +\\n        (\\\"got \\\" + dataItemTypeName(item) + \\\" data item \\\") +\\n        (\\\"(defined at \\\" + line + \\\":\\\" + col + \\\")\\\"));\\n}\\n\\n\\n/***/ }),\\n\\n/***/ 813:\\n/***/ (function(__unused_webpack_module, exports) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** An error with source file and location info. */\\nvar ErrorWithLoc = /** @class */ (function (_super) {\\n    __extends(ErrorWithLoc, _super);\\n    function ErrorWithLoc(message, _a) {\\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, loc = _b.loc;\\n        var _this = _super.call(this, message) || this;\\n        if (loc) {\\n            var sourceFileNamePrefix = sourceFileName ? sourceFileName + \\\":\\\" : '';\\n            var locPrefix = loc.line + \\\":\\\" + loc.col;\\n            _this.message = \\\"\\\" + sourceFileNamePrefix + locPrefix + \\\" - \\\" + _this.message;\\n            _this.loc = loc;\\n        }\\n        return _this;\\n    }\\n    return ErrorWithLoc;\\n}(Error));\\nexports.default = ErrorWithLoc;\\n\\n\\n/***/ }),\\n\\n/***/ 345:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** Round a number to integer using BASIC's round-half-to-even rule. */\\nfunction roundHalfToEven(n) {\\n    if (n - Math.floor(n) === 0.5) {\\n        return Math.round(n / 2) * 2;\\n    }\\n    else {\\n        return Math.round(n);\\n    }\\n}\\nexports.default = roundHalfToEven;\\n\\n\\n/***/ }),\\n\\n/***/ 973:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.lookupSymbols = exports.lookupSymbol = exports.VarScope = exports.VarType = void 0;\\n/** Type of a variable symbol. */\\nvar VarType;\\n(function (VarType) {\\n    /** Regular variable. */\\n    VarType[\\\"VAR\\\"] = \\\"var\\\";\\n    /** Static variable. */\\n    VarType[\\\"STATIC_VAR\\\"] = \\\"staticVar\\\";\\n    /** Constant. */\\n    VarType[\\\"CONST\\\"] = \\\"const\\\";\\n    /** FUNCTION or SUB argument. */\\n    VarType[\\\"ARG\\\"] = \\\"arg\\\";\\n})(VarType = exports.VarType || (exports.VarType = {}));\\n/** Scope of a variable symbol. */\\nvar VarScope;\\n(function (VarScope) {\\n    VarScope[\\\"LOCAL\\\"] = \\\"local\\\";\\n    VarScope[\\\"GLOBAL\\\"] = \\\"global\\\";\\n})(VarScope = exports.VarScope || (exports.VarScope = {}));\\nfunction lookupSymbol(symbolTable, name) {\\n    var _a;\\n    return ((_a = symbolTable.find(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); })) !== null && _a !== void 0 ? _a : null);\\n}\\nexports.lookupSymbol = lookupSymbol;\\nfunction lookupSymbols(symbolTable, name) {\\n    return symbolTable.filter(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); });\\n}\\nexports.lookupSymbols = lookupSymbols;\\n\\n\\n/***/ }),\\n\\n/***/ 521:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.ProcDefType = exports.procTypeName = exports.isFnOrDefFn = exports.ProcType = exports.typeSpecName = exports.areMatchingSingularTypes = exports.areMatchingElementaryTypes = exports.isSingularType = exports.isUdt = exports.isElementaryType = exports.isArray = exports.isString = exports.isIntegral = exports.isNumeric = exports.arraySpec = exports.stringSpec = exports.doubleSpec = exports.singleSpec = exports.longSpec = exports.integerSpec = exports.DataType = void 0;\\n/** Overall type of the value. */\\nvar DataType;\\n(function (DataType) {\\n    /** 16-bit integer */\\n    DataType[\\\"INTEGER\\\"] = \\\"integer\\\";\\n    /** 32-bit integer */\\n    DataType[\\\"LONG\\\"] = \\\"long\\\";\\n    /** 32-bit floating point. */\\n    DataType[\\\"SINGLE\\\"] = \\\"single\\\";\\n    /** 64-bit floating point. */\\n    DataType[\\\"DOUBLE\\\"] = \\\"double\\\";\\n    /** String. */\\n    DataType[\\\"STRING\\\"] = \\\"string\\\";\\n    /** Array. */\\n    DataType[\\\"ARRAY\\\"] = \\\"array\\\";\\n    /** User-defined data type, a.k.a. records. */\\n    DataType[\\\"UDT\\\"] = \\\"udt\\\";\\n})(DataType = exports.DataType || (exports.DataType = {}));\\n// Helpers for creating DataTypeSpec instances.\\nfunction integerSpec() {\\n    return { type: DataType.INTEGER };\\n}\\nexports.integerSpec = integerSpec;\\nfunction longSpec() {\\n    return { type: DataType.LONG };\\n}\\nexports.longSpec = longSpec;\\nfunction singleSpec() {\\n    return { type: DataType.SINGLE };\\n}\\nexports.singleSpec = singleSpec;\\nfunction doubleSpec() {\\n    return { type: DataType.DOUBLE };\\n}\\nexports.doubleSpec = doubleSpec;\\nfunction stringSpec() {\\n    return { type: DataType.STRING };\\n}\\nexports.stringSpec = stringSpec;\\nfunction arraySpec(elementTypeSpec, dimensionSpecs) {\\n    return { type: DataType.ARRAY, elementTypeSpec: elementTypeSpec, dimensionSpecs: dimensionSpecs };\\n}\\nexports.arraySpec = arraySpec;\\n// Helpers for type checking.\\nfunction isNumeric(t) {\\n    return [\\n        DataType.INTEGER,\\n        DataType.LONG,\\n        DataType.SINGLE,\\n        DataType.DOUBLE,\\n    ].includes(getType(t));\\n}\\nexports.isNumeric = isNumeric;\\nfunction isIntegral(t) {\\n    return [DataType.INTEGER, DataType.LONG].includes(getType(t));\\n}\\nexports.isIntegral = isIntegral;\\nfunction isString(t) {\\n    return getType(t) === DataType.STRING;\\n}\\nexports.isString = isString;\\nfunction isArray(t) {\\n    return getType(t) === DataType.ARRAY;\\n}\\nexports.isArray = isArray;\\nfunction isElementaryType(t) {\\n    return isNumeric(t) || isString(t);\\n}\\nexports.isElementaryType = isElementaryType;\\nfunction isUdt(t) {\\n    return getType(t) === DataType.UDT;\\n}\\nexports.isUdt = isUdt;\\nfunction isSingularType(t) {\\n    return isElementaryType(t) || isUdt(t);\\n}\\nexports.isSingularType = isSingularType;\\nfunction areMatchingElementaryTypes(typeSpec1, typeSpec2) {\\n    return ((isNumeric(typeSpec1) && isNumeric(typeSpec2)) ||\\n        (isString(typeSpec1) && isString(typeSpec2)));\\n}\\nexports.areMatchingElementaryTypes = areMatchingElementaryTypes;\\nfunction areMatchingSingularTypes(typeSpec1, typeSpec2) {\\n    return (areMatchingElementaryTypes(typeSpec1, typeSpec2) ||\\n        (isUdt(typeSpec1) && isUdt(typeSpec2) && typeSpec1.name === typeSpec2.name));\\n}\\nexports.areMatchingSingularTypes = areMatchingSingularTypes;\\nfunction typeSpecName(t) {\\n    switch (t.type) {\\n        case DataType.ARRAY:\\n            return typeSpecName(t.elementTypeSpec) + \\\" array\\\";\\n        case DataType.UDT:\\n            return \\\"\\\\\\\"\\\" + t.name + \\\"\\\\\\\"\\\";\\n        default:\\n            return t.type;\\n    }\\n}\\nexports.typeSpecName = typeSpecName;\\nfunction getType(t) {\\n    return typeof t === 'object' ? t.type : t;\\n}\\n/** Type of a procedure. */\\nvar ProcType;\\n(function (ProcType) {\\n    /** SUB procedure. */\\n    ProcType[\\\"SUB\\\"] = \\\"sub\\\";\\n    /** FUNCTION procedure. */\\n    ProcType[\\\"FN\\\"] = \\\"fn\\\";\\n    /** DEF FN procedure. */\\n    ProcType[\\\"DEF_FN\\\"] = \\\"defFn\\\";\\n})(ProcType = exports.ProcType || (exports.ProcType = {}));\\nfunction isFnOrDefFn(procType) {\\n    return procType === ProcType.FN || procType === ProcType.DEF_FN;\\n}\\nexports.isFnOrDefFn = isFnOrDefFn;\\n/** Returns the user-facing name of a ProcType. */\\nfunction procTypeName(procType) {\\n    var _a;\\n    var NAMES = (_a = {},\\n        _a[ProcType.SUB] = 'SUB procedure',\\n        _a[ProcType.FN] = 'FUNCTION procedure',\\n        _a[ProcType.DEF_FN] = 'DEF FN procedure',\\n        _a);\\n    return NAMES[procType];\\n}\\nexports.procTypeName = procTypeName;\\n/** The type of a procedure definition. */\\nvar ProcDefType;\\n(function (ProcDefType) {\\n    /** Built-in function. */\\n    ProcDefType[\\\"BUILTIN\\\"] = \\\"builtin\\\";\\n    /** User-defined function in the current module. */\\n    ProcDefType[\\\"MODULE\\\"] = \\\"module\\\";\\n})(ProcDefType = exports.ProcDefType || (exports.ProcDefType = {}));\\n\\n\\n/***/ }),\\n\\n/***/ 168:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nvar _a;\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** Returns a VT100 escape sequence prefixed by \\\"ESC [\\\". */\\nfunction ESC(c) {\\n    return \\\"\\\\u001B[\\\" + c;\\n}\\n/** Returns a DOS keyboard scan code prefixed by NUL. */\\nfunction NUL(n) {\\n    return String.fromCharCode(0, n);\\n}\\n/** Map ANSI / VT100 sequences to DOS keyboard scan codes. */\\nvar ANSI_TERMINAL_KEY_CODE_MAP = (_a = {},\\n    _a[ESC('A')] = NUL(72),\\n    _a[ESC('B')] = NUL(80),\\n    _a[ESC('C')] = NUL(77),\\n    _a[ESC('D')] = NUL(75),\\n    _a);\\nexports.default = ANSI_TERMINAL_KEY_CODE_MAP;\\n\\n\\n/***/ }),\\n\\n/***/ 769:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar ansi_escapes_1 = __importDefault(__nccwpck_require__(575));\\nvar ansi_styles_1 = __importDefault(__nccwpck_require__(566));\\nvar ansi_terminal_key_code_map_1 = __importDefault(__nccwpck_require__(168));\\nvar runtime_1 = __nccwpck_require__(753);\\n/** RuntimePlatform implementing screen manipulation using ANSI escape codes.\\n *\\n * Ideally this functionality could be made into a mixin, but 1) it relies on this.print() etc and\\n * so must be a class and 2) abstract classes don't support mixins yet:\\n * https://github.com/microsoft/TypeScript/issues/35356\\n */\\nvar AnsiTerminalPlatform = /** @class */ (function (_super) {\\n    __extends(AnsiTerminalPlatform, _super);\\n    function AnsiTerminalPlatform() {\\n        return _super !== null && _super.apply(this, arguments) || this;\\n    }\\n    AnsiTerminalPlatform.prototype.moveCursorTo = function (x, y) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.cursorTo(x, y))];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setCursorVisibility = function (isCursorVisible) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(isCursorVisible ? ansi_escapes_1.default.cursorShow : ansi_escapes_1.default.cursorHide)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.clearScreen = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.eraseScreen)];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(0, 0)];\\n                    case 2:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setFgColor = function (colorName) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_styles_1.default[colorName].open)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setBgColor = function (colorName) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var bgColorName;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        bgColorName = \\\"bg\\\" + colorName[0].toUpperCase() + colorName.substr(1);\\n                        return [4 /*yield*/, this.print(ansi_styles_1.default[bgColorName].open)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.beep = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.beep)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Translates an ANSI / VT100 key code to the DOS equivalent. */\\n    AnsiTerminalPlatform.prototype.translateKeyCode = function (c) {\\n        var _a;\\n        return (_a = ansi_terminal_key_code_map_1.default[c]) !== null && _a !== void 0 ? _a : c;\\n    };\\n    return AnsiTerminalPlatform;\\n}(runtime_1.RuntimePlatform));\\nexports.default = AnsiTerminalPlatform;\\n\\n\\n/***/ }),\\n\\n/***/ 562:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\\n        to[j] = from[i];\\n    return to;\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.lookupBuiltin = exports.BUILTIN_SUBS = exports.BUILTIN_FNS = void 0;\\nvar singlebyte_1 = __importDefault(__nccwpck_require__(770));\\nvar round_half_to_even_1 = __importDefault(__nccwpck_require__(345));\\nvar symbol_table_1 = __nccwpck_require__(973);\\nvar types_1 = __nccwpck_require__(521);\\n/** Built-in functions. */\\nexports.BUILTIN_FNS = __spreadArray(__spreadArray([\\n    {\\n        name: 'abs',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.abs(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'asc',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (s.length === 0) {\\n                        throw new Error('Expected non-empty string in ASC()');\\n                    }\\n                    // We could use iconv-lite here instead:\\n                    // return iconv.encode(s[0], 'cp437')[0];\\n                    return [2 /*return*/, singlebyte_1.default.strToBuf(s[0], 'cp437')[0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'atn',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.atan(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'chr$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    // We could use iconv-lite here instead:\\n                    // return iconv.decode(Buffer.from([n]), 'cp437');\\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cdbl',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cint',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'clng',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cos',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.cos(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'csng',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.singleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'csrlin',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (_a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1: return [2 /*return*/, (_b.sent()).y + 1];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'date$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    return [2 /*return*/, [now.getMonth() + 1, now.getDate(), now.getFullYear()]\\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\\n                            .join('-')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'exp',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.exp(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'fix',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sign(n) * Math.floor(Math.abs(n))];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'hex$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n.toString(16).toUpperCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'inkey$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (_a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var c;\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getChar()];\\n                        case 1:\\n                            c = _b.sent();\\n                            return [2 /*return*/, c !== null && c !== void 0 ? c : ''];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'input$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var result, c;\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0:\\n                            result = [];\\n                            _b.label = 1;\\n                        case 1:\\n                            if (!(result.length < n && !platform.shouldStopExecution)) return [3 /*break*/, 3];\\n                            return [4 /*yield*/, platform.getChar()];\\n                        case 2:\\n                            c = _b.sent();\\n                            if (c) {\\n                                result.push(c);\\n                            }\\n                            return [3 /*break*/, 1];\\n                        case 3: return [2 /*return*/, result.join('')];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'instr',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (haystack, needle) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, haystack.indexOf(needle) + 1];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'instr',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.integerSpec(),\\n        run: function (start, haystack, needle) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, haystack.indexOf(needle, start - 1) + 1];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'int',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.floor(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lbound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lbound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array, dimensionIdx) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (dimensionIdx < 1 ||\\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\\n                        throw new Error(\\\"Invalid dimension index: \\\" + dimensionIdx);\\n                    }\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lcase$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.toLowerCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'left$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(0, n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'len',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.length];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'log',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.log(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ltrim$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.trimStart()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'mid$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, startIdx, length) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(startIdx - 1, length)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'oct$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n.toString(8)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'peek',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    // STUB\\n                    return [2 /*return*/, 0];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'pos',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (_, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1: return [2 /*return*/, (_b.sent()).x + 1];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'right$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(Math.max(0, s.length - n))];\\n                });\\n            });\\n        },\\n    }\\n], overload({\\n    name: 'rnd',\\n    returnTypeSpec: types_1.doubleSpec(),\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, Math.random()];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), [\\n    {\\n        name: 'rtrim$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, _a) {\\n            var args = _a.args;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    return [2 /*return*/, s.trimEnd()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sgn',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sign(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sin',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sin(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'spc',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, ' '.repeat(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'space$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, ' '.repeat(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sqr',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sqrt(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'str$',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, \\\"\\\" + (n >= 0 ? ' ' : '') + n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'string$',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (m, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437').repeat(m)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'string$',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (m, s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (s.length === 0) {\\n                        throw new Error(\\\"Empty string argument to STRING$\\\");\\n                    }\\n                    return [2 /*return*/, s[0].repeat(m)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'tab',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (col, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var _b, x, y, cols;\\n                return __generator(this, function (_c) {\\n                    switch (_c.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1:\\n                            _b = _c.sent(), x = _b.x, y = _b.y;\\n                            return [4 /*yield*/, platform.getScreenSize()];\\n                        case 2:\\n                            cols = (_c.sent()).cols;\\n                            col = (Math.max(1, col) - 1) % cols;\\n                            return [4 /*yield*/, platform.moveCursorTo(col, x <= col ? y : y + 1)];\\n                        case 3:\\n                            _c.sent();\\n                            return [2 /*return*/, ''];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'tan',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.tan(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'time$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    return [2 /*return*/, [now.getHours(), now.getMinutes(), now.getSeconds()]\\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\\n                            .join(':')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'timer',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now, midnight, result;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    midnight = new Date(now);\\n                    midnight.setHours(0, 0, 0, 0);\\n                    result = (now.getTime() - midnight.getTime()) / 1000;\\n                    return [2 /*return*/, result];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ubound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][1]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ubound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array, dimensionIdx) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (dimensionIdx < 1 ||\\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\\n                        throw new Error(\\\"Invalid dimension index: \\\" + dimensionIdx);\\n                    }\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][1]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ucase$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.toUpperCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'val',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var v;\\n                return __generator(this, function (_a) {\\n                    v = parseFloat(s);\\n                    return [2 /*return*/, isNaN(v) ? 0 : v];\\n                });\\n            });\\n        },\\n    },\\n]);\\n/** Simple statements implemented as built-in subs. */\\nexports.BUILTIN_SUBS = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([\\n    {\\n        name: 'beep',\\n        paramTypeSpecs: [],\\n        run: function () {\\n            var args = [];\\n            for (var _i = 0; _i < arguments.length; _i++) {\\n                args[_i] = arguments[_i];\\n            }\\n            return __awaiter(this, void 0, void 0, function () {\\n                var platform;\\n                return __generator(this, function (_a) {\\n                    switch (_a.label) {\\n                        case 0:\\n                            platform = args.pop().platform;\\n                            return [4 /*yield*/, platform.beep()];\\n                        case 1:\\n                            _a.sent();\\n                            return [2 /*return*/];\\n                    }\\n                });\\n            });\\n        },\\n    }\\n], overload({\\n    name: 'cls',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        return [4 /*yield*/, platform.clearScreen()];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'color',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a, platform, runtime, getColorName, fg, bg;\\n            return __generator(this, function (_b) {\\n                _a = args.pop(), platform = _a.platform, runtime = _a.runtime;\\n                getColorName = function (n) {\\n                    if (n < 0 || n >= runtime.currentScreenModeConfig.colorMap.length) {\\n                        throw new Error(\\\"Invalid color: \\\" + n);\\n                    }\\n                    return runtime.currentScreenModeConfig.colorMap[n];\\n                };\\n                fg = args[0], bg = args[1];\\n                if (Number.isFinite(fg)) {\\n                    platform.setFgColor(getColorName(fg));\\n                }\\n                if (Number.isFinite(bg)) {\\n                    platform.setBgColor(getColorName(bg));\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), overload({\\n    name: '__def_seg',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'locate',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform, row, col, cursor, origPos, newX, newY;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        row = args[0], col = args[1], cursor = args[2];\\n                        if (!(Number.isFinite(row) && Number.isFinite(col))) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, platform.moveCursorTo(col - 1, row - 1)];\\n                    case 1:\\n                        _a.sent();\\n                        return [3 /*break*/, 5];\\n                    case 2:\\n                        if (!(Number.isFinite(row) || Number.isFinite(col))) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, platform.getCursorPosition()];\\n                    case 3:\\n                        origPos = _a.sent();\\n                        newX = Number.isFinite(col) ? col - 1 : origPos.x;\\n                        newY = Number.isFinite(row) ? row - 1 : origPos.y;\\n                        if (!(newX !== origPos.x || newY !== origPos.y)) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, platform.moveCursorTo(newX, newY)];\\n                    case 4:\\n                        _a.sent();\\n                        _a.label = 5;\\n                    case 5:\\n                        if (!Number.isFinite(cursor)) return [3 /*break*/, 7];\\n                        return [4 /*yield*/, platform.setCursorVisibility(!!cursor)];\\n                    case 6:\\n                        _a.sent();\\n                        _a.label = 7;\\n                    case 7: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), [\\n    {\\n        name: 'play',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'poke',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    }\\n]), overload({\\n    name: 'randomize',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'screen',\\n    run: function (mode) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var runtime;\\n            return __generator(this, function (_a) {\\n                runtime = args.pop().runtime;\\n                runtime.setScreenMode(mode);\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), overload({\\n    name: 'sleep',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform, numSeconds, startTimeMs, nowMs, c;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        numSeconds = args.length > 0 ? args[0] : 0;\\n                        startTimeMs = new Date().getTime();\\n                        _a.label = 1;\\n                    case 1: return [4 /*yield*/, platform.getChar()];\\n                    case 2:\\n                        c = _a.sent();\\n                        nowMs = new Date().getTime();\\n                        _a.label = 3;\\n                    case 3:\\n                        if (c === null &&\\n                            (numSeconds <= 0 || nowMs - startTimeMs < numSeconds * 1000) &&\\n                            !platform.shouldStopExecution) return [3 /*break*/, 1];\\n                        _a.label = 4;\\n                    case 4: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: '__view_print',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec(), types_1.longSpec()]])), [\\n    {\\n        name: 'width',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    },\\n]);\\n/** Helper function to generate multiple signatures that map to the same built-in proc. */\\nfunction overload(proc, paramTypeSpecsList) {\\n    return paramTypeSpecsList.map(function (paramTypeSpecs) {\\n        return (__assign(__assign({}, proc), { paramTypeSpecs: paramTypeSpecs }));\\n    });\\n}\\nfunction lookupBuiltin(procs, name, argTypeSpecs, _a) {\\n    var _b = _a === void 0 ? {} : _a, shouldReturnIfArgTypeMismatch = _b.shouldReturnIfArgTypeMismatch;\\n    var builtinFnsMatchingName = symbol_table_1.lookupSymbols(procs, name);\\n    var builtinFn = builtinFnsMatchingName.find(function (_a) {\\n        var paramTypeSpecs = _a.paramTypeSpecs;\\n        return paramTypeSpecs.length === argTypeSpecs.length &&\\n            paramTypeSpecs.every(function (paramTypeSpec, i) {\\n                return types_1.areMatchingElementaryTypes(paramTypeSpec, argTypeSpecs[i]) ||\\n                    (types_1.isArray(paramTypeSpec) && types_1.isArray(argTypeSpecs[i]));\\n            });\\n    });\\n    return (builtinFn !== null && builtinFn !== void 0 ? builtinFn : (shouldReturnIfArgTypeMismatch && builtinFnsMatchingName.length > 0\\n        ? builtinFnsMatchingName[0]\\n        : null));\\n}\\nexports.lookupBuiltin = lookupBuiltin;\\n\\n\\n/***/ }),\\n\\n/***/ 308:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.PrintArgType = exports.ExecutionDirectiveType = void 0;\\nvar ExecutionDirectiveType;\\n(function (ExecutionDirectiveType) {\\n    ExecutionDirectiveType[\\\"GOTO\\\"] = \\\"goto\\\";\\n    ExecutionDirectiveType[\\\"GOSUB\\\"] = \\\"gosub\\\";\\n    ExecutionDirectiveType[\\\"RETURN\\\"] = \\\"return\\\";\\n    ExecutionDirectiveType[\\\"END\\\"] = \\\"end\\\";\\n    ExecutionDirectiveType[\\\"EXIT_PROC\\\"] = \\\"exitProc\\\";\\n})(ExecutionDirectiveType = exports.ExecutionDirectiveType || (exports.ExecutionDirectiveType = {}));\\n/** Type of an argument to print(). */\\nvar PrintArgType;\\n(function (PrintArgType) {\\n    PrintArgType[\\\"COMMA\\\"] = \\\"comma\\\";\\n    PrintArgType[\\\"SEMICOLON\\\"] = \\\"semicolon\\\";\\n    PrintArgType[\\\"VALUE\\\"] = \\\"value\\\";\\n})(PrintArgType = exports.PrintArgType || (exports.PrintArgType = {}));\\n\\n\\n/***/ }),\\n\\n/***/ 586:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.ExecutionError = void 0;\\nvar data_item_1 = __nccwpck_require__(962);\\nvar error_with_loc_1 = __importDefault(__nccwpck_require__(813));\\nvar symbol_table_1 = __nccwpck_require__(973);\\nvar types_1 = __nccwpck_require__(521);\\nvar compiled_code_1 = __nccwpck_require__(308);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\nvar runtime_1 = __importDefault(__nccwpck_require__(753));\\nvar ExecutionError = /** @class */ (function (_super) {\\n    __extends(ExecutionError, _super);\\n    function ExecutionError(message, _a) {\\n        var _b = _a === void 0 ? {} : _a, module = _b.module, stmt = _b.stmt;\\n        return _super.call(this, message, {\\n            sourceFileName: module === null || module === void 0 ? void 0 : module.sourceFileName,\\n            loc: (stmt === null || stmt === void 0 ? void 0 : stmt.loc) ? { line: stmt.loc[0], col: stmt.loc[1] } : undefined,\\n        }) || this;\\n    }\\n    return ExecutionError;\\n}(error_with_loc_1.default));\\nexports.ExecutionError = ExecutionError;\\n/** Exception thrown to signal program termination via END. */\\nvar EndDirective = /** @class */ (function (_super) {\\n    __extends(EndDirective, _super);\\n    function EndDirective() {\\n        var _this = _super !== null && _super.apply(this, arguments) || this;\\n        _this.isEndDirective = true;\\n        return _this;\\n    }\\n    return EndDirective;\\n}(Error));\\n/** Manages the execution of a compiled program. */\\nvar Executor = /** @class */ (function () {\\n    function Executor(platform, _a) {\\n        var _b = _a === void 0 ? {} : _a, stmtExecutionDelayUs = _b.stmtExecutionDelayUs;\\n        this.platform = platform;\\n        /** Current module being executed. */\\n        this.currentModule = null;\\n        /** Static vars, indexed by proc name. */\\n        this.localStaticVarsMap = {};\\n        /** Label index map for module-level statements. */\\n        this.moduleLabelIndexMap = {};\\n        /** Label index map for procs. */\\n        this.procLabelIndexMap = {};\\n        /** Cursor for READ. */\\n        this.dataCursor = {\\n            stmtIdx: 0,\\n            itemIdx: 0,\\n        };\\n        this.stmtExecutionDelayUs =\\n            stmtExecutionDelayUs !== null && stmtExecutionDelayUs !== void 0 ? stmtExecutionDelayUs : platform.defaultStmtExecutionDelayUs;\\n    }\\n    /** Executes a compiled module. */\\n    Executor.prototype.executeModule = function (moduleOrCode) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var module, _a, ctx, e_1;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        if (!(typeof moduleOrCode === 'string')) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.platform.loadCompiledModule(moduleOrCode)];\\n                    case 1:\\n                        _a = _b.sent();\\n                        return [3 /*break*/, 3];\\n                    case 2:\\n                        _a = moduleOrCode;\\n                        _b.label = 3;\\n                    case 3:\\n                        module = _a;\\n                        this.currentModule = module;\\n                        this.buildLabelIndexMaps();\\n                        this.localStaticVarsMap = {};\\n                        this.restore();\\n                        this.platform.shouldStopExecution = false;\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\\n                    case 4:\\n                        _b.sent();\\n                        ctx = {\\n                            runtime: new runtime_1.default(this.platform),\\n                            executeProc: this.executeProc.bind(this),\\n                            read: this.read.bind(this),\\n                            restore: this.restore.bind(this),\\n                            args: {},\\n                            localVars: this.initVars(module.localSymbols, [\\n                                symbol_table_1.VarType.VAR,\\n                                symbol_table_1.VarType.CONST,\\n                            ]),\\n                            localStaticVars: {},\\n                            globalVars: this.initVars(module.globalSymbols, [\\n                                symbol_table_1.VarType.VAR,\\n                                symbol_table_1.VarType.CONST,\\n                            ]),\\n                            tempVars: {},\\n                        };\\n                        _b.label = 5;\\n                    case 5:\\n                        _b.trys.push([5, 7, 8, 10]);\\n                        return [4 /*yield*/, this.executeStmts(ctx, module.stmts, this.moduleLabelIndexMap)];\\n                    case 6:\\n                        _b.sent();\\n                        return [3 /*break*/, 10];\\n                    case 7:\\n                        e_1 = _b.sent();\\n                        if (e_1.isEndDirective) {\\n                            // Swallow error\\n                        }\\n                        else {\\n                            throw e_1;\\n                        }\\n                        return [3 /*break*/, 10];\\n                    case 8:\\n                        this.currentModule = null;\\n                        this.moduleLabelIndexMap = {};\\n                        this.procLabelIndexMap = {};\\n                        this.localStaticVarsMap = {};\\n                        this.restore();\\n                        this.platform.shouldStopExecution = false;\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(true)];\\n                    case 9:\\n                        _b.sent();\\n                        return [7 /*endfinally*/];\\n                    case 10: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Sets flag to stop execution. */\\n    Executor.prototype.stopExecution = function () {\\n        this.platform.shouldStopExecution = true;\\n    };\\n    Executor.prototype.executeProc = function (prevCtx, name) {\\n        var argPtrs = [];\\n        for (var _i = 2; _i < arguments.length; _i++) {\\n            argPtrs[_i - 2] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var proc, args, i, ctx;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        proc = symbol_table_1.lookupSymbol(this.currentModule.procs, name);\\n                        if (!proc) {\\n                            throw new Error(\\\"Procedure not found: \\\\\\\"\\\" + name + \\\"\\\\\\\"\\\");\\n                        }\\n                        // Init args.\\n                        if (argPtrs.length !== proc.paramSymbols.length) {\\n                            throw new Error('Incorrect number of arguments to ' +\\n                                (types_1.procTypeName(proc.type) + \\\" \\\\\\\"\\\" + proc.name + \\\"\\\\\\\": \\\") +\\n                                (\\\"expected \\\" + proc.paramSymbols.length + \\\", got \\\" + argPtrs.length));\\n                        }\\n                        args = {};\\n                        for (i = 0; i < argPtrs.length; ++i) {\\n                            args[proc.paramSymbols[i].name] = argPtrs[i];\\n                        }\\n                        // Init static vars.\\n                        if (!this.localStaticVarsMap[proc.name]) {\\n                            this.localStaticVarsMap[proc.name] = this.initVars(proc.localSymbols, [\\n                                symbol_table_1.VarType.STATIC_VAR,\\n                            ]);\\n                        }\\n                        ctx = __assign(__assign({}, prevCtx), { args: args, localVars: this.initVars(proc.localSymbols, [symbol_table_1.VarType.VAR, symbol_table_1.VarType.CONST]), localStaticVars: this.localStaticVarsMap[proc.name], tempVars: {} });\\n                        if (!this.procLabelIndexMap[proc.name]) {\\n                            throw new Error(\\\"Label index map not found for \\\\\\\"\\\" + proc.name + \\\"\\\\\\\"\\\");\\n                        }\\n                        return [4 /*yield*/, this.executeStmts(ctx, proc.stmts, this.procLabelIndexMap[proc.name])];\\n                    case 1:\\n                        _a.sent();\\n                        // Return value.\\n                        if (types_1.isFnOrDefFn(proc.type)) {\\n                            return [2 /*return*/, ctx.localVars[proc.name]];\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Executor.prototype.initVars = function (varSymbolTable, includeVarTypes) {\\n        var container = {};\\n        for (var _i = 0, varSymbolTable_1 = varSymbolTable; _i < varSymbolTable_1.length; _i++) {\\n            var symbol = varSymbolTable_1[_i];\\n            if (!includeVarTypes.includes(symbol.varType)) {\\n                continue;\\n            }\\n            container[symbol.name] = init_value_1.default(symbol.typeSpec);\\n        }\\n        return container;\\n    };\\n    Executor.prototype.executeStmts = function (ctx, stmts, labelIndexMap) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var gosubStates, stmtIdx, _loop_1, this_1;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        gosubStates = [];\\n                        stmtIdx = 0;\\n                        _loop_1 = function () {\\n                            var stmt, errorArgs, directive, e_2, gotoLabel, gosubState;\\n                            return __generator(this, function (_b) {\\n                                switch (_b.label) {\\n                                    case 0:\\n                                        if (this_1.platform.shouldStopExecution) {\\n                                            this_1.platform.shouldStopExecution = false;\\n                                            throw new EndDirective();\\n                                        }\\n                                        stmt = stmts[stmtIdx];\\n                                        errorArgs = { module: this_1.currentModule, stmt: stmt };\\n                                        if (!(this_1.stmtExecutionDelayUs > 0)) return [3 /*break*/, 2];\\n                                        return [4 /*yield*/, this_1.platform.delay(this_1.stmtExecutionDelayUs)];\\n                                    case 1:\\n                                        _b.sent();\\n                                        _b.label = 2;\\n                                    case 2:\\n                                        directive = void 0;\\n                                        if (!('run' in stmt)) return [3 /*break*/, 6];\\n                                        _b.label = 3;\\n                                    case 3:\\n                                        _b.trys.push([3, 5, , 6]);\\n                                        return [4 /*yield*/, stmt.run(ctx)];\\n                                    case 4:\\n                                        directive = _b.sent();\\n                                        return [3 /*break*/, 6];\\n                                    case 5:\\n                                        e_2 = _b.sent();\\n                                        if (e_2.isEndDirective) {\\n                                            throw e_2;\\n                                        }\\n                                        else {\\n                                            throw new ExecutionError(e_2.message, errorArgs);\\n                                        }\\n                                        return [3 /*break*/, 6];\\n                                    case 6:\\n                                        if (!directive) {\\n                                            ++stmtIdx;\\n                                            return [2 /*return*/, \\\"continue\\\"];\\n                                        }\\n                                        gotoLabel = function (label) {\\n                                            stmtIdx = labelIndexMap[label];\\n                                            if (stmtIdx === undefined) {\\n                                                throw new ExecutionError(\\\"Label not found: \\\\\\\"\\\" + label + \\\"\\\\\\\"\\\", errorArgs);\\n                                            }\\n                                        };\\n                                        switch (directive.type) {\\n                                            case compiled_code_1.ExecutionDirectiveType.GOSUB:\\n                                                gosubStates.push({\\n                                                    nextStmtIdx: stmtIdx + 1,\\n                                                });\\n                                                gotoLabel(directive.destLabel);\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.GOTO:\\n                                                gotoLabel(directive.destLabel);\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.RETURN:\\n                                                if (gosubStates.length === 0) {\\n                                                    throw new ExecutionError(\\\"RETURN without prior GOSUB\\\", errorArgs);\\n                                                }\\n                                                gosubState = gosubStates.pop();\\n                                                if (directive.destLabel) {\\n                                                    gotoLabel(directive.destLabel);\\n                                                }\\n                                                else {\\n                                                    stmtIdx = gosubState.nextStmtIdx;\\n                                                }\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.END:\\n                                                throw new EndDirective();\\n                                            case compiled_code_1.ExecutionDirectiveType.EXIT_PROC:\\n                                                stmtIdx = stmts.length;\\n                                                break;\\n                                            default:\\n                                                throw new ExecutionError(\\\"Unrecognized execution directive: \\\" + JSON.stringify(directive), errorArgs);\\n                                        }\\n                                        return [2 /*return*/];\\n                                }\\n                            });\\n                        };\\n                        this_1 = this;\\n                        _a.label = 1;\\n                    case 1:\\n                        if (!(stmtIdx < stmts.length)) return [3 /*break*/, 3];\\n                        return [5 /*yield**/, _loop_1()];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 1];\\n                    case 3: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Executor.prototype.read = function () {\\n        var resultTypes = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            resultTypes[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var results, i, dataItem;\\n            return __generator(this, function (_a) {\\n                results = [];\\n                for (i = 0; i < resultTypes.length; ++i) {\\n                    dataItem = this.getNextDataItem();\\n                    if (!dataItem) {\\n                        throw new Error(\\\"Data exhausted at item \\\" + (i + 1));\\n                    }\\n                    try {\\n                        results.push(data_item_1.getDataItem(dataItem, resultTypes[i]));\\n                    }\\n                    catch (e) {\\n                        e.message = \\\"Error reading item \\\" + (i + 1) + \\\": \\\" + e.message;\\n                        throw e;\\n                    }\\n                }\\n                return [2 /*return*/, results];\\n            });\\n        });\\n    };\\n    Executor.prototype.getNextDataItem = function () {\\n        var stmts = this.currentModule.stmts;\\n        for (;;) {\\n            if (this.dataCursor.stmtIdx >= stmts.length) {\\n                return null;\\n            }\\n            var stmt = stmts[this.dataCursor.stmtIdx];\\n            if (!('data' in stmt)) {\\n                ++this.dataCursor.stmtIdx;\\n                continue;\\n            }\\n            if (this.dataCursor.itemIdx >= stmt.data.length) {\\n                ++this.dataCursor.stmtIdx;\\n                this.dataCursor.itemIdx = 0;\\n                continue;\\n            }\\n            return stmt.data[this.dataCursor.itemIdx++];\\n        }\\n    };\\n    Executor.prototype.restore = function (destLabel) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var stmtIdx;\\n            var _a, _b;\\n            return __generator(this, function (_c) {\\n                if (destLabel) {\\n                    stmtIdx = this.moduleLabelIndexMap[destLabel];\\n                    if (stmtIdx === undefined) {\\n                        throw new Error(\\\"Label not found: \\\\\\\"\\\" + destLabel + \\\"\\\\\\\"\\\");\\n                    }\\n                    _a = [stmtIdx, 0], this.dataCursor.stmtIdx = _a[0], this.dataCursor.itemIdx = _a[1];\\n                }\\n                else {\\n                    _b = [0, 0], this.dataCursor.stmtIdx = _b[0], this.dataCursor.itemIdx = _b[1];\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    Executor.prototype.buildLabelIndexMaps = function () {\\n        this.moduleLabelIndexMap = this.buildLabelIndexMap(this.currentModule.stmts);\\n        for (var _i = 0, _a = this.currentModule.procs; _i < _a.length; _i++) {\\n            var _b = _a[_i], name_1 = _b.name, stmts = _b.stmts;\\n            this.procLabelIndexMap[name_1] = this.buildLabelIndexMap(stmts);\\n        }\\n    };\\n    Executor.prototype.buildLabelIndexMap = function (stmts) {\\n        var _this = this;\\n        var labelIndexMap = {};\\n        stmts.forEach(function (stmt, idx) {\\n            if ('label' in stmt) {\\n                if (stmt.label in labelIndexMap) {\\n                    throw new ExecutionError(\\\"Duplicate label \\\\\\\"\\\" + stmt.label + \\\"\\\\\\\"\\\", {\\n                        module: _this.currentModule,\\n                        stmt: stmt,\\n                    });\\n                }\\n                labelIndexMap[stmt.label] = idx;\\n            }\\n        });\\n        return labelIndexMap;\\n    };\\n    return Executor;\\n}());\\nexports.default = Executor;\\n\\n\\n/***/ }),\\n\\n/***/ 176:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nvar _a;\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar qb_array_1 = __importDefault(__nccwpck_require__(59));\\nvar qb_udt_1 = __importDefault(__nccwpck_require__(83));\\n/** Initial value for elementary data types. */\\nvar ELEMENTARY_TYPE_INIT_VALUES = (_a = {},\\n    _a[types_1.DataType.INTEGER] = 0,\\n    _a[types_1.DataType.LONG] = 0,\\n    _a[types_1.DataType.SINGLE] = 0.0,\\n    _a[types_1.DataType.DOUBLE] = 0.0,\\n    _a[types_1.DataType.STRING] = '',\\n    _a);\\nfunction initValue(typeSpec) {\\n    var dataType = typeSpec.type;\\n    if (types_1.isElementaryType(dataType)) {\\n        return ELEMENTARY_TYPE_INIT_VALUES[dataType];\\n    }\\n    switch (typeSpec.type) {\\n        case types_1.DataType.ARRAY:\\n            return new qb_array_1.default(typeSpec);\\n        case types_1.DataType.UDT:\\n            return new qb_udt_1.default(typeSpec);\\n        default:\\n            throw new Error(\\\"Unknown type: \\\" + JSON.stringify(typeSpec));\\n    }\\n}\\nexports.default = initValue;\\n\\n\\n/***/ }),\\n\\n/***/ 999:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.NodeExecutor = exports.NodePlatform = void 0;\\nvar ansi_escapes_1 = __importDefault(__nccwpck_require__(575));\\nvar perf_hooks_1 = __nccwpck_require__(630);\\nvar require_from_string_1 = __importDefault(__nccwpck_require__(7));\\nvar ansi_terminal_platform_1 = __importDefault(__nccwpck_require__(769));\\nvar executor_1 = __importDefault(__nccwpck_require__(586));\\n/** RuntimePlatform for Node.JS on TTY. */\\nvar NodePlatform = /** @class */ (function (_super) {\\n    __extends(NodePlatform, _super);\\n    function NodePlatform() {\\n        var _this = _super !== null && _super.apply(this, arguments) || this;\\n        // When running in Node, delay is implemented using setImmediate and won't\\n        // block other functionality. So we can safely set a higher delay value for\\n        // better compatibility.\\n        _this.defaultStmtExecutionDelayUs = 5;\\n        return _this;\\n    }\\n    NodePlatform.prototype.loadCompiledModule = function (code) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, require_from_string_1.default(code)];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.delay = function (delayInUs) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var t0;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        t0 = perf_hooks_1.performance.now();\\n                        _a.label = 1;\\n                    case 1:\\n                        if (!((perf_hooks_1.performance.now() - t0) * 1000 < delayInUs)) return [3 /*break*/, 3];\\n                        return [4 /*yield*/, new Promise(function (resolve) { return setImmediate(resolve); })];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 1];\\n                    case 3: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.print = function (s) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                process.stdout.write(s);\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.inputLine = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, new Promise(function (resolve) {\\n                        process.stdin.resume();\\n                        process.stdin.setRawMode(false);\\n                        process.stdin.once('data', function (chunk) {\\n                            process.stdin.pause();\\n                            resolve(chunk.toString());\\n                        });\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getChar = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var result, callbackFn;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                result = null;\\n                process.stdin.resume();\\n                process.stdin.setRawMode(true);\\n                callbackFn = function (chunk) {\\n                    result = _this.translateKeyCode(chunk.toString());\\n                    // Handle Ctrl-C\\n                    if (result === String.fromCharCode(3)) {\\n                        throw new Error('Received Ctrl-C, aborting');\\n                    }\\n                    process.stdin.pause();\\n                };\\n                process.stdin.once('data', callbackFn);\\n                return [2 /*return*/, new Promise(function (resolve) {\\n                        setTimeout(function () {\\n                            if (result === null) {\\n                                process.stdin.removeListener('data', callbackFn);\\n                                process.stdin.pause();\\n                            }\\n                            resolve(result);\\n                        }, 20);\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getCursorPosition = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var originalIsRaw;\\n            return __generator(this, function (_a) {\\n                // Based on https://github.com/bubkoo/get-cursor-position/blob/master/index.js\\n                process.stdin.resume();\\n                originalIsRaw = process.stdin.isRaw;\\n                process.stdin.setRawMode(true);\\n                return [2 /*return*/, new Promise(function (resolve, reject) {\\n                        process.stdin.once('data', function (chunk) {\\n                            process.stdin.pause();\\n                            process.stdin.setRawMode(originalIsRaw);\\n                            var match = chunk.toString().match(/\\\\[(\\\\d+)\\\\;(\\\\d+)R/);\\n                            if (match) {\\n                                var _a = [match[1], match[2]], row = _a[0], col = _a[1];\\n                                var result = {\\n                                    // ANSI row & col numbers are 1-based.\\n                                    x: parseInt(col) - 1,\\n                                    y: parseInt(row) - 1,\\n                                };\\n                                resolve(result);\\n                            }\\n                            else {\\n                                reject();\\n                            }\\n                        });\\n                        process.stdout.write(ansi_escapes_1.default.cursorGetPosition);\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getScreenSize = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var origPos, bottomRightPos;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.getCursorPosition()];\\n                    case 1:\\n                        origPos = _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(10000, 10000)];\\n                    case 2:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.getCursorPosition()];\\n                    case 3:\\n                        bottomRightPos = _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(origPos.x, origPos.y)];\\n                    case 4:\\n                        _a.sent();\\n                        return [2 /*return*/, {\\n                                rows: bottomRightPos.y + 1,\\n                                cols: bottomRightPos.x + 1,\\n                            }];\\n                }\\n            });\\n        });\\n    };\\n    return NodePlatform;\\n}(ansi_terminal_platform_1.default));\\nexports.NodePlatform = NodePlatform;\\nvar NodeExecutor = /** @class */ (function (_super) {\\n    __extends(NodeExecutor, _super);\\n    function NodeExecutor(opts) {\\n        if (opts === void 0) { opts = {}; }\\n        return _super.call(this, new NodePlatform(), opts) || this;\\n    }\\n    return NodeExecutor;\\n}(executor_1.default));\\nexports.NodeExecutor = NodeExecutor;\\n\\n\\n/***/ }),\\n\\n/***/ 421:\\n/***/ (function(module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar node_platform_1 = __nccwpck_require__(999);\\n/** Executes the bundled module.\\n *\\n * This is the main execution entrypoint to a compiled program.\\n */\\nfunction run(opts) {\\n    if (opts === void 0) { opts = {}; }\\n    return __awaiter(this, void 0, void 0, function () {\\n        var stmtExecutionDelayUs;\\n        return __generator(this, function (_a) {\\n            switch (_a.label) {\\n                case 0:\\n                    if (process.env.DELAY) {\\n                        stmtExecutionDelayUs = parseInt(process.env.DELAY);\\n                        if (isNaN(stmtExecutionDelayUs)) {\\n                            stmtExecutionDelayUs = undefined;\\n                        }\\n                    }\\n                    return [4 /*yield*/, new node_platform_1.NodeExecutor(__assign({ stmtExecutionDelayUs: stmtExecutionDelayUs }, opts)).executeModule(compiledModule)];\\n                case 1: return [2 /*return*/, _a.sent()];\\n            }\\n        });\\n    });\\n}\\nmodule.exports = __assign(__assign({}, (typeof compiledModule === 'undefined' ? {} : compiledModule)), { run: run });\\n// When invoked directly as part of a compiled program, execute the bundled module.\\nif (require.main === require.cache[eval('__filename')]) {\\n    run();\\n}\\n\\n\\n/***/ }),\\n\\n/***/ 59:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\n/** Runtime representation for QBasic arrays. */\\nvar QbArray = /** @class */ (function () {\\n    function QbArray(arrayTypeSpec) {\\n        /** The underlying array storing the actual elements. */\\n        this._values = [];\\n        this.init(arrayTypeSpec.elementTypeSpec, arrayTypeSpec.dimensionSpecs);\\n    }\\n    /** Initializes the array with the provided spec, discarding any previous contents. */\\n    QbArray.prototype.init = function (elementTypeSpec, dimensionSpecs) {\\n        if (dimensionSpecs.length === 0) {\\n            throw new Error('No dimension specs provided');\\n        }\\n        this._typeSpec = types_1.arraySpec(elementTypeSpec, dimensionSpecs);\\n        this._values.length = 0;\\n        var currentDimensionArrays = [this._values];\\n        for (var i = 0; i < dimensionSpecs.length; ++i) {\\n            var _a = dimensionSpecs[i], minIdx = _a[0], maxIdx = _a[1];\\n            var numElements = maxIdx - minIdx + 1;\\n            var nextDimensionArrays = [];\\n            for (var _i = 0, currentDimensionArrays_1 = currentDimensionArrays; _i < currentDimensionArrays_1.length; _i++) {\\n                var dimensionArray = currentDimensionArrays_1[_i];\\n                if (i === dimensionSpecs.length - 1) {\\n                    for (var j = 0; j < numElements; ++j) {\\n                        dimensionArray.push(init_value_1.default(elementTypeSpec));\\n                    }\\n                }\\n                else {\\n                    for (var j = 0; j < numElements; ++j) {\\n                        var nextDimensionArray = new Array();\\n                        nextDimensionArrays.push(nextDimensionArray);\\n                        dimensionArray.push(nextDimensionArray);\\n                    }\\n                }\\n            }\\n            currentDimensionArrays = nextDimensionArrays;\\n        }\\n    };\\n    /** Translates a QBasic index into the index in the underlying array. */\\n    QbArray.prototype.getIdx = function (dimensionIdx, qbIdx) {\\n        var dimensionSpecs = this._typeSpec.dimensionSpecs;\\n        if (!Number.isFinite(dimensionIdx) ||\\n            dimensionIdx < 0 ||\\n            dimensionIdx >= dimensionSpecs.length) {\\n            throw new Error('Invalid dimension in getIndex: ' +\\n                (\\\"expected number between 0 and \\\" + (dimensionSpecs.length - 1) + \\\", \\\") +\\n                (\\\"got \\\" + dimensionIdx));\\n        }\\n        var _a = dimensionSpecs[dimensionIdx], minIdx = _a[0], maxIdx = _a[1];\\n        if (!Number.isFinite(qbIdx) || qbIdx < minIdx || qbIdx > maxIdx) {\\n            throw new Error(\\\"Index out of range for dimension \\\" + (dimensionIdx + 1) + \\\": \\\" +\\n                (\\\"expected number between \\\" + minIdx + \\\" and \\\" + maxIdx + \\\", \\\") +\\n                (\\\"got \\\" + qbIdx));\\n        }\\n        return qbIdx - minIdx;\\n    };\\n    Object.defineProperty(QbArray.prototype, \\\"values\\\", {\\n        get: function () {\\n            return this._values;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(QbArray.prototype, \\\"typeSpec\\\", {\\n        get: function () {\\n            return this._typeSpec;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return QbArray;\\n}());\\nexports.default = QbArray;\\n\\n\\n/***/ }),\\n\\n/***/ 83:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\n/** Runtime representation for QBasic user-defined types. */\\nvar QbUdt = /** @class */ (function () {\\n    function QbUdt(udtTypeSpec) {\\n        /** The underlying array storing the actual elements. */\\n        this._values = {};\\n        this._typeSpec = __assign({}, udtTypeSpec);\\n        this.init();\\n    }\\n    QbUdt.prototype.init = function () {\\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\\n            var fieldSpec = _a[_i];\\n            this._values[fieldSpec.name] = init_value_1.default(fieldSpec.typeSpec);\\n        }\\n    };\\n    QbUdt.prototype.clone = function () {\\n        var newQbUdt = new QbUdt(this._typeSpec);\\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\\n            var fieldSpec = _a[_i];\\n            var value = this._values[fieldSpec.name];\\n            newQbUdt._values[fieldSpec.name] = types_1.isUdt(fieldSpec.typeSpec)\\n                ? value.clone()\\n                : value;\\n        }\\n        return newQbUdt;\\n    };\\n    Object.defineProperty(QbUdt.prototype, \\\"values\\\", {\\n        get: function () {\\n            return this._values;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(QbUdt.prototype, \\\"typeSpec\\\", {\\n        get: function () {\\n            return this._typeSpec;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return QbUdt;\\n}());\\nexports.default = QbUdt;\\n\\n\\n/***/ }),\\n\\n/***/ 753:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\\n        to[j] = from[i];\\n    return to;\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.SCREEN_MODE_CONFIGS = exports.RuntimePlatform = void 0;\\nvar moo_1 = __importDefault(__nccwpck_require__(357));\\nvar types_1 = __nccwpck_require__(521);\\nvar builtins_1 = __nccwpck_require__(562);\\nvar compiled_code_1 = __nccwpck_require__(308);\\nvar round_half_to_even_1 = __importDefault(__nccwpck_require__(345));\\n/** Interface for platform-specific runtime functionality. */\\nvar RuntimePlatform = /** @class */ (function () {\\n    function RuntimePlatform() {\\n        /** Flag indicating we should stop executing.\\n         *\\n         * Setting this flag will cause blocking methods like `inputLine()` to exit early.\\n         */\\n        this.shouldStopExecution = false;\\n    }\\n    return RuntimePlatform;\\n}());\\nexports.RuntimePlatform = RuntimePlatform;\\nexports.SCREEN_MODE_CONFIGS = [\\n    {\\n        mode: 0,\\n        textModeDimensions: [{ rows: 80, cols: 25 }],\\n        colorMap: [\\n            'black',\\n            'blue',\\n            'green',\\n            'cyan',\\n            'red',\\n            'magenta',\\n            'yellow',\\n            'white',\\n            'gray',\\n            'blueBright',\\n            'greenBright',\\n            'cyanBright',\\n            'redBright',\\n            'magentaBright',\\n            'yellowBright',\\n            'whiteBright',\\n        ],\\n    },\\n];\\n/** Runtime support library.\\n *\\n * This class provides the interface invoked by compiled code. It is platform-agnostic, and wraps\\n * the low-level, platform-dependent functionality in the injected RuntimePlatform.\\n */\\nvar Runtime = /** @class */ (function () {\\n    function Runtime(platform) {\\n        this.platform = platform;\\n        this.roundHalfToEven = round_half_to_even_1.default;\\n        this.printFormatStringLexer = moo_1.default.compile({\\n            NUMBER: /(?:[#,])*\\\\.#+|[#,]+/,\\n            STRING: '&',\\n            DOLLAR_SIGNS: /\\\\$+/,\\n            LITERAL: {\\n                match: /[^.#&\\\\$]+/,\\n                lineBreaks: true,\\n            },\\n        });\\n        /** Lexer for input(). */\\n        this.inputLexer = moo_1.default.compile({\\n            WHITESPACE: { match: /\\\\s+/, lineBreaks: true },\\n            QUOTED_STRING: {\\n                match: /\\\"[^\\\"]*\\\"/,\\n                value: function (text) { return text.substr(1, text.length - 2); },\\n                type: function () { return 'STRING'; },\\n            },\\n            COMMA: ',',\\n            STRING: /[^,\\\\s]+/,\\n        });\\n        this.currentScreenMode = 0;\\n    }\\n    Runtime.prototype.executeBuiltinProc = function (name, argTypeSpecs) {\\n        var args = [];\\n        for (var _i = 2; _i < arguments.length; _i++) {\\n            args[_i - 2] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var builtinProc, runContext;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs) ||\\n                            builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs);\\n                        if (!builtinProc) {\\n                            throw new Error(\\\"No matching built-in procedure found: \\\\\\\"\\\" + name + \\\"\\\\\\\"\\\");\\n                        }\\n                        if (argTypeSpecs.length !== args.length) {\\n                            throw new Error(\\\"Argument types and values do not match: \\\" +\\n                                (\\\"expected \\\" + argTypeSpecs.length + \\\" arguments, got \\\" + args.length));\\n                        }\\n                        runContext = {\\n                            runtime: this,\\n                            platform: this.platform,\\n                            argTypeSpecs: argTypeSpecs,\\n                            args: args,\\n                        };\\n                        return [4 /*yield*/, builtinProc.run.apply(builtinProc, __spreadArray(__spreadArray([], args.map(function (ptr) { return ptr[0][ptr[1]]; })), [runContext]))];\\n                    case 1: return [2 /*return*/, _a.sent()];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.print = function (formatString) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var line;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        line = formatString\\n                            ? this.printWithFormatString(formatString, args)\\n                            : this.printWithDefaultFormat(args);\\n                        if (args.length === 0 ||\\n                            args[args.length - 1].type === compiled_code_1.PrintArgType.VALUE) {\\n                            line += '\\\\n';\\n                        }\\n                        return [4 /*yield*/, this.platform.print(line)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Implements PRINT USING format strings.\\n     *\\n     * This is a VERY incomplete implementation. Supported:\\n     *\\n     *   - Formatting numbers with ##.##\\n     *   - Formatting string with &\\n     */\\n    Runtime.prototype.printWithFormatString = function (formatString, args) {\\n        var pieces = [];\\n        var argIdx = 0;\\n        this.printFormatStringLexer.reset(formatString);\\n        for (;;) {\\n            while (argIdx < args.length && args[argIdx].type !== compiled_code_1.PrintArgType.VALUE) {\\n                ++argIdx;\\n            }\\n            var nextArg = argIdx < args.length ? args[argIdx] : null;\\n            var token = this.printFormatStringLexer.next();\\n            if (!token) {\\n                break;\\n            }\\n            switch (token.type) {\\n                case 'NUMBER':\\n                    if (!nextArg || typeof nextArg.value !== 'number') {\\n                        throw new Error('Formatting error: expected number ' +\\n                            (\\\"as argument #\\\" + (argIdx + 1) + \\\", got \\\" + typeof (nextArg === null || nextArg === void 0 ? void 0 : nextArg.value)));\\n                    }\\n                    var _a = token.value.split('.'), integralFormat = _a[0], fractionFormat = _a[1];\\n                    // Not supporting commas yet.\\n                    var integralFormatLength = integralFormat.replace(/,/, '').length;\\n                    if (fractionFormat) {\\n                        var formattedValue = (\\\"\\\" + Math.floor(nextArg.value)).padStart(integralFormatLength) +\\n                            '.' +\\n                            nextArg.value.toFixed(fractionFormat.length).split('.')[1];\\n                        pieces.push(formattedValue);\\n                    }\\n                    else {\\n                        var formattedValue = nextArg.value.toFixed(0).padStart(integralFormatLength) +\\n                            (token.value.indexOf('.') >= 0 ? '.' : '');\\n                        pieces.push(formattedValue);\\n                    }\\n                    ++argIdx;\\n                    break;\\n                case 'STRING':\\n                    if (!nextArg || typeof nextArg.value !== 'string') {\\n                        throw new Error(\\\"Formatting error: expected string as argument #\\\" + (argIdx + 1));\\n                    }\\n                    pieces.push(nextArg.value);\\n                    ++argIdx;\\n                    break;\\n                case 'DOLLAR_SIGNS': {\\n                    var value = void 0;\\n                    if (token.value.length <= 1) {\\n                        value = token.value;\\n                    }\\n                    else if (token.value.length === 2) {\\n                        value = ' $';\\n                    }\\n                    else {\\n                        value = '%$';\\n                    }\\n                    pieces.push(value);\\n                    break;\\n                }\\n                case 'LITERAL':\\n                    pieces.push(token.value);\\n                    break;\\n                default:\\n                    throw new Error(\\\"Unexpected token type: \\\" + JSON.stringify(token));\\n            }\\n        }\\n        return pieces.join('');\\n    };\\n    Runtime.prototype.printWithDefaultFormat = function (args) {\\n        var PRINT_ZONE_LENGTH = 14;\\n        var line = '';\\n        for (var _i = 0, args_1 = args; _i < args_1.length; _i++) {\\n            var arg = args_1[_i];\\n            switch (arg.type) {\\n                case compiled_code_1.PrintArgType.SEMICOLON:\\n                    break;\\n                case compiled_code_1.PrintArgType.COMMA:\\n                    var numPaddingChars = PRINT_ZONE_LENGTH - (line.length % PRINT_ZONE_LENGTH);\\n                    line += ' '.repeat(numPaddingChars);\\n                    break;\\n                case compiled_code_1.PrintArgType.VALUE:\\n                    if (typeof arg.value === 'string') {\\n                        line += \\\"\\\" + arg.value;\\n                        break;\\n                    }\\n                    else if (typeof arg.value === 'number') {\\n                        line += \\\"\\\" + (arg.value >= 0 ? ' ' : '') + arg.value + \\\" \\\";\\n                        break;\\n                    }\\n                    else {\\n                        // Fall through\\n                    }\\n                default:\\n                    throw new Error(\\\"Unknown print arg: '\\\" + JSON.stringify(arg) + \\\"'\\\");\\n            }\\n        }\\n        return line;\\n    };\\n    Runtime.prototype.inputLine = function (prompt) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var line;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!prompt) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.platform.print(prompt)];\\n                    case 1:\\n                        _a.sent();\\n                        _a.label = 2;\\n                    case 2: return [4 /*yield*/, this.platform.setCursorVisibility(true)];\\n                    case 3:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.platform.inputLine()];\\n                    case 4:\\n                        line = _a.sent();\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\\n                    case 5:\\n                        _a.sent();\\n                        return [2 /*return*/, line];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.input = function (prompt) {\\n        var resultTypes = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            resultTypes[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var results, line, tokens, tokenIdx, errorMessage, resultIdx, resultType, errorMessagePrefix, tokenValue, numericValue;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        results = [];\\n                        return [4 /*yield*/, this.platform.print(prompt)];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.inputLine('')];\\n                    case 2:\\n                        line = _a.sent();\\n                        if (this.platform.shouldStopExecution) {\\n                            return [2 /*return*/, results];\\n                        }\\n                        tokens = this.lexInput(line);\\n                        tokenIdx = 0;\\n                        errorMessage = null;\\n                        for (resultIdx = 0; resultIdx < resultTypes.length; ++resultIdx) {\\n                            resultType = resultTypes[resultIdx];\\n                            errorMessagePrefix = \\\"Error parsing value \\\" + (resultIdx + 1) + \\\": \\\";\\n                            // Consume comma token for result 1+.\\n                            if (resultIdx > 0) {\\n                                if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'COMMA') {\\n                                    ++tokenIdx;\\n                                }\\n                                else {\\n                                    errorMessage = errorMessagePrefix + \\\"Comma expected\\\";\\n                                    break;\\n                                }\\n                            }\\n                            // Consume value.\\n                            if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'STRING') {\\n                                tokenValue = tokens[tokenIdx].value;\\n                                if (types_1.isString(resultType)) {\\n                                    results.push(tokenValue);\\n                                }\\n                                else if (types_1.isNumeric(resultType)) {\\n                                    numericValue = parseFloat(tokenValue);\\n                                    if (isNaN(numericValue)) {\\n                                        errorMessage = errorMessagePrefix + \\\"Invalid numeric value \\\\\\\"\\\" + tokenValue + \\\"\\\\\\\"\\\";\\n                                        break;\\n                                    }\\n                                    else {\\n                                        results.push(numericValue);\\n                                    }\\n                                }\\n                                else {\\n                                    throw new Error(\\\"Unexpected result type \\\" + resultType.type);\\n                                }\\n                                ++tokenIdx;\\n                            }\\n                            else {\\n                                errorMessage = errorMessagePrefix + \\\"No value provided\\\";\\n                                break;\\n                            }\\n                        }\\n                        if (!(results.length === resultTypes.length)) return [3 /*break*/, 3];\\n                        return [2 /*return*/, results];\\n                    case 3:\\n                        if (!(results.length < resultTypes.length)) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, this.platform.print(\\\"\\\\n\\\" + (errorMessage ? errorMessage + \\\"\\\\n\\\" : '') + \\\"Redo from start\\\\n\\\")];\\n                    case 4:\\n                        _a.sent();\\n                        return [3 /*break*/, 6];\\n                    case 5: \\n                    // This would indicate a logic error above - we should stop consuming from input once the\\n                    // expected number of results has been reached.\\n                    throw new Error(\\\"Too many results: expected \\\" + resultTypes.length + \\\", got \\\" + results.length);\\n                    case 6: return [3 /*break*/, 0];\\n                    case 7: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.lexInput = function (line) {\\n        this.inputLexer.reset(line.trim());\\n        var tokens = [];\\n        for (;;) {\\n            var token = this.inputLexer.next();\\n            if (!token) {\\n                break;\\n            }\\n            if (token.type !== 'WHITESPACE') {\\n                tokens.push(token);\\n            }\\n        }\\n        return tokens;\\n    };\\n    Runtime.prototype.setScreenMode = function (n) {\\n        var screenMode = exports.SCREEN_MODE_CONFIGS.find(function (_a) {\\n            var mode = _a.mode;\\n            return mode === n;\\n        });\\n        if (!screenMode) {\\n            throw new Error(\\\"Unsupported screen mode: \\\" + n);\\n        }\\n        this.currentScreenMode = n;\\n    };\\n    Object.defineProperty(Runtime.prototype, \\\"currentScreenModeConfig\\\", {\\n        get: function () {\\n            var _this = this;\\n            return exports.SCREEN_MODE_CONFIGS.find(function (_a) {\\n                var mode = _a.mode;\\n                return mode === _this.currentScreenMode;\\n            });\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return Runtime;\\n}());\\nexports.default = Runtime;\\n\\n\\n/***/ }),\\n\\n/***/ 282:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"module\\\");;\\n\\n/***/ }),\\n\\n/***/ 622:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"path\\\");;\\n\\n/***/ }),\\n\\n/***/ 630:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"perf_hooks\\\");;\\n\\n/***/ })\\n\\n/******/ \\t});\\n/************************************************************************/\\n/******/ \\t// The module cache\\n/******/ \\tvar __webpack_module_cache__ = {};\\n/******/ \\t\\n/******/ \\t// The require function\\n/******/ \\tfunction __nccwpck_require__(moduleId) {\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tvar cachedModule = __webpack_module_cache__[moduleId];\\n/******/ \\t\\tif (cachedModule !== undefined) {\\n/******/ \\t\\t\\treturn cachedModule.exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = __webpack_module_cache__[moduleId] = {\\n/******/ \\t\\t\\tid: moduleId,\\n/******/ \\t\\t\\tloaded: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/ \\t\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tvar threw = true;\\n/******/ \\t\\ttry {\\n/******/ \\t\\t\\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __nccwpck_require__);\\n/******/ \\t\\t\\tthrew = false;\\n/******/ \\t\\t} finally {\\n/******/ \\t\\t\\tif(threw) delete __webpack_module_cache__[moduleId];\\n/******/ \\t\\t}\\n/******/ \\t\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.loaded = true;\\n/******/ \\t\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/ \\t\\n/************************************************************************/\\n/******/ \\t/* webpack/runtime/node module decorator */\\n/******/ \\t(() => {\\n/******/ \\t\\t__nccwpck_require__.nmd = (module) => {\\n/******/ \\t\\t\\tmodule.paths = [];\\n/******/ \\t\\t\\tif (!module.children) module.children = [];\\n/******/ \\t\\t\\treturn module;\\n/******/ \\t\\t};\\n/******/ \\t})();\\n/******/ \\t\\n/******/ \\t/* webpack/runtime/compat */\\n/******/ \\t\\n/******/ \\tif (typeof __nccwpck_require__ !== 'undefined') __nccwpck_require__.ab = __dirname + \\\"/\\\";/************************************************************************/\\n/******/ \\t\\n/******/ \\t// startup\\n/******/ \\t// Load entry module and return exports\\n/******/ \\t// This entry module is referenced by other modules so it can't be inlined\\n/******/ \\tvar __webpack_exports__ = __nccwpck_require__(421);\\n/******/ \\tmodule.exports = __webpack_exports__;\\n/******/ \\t\\n/******/ })()\\n;\" };","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createParser = void 0;\nvar nearley_1 = require(\"nearley\");\nvar grammar_1 = __importDefault(require(\"./grammar\"));\nvar lexer_1 = __importDefault(require(\"./lexer\"));\nvar error_with_loc_1 = __importDefault(require(\"../lib/error-with-loc\"));\nfunction createParser(opts) {\n    return new nearley_1.Parser(nearley_1.Grammar.fromCompiled(grammar_1.default), opts);\n}\nexports.createParser = createParser;\n/** Entry point for parsing an input string into an AST module. */\nfunction parse(input, opts) {\n    var parser = createParser(opts);\n    try {\n        parser.feed(input);\n        // Add terminating line break (necessary due to lack of EOF terminal).\n        parser.feed('\\n');\n    }\n    catch (e) {\n        if ('token' in e) {\n            throw new error_with_loc_1.default(\n            // Hack to reduce verbosity of nearley error messages...\n            e.message.replace(/ Instead, I was expecting to see one of the following:$[\\s\\S]*/gm, ''), {\n                sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n                loc: e.token,\n            });\n        }\n        else {\n            throw e;\n        }\n    }\n    if (parser.results.length === 0) {\n        throw new error_with_loc_1.default(\"Unexpected end of input\", {\n            sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n            loc: lexer_1.default.lastToken,\n        });\n    }\n    else if (parser.results.length !== 1) {\n        throw new error_with_loc_1.default(parser.results.length + \" parse trees:\\n\\n\" +\n            parser.results\n                .map(function (tree, idx) {\n                return \"Parse tree #\" + (idx + 1) + \":\\n\" + JSON.stringify(tree, null, 4);\n            })\n                .join('\\n\\n'), {\n            sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n            loc: lexer_1.default.lastToken,\n        });\n    }\n    return parser.results[0];\n}\nexports.default = parse;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Generated automatically by nearley, version 2.20.1\n// http://github.com/Hardmath123/nearley\n// Bypasses TS6133. Allow declared but unused functions.\n// @ts-ignore\nfunction id(d) { return d[0]; }\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar lexer_1 = __importDefault(require(\"./lexer\"));\nvar ast_1 = require(\"../lib/ast\");\nvar types_1 = require(\"../lib/types\");\n// ----\n// Helper functions.\n// ----\nfunction discard() { return null; }\nfunction useLoc(tokenOrAstNode) {\n    if ('loc' in tokenOrAstNode) {\n        return { loc: tokenOrAstNode.loc };\n    }\n    else if (('line' in tokenOrAstNode) && ('col' in tokenOrAstNode)) {\n        return { loc: { line: tokenOrAstNode.line, col: tokenOrAstNode.col } };\n    }\n    else {\n        throw new Error(\"Invalid tokenOrAstNode: \" + JSON.stringify(tokenOrAstNode));\n    }\n}\nfunction buildBinaryOpExpr(_a) {\n    var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n    return __assign({ type: ast_1.ExprType.BINARY_OP, op: id($2).type.toLowerCase(), leftExpr: $1, rightExpr: $3 }, useLoc($1));\n}\nfunction buildUnaryOpExpr(_a) {\n    var $1 = _a[0], $2 = _a[1];\n    return __assign({ type: ast_1.ExprType.UNARY_OP, op: id($1).type.toLowerCase(), rightExpr: $2 }, useLoc(id($1)));\n}\nfunction buildDataItem(tokenOrAstNode, value) {\n    var _a = useLoc(tokenOrAstNode).loc, line = _a.line, col = _a.col;\n    return [[line, col], value];\n}\n;\n;\n;\n;\nvar grammar = {\n    Lexer: lexer_1.default,\n    ParserRules: [\n        { \"name\": \"module$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"module$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"module$ebnf$2\", \"symbols\": [\"moduleComponentWithSep\"] },\n        { \"name\": \"module$ebnf$2\", \"symbols\": [\"module$ebnf$2\", \"moduleComponentWithSep\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"module\", \"symbols\": [\"module$ebnf$1\", \"module$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return $2.reduce(function (a, b) { return ({\n                    stmts: __spreadArray(__spreadArray([], a.stmts), b.stmts),\n                    procs: __spreadArray(__spreadArray([], a.procs), b.procs),\n                    udts: __spreadArray(__spreadArray([], a.udts), b.udts),\n                }); });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"stmtWithSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    stmts: [$1],\n                    procs: [],\n                    udts: [],\n                });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"proc\", \"stmtSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return ({\n                    stmts: [],\n                    procs: $1 ? [$1] : [],\n                    udts: [],\n                });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"udt\", \"stmtSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return ({\n                    stmts: [],\n                    procs: [],\n                    udts: $1 ? [$1] : [],\n                });\n            }\n        },\n        { \"name\": \"proc\", \"symbols\": [\"fnProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"subProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"defFnExprProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"procDecl\"], \"postprocess\": discard },\n        { \"name\": \"fnProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"fnProc$ebnf$1\", \"symbols\": [\"fnProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"fnProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fnProc$ebnf$2\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC)], \"postprocess\": id },\n        { \"name\": \"fnProc$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fnProc\", \"symbols\": [(lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"fnProc$ebnf$1\", \"fnProc$ebnf$2\", \"stmts\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: types_1.ProcType.FN, name: $2.value, params: $3 ? $3[1] : [], stmts: $5, isDefaultStatic: !!$4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"subProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"subProc$ebnf$1\", \"symbols\": [\"subProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"subProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"subProc$ebnf$2\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC)], \"postprocess\": id },\n        { \"name\": \"subProc$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"subProc\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"subProc$ebnf$1\", \"subProc$ebnf$2\", \"stmts\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: types_1.ProcType.SUB, name: $2.value, params: $3 ? $3[1] : [], stmts: $5, isDefaultStatic: !!$4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defFnExprProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"defFnExprProc$ebnf$1\", \"symbols\": [\"defFnExprProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"defFnExprProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"defFnExprProc\", \"symbols\": [(lexer_1.default.has(\"DEF\") ? { type: \"DEF\" } : DEF), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"defFnExprProc$ebnf$1\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a, position, reject) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                if (!$2.value.toLowerCase().startsWith('fn')) {\n                    return reject;\n                }\n                return __assign({ type: types_1.ProcType.DEF_FN, name: $2.value, params: $3 ? $3[1] : [], stmts: [\n                        __assign({ type: ast_1.StmtType.ASSIGN, targetExpr: __assign({ type: ast_1.ExprType.VAR_REF, name: $2.value }, useLoc($4)), valueExpr: $5 }, useLoc($4))\n                    ], isDefaultStatic: false }, useLoc($1));\n            }\n        },\n        { \"name\": \"procDecl$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)] },\n        { \"name\": \"procDecl$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"procDecl$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"procDecl$ebnf$1\", \"symbols\": [\"procDecl$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"procDecl$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"procDecl\", \"symbols\": [(lexer_1.default.has(\"DECLARE\") ? { type: \"DECLARE\" } : DECLARE), \"procDecl$subexpression$1\", (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"procDecl$ebnf$1\"], \"postprocess\": discard },\n        { \"name\": \"params\", \"symbols\": [], \"postprocess\": function () { return []; } },\n        { \"name\": \"params$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"params$ebnf$1$subexpression$1\", \"symbols\": [\"param\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"params$ebnf$1\", \"symbols\": [\"params$ebnf$1\", \"params$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"params\", \"symbols\": [\"params$ebnf$1\", \"param\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"param\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"param\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ name: $1.value, typeExpr: __assign({ type: ast_1.DataTypeExprType.ARRAY, elementTypeExpr: $4, dimensionSpecExprs: [] }, useLoc($1)) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"udt\", \"symbols\": [(lexer_1.default.has(\"TYPE\") ? { type: \"TYPE\" } : TYPE), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"fieldExprs\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"TYPE\") ? { type: \"TYPE\" } : TYPE)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ name: $2.value, fieldSpecExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"fieldExprs$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs\", \"symbols\": [\"fieldExprs$ebnf$1\"], \"postprocess\": function () { return []; } },\n        { \"name\": \"fieldExprs$ebnf$2\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs$ebnf$3\", \"symbols\": [] },\n        { \"name\": \"fieldExprs$ebnf$3$subexpression$1\", \"symbols\": [\"fieldExpr\", \"stmtSep\"] },\n        { \"name\": \"fieldExprs$ebnf$3\", \"symbols\": [\"fieldExprs$ebnf$3\", \"fieldExprs$ebnf$3$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"fieldExprs$ebnf$4\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$4\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs\", \"symbols\": [\"fieldExprs$ebnf$2\", \"fieldExprs$ebnf$3\", \"fieldExpr\", \"fieldExprs$ebnf$4\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return __spreadArray(__spreadArray([], ($2 ? $2.map(function (_a) {\n                    var $2_1 = _a[0], $2_2 = _a[1];\n                    return $2_1;\n                }) : [])), [\n                    $3,\n                ]);\n            }\n        },\n        { \"name\": \"fieldExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"stmts$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmts$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmts$ebnf$2\", \"symbols\": [] },\n        { \"name\": \"stmts$ebnf$2\", \"symbols\": [\"stmts$ebnf$2\", \"stmtWithSep\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"stmts\", \"symbols\": [\"stmts$ebnf$1\", \"stmts$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return $2;\n            } },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)] },\n        { \"name\": \"stmtSep$ebnf$1\", \"symbols\": [\"stmtSep$ebnf$1$subexpression$1\"] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)] },\n        { \"name\": \"stmtSep$ebnf$1\", \"symbols\": [\"stmtSep$ebnf$1\", \"stmtSep$ebnf$1$subexpression$2\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"stmtSep\", \"symbols\": [\"stmtSep$ebnf$1\"], \"postprocess\": discard },\n        { \"name\": \"stmtWithSep$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"labelStmt\", \"stmtWithSep$ebnf$1\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"nonLabelStmt\", \"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$2\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"singleLineIfStmt\", \"stmtWithSep$ebnf$2\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"dimStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"assignStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"constStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"gotoStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"blockIfStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"selectStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"whileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doWhileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doUntilStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"loopWhileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"loopUntilStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doLoopStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitLoopStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"forStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"nextStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitForStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"gosubStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"returnStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"callStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitProcStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"endStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"swapStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"printStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"inputStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"defTypeStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"dataStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"readStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"restoreStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"callStmtWithOptParams\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"defSegStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"viewPrintStmt\"], \"postprocess\": id },\n        { \"name\": \"labelStmt\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0];\n                return $1.isFirstTokenOnLine ? __assign({ type: ast_1.StmtType.LABEL, label: $1.value }, useLoc($1)) : reject;\n            }\n        },\n        { \"name\": \"labelStmt\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0], $2 = _a[1];\n                // A line like \"f: f:\" should parse as a label \"f\" followed by an invocation of the\n                // sub \"f\", so need to explicitly disambiguate here.\n                return $1.isFirstTokenOnLine ? __assign({ type: ast_1.StmtType.LABEL, label: $1.value }, useLoc($1)) : reject;\n            }\n        },\n        { \"name\": \"dimStmt$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"SHARED\") ? { type: \"SHARED\" } : SHARED)], \"postprocess\": id },\n        { \"name\": \"dimStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"DIM\") ? { type: \"DIM\" } : DIM), \"dimStmt$ebnf$1\", \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: $2 ? ast_1.DimType.SHARED : ast_1.DimType.LOCAL, varDecls: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC), \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: ast_1.DimType.STATIC, varDecls: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"SHARED\") ? { type: \"SHARED\" } : SHARED), \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: ast_1.DimType.SHARED, varDecls: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varDecls$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"varDecls$ebnf$1$subexpression$1\", \"symbols\": [\"varDecl\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"varDecls$ebnf$1\", \"symbols\": [\"varDecls$ebnf$1\", \"varDecls$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"varDecls\", \"symbols\": [\"varDecls$ebnf$1\", \"varDecl\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"varDecl\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varDecl$ebnf$1\", \"symbols\": [\"dimensionSpecExprs\"], \"postprocess\": id },\n        { \"name\": \"varDecl$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"varDecl\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"varDecl$ebnf$1\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ name: $1.value, typeExpr: __assign({ type: ast_1.DataTypeExprType.ARRAY, elementTypeExpr: $5, dimensionSpecExprs: $3 !== null && $3 !== void 0 ? $3 : [] }, useLoc($1)) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimensionSpecExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"dimensionSpecExprs$ebnf$1$subexpression$1\", \"symbols\": [\"dimensionSpecExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"dimensionSpecExprs$ebnf$1\", \"symbols\": [\"dimensionSpecExprs$ebnf$1\", \"dimensionSpecExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"dimensionSpecExprs\", \"symbols\": [\"dimensionSpecExprs$ebnf$1\", \"dimensionSpecExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"dimensionSpecExpr\", \"symbols\": [\"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ maxIdxExpr: $1 }, useLoc($1)));\n            } },\n        { \"name\": \"dimensionSpecExpr\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ minIdxExpr: $1, maxIdxExpr: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"assignStmt$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"LET\") ? { type: \"LET\" } : LET)], \"postprocess\": id },\n        { \"name\": \"assignStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"assignStmt\", \"symbols\": [\"assignStmt$ebnf$1\", \"lhsExpr\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.ASSIGN, targetExpr: $2, valueExpr: $4 }, useLoc($1 || $2)));\n            }\n        },\n        { \"name\": \"constStmt\", \"symbols\": [(lexer_1.default.has(\"CONST\") ? { type: \"CONST\" } : CONST), \"constDefs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.CONST, constDefs: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"constDefs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"constDefs$ebnf$1$subexpression$1\", \"symbols\": [\"constDef\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"constDefs$ebnf$1\", \"symbols\": [\"constDefs$ebnf$1\", \"constDefs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"constDefs\", \"symbols\": [\"constDefs$ebnf$1\", \"constDef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"constDef\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ name: $1.value, valueExpr: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"gotoStmt\", \"symbols\": [(lexer_1.default.has(\"GOTO\") ? { type: \"GOTO\" } : GOTO), \"labelRef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.GOTO, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singleLineIfStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"singleLineStmts\"] },\n        { \"name\": \"singleLineIfStmt$ebnf$1\", \"symbols\": [\"singleLineIfStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"singleLineIfStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"singleLineIfStmt\", \"symbols\": [(lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), \"singleLineStmts\", \"singleLineIfStmt$ebnf$1\", (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: ast_1.StmtType.IF, ifBranches: [__assign({ condExpr: $2, stmts: $4 }, useLoc($1))], elseBranch: $5 ? __assign({ stmts: $5[1] }, useLoc($5[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"blockIfStmt$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"blockIfStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSEIF\") ? { type: \"ELSEIF\" } : ELSEIF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE), \"stmts\"] },\n        { \"name\": \"blockIfStmt$ebnf$1\", \"symbols\": [\"blockIfStmt$ebnf$1\", \"blockIfStmt$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"blockIfStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"stmts\"] },\n        { \"name\": \"blockIfStmt$ebnf$2\", \"symbols\": [\"blockIfStmt$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"blockIfStmt$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"blockIfStmt\", \"symbols\": [(lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE), \"stmts\", \"blockIfStmt$ebnf$1\", \"blockIfStmt$ebnf$2\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6], $8 = _a[7], $9 = _a[8];\n                return (__assign({ type: ast_1.StmtType.IF, ifBranches: __spreadArray([\n                        __assign({ condExpr: $2, stmts: $5 }, useLoc($1))\n                    ], $6.map(function (_a) {\n                        var $6_1 = _a[0], $6_2 = _a[1], $6_3 = _a[2], $6_4 = _a[3], $6_5 = _a[4];\n                        return (__assign({ condExpr: $6_2, stmts: $6_5 }, useLoc($6_1)));\n                    })), elseBranch: $7 ? __assign({ stmts: $7[1] }, useLoc($7[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"selectStmt$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"selectStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"selectStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"caseExprs\", \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$2\", \"symbols\": [\"selectStmt$ebnf$2$subexpression$1\"] },\n        { \"name\": \"selectStmt$ebnf$2$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"caseExprs\", \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$2\", \"symbols\": [\"selectStmt$ebnf$2\", \"selectStmt$ebnf$2$subexpression$2\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"selectStmt$ebnf$3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), (lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$3\", \"symbols\": [\"selectStmt$ebnf$3$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"selectStmt$ebnf$3\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"selectStmt\", \"symbols\": [(lexer_1.default.has(\"SELECT\") ? { type: \"SELECT\" } : SELECT), (lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"expr\", \"selectStmt$ebnf$1\", \"selectStmt$ebnf$2\", \"selectStmt$ebnf$3\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"SELECT\") ? { type: \"SELECT\" } : SELECT)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6], $8 = _a[7];\n                return (__assign({ type: ast_1.StmtType.SELECT, testExpr: $3, ifBranches: $5.map(function (_a) {\n                        var $5_1 = _a[0], $5_2 = _a[1], $5_3 = _a[2];\n                        return (__assign({ condExprs: $5_2, stmts: $5_3 }, useLoc($5_1)));\n                    }), elseBranch: $6 ? __assign({ stmts: $6[2] }, useLoc($6[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"caseExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"caseExprs$ebnf$1$subexpression$1\", \"symbols\": [\"caseExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"caseExprs$ebnf$1\", \"symbols\": [\"caseExprs$ebnf$1\", \"caseExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"caseExprs\", \"symbols\": [\"caseExprs$ebnf$1\", \"caseExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"caseExpr\", \"symbols\": [\"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    type: ast_1.CaseExprType.VALUE,\n                    valueExpr: $1,\n                });\n            }\n        },\n        { \"name\": \"caseExpr\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return ({\n                    type: ast_1.CaseExprType.RANGE,\n                    lowerBoundExpr: $1,\n                    upperBoundExpr: $3,\n                });\n            }\n        },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NE\") ? { type: \"NE\" } : NE)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GT\") ? { type: \"GT\" } : GT)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GTE\") ? { type: \"GTE\" } : GTE)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LT\") ? { type: \"LT\" } : LT)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LTE\") ? { type: \"LTE\" } : LTE)] },\n        { \"name\": \"caseExpr\", \"symbols\": [(lexer_1.default.has(\"IS\") ? { type: \"IS\" } : IS), \"caseExpr$subexpression$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return ({\n                    type: ast_1.CaseExprType.COMP,\n                    op: id($2).type.toLowerCase(),\n                    rightExpr: $3,\n                });\n            }\n        },\n        { \"name\": \"whileStmt\", \"symbols\": [(lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\", \"stmts\", (lexer_1.default.has(\"WEND\") ? { type: \"WEND\" } : WEND)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $2, isCondNegated: false, stmts: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doWhileStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), (lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\", \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $3, isCondNegated: false, stmts: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doUntilStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), (lexer_1.default.has(\"UNTIL\") ? { type: \"UNTIL\" } : UNTIL), \"expr\", \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $3, isCondNegated: true, stmts: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"loopWhileStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP), (lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS, condExpr: $5, isCondNegated: false, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"loopUntilStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP), (lexer_1.default.has(\"UNTIL\") ? { type: \"UNTIL\" } : UNTIL), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS, condExpr: $5, isCondNegated: true, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doLoopStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.UNCOND_LOOP, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitLoopStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_LOOP }, useLoc($1)));\n            } },\n        { \"name\": \"forStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STEP\") ? { type: \"STEP\" } : STEP), \"expr\"] },\n        { \"name\": \"forStmt$ebnf$1\", \"symbols\": [\"forStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"forStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"forStmt\", \"symbols\": [(lexer_1.default.has(\"FOR\") ? { type: \"FOR\" } : FOR), \"lhsExpr\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\", \"forStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: ast_1.StmtType.FOR, counterExpr: $2, startExpr: $4, endExpr: $6, stepExpr: $7 ? $7[1] : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"nextStmt$ebnf$1\", \"symbols\": [\"lhsExprs\"], \"postprocess\": id },\n        { \"name\": \"nextStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"nextStmt\", \"symbols\": [(lexer_1.default.has(\"NEXT\") ? { type: \"NEXT\" } : NEXT), \"nextStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.NEXT, counterExprs: $2 !== null && $2 !== void 0 ? $2 : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitForStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"FOR\") ? { type: \"FOR\" } : FOR)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_FOR }, useLoc($1)));\n            } },\n        { \"name\": \"gosubStmt\", \"symbols\": [(lexer_1.default.has(\"GOSUB\") ? { type: \"GOSUB\" } : GOSUB), \"labelRef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.GOSUB, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"returnStmt$ebnf$1\", \"symbols\": [\"labelRef\"], \"postprocess\": id },\n        { \"name\": \"returnStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"returnStmt\", \"symbols\": [(lexer_1.default.has(\"RETURN\") ? { type: \"RETURN\" } : RETURN), \"returnStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.RETURN, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"exprs\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"callStmt$ebnf$1\", \"symbols\": [\"callStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"callStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"callStmt\", \"symbols\": [(lexer_1.default.has(\"CALL\") ? { type: \"CALL\" } : CALL), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"callStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: $2.value, argExprs: $3 ? $3[1] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmt\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"exprs\"], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0], $2 = _a[1];\n                // A line like \"f: f:\" should parse as a label \"f\" followed by an invocation of the\n                // sub \"f\", so need to explicitly disambiguate here.\n                if ($1.isFirstTokenOnLine && $2.length === 0) {\n                    var nextToken = lexer_1.default.peek();\n                    if (nextToken && nextToken.type === 'COLON') {\n                        return reject;\n                    }\n                }\n                // A line like \"A(0) = 42\" should parse as an assignment rather than a CALL statement.\n                if ($2.length === 1 && $2[0].type === ast_1.ExprType.BINARY_OP && $2[0].op === ast_1.BinaryOp.EQ) {\n                    return reject;\n                }\n                return __assign({ type: ast_1.StmtType.CALL, name: $1.value, argExprs: $2 }, useLoc($1));\n            }\n        },\n        { \"name\": \"exitProcStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_PROC, procType: types_1.ProcType.FN }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitProcStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_PROC, procType: types_1.ProcType.SUB }, useLoc($1)));\n            }\n        },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"END\") ? { type: \"END\" } : END)] },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SYSTEM\") ? { type: \"SYSTEM\" } : SYSTEM)] },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STOP\") ? { type: \"STOP\" } : STOP)] },\n        { \"name\": \"endStmt\", \"symbols\": [\"endStmt$subexpression$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.StmtType.END }, useLoc(id($1))));\n            } },\n        { \"name\": \"swapStmt\", \"symbols\": [(lexer_1.default.has(\"SWAP\") ? { type: \"SWAP\" } : SWAP), \"lhsExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA), \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.SWAP, leftExpr: $2, rightExpr: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"printStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"USING\") ? { type: \"USING\" } : USING), \"expr\", (lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)] },\n        { \"name\": \"printStmt$ebnf$1\", \"symbols\": [\"printStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"printStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"printStmt\", \"symbols\": [(lexer_1.default.has(\"PRINT\") ? { type: \"PRINT\" } : PRINT), \"printStmt$ebnf$1\", \"printArgs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.PRINT, args: $3, formatExpr: $2 ? $2[1] : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"printArgs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"printArgs$ebnf$1$subexpression$1\", \"symbols\": [\"expr\"] },\n        { \"name\": \"printArgs$ebnf$1$subexpression$1\", \"symbols\": [\"printSep\"] },\n        { \"name\": \"printArgs$ebnf$1\", \"symbols\": [\"printArgs$ebnf$1\", \"printArgs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"printArgs\", \"symbols\": [\"printArgs$ebnf$1\"], \"postprocess\": function (_a, location, reject) {\n                var $1 = _a[0];\n                var args = lodash_1.default.flatten($1);\n                // Disambiguate \"fn (x)\" - prefer to parse as function call.\n                for (var i = 0; i < args.length - 1; ++i) {\n                    var arg1 = args[i], arg2 = args[i + 1];\n                    if (typeof arg1 !== 'string' && arg1.type === ast_1.ExprType.VAR_REF &&\n                        typeof arg2 !== 'string' && arg2.type === ast_1.ExprType.UNARY_OP && arg2.op === ast_1.UnaryOp.PARENS) {\n                        return reject;\n                    }\n                }\n                return args;\n            }\n        },\n        { \"name\": \"printSep\", \"symbols\": [(lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)], \"postprocess\": function () { return ast_1.PrintSep.COMMA; } },\n        { \"name\": \"printSep\", \"symbols\": [(lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)], \"postprocess\": function () { return ast_1.PrintSep.SEMICOLON; } },\n        { \"name\": \"inputStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL), \"inputStmtPromptSep\"] },\n        { \"name\": \"inputStmt$ebnf$1\", \"symbols\": [\"inputStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"inputStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"inputStmt\", \"symbols\": [(lexer_1.default.has(\"INPUT\") ? { type: \"INPUT\" } : INPUT), \"inputStmt$ebnf$1\", \"lhsExprs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.INPUT, prompt: $2 ? \"\" + $2[0].value + ($2[1] ? '? ' : '') : '? ', inputType: ast_1.InputType.TOKENIZED, targetExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"inputStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL), \"inputStmtPromptSep\"] },\n        { \"name\": \"inputStmt$ebnf$2\", \"symbols\": [\"inputStmt$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"inputStmt$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"inputStmt\", \"symbols\": [(lexer_1.default.has(\"LINE\") ? { type: \"LINE\" } : LINE), (lexer_1.default.has(\"INPUT\") ? { type: \"INPUT\" } : INPUT), \"inputStmt$ebnf$2\", \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.INPUT, prompt: $3 ? $3[0].value : '', inputType: ast_1.InputType.LINE, targetExprs: [$4] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"inputStmtPromptSep\", \"symbols\": [(lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)], \"postprocess\": function () { return false; } },\n        { \"name\": \"inputStmtPromptSep\", \"symbols\": [(lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)], \"postprocess\": function () { return true; } },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFINT\") ? { type: \"DEFINT\" } : DEFINT), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.integerSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFSNG\") ? { type: \"DEFSNG\" } : DEFSNG), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.singleSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFDBL\") ? { type: \"DEFDBL\" } : DEFDBL), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.doubleSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFLNG\") ? { type: \"DEFLNG\" } : DEFLNG), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.longSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFSTR\") ? { type: \"DEFSTR\" } : DEFSTR), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.stringSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeRanges$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"defTypeRanges$ebnf$1$subexpression$1\", \"symbols\": [\"defTypeRange\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"defTypeRanges$ebnf$1\", \"symbols\": [\"defTypeRanges$ebnf$1\", \"defTypeRanges$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"defTypeRanges\", \"symbols\": [\"defTypeRanges$ebnf$1\", \"defTypeRange\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"defTypeRange\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ minPrefix: $1.value, maxPrefix: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeRange\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ minPrefix: $1.value, maxPrefix: $3.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dataStmt$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"dataStmt$ebnf$1$subexpression$1\", \"symbols\": [\"dataItem\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"dataStmt$ebnf$1\", \"symbols\": [\"dataStmt$ebnf$1\", \"dataStmt$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"dataStmt\", \"symbols\": [(lexer_1.default.has(\"DATA\") ? { type: \"DATA\" } : DATA), \"dataStmt$ebnf$1\", \"dataItem\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.DATA, data: __spreadArray(__spreadArray([], $2 ? $2.map(function (_a) {\n                        var $2_1 = _a[0], $2_2 = _a[1];\n                        return $2_1;\n                    }) : []), [\n                        $3,\n                    ]) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dataItem\", \"symbols\": [], \"postprocess\": function () { return buildDataItem(lexer_1.default.lastToken, null); } },\n        { \"name\": \"dataItem\", \"symbols\": [\"literalExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return buildDataItem($1, $1.value);\n            } },\n        { \"name\": \"dataItem\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return buildDataItem($1, $1.value);\n            } },\n        { \"name\": \"readStmt\", \"symbols\": [(lexer_1.default.has(\"READ\") ? { type: \"READ\" } : READ), \"lhsExprs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.READ, targetExprs: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"restoreStmt$ebnf$1\", \"symbols\": [\"labelRef\"], \"postprocess\": id },\n        { \"name\": \"restoreStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"restoreStmt\", \"symbols\": [(lexer_1.default.has(\"RESTORE\") ? { type: \"RESTORE\" } : RESTORE), \"restoreStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.RESTORE, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmtWithOptParams$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LOCATE\") ? { type: \"LOCATE\" } : LOCATE)] },\n        { \"name\": \"callStmtWithOptParams$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"COLOR\") ? { type: \"COLOR\" } : COLOR)] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", \"symbols\": [\"expr\"], \"postprocess\": id },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1\", \"symbols\": [\"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1\", \"symbols\": [\"callStmtWithOptParams$ebnf$1\", \"callStmtWithOptParams$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"callStmtWithOptParams\", \"symbols\": [\"callStmtWithOptParams$subexpression$1\", \"callStmtWithOptParams$ebnf$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: $1[0].value, argExprs: __spreadArray(__spreadArray([], ($2 ? $2.map(function (_a) {\n                        var $2_1 = _a[0], $2_2 = _a[1];\n                        return $2_1 !== null && $2_1 !== void 0 ? $2_1 : __assign({ type: ast_1.ExprType.LITERAL, value: NaN }, useLoc($2_2));\n                    }) : [])), [\n                        $3,\n                    ]) }, useLoc($1[0])));\n            }\n        },\n        { \"name\": \"defSegStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"] },\n        { \"name\": \"defSegStmt$ebnf$1\", \"symbols\": [\"defSegStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"defSegStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"defSegStmt\", \"symbols\": [(lexer_1.default.has(\"DEF\") ? { type: \"DEF\" } : DEF), (lexer_1.default.has(\"SEG\") ? { type: \"SEG\" } : SEG), \"defSegStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: '__def_seg', argExprs: $3 ? [$3[1]] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"viewPrintStmt$ebnf$1$subexpression$1\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"] },\n        { \"name\": \"viewPrintStmt$ebnf$1\", \"symbols\": [\"viewPrintStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"viewPrintStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"viewPrintStmt\", \"symbols\": [(lexer_1.default.has(\"VIEW\") ? { type: \"VIEW\" } : VIEW), (lexer_1.default.has(\"PRINT\") ? { type: \"PRINT\" } : PRINT), \"viewPrintStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: '__view_print', argExprs: $3 ? [$3[0], $3[2]] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singleLineStmts$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"singleLineStmts$ebnf$1\", \"symbols\": [\"singleLineStmts$ebnf$1\", (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts$ebnf$2\", \"symbols\": [] },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [\"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1\", \"symbols\": [\"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"nonLabelStmt\"] },\n        { \"name\": \"singleLineStmts$ebnf$2\", \"symbols\": [\"singleLineStmts$ebnf$2\", \"singleLineStmts$ebnf$2$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts\", \"symbols\": [\"singleLineStmts$ebnf$1\", \"nonLabelStmt\", \"singleLineStmts$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return __spreadArray([$2], $3.map(function (_a) {\n                    var $3_1 = _a[0], $3_2 = _a[1];\n                    return $3_2;\n                }));\n            }\n        },\n        { \"name\": \"lhsExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"lhsExprs$ebnf$1$subexpression$1\", \"symbols\": [\"lhsExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"lhsExprs$ebnf$1\", \"symbols\": [\"lhsExprs$ebnf$1\", \"lhsExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"lhsExprs\", \"symbols\": [\"lhsExprs$ebnf$1\", \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"labelRef$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)] },\n        { \"name\": \"labelRef$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)] },\n        { \"name\": \"labelRef\", \"symbols\": [\"labelRef$subexpression$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return id($1).value;\n            } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"INTEGER\") ? { type: \"INTEGER\" } : INTEGER)], \"postprocess\": function () { return types_1.integerSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"LONG\") ? { type: \"LONG\" } : LONG)], \"postprocess\": function () { return types_1.longSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"SINGLE\") ? { type: \"SINGLE\" } : SINGLE)], \"postprocess\": function () { return types_1.singleSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"DOUBLE\") ? { type: \"DOUBLE\" } : DOUBLE)], \"postprocess\": function () { return types_1.doubleSpec(); } },\n        { \"name\": \"elementaryTypeSpec$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MUL\") ? { type: \"MUL\" } : MUL), \"expr2\"] },\n        { \"name\": \"elementaryTypeSpec$ebnf$1\", \"symbols\": [\"elementaryTypeSpec$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"elementaryTypeSpec$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"STRING\") ? { type: \"STRING\" } : STRING), \"elementaryTypeSpec$ebnf$1\"], \"postprocess\": function () { return types_1.stringSpec(); } },\n        { \"name\": \"singularTypeExpr\", \"symbols\": [(lexer_1.default.has(\"AS\") ? { type: \"AS\" } : AS), \"elementaryTypeSpec\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.DataTypeExprType.ELEMENTARY, typeSpec: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singularTypeExpr\", \"symbols\": [(lexer_1.default.has(\"AS\") ? { type: \"AS\" } : AS), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.DataTypeExprType.UDT, name: $2.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singularTypeExprOrDefault\", \"symbols\": [], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    type: ast_1.DataTypeExprType.ELEMENTARY,\n                    loc: { line: lexer_1.default.lastToken.line, col: lexer_1.default.lastToken.col },\n                });\n            }\n        },\n        { \"name\": \"singularTypeExprOrDefault\", \"symbols\": [\"singularTypeExpr\"], \"postprocess\": id },\n        { \"name\": \"expr\", \"symbols\": [\"expr10\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"varRefExpr\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"fnCallExpr\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"memberExpr\"], \"postprocess\": id },\n        { \"name\": \"expr10\", \"symbols\": [\"expr9\"], \"postprocess\": id },\n        { \"name\": \"expr10$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"OR\") ? { type: \"OR\" } : OR)] },\n        { \"name\": \"expr10\", \"symbols\": [\"expr10\", \"expr10$subexpression$1\", \"expr9\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr9\", \"symbols\": [\"expr8\"], \"postprocess\": id },\n        { \"name\": \"expr9$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"AND\") ? { type: \"AND\" } : AND)] },\n        { \"name\": \"expr9\", \"symbols\": [\"expr9\", \"expr9$subexpression$1\", \"expr8\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr8\", \"symbols\": [\"expr7\"], \"postprocess\": id },\n        { \"name\": \"expr8$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NOT\") ? { type: \"NOT\" } : NOT)] },\n        { \"name\": \"expr8\", \"symbols\": [\"expr8$subexpression$1\", \"expr7\"], \"postprocess\": buildUnaryOpExpr },\n        { \"name\": \"expr7\", \"symbols\": [\"expr6\"], \"postprocess\": id },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NE\") ? { type: \"NE\" } : NE)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GT\") ? { type: \"GT\" } : GT)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GTE\") ? { type: \"GTE\" } : GTE)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LT\") ? { type: \"LT\" } : LT)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LTE\") ? { type: \"LTE\" } : LTE)] },\n        { \"name\": \"expr7\", \"symbols\": [\"expr6\", \"expr7$subexpression$1\", \"expr6\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr6\", \"symbols\": [\"expr5\"], \"postprocess\": id },\n        { \"name\": \"expr6$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ADD\") ? { type: \"ADD\" } : ADD)] },\n        { \"name\": \"expr6$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"expr6\", \"symbols\": [\"expr6\", \"expr6$subexpression$1\", \"expr5\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr5\", \"symbols\": [\"expr4\"], \"postprocess\": id },\n        { \"name\": \"expr5$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MOD\") ? { type: \"MOD\" } : MOD)] },\n        { \"name\": \"expr5\", \"symbols\": [\"expr5\", \"expr5$subexpression$1\", \"expr4\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr4\", \"symbols\": [\"expr3\"], \"postprocess\": id },\n        { \"name\": \"expr4$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"INTDIV\") ? { type: \"INTDIV\" } : INTDIV)] },\n        { \"name\": \"expr4\", \"symbols\": [\"expr4\", \"expr4$subexpression$1\", \"expr3\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr3\", \"symbols\": [\"expr2\"], \"postprocess\": id },\n        { \"name\": \"expr3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MUL\") ? { type: \"MUL\" } : MUL)] },\n        { \"name\": \"expr3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"DIV\") ? { type: \"DIV\" } : DIV)] },\n        { \"name\": \"expr3\", \"symbols\": [\"expr3\", \"expr3$subexpression$1\", \"expr2\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr2\", \"symbols\": [\"expr1\"], \"postprocess\": id },\n        { \"name\": \"expr2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"expr2\", \"symbols\": [\"expr2$subexpression$1\", \"expr1\"], \"postprocess\": buildUnaryOpExpr },\n        { \"name\": \"expr1\", \"symbols\": [\"expr0\"], \"postprocess\": id },\n        { \"name\": \"expr1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EXP\") ? { type: \"EXP\" } : EXP)] },\n        { \"name\": \"expr1\", \"symbols\": [\"expr1\", \"expr1$subexpression$1\", \"expr0\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr0\", \"symbols\": [\"varRefExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"fnCallExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"literalExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"memberExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"expr\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.ExprType.UNARY_OP, op: ast_1.UnaryOp.PARENS, rightExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varRefExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.VAR_REF, name: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"fnCallExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"exprs\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.ExprType.FN_CALL, name: $1.value, argExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"literalExpr\", \"symbols\": [\"stringLiteralExpr\"], \"postprocess\": id },\n        { \"name\": \"literalExpr\", \"symbols\": [\"numericLiteralExpr\"], \"postprocess\": id },\n        { \"name\": \"stringLiteralExpr\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.LITERAL, value: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"numericLiteralExpr\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.LITERAL, value: parseFloat($1.value) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"memberExpr\", \"symbols\": [\"lhsExpr\", (lexer_1.default.has(\"DOT\") ? { type: \"DOT\" } : DOT), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.ExprType.MEMBER, udtExpr: $1, fieldName: $3.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exprs\", \"symbols\": [], \"postprocess\": function () { return []; } },\n        { \"name\": \"exprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"exprs$ebnf$1$subexpression$1\", \"symbols\": [\"expr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"exprs$ebnf$1\", \"symbols\": [\"exprs$ebnf$1\", \"exprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"exprs\", \"symbols\": [\"exprs$ebnf$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        }\n    ],\n    ParserStart: \"module\",\n};\nexports.default = grammar;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticAnalyzer = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar ast_1 = require(\"../lib/ast\");\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar builtins_1 = require(\"../runtime/builtins\");\n/** Map from variable type declaration suffix to the corresponding type spec. */\nvar TYPE_SUFFIX_MAP = Object.freeze({\n    '%': types_1.integerSpec(),\n    '&': types_1.longSpec(),\n    '!': types_1.singleSpec(),\n    '#': types_1.doubleSpec(),\n    $: types_1.stringSpec(),\n});\n/** Default array dimension spec. */\nvar DEFAULT_DIMENSION_SPEC = [0, 10];\n/** Semantic analysis pass.\n *\n * Main tasks:\n *\n * - Type analysis for symbols, expressions and statements\n * - Build symbol table and resolve references\n */\nvar SemanticAnalyzer = /** @class */ (function (_super) {\n    __extends(SemanticAnalyzer, _super);\n    function SemanticAnalyzer(module, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName;\n        var _this = _super.call(this) || this;\n        _this.module = module;\n        /** Stack of UDTs being resolved. Used to detect cycles. */\n        _this.udtStack = [];\n        /** The current proc being visited, or null if currently visiting module-level nodes. */\n        _this.currentProc = null;\n        /** Default type based on first letter of identifier. */\n        _this.defTypeMap = {};\n        _this.sourceFileName = sourceFileName;\n        return _this;\n    }\n    SemanticAnalyzer.prototype.run = function () {\n        this.visitModule(this.module);\n    };\n    SemanticAnalyzer.prototype.visitModule = function (module) {\n        this.setUpDefTypeMap();\n        // Resolve UDT types.\n        this.udtStack = [];\n        module.udts.forEach(this.visitUdt.bind(this));\n        // Resolve type signatures of procs.\n        module.procs.forEach(this.preprocessProc.bind(this));\n        this.currentProc = null;\n        module.localSymbols = [];\n        module.globalSymbols = [];\n        module.labels = this.getLabels(module.stmts);\n        this.acceptAll(module.stmts);\n        this.acceptAll(module.procs);\n    };\n    SemanticAnalyzer.prototype.preprocessProc = function (node) {\n        var _this = this;\n        node.paramSymbols = node.params.map(function (param) { return ({\n            name: param.name,\n            varType: symbol_table_1.VarType.ARG,\n            typeSpec: _this.getTypeSpecForVarDeclOrParam(param),\n            varScope: symbol_table_1.VarScope.LOCAL,\n        }); });\n        node.localSymbols = [];\n        if (ast_1.isFnProcOrDefFnProc(node)) {\n            if (!node.returnTypeSpec) {\n                node.returnTypeSpec = this.getDefaultTypeSpecFromName(node.name);\n            }\n            node.localSymbols.push({\n                name: node.name,\n                varType: symbol_table_1.VarType.VAR,\n                typeSpec: node.returnTypeSpec,\n                varScope: symbol_table_1.VarScope.LOCAL,\n            });\n        }\n        node.labels = this.getLabels(node.stmts);\n    };\n    SemanticAnalyzer.prototype.getLabels = function (stmts) {\n        var labelLocMap = {};\n        for (var _i = 0, stmts_1 = stmts; _i < stmts_1.length; _i++) {\n            var stmt = stmts_1[_i];\n            if (stmt.type !== ast_1.StmtType.LABEL) {\n                continue;\n            }\n            if (labelLocMap[stmt.label]) {\n                this.throwError(\"Label \\\"\" + stmt.label + \"\\\" already defined on line \" + labelLocMap[stmt.label].line, stmt);\n            }\n            labelLocMap[stmt.label] = stmt.loc;\n        }\n        return Object.keys(labelLocMap);\n    };\n    /** Resolve UDT type spec using depth first search. */\n    SemanticAnalyzer.prototype.visitUdt = function (udt) {\n        var _a;\n        if (udt.typeSpec) {\n            return;\n        }\n        // Check if we have a cycle.\n        var udtStackIdx = this.udtStack.indexOf(udt);\n        if (udtStackIdx >= 0) {\n            var udtsInCycle = __spreadArray(__spreadArray([], this.udtStack.slice(udtStackIdx)), [udt]);\n            this.throwError('Dependency cycle in user-defined types: ' +\n                udtsInCycle.map(function (_a) {\n                    var name = _a.name;\n                    return name;\n                }).join(' -> '), udt);\n        }\n        // Resolve typeSpec of each field.\n        this.udtStack.push(udt);\n        var typeSpec = {\n            type: types_1.DataType.UDT,\n            name: udt.name,\n            fieldSpecs: [],\n        };\n        for (var _i = 0, _b = udt.fieldSpecExprs; _i < _b.length; _i++) {\n            var _c = _b[_i], fieldName = _c.name, typeExpr = _c.typeExpr;\n            var fieldTypeSpec = void 0;\n            switch (typeExpr.type) {\n                case ast_1.DataTypeExprType.ELEMENTARY:\n                    fieldTypeSpec =\n                        (_a = typeExpr.typeSpec) !== null && _a !== void 0 ? _a : this.getDefaultTypeSpecFromName(fieldName);\n                    break;\n                case ast_1.DataTypeExprType.UDT:\n                    var fieldUdt = this.lookupUdtOrThrow(typeExpr, typeExpr.name);\n                    this.visitUdt(fieldUdt);\n                    fieldTypeSpec = fieldUdt.typeSpec;\n                    break;\n                default:\n                    this.throwError(\"Unexpected field type: \" + JSON.stringify(typeExpr), typeExpr);\n            }\n            typeSpec.fieldSpecs.push({ name: fieldName, typeSpec: fieldTypeSpec });\n        }\n        udt.typeSpec = typeSpec;\n    };\n    SemanticAnalyzer.prototype.visitProc = function (node) {\n        this.currentProc = node;\n        this.acceptAll(node.stmts);\n        this.currentProc = null;\n    };\n    SemanticAnalyzer.prototype.visitLabelStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitDimStmt = function (node) {\n        if (node.dimType === ast_1.DimType.STATIC && !this.currentProc) {\n            this.throwError('STATIC statement can only be used inside a procedure.', node);\n        }\n        for (var _i = 0, _a = node.varDecls; _i < _a.length; _i++) {\n            var varDecl = _a[_i];\n            var typeSpec = this.getTypeSpecForVarDeclOrParam(varDecl);\n            var resolvedSymbol = this.lookupSymbol(varDecl.name);\n            if (resolvedSymbol) {\n                if (resolvedSymbol.varScope === symbol_table_1.VarScope.LOCAL) {\n                    this.throwError(\"Variable already defined in local scope: \\\"\" + varDecl.name + \"\\\"\", node);\n                }\n                else if (resolvedSymbol.varScope === symbol_table_1.VarScope.GLOBAL &&\n                    node.dimType === ast_1.DimType.SHARED &&\n                    !(types_1.areMatchingSingularTypes(typeSpec, resolvedSymbol.typeSpec) ||\n                        (types_1.isArray(typeSpec) &&\n                            types_1.isArray(resolvedSymbol.typeSpec) &&\n                            types_1.areMatchingSingularTypes(typeSpec.elementTypeSpec, resolvedSymbol.typeSpec.elementTypeSpec)))) {\n                    this.throwError(\"Variable already defined in global scope: \\\"\" + varDecl.name + \"\\\"\", node);\n                }\n                varDecl.symbol = resolvedSymbol;\n            }\n            else {\n                var symbol = void 0;\n                switch (node.dimType) {\n                    case ast_1.DimType.SHARED:\n                        // If this symbol is already defined as a local var at the module level, promote it to\n                        // global.\n                        var moduleLocalSymbol = symbol_table_1.lookupSymbol(this.module.localSymbols, varDecl.name);\n                        if (moduleLocalSymbol) {\n                            symbol = moduleLocalSymbol;\n                            this.module.localSymbols.splice(this.module.localSymbols.indexOf(moduleLocalSymbol), 1);\n                            symbol.varScope = symbol_table_1.VarScope.GLOBAL;\n                        }\n                        else {\n                            symbol = {\n                                name: varDecl.name,\n                                varType: symbol_table_1.VarType.VAR,\n                                typeSpec: typeSpec,\n                                varScope: symbol_table_1.VarScope.GLOBAL,\n                            };\n                        }\n                        this.module.globalSymbols.push(symbol);\n                        break;\n                    case ast_1.DimType.LOCAL:\n                        symbol = this.createLocalVarSymbol({\n                            name: varDecl.name,\n                            typeSpec: typeSpec,\n                        });\n                        this.addLocalSymbol(symbol);\n                        break;\n                    case ast_1.DimType.STATIC:\n                        symbol = {\n                            name: varDecl.name,\n                            varType: symbol_table_1.VarType.STATIC_VAR,\n                            typeSpec: typeSpec,\n                            varScope: symbol_table_1.VarScope.LOCAL,\n                        };\n                        this.addLocalSymbol(symbol);\n                        break;\n                    default:\n                        this.throwError(\"Unknown DimType: \" + JSON.stringify(node.dimType), node);\n                }\n                varDecl.symbol = symbol;\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitAssignStmt = function (node) {\n        this.accept(node.targetExpr);\n        this.accept(node.valueExpr);\n        var targetTypeSpec = node.targetExpr.typeSpec;\n        var valueTypeSpec = node.valueExpr.typeSpec;\n        if (!types_1.areMatchingSingularTypes(targetTypeSpec, valueTypeSpec)) {\n            this.throwError(\"Cannot assign \" + types_1.typeSpecName(valueTypeSpec) + \" value \" +\n                (\"to \" + types_1.typeSpecName(targetTypeSpec) + \" variable\"), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitConstStmt = function (node) {\n        for (var _i = 0, _a = node.constDefs; _i < _a.length; _i++) {\n            var constDef = _a[_i];\n            this.accept(constDef.valueExpr);\n            var resolvedSymbol = this.lookupSymbol(constDef.name);\n            if (resolvedSymbol) {\n                if (resolvedSymbol.varScope === symbol_table_1.VarScope.LOCAL) {\n                    this.throwError(\"Constant already defined in local scope: \\\"\" + constDef.name + \"\\\"\", node);\n                }\n                else if (resolvedSymbol.varScope === symbol_table_1.VarScope.GLOBAL &&\n                    !this.currentProc) {\n                    this.throwError(\"Constant already defined in global scope: \\\"\" + constDef.name + \"\\\"\", node);\n                }\n            }\n            var symbolProps = {\n                name: constDef.name,\n                varType: symbol_table_1.VarType.CONST,\n                typeSpec: constDef.valueExpr.typeSpec,\n            };\n            if (this.currentProc) {\n                var symbol = __assign(__assign({}, symbolProps), { varScope: symbol_table_1.VarScope.LOCAL });\n                this.addLocalSymbol(symbol);\n                constDef.symbol = symbol;\n            }\n            else {\n                var symbol = __assign(__assign({}, symbolProps), { varScope: symbol_table_1.VarScope.GLOBAL });\n                this.module.globalSymbols.push(symbol);\n                constDef.symbol = symbol;\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitGotoStmt = function (node) {\n        var _a;\n        node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n    };\n    SemanticAnalyzer.prototype.requireNumericExpr = function () {\n        var exprs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            exprs[_i] = arguments[_i];\n        }\n        for (var _a = 0, exprs_1 = exprs; _a < exprs_1.length; _a++) {\n            var expr = exprs_1[_a];\n            this.accept(expr);\n            if (!types_1.isNumeric(expr.typeSpec)) {\n                this.throwError(\"Expected numeric expression (got \" + types_1.typeSpecName(expr.typeSpec) + \")\", expr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.requireElementaryTypeExpr = function () {\n        var exprs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            exprs[_i] = arguments[_i];\n        }\n        for (var _a = 0, exprs_2 = exprs; _a < exprs_2.length; _a++) {\n            var expr = exprs_2[_a];\n            this.accept(expr);\n            if (!types_1.isElementaryType(expr.typeSpec)) {\n                this.throwError(\"Expected elementary type expression instead of \" + expr.typeSpec.type, expr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitIfStmt = function (node) {\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var _b = _a[_i], condExpr = _b.condExpr, stmts = _b.stmts;\n            this.requireNumericExpr(condExpr);\n            this.acceptAll(stmts);\n        }\n        if (node.elseBranch) {\n            this.acceptAll(node.elseBranch.stmts);\n        }\n    };\n    SemanticAnalyzer.prototype.visitSelectStmt = function (node) {\n        this.accept(node.testExpr);\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var _b = _a[_i], condExprs = _b.condExprs, stmts = _b.stmts;\n            for (var _c = 0, condExprs_1 = condExprs; _c < condExprs_1.length; _c++) {\n                var condExpr = condExprs_1[_c];\n                var exprs = [];\n                switch (condExpr.type) {\n                    case ast_1.CaseExprType.VALUE:\n                        exprs.push(condExpr.valueExpr);\n                        break;\n                    case ast_1.CaseExprType.RANGE:\n                        exprs.push(condExpr.lowerBoundExpr, condExpr.upperBoundExpr);\n                        break;\n                    case ast_1.CaseExprType.COMP:\n                        exprs.push(condExpr.rightExpr);\n                        break;\n                    default:\n                        this.throwError(\"Unknown case expression type: \" + JSON.stringify(condExpr), node);\n                }\n                this.acceptAll(exprs);\n                for (var _d = 0, exprs_3 = exprs; _d < exprs_3.length; _d++) {\n                    var expr = exprs_3[_d];\n                    if (!types_1.areMatchingElementaryTypes(node.testExpr.typeSpec, expr.typeSpec)) {\n                        this.throwError('Case expression type does not match test expression: ' +\n                            (\"expected \" + types_1.typeSpecName(node.testExpr.typeSpec) + \", \") +\n                            (\"got \" + types_1.typeSpecName(expr.typeSpec)), expr);\n                    }\n                }\n            }\n            this.acceptAll(stmts);\n        }\n        if (node.elseBranch) {\n            this.acceptAll(node.elseBranch.stmts);\n        }\n    };\n    SemanticAnalyzer.prototype.visitCondLoopStmt = function (node) {\n        this.requireNumericExpr(node.condExpr);\n        this.acceptAll(node.stmts);\n    };\n    SemanticAnalyzer.prototype.visitUncondLoopStmt = function (node) {\n        this.acceptAll(node.stmts);\n    };\n    SemanticAnalyzer.prototype.visitExitLoopStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitForStmt = function (node) {\n        this.requireNumericExpr.apply(this, __spreadArray([node.counterExpr,\n            node.startExpr,\n            node.endExpr], (node.stepExpr ? [node.stepExpr] : [])));\n    };\n    SemanticAnalyzer.prototype.visitNextStmt = function (node) {\n        this.requireNumericExpr.apply(this, node.counterExprs);\n    };\n    SemanticAnalyzer.prototype.visitExitForStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitGosubStmt = function (node) {\n        var _a;\n        node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n    };\n    SemanticAnalyzer.prototype.visitReturnStmt = function (node) {\n        var _a;\n        if (node.destLabel) {\n            node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n        }\n    };\n    SemanticAnalyzer.prototype.visitCallStmt = function (node) {\n        this.acceptAll(node.argExprs);\n        var resolvedSub = this.lookupSub(node.name, node.argExprs.map(function (_a) {\n            var typeSpec = _a.typeSpec;\n            return typeSpec;\n        }));\n        if (!resolvedSub ||\n            (resolvedSub.defType === types_1.ProcDefType.MODULE &&\n                resolvedSub.proc.type !== types_1.ProcType.SUB)) {\n            this.throwError(types_1.procTypeName(types_1.ProcType.SUB) + \" not found: \\\"\" + node.name + \"\\\"\", node);\n        }\n        this.visitProcCall(resolvedSub, node);\n    };\n    SemanticAnalyzer.prototype.visitExitProcStmt = function (node) {\n        if (!this.currentProc || this.currentProc.type !== node.procType) {\n            this.throwError(\"EXIT statement must be placed inside a \" + types_1.procTypeName(node.procType), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitEndStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitSwapStmt = function (node) {\n        this.accept(node.leftExpr);\n        this.accept(node.rightExpr);\n        if (!types_1.areMatchingSingularTypes(node.leftExpr.typeSpec, node.rightExpr.typeSpec)) {\n            this.throwError(\"Cannot swap a \" + types_1.typeSpecName(node.leftExpr.typeSpec) + \" \" +\n                (\"variable with a \" + types_1.typeSpecName(node.rightExpr.typeSpec) + \" variable\"), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitPrintStmt = function (node) {\n        if (node.formatExpr) {\n            this.accept(node.formatExpr);\n            if (!types_1.isString(node.formatExpr.typeSpec)) {\n                this.throwError('Expected format expression to be a string, ' +\n                    (\"got \" + types_1.typeSpecName(node.formatExpr.typeSpec)), node.formatExpr);\n            }\n        }\n        for (var _i = 0, _a = node.args; _i < _a.length; _i++) {\n            var arg = _a[_i];\n            if (typeof arg === 'string') {\n                continue;\n            }\n            this.requireElementaryTypeExpr(arg);\n        }\n    };\n    SemanticAnalyzer.prototype.visitInputStmt = function (node) {\n        switch (node.inputType) {\n            case ast_1.InputType.TOKENIZED:\n                this.requireElementaryTypeExpr.apply(this, node.targetExprs);\n                break;\n            case ast_1.InputType.LINE:\n                if (node.targetExprs.length !== 1) {\n                    this.throwError('Expected single destination in LINE INPUT statement, ' +\n                        (\"got \" + node.targetExprs.length), node);\n                }\n                this.accept(node.targetExprs[0]);\n                if (!types_1.isString(node.targetExprs[0].typeSpec)) {\n                    this.throwError(\"Expected string destination in LINE INPUT staement, got \" + node.targetExprs[0].typeSpec.type, node.targetExprs[0]);\n                }\n                break;\n            default:\n                this.throwError(\"Unknown input type: \" + JSON.stringify(node.inputType), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitDefTypeStmt = function (node) {\n        if (this.currentProc) {\n            this.throwError(\"DEFtype statements are only allowed at module level\", node);\n        }\n        var _loop_1 = function (range) {\n            var _b = [\n                range.minPrefix.toLowerCase(),\n                range.maxPrefix.toLowerCase(),\n            ], minPrefix = _b[0], maxPrefix = _b[1];\n            if (![minPrefix, maxPrefix].every(function (p) { return p.match(/^[a-z]$/) || minPrefix > maxPrefix; })) {\n                this_1.throwError(\"Invalid DEFtype range\", range);\n            }\n            for (var c = minPrefix.charCodeAt(0); c <= maxPrefix.charCodeAt(0); ++c) {\n                this_1.defTypeMap[String.fromCharCode(c)] = node.typeSpec;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = node.ranges; _i < _a.length; _i++) {\n            var range = _a[_i];\n            _loop_1(range);\n        }\n    };\n    SemanticAnalyzer.prototype.visitDataStmt = function (node) {\n        if (this.currentProc) {\n            this.throwError(\"DATA statement must be at module level\", node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitReadStmt = function (node) {\n        if (node.targetExprs.length === 0) {\n            this.throwError('Empty READ statement', node);\n        }\n        for (var _i = 0, _a = node.targetExprs; _i < _a.length; _i++) {\n            var targetExpr = _a[_i];\n            this.accept(targetExpr);\n            if (!types_1.isElementaryType(targetExpr.typeSpec)) {\n                this.throwError('Expected elementary type variable in READ statement ' +\n                    (\"(got \" + types_1.typeSpecName(targetExpr.typeSpec) + \")\"), targetExpr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitRestoreStmt = function (node) {\n        if (node.destLabel) {\n            node.destLabel = this.lookupLabelOrThrow(node, this.module, node.destLabel);\n        }\n    };\n    SemanticAnalyzer.prototype.visitLiteralExpr = function (node) {\n        if (typeof node.value === 'string') {\n            node.typeSpec = types_1.stringSpec();\n        }\n        else if (typeof node.value === 'number') {\n            // TODO\n            node.typeSpec = types_1.singleSpec();\n        }\n        else {\n            this.throwError(\"Unknown literal expression value type: \" + typeof node.value, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitVarRefExpr = function (node) {\n        var _a;\n        var _b;\n        var symbol = this.lookupSymbol(node.name);\n        if (!symbol) {\n            // VarRef may actually be a function invocation without args.\n            var proc = this.lookupFn(node.name, []);\n            if (proc) {\n                var fnCallExpr = {\n                    type: ast_1.ExprType.FN_CALL,\n                    name: node.name,\n                    argExprs: [],\n                    loc: node.loc,\n                };\n                this.accept(fnCallExpr);\n                Object.assign(node, fnCallExpr);\n                return;\n            }\n            symbol = this.createLocalVarSymbol({\n                name: node.name,\n                // If this VarRefExpr is nested inside a SubscriptExpr, visitSubScriptExpr() will set the\n                // typeSpec for this VarRefExpr based on the index expressions. So we should respect that\n                // here.\n                typeSpec: (_b = node.typeSpec) !== null && _b !== void 0 ? _b : this.getDefaultTypeSpecFromName(node.name),\n            });\n            this.addLocalSymbol(symbol);\n        }\n        _a = [symbol.typeSpec, symbol], node.typeSpec = _a[0], node.symbol = _a[1];\n    };\n    SemanticAnalyzer.prototype.visitFnCallExpr = function (node) {\n        this.acceptAll(node.argExprs);\n        // Try resolving the name as a function.\n        var resolvedFn = this.lookupFn(node.name, node.argExprs.map(function (_a) {\n            var typeSpec = _a.typeSpec;\n            return typeSpec;\n        }));\n        if (resolvedFn) {\n            if (resolvedFn.defType === types_1.ProcDefType.MODULE &&\n                !ast_1.isFnProcOrDefFnProc(resolvedFn.proc)) {\n                this.throwError(\"A \" + types_1.procTypeName(resolvedFn.proc.type) + \" cannot be used in an expression: \\\"\" + node.name + \"\\\"\", node);\n            }\n            this.visitProcCall(resolvedFn, node);\n            node.typeSpec = resolvedFn.returnTypeSpec;\n            return;\n        }\n        // Try resolving as a subscript expression.\n        var subscriptExpr = {\n            type: ast_1.ExprType.SUBSCRIPT,\n            arrayExpr: {\n                type: ast_1.ExprType.VAR_REF,\n                name: node.name,\n                loc: node.loc,\n            },\n            indexExprs: node.argExprs,\n            loc: node.loc,\n        };\n        this.accept(subscriptExpr);\n        Object.assign(node, subscriptExpr);\n    };\n    SemanticAnalyzer.prototype.visitBinaryOpExpr = function (node) {\n        var _this = this;\n        this.accept(node.leftExpr);\n        this.accept(node.rightExpr);\n        var leftTypeSpec = node.leftExpr.typeSpec;\n        var rightTypeSpec = node.rightExpr.typeSpec;\n        var errorMessage = \"Incompatible types for \" + node.op + \" operator: \" +\n            (types_1.typeSpecName(leftTypeSpec) + \" and \" + types_1.typeSpecName(rightTypeSpec));\n        var requireNumericOperands = function () {\n            if (!(types_1.isNumeric(leftTypeSpec) && types_1.isNumeric(rightTypeSpec))) {\n                _this.throwError(errorMessage, node);\n            }\n        };\n        var useCoercedNumericType = function () {\n            node.typeSpec = _this.coerceNumericTypes(leftTypeSpec, rightTypeSpec);\n        };\n        switch (node.op) {\n            case ast_1.BinaryOp.ADD:\n                if (types_1.isString(leftTypeSpec) && types_1.isString(rightTypeSpec)) {\n                    node.typeSpec = types_1.stringSpec();\n                }\n                else {\n                    requireNumericOperands();\n                    useCoercedNumericType();\n                }\n                break;\n            case ast_1.BinaryOp.SUB:\n            case ast_1.BinaryOp.MUL:\n            case ast_1.BinaryOp.EXP:\n            case ast_1.BinaryOp.INTDIV:\n            case ast_1.BinaryOp.MOD:\n                requireNumericOperands();\n                useCoercedNumericType();\n                break;\n            case ast_1.BinaryOp.DIV:\n                requireNumericOperands();\n                node.typeSpec = this.coerceNumericTypes(leftTypeSpec, rightTypeSpec, types_1.singleSpec());\n                break;\n            case ast_1.BinaryOp.AND:\n            case ast_1.BinaryOp.OR:\n                requireNumericOperands();\n                node.typeSpec = types_1.integerSpec();\n                break;\n            case ast_1.BinaryOp.EQ:\n            case ast_1.BinaryOp.NE:\n            case ast_1.BinaryOp.GT:\n            case ast_1.BinaryOp.GTE:\n            case ast_1.BinaryOp.LT:\n            case ast_1.BinaryOp.LTE:\n                if (!types_1.areMatchingElementaryTypes(leftTypeSpec, rightTypeSpec)) {\n                    this.throwError(errorMessage, node);\n                }\n                node.typeSpec = types_1.integerSpec();\n                break;\n            default:\n                this.throwError(\"Unknown operator \" + node.op, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitUnaryOpExpr = function (node) {\n        this.accept(node.rightExpr);\n        var rightTypeSpec = node.rightExpr.typeSpec;\n        switch (node.op) {\n            case ast_1.UnaryOp.NEG:\n                this.requireNumericExpr(node.rightExpr);\n                node.typeSpec = rightTypeSpec;\n                break;\n            case ast_1.UnaryOp.NOT:\n                this.requireNumericExpr(node.rightExpr);\n                node.typeSpec = types_1.integerSpec();\n                break;\n            case ast_1.UnaryOp.PARENS:\n                node.typeSpec = rightTypeSpec;\n                break;\n            default:\n                this.throwError(\"Unknown operator \" + node.op, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitSubscriptExpr = function (node) {\n        // Hack: treat empty parens (used to pass array to procedures) as reference to the array\n        // variable itself.\n        if (node.indexExprs.length === 0) {\n            this.accept(node.arrayExpr);\n            Object.assign(node, node.arrayExpr);\n            return;\n        }\n        this.acceptAll(node.indexExprs);\n        for (var i = 0; i < node.indexExprs.length; ++i) {\n            var indexExpr = node.indexExprs[i];\n            if (!types_1.isNumeric(indexExpr.typeSpec)) {\n                this.throwError(\"Array index #\" + (i + 1) + \" should be numeric instead of \" + indexExpr.typeSpec.type, indexExpr);\n            }\n        }\n        // Add typeSpec hint for arrayExpr. This will be used to create the underlying variable symbol\n        // if not already found.\n        node.arrayExpr.typeSpec = types_1.arraySpec(this.getDefaultTypeSpecFromName(node.arrayExpr.name), node.indexExprs.map(function () { return DEFAULT_DIMENSION_SPEC; }));\n        this.accept(node.arrayExpr);\n        var arrayTypeSpec = node.arrayExpr.typeSpec;\n        if (!types_1.isArray(arrayTypeSpec)) {\n            this.throwError('Expected array variable in subscript expression, ' +\n                (\"got \" + types_1.typeSpecName(node.arrayExpr.typeSpec)), node.arrayExpr);\n        }\n        if (arrayTypeSpec.dimensionSpecs.length && // Dimension is unknown for array arguments.\n            arrayTypeSpec.dimensionSpecs.length !== node.indexExprs.length) {\n            this.throwError('Wrong number of index expressions: ' +\n                (\"expected \" + arrayTypeSpec.dimensionSpecs.length + \", \") +\n                (\"got \" + node.indexExprs.length), node);\n        }\n        node.typeSpec = node.arrayExpr.typeSpec.elementTypeSpec;\n    };\n    SemanticAnalyzer.prototype.visitMemberExpr = function (node) {\n        this.accept(node.udtExpr);\n        var udtTypeSpec = node.udtExpr.typeSpec;\n        if (!types_1.isUdt(udtTypeSpec)) {\n            this.throwError(\"Expected user-defined type in member expression, got \" + types_1.typeSpecName(udtTypeSpec), node);\n        }\n        var fieldSpec = symbol_table_1.lookupSymbol(udtTypeSpec.fieldSpecs, node.fieldName);\n        if (!fieldSpec) {\n            this.throwError(\"Field \\\"\" + node.fieldName + \"\\\" does not exist \" +\n                (\"on type \\\"\" + types_1.typeSpecName(udtTypeSpec) + \"\\\"\"), node);\n        }\n        node.fieldName = fieldSpec.name; // Normalize case\n        node.typeSpec = fieldSpec.typeSpec;\n    };\n    SemanticAnalyzer.prototype.visitProcCall = function (resolvedProc, node) {\n        node.argTypeProps = [];\n        var paramTypeSpecs;\n        switch (resolvedProc.defType) {\n            case types_1.ProcDefType.BUILTIN:\n                paramTypeSpecs = resolvedProc.builtinProc.paramTypeSpecs;\n                break;\n            case types_1.ProcDefType.MODULE:\n                paramTypeSpecs = resolvedProc.proc.paramSymbols.map(function (_a) {\n                    var typeSpec = _a.typeSpec;\n                    return typeSpec;\n                });\n                break;\n            default:\n                this.throwError(\"Unknown FnDefType: \" + JSON.stringify(resolvedProc), node);\n        }\n        node.procDefType = resolvedProc.defType;\n        if (paramTypeSpecs.length !== node.argExprs.length) {\n            this.throwError(\"Incorrect number of arguments to \\\"\" + node.name + \"\\\": \" +\n                (\"expected \" + paramTypeSpecs.length + \", got \" + node.argExprs.length), node);\n        }\n        for (var i = 0; i < node.argExprs.length; ++i) {\n            var paramTypeSpec = paramTypeSpecs[i];\n            var argExpr = node.argExprs[i];\n            var argTypeSpec = argExpr.typeSpec;\n            var shouldPassByRef = ast_1.isLhsExpr(argExpr) &&\n                // Constants cannot be allowed to be modified by the proc, so must use pass-by-value.\n                !(argExpr.type === ast_1.ExprType.VAR_REF &&\n                    argExpr.symbol.varType === symbol_table_1.VarType.CONST) &&\n                // For built-in procs, we always pass by value in order to take advantage of automatic type\n                // casting (e.g. single -> integer).\n                resolvedProc.defType !== types_1.ProcDefType.BUILTIN;\n            var isCompatible = void 0;\n            if (shouldPassByRef) {\n                // If argument is an LHS expression, the types must match exactly as it may be assigned to\n                // from inside the proc.\n                isCompatible =\n                    lodash_1.default.isEqual(paramTypeSpec, argTypeSpec) ||\n                        (types_1.isArray(paramTypeSpec) &&\n                            types_1.isArray(argTypeSpec) &&\n                            lodash_1.default.isEqual(paramTypeSpec.elementTypeSpec, argTypeSpec.elementTypeSpec));\n            }\n            else {\n                // If argument is not an LHS expression, the types just need to be generally compatible.\n                isCompatible =\n                    types_1.areMatchingSingularTypes(paramTypeSpec, argTypeSpec) ||\n                        (types_1.isArray(paramTypeSpec) &&\n                            types_1.isArray(argTypeSpec) &&\n                            (types_1.areMatchingSingularTypes(paramTypeSpec.elementTypeSpec, argTypeSpec.elementTypeSpec) ||\n                                // Allow builtins to accept arrays of any element type.\n                                resolvedProc.defType === types_1.ProcDefType.BUILTIN));\n            }\n            if (!isCompatible) {\n                this.throwError(\"Incompatible argument \" + (i + 1) + \" to function \\\"\" + node.name + \"\\\": \" +\n                    (\"expected \" + types_1.typeSpecName(paramTypeSpec) + \", \") +\n                    (\"got \" + types_1.typeSpecName(argTypeSpec)), node);\n            }\n            node.argTypeProps.push({ paramTypeSpec: paramTypeSpec, shouldPassByRef: shouldPassByRef });\n        }\n    };\n    /** Computes the output numeric type after an arithmetic operation. */\n    SemanticAnalyzer.prototype.coerceNumericTypes = function () {\n        var typeSpecs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            typeSpecs[_i] = arguments[_i];\n        }\n        var RULES = [\n            { operands: [types_1.integerSpec(), types_1.integerSpec()], result: types_1.integerSpec() },\n            { operands: [types_1.integerSpec(), types_1.longSpec()], result: types_1.longSpec() },\n            { operands: [types_1.integerSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.integerSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.longSpec(), types_1.integerSpec()], result: types_1.longSpec() },\n            { operands: [types_1.longSpec(), types_1.longSpec()], result: types_1.longSpec() },\n            { operands: [types_1.longSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.longSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.singleSpec(), types_1.integerSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.longSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.integerSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.longSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.singleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n        ];\n        if (typeSpecs.length === 0) {\n            throw new Error('Missing arguments');\n        }\n        if (!typeSpecs.every(types_1.isNumeric)) {\n            throw new Error(\"Expected numeric types: \" + JSON.stringify(typeSpecs));\n        }\n        var resultTypeSpec = typeSpecs[0];\n        var _loop_2 = function (i) {\n            var matchingRule = RULES.find(function (_a) {\n                var _b = _a.operands, typeSpec1 = _b[0], typeSpec2 = _b[1];\n                return lodash_1.default.isEqual(typeSpec1, resultTypeSpec) &&\n                    lodash_1.default.isEqual(typeSpec2, typeSpecs[i]);\n            });\n            if (matchingRule) {\n                resultTypeSpec = matchingRule.result;\n            }\n            else {\n                throw new Error('Unknown numeric type combination: ' +\n                    (types_1.typeSpecName(resultTypeSpec) + \" and \" + types_1.typeSpecName(typeSpecs[i])));\n            }\n        };\n        for (var i = 1; i < typeSpecs.length; ++i) {\n            _loop_2(i);\n        }\n        return resultTypeSpec;\n    };\n    SemanticAnalyzer.prototype.getLocalSymbols = function () {\n        // TODO: Handle multiline DEF FN procs.\n        return this.currentProc\n            ? this.currentProc.localSymbols\n            : this.module.localSymbols;\n    };\n    SemanticAnalyzer.prototype.lookupSymbol = function (name) {\n        var _a, _b;\n        var symbol = null;\n        if (this.currentProc) {\n            symbol = symbol_table_1.lookupSymbol(this.currentProc.paramSymbols, name);\n        }\n        return ((_b = (_a = symbol !== null && symbol !== void 0 ? symbol : symbol_table_1.lookupSymbol(this.getLocalSymbols(), name)) !== null && _a !== void 0 ? _a : symbol_table_1.lookupSymbol(this.module.globalSymbols, name)) !== null && _b !== void 0 ? _b : null);\n    };\n    SemanticAnalyzer.prototype.createLocalVarSymbol = function (args) {\n        return __assign(__assign({}, args), { varType: this.currentProc && this.currentProc.isDefaultStatic\n                ? symbol_table_1.VarType.STATIC_VAR\n                : symbol_table_1.VarType.VAR, varScope: symbol_table_1.VarScope.LOCAL });\n    };\n    SemanticAnalyzer.prototype.addLocalSymbol = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this.getLocalSymbols()).push.apply(_a, args);\n    };\n    SemanticAnalyzer.prototype.getTypeSpecForVarDeclOrParam = function (node) {\n        var name = node.name, typeExpr = node.typeExpr;\n        switch (typeExpr.type) {\n            case ast_1.DataTypeExprType.ELEMENTARY:\n                if (!typeExpr.typeSpec) {\n                    typeExpr.typeSpec = this.getDefaultTypeSpecFromName(name);\n                }\n                return typeExpr.typeSpec;\n            case ast_1.DataTypeExprType.ARRAY:\n                for (var _i = 0, _a = typeExpr.dimensionSpecExprs; _i < _a.length; _i++) {\n                    var _b = _a[_i], minIdxExpr = _b.minIdxExpr, maxIdxExpr = _b.maxIdxExpr;\n                    var idxExprs = __spreadArray(__spreadArray([], (minIdxExpr ? [minIdxExpr] : [])), [maxIdxExpr]);\n                    this.acceptAll(idxExprs);\n                    for (var _c = 0, idxExprs_1 = idxExprs; _c < idxExprs_1.length; _c++) {\n                        var idxExpr = idxExprs_1[_c];\n                        if (!types_1.isNumeric(idxExpr.typeSpec)) {\n                            this.throwError(\"Array dimension size must be numeric, not \" + idxExpr.typeSpec.type, idxExpr);\n                        }\n                    }\n                }\n                if (typeExpr.elementTypeExpr) {\n                    if (!ast_1.isSingularTypeExpr(typeExpr.elementTypeExpr)) {\n                        this.throwError(\"Invalid array element type: \" + JSON.stringify(typeExpr.elementTypeExpr), typeExpr.elementTypeExpr);\n                    }\n                }\n                else {\n                    typeExpr.elementTypeExpr = {\n                        type: ast_1.DataTypeExprType.ELEMENTARY,\n                        typeSpec: this.getDefaultTypeSpecFromName(name),\n                        loc: typeExpr.loc,\n                    };\n                }\n                return {\n                    type: types_1.DataType.ARRAY,\n                    elementTypeSpec: this.getTypeSpecForVarDeclOrParam(__assign(__assign({}, node), { typeExpr: typeExpr.elementTypeExpr })),\n                    dimensionSpecs: typeExpr.dimensionSpecExprs.map(function () { return [0, 0]; }),\n                };\n            case ast_1.DataTypeExprType.UDT:\n                var udt = this.lookupUdtOrThrow(typeExpr, typeExpr.name);\n                return udt.typeSpec;\n            default:\n                this.throwError(\"Unknown DataTypeExpr type: \" + JSON.stringify(typeExpr), node);\n        }\n    };\n    SemanticAnalyzer.prototype.getDefaultTypeSpecFromName = function (name) {\n        var _a;\n        return ((_a = TYPE_SUFFIX_MAP[name[name.length - 1]]) !== null && _a !== void 0 ? _a : this.defTypeMap[name[0].toLowerCase()]);\n    };\n    SemanticAnalyzer.prototype.lookupFn = function (name, argTypeSpecs) {\n        var proc = symbol_table_1.lookupSymbol(this.module.procs, name);\n        if (proc) {\n            return {\n                defType: types_1.ProcDefType.MODULE,\n                proc: proc,\n                returnTypeSpec: ast_1.isFnProcOrDefFnProc(proc) ? proc.returnTypeSpec : null,\n            };\n        }\n        var builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs, {\n            // This allows us to throw a more useful error message in visitProcCall().\n            shouldReturnIfArgTypeMismatch: true,\n        });\n        if (builtinProc) {\n            return {\n                defType: types_1.ProcDefType.BUILTIN,\n                builtinProc: builtinProc,\n                returnTypeSpec: builtinProc.returnTypeSpec,\n            };\n        }\n        return null;\n    };\n    SemanticAnalyzer.prototype.lookupSub = function (name, argTypeSpecs) {\n        var proc = symbol_table_1.lookupSymbol(this.module.procs, name);\n        if (proc) {\n            return {\n                defType: types_1.ProcDefType.MODULE,\n                proc: proc,\n            };\n        }\n        var builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs, {\n            // This allows us to throw a more useful error message in visitProcCall().\n            shouldReturnIfArgTypeMismatch: true,\n        });\n        if (builtinProc) {\n            return {\n                defType: types_1.ProcDefType.BUILTIN,\n                builtinProc: builtinProc,\n            };\n        }\n        return null;\n    };\n    SemanticAnalyzer.prototype.lookupUdtOrThrow = function (node, name) {\n        var udt = symbol_table_1.lookupSymbol(this.module.udts, name);\n        if (!udt) {\n            this.throwError(\"Type not found: \\\"\" + name + \"\\\"\", node);\n        }\n        return udt;\n    };\n    SemanticAnalyzer.prototype.setUpDefTypeMap = function () {\n        for (var c = 'a'.charCodeAt(0); c <= 'z'.charCodeAt(0); ++c) {\n            this.defTypeMap[String.fromCharCode(c)] = types_1.singleSpec();\n        }\n        this.acceptAll(lodash_1.default.filter(this.module.stmts, ['type', ast_1.StmtType.DEF_TYPE]));\n    };\n    SemanticAnalyzer.prototype.lookupLabelOrThrow = function (node, context, label) {\n        var foundLabel = context.labels.find(function (existingLabel) { return existingLabel.toLowerCase() === label.toLowerCase(); });\n        if (!foundLabel) {\n            this.throwError(\"Label not found: \\\"\" + label + \"\\\"\", node);\n        }\n        return foundLabel;\n    };\n    return SemanticAnalyzer;\n}(ast_1.AstVisitor));\nexports.SemanticAnalyzer = SemanticAnalyzer;\nfunction runSemanticAnalysis(module, opts) {\n    if (opts === void 0) { opts = {}; }\n    return new SemanticAnalyzer(module, opts).run();\n}\nexports.default = runSemanticAnalysis;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDataItem = exports.dataItemTypeName = void 0;\nvar types_1 = require(\"./types\");\nfunction dataItemTypeName(_a) {\n    var _ = _a[0], value = _a[1];\n    return value === null ? 'null' : typeof value;\n}\nexports.dataItemTypeName = dataItemTypeName;\n/** Converts a data item to the expected type. */\nfunction getDataItem(item, expectedTypeSpec) {\n    var _ = item[0], value = item[1];\n    if (types_1.isNumeric(expectedTypeSpec)) {\n        switch (typeof value) {\n            case 'number':\n                return value;\n            case 'object':\n                return 0;\n            default:\n                throwDataItemTypeError(item, expectedTypeSpec);\n        }\n    }\n    else if (types_1.isString(expectedTypeSpec)) {\n        switch (typeof value) {\n            case 'string':\n                return value;\n            case 'object':\n                return '';\n            default:\n                throwDataItemTypeError(item, expectedTypeSpec);\n        }\n    }\n    else {\n        throw new Error(\"Unknown expected type spec: \" + JSON.stringify(expectedTypeSpec));\n    }\n}\nexports.getDataItem = getDataItem;\nfunction throwDataItemTypeError(item, expectedTypeSpec) {\n    var _a = item[0], line = _a[0], col = _a[1], _ = item[1];\n    throw new Error(\"expected \" + types_1.typeSpecName(expectedTypeSpec) + \", \" +\n        (\"got \" + dataItemTypeName(item) + \" data item \") +\n        (\"(defined at \" + line + \":\" + col + \")\"));\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ansi_escapes_1 = __importDefault(require(\"ansi-escapes\"));\nvar ansi_styles_1 = __importDefault(require(\"ansi-styles\"));\nvar ansi_terminal_key_code_map_1 = __importDefault(require(\"./ansi-terminal-key-code-map\"));\nvar runtime_1 = require(\"./runtime\");\n/** RuntimePlatform implementing screen manipulation using ANSI escape codes.\n *\n * Ideally this functionality could be made into a mixin, but 1) it relies on this.print() etc and\n * so must be a class and 2) abstract classes don't support mixins yet:\n * https://github.com/microsoft/TypeScript/issues/35356\n */\nvar AnsiTerminalPlatform = /** @class */ (function (_super) {\n    __extends(AnsiTerminalPlatform, _super);\n    function AnsiTerminalPlatform() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnsiTerminalPlatform.prototype.moveCursorTo = function (x, y) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.cursorTo(x, y))];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setCursorVisibility = function (isCursorVisible) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(isCursorVisible ? ansi_escapes_1.default.cursorShow : ansi_escapes_1.default.cursorHide)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.clearScreen = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.eraseScreen)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.moveCursorTo(0, 0)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setFgColor = function (colorName) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_styles_1.default[colorName].open)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setBgColor = function (colorName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bgColorName;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        bgColorName = \"bg\" + colorName[0].toUpperCase() + colorName.substr(1);\n                        return [4 /*yield*/, this.print(ansi_styles_1.default[bgColorName].open)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.beep = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.beep)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Translates an ANSI / VT100 key code to the DOS equivalent. */\n    AnsiTerminalPlatform.prototype.translateKeyCode = function (c) {\n        var _a;\n        return (_a = ansi_terminal_key_code_map_1.default[c]) !== null && _a !== void 0 ? _a : c;\n    };\n    return AnsiTerminalPlatform;\n}(runtime_1.RuntimePlatform));\nexports.default = AnsiTerminalPlatform;\n","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Returns a VT100 escape sequence prefixed by \"ESC [\". */\nfunction ESC(c) {\n    return \"\\u001B[\" + c;\n}\n/** Returns a DOS keyboard scan code prefixed by NUL. */\nfunction NUL(n) {\n    return String.fromCharCode(0, n);\n}\n/** Map ANSI / VT100 sequences to DOS keyboard scan codes. */\nvar ANSI_TERMINAL_KEY_CODE_MAP = (_a = {},\n    _a[ESC('A')] = NUL(72),\n    _a[ESC('B')] = NUL(80),\n    _a[ESC('C')] = NUL(77),\n    _a[ESC('D')] = NUL(75),\n    _a);\nexports.default = ANSI_TERMINAL_KEY_CODE_MAP;\n","import Link from '@material-ui/core/Link';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport React, {ReactNode} from 'react';\n\nfunction ExternalLink({href, children}: {href: string; children: ReactNode}) {\n  return (\n    <Link href={href} target=\"_blank\">\n      {children}\n      <LaunchIcon\n        style={{\n          fontSize: '0.9rem',\n          verticalAlign: 'middle',\n          marginLeft: '0.1rem',\n        }}\n      />\n    </Link>\n  );\n}\n\nexport default ExternalLink;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Link from '@material-ui/core/Link';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport Typography from '@material-ui/core/Typography';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport InfoIcon from '@material-ui/icons/Info';\nimport BookshelfIcon from 'mdi-material-ui/Bookshelf';\nimport {observer} from 'mobx-react';\nimport React, {useState} from 'react';\nimport ExternalLink from './external-link';\n\nfunction ResourcesTab() {\n  return (\n    <div>\n      <Typography variant=\"h6\">QBasic / QuickBASIC</Typography>\n      <Typography variant=\"body1\">\n        <p>\n          New to QBasic / QuickBASIC or need a refresher? Here are some\n          resources to help get you started:\n          <ul>\n            <li>\n              <ExternalLink href=\"https://en.wikibooks.org/wiki/QBasic\">\n                QBasic Wikibook (wikibooks.org)\n              </ExternalLink>\n            </li>\n            <li>\n              <ExternalLink href=\"https://www.qbasic.net/en/qbasic-tutorials/beginner/qbasic-beginner-1.htm\">\n                QBasic for Beginners (qbasic.net)\n              </ExternalLink>\n            </li>\n            <li>\n              <ExternalLink href=\"https://www.pcjs.org/documents/books/mspl13/basic/\">\n                Reference documentation from Microsoft (pcjs.org)\n              </ExternalLink>\n            </li>\n          </ul>\n        </p>\n      </Typography>\n\n      <Typography variant=\"h6\">Compatibility</Typography>\n      <Typography variant=\"body1\">\n        <p>\n          qbjc supports a subset of QBasic / QuickBASIC functionality. See{' '}\n          <ExternalLink href=\"https://github.com/jichu4n/qbjc#compatibility\">\n            compatibility guide\n          </ExternalLink>{' '}\n          for more information.\n        </p>\n        <p>\n          Is there something you'd like to see supported in qbjc? Please file an\n          issue or send a pull request at{' '}\n          <ExternalLink href=\"https://github.com/jichu4n/qbjc\">\n            github.com/jichu4n/qbjc\n          </ExternalLink>\n          !\n        </p>\n      </Typography>\n    </div>\n  );\n}\n\nfunction AboutTab() {\n  return (\n    <div>\n      <Typography variant=\"h6\">What is qbjc?</Typography>\n      <Typography variant=\"body1\">\n        <p>\n          <b>qbjc</b> is a QBasic to JavaScript compiler.\n        </p>\n        <p>\n          The <b>qbjc playground</b> at{' '}\n          <Link href=\"https://qbjc.dev\">qbjc.dev</Link> lets you edit and run\n          QBasic / QuickBASIC programs directly in the browser.\n        </p>\n        <p>\n          Visit the project homepage on GitHub to find out more:{' '}\n          <ExternalLink href=\"https://github.com/jichu4n/qbjc\">\n            github.com/jichu4n/qbjc\n          </ExternalLink>\n        </p>\n      </Typography>\n\n      <Typography variant=\"h6\">Who can see my source code?</Typography>\n      <Typography variant=\"body1\">\n        <p>\n          The source code you enter into the qbjc playground at{' '}\n          <Link href=\"https://qbjc.dev\">qbjc.dev</Link> is entirely private. It\n          is compiled and executed locally in your browser, and your source code\n          is never uploaded to qbjc.dev.\n        </p>\n      </Typography>\n\n      <Typography variant=\"h6\">\n        Is qbjc built / supported by Microsoft?\n      </Typography>\n      <Typography variant=\"body1\">\n        <p>No, qbjc is NOT affliated with Microsoft in any way.</p>\n        <p>\n          qbjc is open source software distributed under the Apache 2.0 License.\n          Please feel free to fork and contribute at{' '}\n          <ExternalLink href=\"https://github.com/jichu4n/qbjc\">\n            github.com/jichu4n/qbjc\n          </ExternalLink>\n          !\n        </p>\n        <p>\n          qbjc is developed by Chuan Ji. Find me on:\n          <ul>\n            <li>\n              GitHub:{' '}\n              <ExternalLink href=\"https://github.com/jichu4n\">\n                github.com/jichu4n\n              </ExternalLink>\n            </li>\n            <li>\n              Personal website:{' '}\n              <ExternalLink href=\"https://jichu4n.com\">\n                jichu4n.com\n              </ExternalLink>\n            </li>\n          </ul>\n        </p>\n      </Typography>\n    </div>\n  );\n}\n\nconst HelpDialog = observer(\n  ({isOpen, onClose}: {isOpen: boolean; onClose: () => void}) => {\n    const theme = useTheme();\n    const isFullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const [activeTab, setActiveTab] = useState<'resources' | 'about'>(\n      'resources'\n    );\n\n    return (\n      <>\n        <Dialog\n          fullScreen={isFullScreen}\n          open={isOpen}\n          onClose={onClose}\n          fullWidth={true}\n          maxWidth=\"sm\"\n          scroll=\"paper\"\n        >\n          <DialogTitle>Help</DialogTitle>\n          <div\n            style={{\n              display: 'flex',\n            }}\n          >\n            <Tabs\n              orientation=\"vertical\"\n              variant=\"scrollable\"\n              value={activeTab}\n              onChange={(event, activeTab) => setActiveTab(activeTab)}\n              style={{\n                borderRight: `1px solid ${theme.palette.divider}`,\n              }}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n            >\n              <Tab\n                label=\"Resources\"\n                icon={<BookshelfIcon />}\n                value={'resources'}\n              />\n              <Tab label=\"About\" icon={<InfoIcon />} value={'about'} />\n            </Tabs>\n            <div\n              style={{\n                backgroundColor: theme.palette.background.paper,\n                // @ts-ignore\n                overflowY: 'overlay',\n                flex: 1,\n                height: 300,\n                paddingLeft: 20,\n                paddingRight: 20,\n              }}\n            >\n              {activeTab === 'resources' && <ResourcesTab />}\n              {activeTab === 'about' && <AboutTab />}\n            </div>\n          </div>\n          <DialogActions>\n            <Button onClick={onClose} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </>\n    );\n  }\n);\n\nexport default HelpDialog;\n","export interface ExampleSpec {\n  fileName: string;\n  title: string;\n  description: string;\n  content: string;\n}\n\nconst EXAMPLE_SPECS: Array<ExampleSpec> = [\n  {\n    fileName: 'guess.bas',\n    title: 'GUESS.BAS',\n    description: 'Simple number guessing game',\n  },\n  {\n    fileName: 'nibbles.bas',\n    title: 'NIBBLES.BAS',\n    description: 'Classic snake game',\n  },\n  {\n    fileName: 'cal.bas',\n    title: 'CAL.BAS',\n    description: 'Perpetual calendar program',\n  },\n  {\n    fileName: 'check.bas',\n    title: 'CHECK.BAS',\n    description: 'Checkbook balancing program',\n  },\n  {\n    fileName: 'strtonum.bas',\n    title: 'STRTONUM.BAS',\n    description: 'Converts a string to a number',\n  },\n].map((spec) => ({\n  ...spec,\n  content: require(`!!raw-loader!../examples/${spec.fileName}`).default,\n}));\n\nexport default EXAMPLE_SPECS;\n\nexport const DEFAULT_EXAMPLE = EXAMPLE_SPECS[0];\n","import Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport {Ace} from 'ace-builds';\nimport _ from 'lodash';\nimport {DropzoneArea} from 'material-ui-dropzone';\nimport BookshelfIcon from 'mdi-material-ui/Bookshelf';\nimport FileCodeIcon from 'mdi-material-ui/FileCode';\nimport LaptopIcon from 'mdi-material-ui/Laptop';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useRef, useState} from 'react';\nimport EXAMPLES from './examples';\n\ninterface SelectedFileSpec {\n  title: string;\n  content: string;\n}\n\nfunction ConfirmationDialog({\n  isOpen,\n  onClose,\n  title,\n  content,\n  onConfirm,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  content: string;\n  onConfirm: () => void;\n}) {\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{content}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            onClose();\n            onConfirm();\n          }, [onClose, onConfirm])}\n          color=\"primary\"\n        >\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction ExamplesTab({\n  onSelect,\n}: {\n  onSelect: (fileSpec: SelectedFileSpec) => void;\n}) {\n  const onExampleClick = useCallback(\n    (exampleIdx: number) => {\n      onSelect(EXAMPLES[exampleIdx]);\n    },\n    [onSelect]\n  );\n\n  return (\n    <List subheader={<li />}>\n      {EXAMPLES.map(({fileName, title, description}, idx) => (\n        <ListItem\n          key={fileName}\n          button={true}\n          onClick={() => onExampleClick(idx)}\n        >\n          <ListItemAvatar>\n            <Avatar>\n              <FileCodeIcon color=\"action\" />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText primary={title} secondary={description} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n\nfunction UploadTab({\n  onSelect,\n}: {\n  onSelect: (fileSpec: SelectedFileSpec) => void;\n}) {\n  const onChange = useCallback(\n    async (selectedFiles: Array<File>) => {\n      if (selectedFiles.length > 0) {\n        const selectedFile = selectedFiles[0];\n        onSelect({\n          title: selectedFile.name,\n          content: await selectedFile.text(),\n        });\n      }\n    },\n    [onSelect]\n  );\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: 1,\n        height: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <DropzoneArea\n        acceptedFiles={['.bas']}\n        filesLimit={1}\n        showPreviews={false}\n        showPreviewsInDropzone={false}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nconst OpenDialog = observer(\n  ({\n    isOpen,\n    onClose,\n    editor,\n    onChangeSourceFileName,\n  }: {\n    isOpen: boolean;\n    onClose: () => void;\n    editor: Ace.Editor | null;\n    onChangeSourceFileName: (sourceFileName: string) => void;\n  }) => {\n    const theme = useTheme();\n    const isFullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const selectedFileSpecRef = useRef<SelectedFileSpec | null>(null);\n\n    const [\n      isOverwriteConfirmationDialogOpen,\n      setIsOverwriteConfirmationDialogOpen,\n    ] = useState(false);\n\n    const openSelectedFile = useCallback(() => {\n      const selectedFileSpec = selectedFileSpecRef.current;\n      if (!editor || !selectedFileSpec) {\n        return;\n      }\n      editor.setValue(selectedFileSpec.content);\n      onChangeSourceFileName(selectedFileSpec.title);\n      selectedFileSpecRef.current = null;\n      onClose();\n    }, [editor, onClose, onChangeSourceFileName]);\n\n    const onSelect = useCallback(\n      (fileSpec: SelectedFileSpec) => {\n        if (!editor) {\n          return;\n        }\n        const trimmedSource = editor.getValue().trim();\n        const shouldConfirm =\n          !!trimmedSource &&\n          !_.some(EXAMPLES, ({content}) => trimmedSource === content.trim());\n\n        selectedFileSpecRef.current = fileSpec;\n        if (shouldConfirm) {\n          setIsOverwriteConfirmationDialogOpen(true);\n        } else {\n          openSelectedFile();\n        }\n      },\n      [editor, openSelectedFile]\n    );\n\n    const [activeTab, setActiveTab] = useState<'examples' | 'upload'>(\n      'examples'\n    );\n\n    return (\n      <>\n        <Dialog\n          fullScreen={isFullScreen}\n          open={isOpen}\n          onClose={onClose}\n          fullWidth={true}\n          maxWidth=\"sm\"\n          scroll=\"paper\"\n        >\n          <DialogTitle>Open program</DialogTitle>\n          <div\n            style={{\n              display: 'flex',\n            }}\n          >\n            <Tabs\n              orientation=\"vertical\"\n              variant=\"scrollable\"\n              value={activeTab}\n              onChange={(event, activeTab) => setActiveTab(activeTab)}\n              style={{\n                borderRight: `1px solid ${theme.palette.divider}`,\n              }}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n            >\n              <Tab\n                label=\"Examples\"\n                icon={<BookshelfIcon />}\n                value={'examples'}\n              />\n              <Tab label=\"Computer\" icon={<LaptopIcon />} value={'upload'} />\n            </Tabs>\n            <div\n              style={{\n                backgroundColor: theme.palette.background.paper,\n                // @ts-ignore\n                overflowY: 'overlay',\n                flex: 1,\n                height: 300,\n                paddingLeft: 20,\n                paddingRight: 20,\n              }}\n            >\n              {activeTab === 'examples' && <ExamplesTab onSelect={onSelect} />}\n              {activeTab === 'upload' && <UploadTab onSelect={onSelect} />}\n            </div>\n          </div>\n          <DialogActions>\n            <Button onClick={onClose} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <ConfirmationDialog\n          isOpen={isOverwriteConfirmationDialogOpen}\n          onClose={() => setIsOverwriteConfirmationDialogOpen(false)}\n          onConfirm={openSelectedFile}\n          title={`Open ${selectedFileSpecRef.current?.title}`}\n          content=\"This will overwrite the current editor contents. Are you sure?\"\n        />\n      </>\n    );\n  }\n);\n\nexport default OpenDialog;\n","import _ from 'lodash';\nimport {\n  action,\n  computed,\n  makeObservable,\n  observable,\n  reaction,\n  toJS,\n} from 'mobx';\n\nexport interface SourceFile {\n  name: string;\n  content: string;\n}\n\nexport enum ConfigKey {\n  SOURCE_FILES = 'v1/sourceFiles',\n  CURRENT_SOURCE_FILE_NAME = 'v1/currentSourceFileName',\n  EDITOR_FONT_FAMILY = 'v1/editorFontFamily',\n  EDITOR_FONT_SIZE = 'v1/editorFontSize',\n  EDITOR_THEME = 'v1/editorTheme',\n  EDITOR_KEYBINDINGS = 'v1/editorKeybindings',\n  SCREEN_FONT_FAMILY = 'v1/outputScreenFontFamily',\n  SCREEN_FONT_SIZE = 'v1/outputScreenFontSize',\n  SCREEN_LETTER_SPACING = 'v1/outputScreenLetterSpacing',\n  SCREEN_LINE_HEIGHT = 'v1/outputScreenLineHeight',\n  EXECUTION_DELAY = 'v1/executionDelayUs',\n}\n\nexport const DEFAULT_SOURCE_FILE_NAME = 'source.bas';\n\nconst DEFAULT_CONFIG = {\n  [ConfigKey.SOURCE_FILES]: [{name: DEFAULT_SOURCE_FILE_NAME, content: ''}],\n  [ConfigKey.CURRENT_SOURCE_FILE_NAME]: DEFAULT_SOURCE_FILE_NAME,\n  [ConfigKey.EDITOR_FONT_FAMILY]: 'Cascadia Mono',\n  [ConfigKey.EDITOR_FONT_SIZE]: 14,\n  [ConfigKey.EDITOR_THEME]: 'nord_dark',\n  [ConfigKey.EDITOR_KEYBINDINGS]: '',\n  [ConfigKey.SCREEN_FONT_FAMILY]: 'Cascadia Mono',\n  [ConfigKey.SCREEN_FONT_SIZE]: 14,\n  [ConfigKey.SCREEN_LETTER_SPACING]: 0,\n  [ConfigKey.SCREEN_LINE_HEIGHT]: 1.0,\n  [ConfigKey.EXECUTION_DELAY]: 0,\n};\n\nexport const EDITOR_THEME_GROUPS = [\n  {label: 'Light themes', value: 'light'},\n  {label: 'Dark themes', value: 'dark'},\n];\n\nexport const EDITOR_THEMES = [\n  {label: 'Ambiance', value: 'ambiance', group: 'dark'},\n  {label: 'Chaos', value: 'chaos', group: 'dark'},\n  {label: 'Chrome', value: 'chrome', group: 'light'},\n  {label: 'Clouds', value: 'clouds', group: 'light'},\n  {label: 'Clouds midnight', value: 'clouds_midnight', group: 'dark'},\n  {label: 'Cobalt', value: 'cobalt', group: 'dark'},\n  {label: 'Crimson Editor', value: 'crimson_editor', group: 'light'},\n  {label: 'Dawn', value: 'dawn', group: 'light'},\n  {label: 'Dracula', value: 'dracula', group: 'dark'},\n  {label: 'Dreamweaver', value: 'dreamweaver', group: 'light'},\n  {label: 'Eclipse', value: 'eclipse', group: 'light'},\n  {label: 'Github', value: 'github', group: 'light'},\n  {label: 'Gob', value: 'gob', group: 'dark'},\n  {label: 'Gruvbox', value: 'gruvbox', group: 'dark'},\n  {label: 'Idle Fingers', value: 'idle_fingers', group: 'dark'},\n  {label: 'Iplastic', value: 'iplastic', group: 'light'},\n  {label: 'Katzenmilch', value: 'katzenmilch', group: 'light'},\n  {label: 'KR Theme', value: 'kr_theme', group: 'dark'},\n  {label: 'Kuroir', value: 'kuroir', group: 'light'},\n  {label: 'Merbivore', value: 'merbivore', group: 'dark'},\n  {label: 'Merbivore Soft', value: 'merbivore_soft', group: 'dark'},\n  {label: 'Mono Industrial', value: 'mono_industrial', group: 'dark'},\n  {label: 'Monokai', value: 'monokai', group: 'dark'},\n  {label: 'Nord Dark', value: 'nord_dark', group: 'dark'},\n  {label: 'Pastel On Dark', value: 'pastel_on_dark', group: 'dark'},\n  {label: 'Solarized Dark', value: 'solarized_dark', group: 'dark'},\n  {label: 'Solarized Light', value: 'solarized_light', group: 'light'},\n  {label: 'SQL Server', value: 'sqlserver', group: 'light'},\n  {label: 'Terminal', value: 'terminal', group: 'dark'},\n  {label: 'Textmate', value: 'textmate', group: 'light'},\n  {label: 'Tomorrow', value: 'tomorrow', group: 'light'},\n  {label: 'Tomorrow Night Blue', value: 'tomorrow_night_blue', group: 'dark'},\n  {\n    label: 'Tomorrow Night Bright',\n    value: 'tomorrow_night_bright',\n    group: 'dark',\n  },\n  {\n    label: 'Tomorrow Night Eighties',\n    value: 'tomorrow_night_eighties',\n    group: 'dark',\n  },\n  {label: 'Tomorrow Night', value: 'tomorrow_night', group: 'dark'},\n  {label: 'Twilight', value: 'twilight', group: 'dark'},\n  {label: 'Vibrant Ink', value: 'vibrant_ink', group: 'dark'},\n  {label: 'Xcode', value: 'xcode', group: 'light'},\n];\n\nexport const EDITOR_KEYBINDINGS = [\n  {label: 'Default', value: ''},\n  {label: 'Vim', value: 'vim'},\n  {label: 'Emacs', value: 'emacs'},\n  {label: 'Sublime Text', value: 'sublime'},\n  {label: 'Visual Studio Code', value: 'vscode'},\n];\n\nclass ConfigManager {\n  config = DEFAULT_CONFIG;\n\n  constructor() {\n    makeObservable(this, {\n      config: observable,\n      setKey: action,\n      load: action,\n      sourceFiles: computed,\n      currentSourceFile: computed,\n      setSourceFileName: action,\n      setSourceFileContent: action,\n    });\n\n    this.load();\n\n    reaction(\n      () => toJS(this.config),\n      () => this.save()\n    );\n  }\n\n  getKey(key: ConfigKey): any {\n    return this.config[key];\n  }\n\n  setKey(key: ConfigKey, value: any) {\n    (this.config as {[key: string]: any})[key] = value;\n  }\n\n  save() {\n    for (const key of Object.values(ConfigKey)) {\n      const defaultValue = JSON.stringify(DEFAULT_CONFIG[key]);\n      const currentValue = JSON.stringify(this.config[key]);\n      if (currentValue === defaultValue) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, currentValue);\n      }\n    }\n  }\n\n  load() {\n    if (typeof localStorage === 'undefined') {\n      console.warn(`localStorage not available`);\n      return;\n    }\n    for (const key of Object.values(ConfigKey)) {\n      const rawValue = localStorage.getItem(key);\n      if (rawValue) {\n        let value: any;\n        try {\n          value = JSON.parse(rawValue);\n        } catch (e) {\n          console.warn(`Failed to parse value for key \"${key}\": \"${rawValue}\"`);\n          continue;\n        }\n        this.setKey(key, value);\n      }\n    }\n\n    // Ensure current source file is sane.\n    if (!this.currentSourceFile) {\n      this.sourceFiles.push({\n        name: this.getKey(ConfigKey.CURRENT_SOURCE_FILE_NAME),\n        content: '',\n      });\n    }\n\n    console.log(`Loaded config:`, toJS(this.config));\n  }\n\n  get sourceFiles(): Array<SourceFile> {\n    return this.getKey(ConfigKey.SOURCE_FILES);\n  }\n\n  get currentSourceFile(): SourceFile {\n    return _.find(this.sourceFiles, [\n      'name',\n      this.getKey(ConfigKey.CURRENT_SOURCE_FILE_NAME),\n    ])!;\n  }\n\n  setSourceFileName(sourceFile: SourceFile, newSourceFileName: string) {\n    sourceFile.name = newSourceFileName;\n  }\n\n  setSourceFileContent(sourceFile: SourceFile, newContent: string) {\n    sourceFile.content = newContent;\n  }\n}\n\nconst configManager = new ConfigManager();\nexport default configManager;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Radio from '@material-ui/core/Radio';\nimport Slider from '@material-ui/core/Slider';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport TextField from '@material-ui/core/TextField';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport _ from 'lodash';\nimport FileDocumentEditIcon from 'mdi-material-ui/FileDocumentEdit';\nimport HammerWrenchIcon from 'mdi-material-ui/HammerWrench';\nimport MonitorIcon from 'mdi-material-ui/Monitor';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {\n  ConfigKey,\n  EDITOR_KEYBINDINGS,\n  EDITOR_THEMES,\n  EDITOR_THEME_GROUPS,\n} from './config-manager';\n\nconst SETTING_EDITOR_INPUT_WIDTH = 400;\n\nfunction TextSettingEditorDialog({\n  configKey,\n  title,\n  isOpen,\n  onClose,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as string);\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <TextField\n          autoFocus={true}\n          required={true}\n          fullWidth={true}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          style={{width: SETTING_EDITOR_INPUT_WIDTH, maxWidth: '100%'}}\n          InputProps={{style: {fontSize: '0.9rem'}}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value.trim());\n            onClose();\n          }, [configKey, value, onClose])}\n          disabled={!value.trim()}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction SliderSettingEditorDialog({\n  isOpen,\n  onClose,\n  title,\n  configKey,\n  min,\n  max,\n  step,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n  min: number;\n  max: number;\n  step: number;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as number);\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <Slider\n          value={value}\n          onChange={(e, value) => setValue(value as number)}\n          min={min}\n          max={max}\n          step={step}\n          marks={true}\n          valueLabelDisplay=\"on\"\n          style={{\n            width: SETTING_EDITOR_INPUT_WIDTH,\n            maxWidth: '100%',\n            marginTop: 40,\n          }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value);\n            onClose();\n          }, [configKey, value, onClose])}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction SingleChoiceSettingEditorDialog({\n  isOpen,\n  onClose,\n  title,\n  configKey,\n  groups,\n  choices,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n  groups?: Array<{label: string; value: string}>;\n  choices: Array<{label: string; value: string; group?: string}>;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as string);\n  const listRef = useRef<HTMLUListElement | null>(null);\n  const selectedListItemRef = useRef<HTMLDivElement | null>(null);\n  const didScrollToSelectedListItem = useRef(false);\n\n  const scrollToSelectedListItem = useCallback(() => {\n    if (!isOpen) {\n      didScrollToSelectedListItem.current = false;\n      return;\n    }\n    if (\n      !listRef.current ||\n      !selectedListItemRef.current ||\n      didScrollToSelectedListItem.current\n    ) {\n      return;\n    }\n    selectedListItemRef.current.scrollIntoView(true);\n    // Scroll up a bit more because the sticky list subheader covers the top of the list viewport.\n    const isScrolledToBottom =\n      listRef.current.scrollHeight -\n        listRef.current.scrollTop -\n        listRef.current.clientHeight <\n      1;\n    if (!isScrolledToBottom) {\n      listRef.current.scrollTop -= 150;\n    }\n    didScrollToSelectedListItem.current = true;\n  }, [isOpen]);\n  useEffect(scrollToSelectedListItem);\n\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <List\n          subheader={<li />}\n          style={{\n            overflowX: 'hidden',\n          }}\n          ref={(node: HTMLUListElement | null) => {\n            listRef.current = node;\n            scrollToSelectedListItem();\n          }}\n        >\n          {(groups || [null]).map((group, idx) => (\n            <li key={group?.value ?? idx} style={{backgroundColor: 'inherit'}}>\n              <ul style={{padding: 0, backgroundColor: 'inherit'}}>\n                {group && (\n                  <ListSubheader color=\"primary\">{group.label}</ListSubheader>\n                )}\n                {choices.map((choice) => {\n                  if (group && group.value !== choice.group) {\n                    return null;\n                  }\n                  const isSelected = choice.value === value;\n                  const onSelect = () => setValue(choice.value);\n                  return (\n                    <ListItem\n                      key={choice.value}\n                      selected={isSelected}\n                      button={true}\n                      onClick={onSelect}\n                      style={{width: SETTING_EDITOR_INPUT_WIDTH}}\n                      ref={\n                        isSelected\n                          ? (node) => {\n                              selectedListItemRef.current = node;\n                              scrollToSelectedListItem();\n                            }\n                          : null\n                      }\n                    >\n                      <ListItemText\n                        primary={choice.label}\n                        primaryTypographyProps={{style: {fontSize: '0.9rem'}}}\n                      />\n                      <ListItemSecondaryAction>\n                        <Radio\n                          checked={isSelected}\n                          onSelect={onSelect}\n                          color=\"primary\"\n                        />\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  );\n                })}\n              </ul>\n            </li>\n          ))}\n        </List>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value);\n            onClose();\n          }, [configKey, value, onClose])}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst SettingsDialog = observer(\n  ({isOpen, onClose}: {isOpen: boolean; onClose: () => void}) => {\n    const theme = useTheme();\n    const isFullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const [activeTab, setActiveTab] = useState<\n      'editor' | 'outputScreen' | 'execution'\n    >('editor');\n\n    const [isEditorFontDialogOpen, setIsEditorFontDialogOpen] = useState(false);\n    const [isEditorFontSizeDialogOpen, setIsEditorFontSizeDialogOpen] =\n      useState(false);\n    const [isEditorThemeDialogOpen, setIsEditorThemeDialogOpen] =\n      useState(false);\n    const [isEditorKeybindingsDialogOpen, setIsEditorKeybindingsDialogOpen] =\n      useState(false);\n\n    const [isScreenFontDialogOpen, setIsScreenFontDialogOpen] = useState(false);\n    const [isScreenFontSizeDialogOpen, setIsScreenFontSizeDialogOpen] =\n      useState(false);\n    const [\n      isScreenLetterSpacingDialogOpen,\n      setIsScreenLetterSpacingDialogOpen,\n    ] = useState(false);\n    const [isScreenLineHeightDialogOpen, setIsScreenLineHeightDialogOpen] =\n      useState(false);\n\n    const [isExecutionDelayDialogOpen, setIsExecutionDelayDialogOpen] =\n      useState(false);\n\n    return (\n      <>\n        <Dialog\n          fullScreen={isFullScreen}\n          open={isOpen}\n          onClose={onClose}\n          fullWidth={true}\n          maxWidth=\"sm\"\n          scroll=\"paper\"\n        >\n          <DialogTitle>Settings</DialogTitle>\n          <DialogContent dividers={true}>\n            <div\n              style={{\n                display: 'flex',\n              }}\n            >\n              <Tabs\n                orientation=\"vertical\"\n                variant=\"scrollable\"\n                value={activeTab}\n                onChange={(event, activeTab) => setActiveTab(activeTab)}\n                style={{\n                  borderRight: `1px solid ${theme.palette.divider}`,\n                }}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n              >\n                <Tab\n                  label=\"Editor\"\n                  icon={<FileDocumentEditIcon />}\n                  value={'editor'}\n                />\n                <Tab\n                  label=\"Output\"\n                  icon={<MonitorIcon />}\n                  value={'outputScreen'}\n                />\n                <Tab\n                  label=\"Execution\"\n                  icon={<HammerWrenchIcon />}\n                  value={'execution'}\n                />\n              </Tabs>\n              <div\n                style={{\n                  backgroundColor: theme.palette.background.paper,\n                  // @ts-ignore\n                  overflowY: 'overlay',\n                  flex: 1,\n                  height: 300,\n                  paddingLeft: 20,\n                  paddingRight: 20,\n                }}\n              >\n                <List subheader={<li />}>\n                  {activeTab === 'editor' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorThemeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor theme\"\n                          secondary={\n                            _.find(EDITOR_THEMES, [\n                              'value',\n                              configManager.getKey(ConfigKey.EDITOR_THEME),\n                            ])?.label\n                          }\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorFontDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor font\"\n                          secondary={configManager.getKey(\n                            ConfigKey.EDITOR_FONT_FAMILY\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorFontSizeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor font size\"\n                          secondary={configManager.getKey(\n                            ConfigKey.EDITOR_FONT_SIZE\n                          )}\n                        />{' '}\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorKeybindingsDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor keybindings\"\n                          secondary={\n                            _.find(EDITOR_KEYBINDINGS, [\n                              'value',\n                              configManager.getKey(\n                                ConfigKey.EDITOR_KEYBINDINGS\n                              ),\n                            ])?.label\n                          }\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                  {activeTab === 'outputScreen' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenFontDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen font\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_FONT_FAMILY\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenFontSizeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen font size\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_FONT_SIZE\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenLetterSpacingDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen letter spacing\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_LETTER_SPACING\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenLineHeightDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen line height\"\n                          secondary={`${configManager.getKey(\n                            ConfigKey.SCREEN_LINE_HEIGHT\n                          )}x`}\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                  {activeTab === 'execution' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsExecutionDelayDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Statement execution delay\"\n                          secondary={`${configManager.getKey(\n                            ConfigKey.EXECUTION_DELAY\n                          )} s`}\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                </List>\n              </div>\n            </div>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={onClose} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <TextSettingEditorDialog\n          isOpen={isEditorFontDialogOpen}\n          onClose={() => setIsEditorFontDialogOpen(false)}\n          title=\"Editor font\"\n          configKey={ConfigKey.EDITOR_FONT_FAMILY}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isEditorFontSizeDialogOpen}\n          onClose={() => setIsEditorFontSizeDialogOpen(false)}\n          title=\"Editor font size\"\n          configKey={ConfigKey.EDITOR_FONT_SIZE}\n          min={6}\n          max={24}\n          step={1}\n        />\n        <SingleChoiceSettingEditorDialog\n          isOpen={isEditorThemeDialogOpen}\n          onClose={() => setIsEditorThemeDialogOpen(false)}\n          title=\"Editor theme\"\n          configKey={ConfigKey.EDITOR_THEME}\n          groups={EDITOR_THEME_GROUPS}\n          choices={EDITOR_THEMES}\n        />\n        <SingleChoiceSettingEditorDialog\n          isOpen={isEditorKeybindingsDialogOpen}\n          onClose={() => setIsEditorKeybindingsDialogOpen(false)}\n          title=\"Editor keybindings\"\n          configKey={ConfigKey.EDITOR_KEYBINDINGS}\n          choices={EDITOR_KEYBINDINGS}\n        />\n\n        <TextSettingEditorDialog\n          isOpen={isScreenFontDialogOpen}\n          onClose={() => setIsScreenFontDialogOpen(false)}\n          title=\"Output screen font\"\n          configKey={ConfigKey.SCREEN_FONT_FAMILY}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenFontSizeDialogOpen}\n          onClose={() => setIsScreenFontSizeDialogOpen(false)}\n          title=\"Output screen font size\"\n          configKey={ConfigKey.SCREEN_FONT_SIZE}\n          min={6}\n          max={24}\n          step={1}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenLetterSpacingDialogOpen}\n          onClose={() => setIsScreenLetterSpacingDialogOpen(false)}\n          title=\"Output screen letter spacing\"\n          configKey={ConfigKey.SCREEN_LETTER_SPACING}\n          min={0}\n          max={8}\n          step={1}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenLineHeightDialogOpen}\n          onClose={() => setIsScreenLineHeightDialogOpen(false)}\n          title=\"Output screen line height\"\n          configKey={ConfigKey.SCREEN_LINE_HEIGHT}\n          min={1.0}\n          max={2.0}\n          step={0.05}\n        />\n\n        <SliderSettingEditorDialog\n          isOpen={isExecutionDelayDialogOpen}\n          onClose={() => setIsExecutionDelayDialogOpen(false)}\n          title=\"Statement execution delay\"\n          configKey={ConfigKey.EXECUTION_DELAY}\n          min={0}\n          max={10}\n          step={1}\n        />\n      </>\n    );\n  }\n);\n\nexport default SettingsDialog;\n","import AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport HelpIcon from '@material-ui/icons/Help';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport {Ace} from 'ace-builds';\nimport {saveAs} from 'file-saver';\nimport React, {useCallback, useState} from 'react';\nimport HelpDialog from './help-dialog';\nimport OpenDialog from './open-dialog';\nimport SettingsDialog from './settings-dialog';\n\nfunction AppHeader({\n  isReady,\n  editor,\n  sourceFileName,\n  onChangeSourceFileName,\n}: {\n  isReady: boolean;\n  editor: Ace.Editor | null;\n  sourceFileName: string;\n  onChangeSourceFileName: (sourceFileName: string) => void;\n}) {\n  const onSaveClick = useCallback(() => {\n    if (!isReady || !editor) {\n      return;\n    }\n    const blob = new Blob([editor.getValue()], {\n      type: 'text/plain;charset=utf-8',\n    });\n    saveAs(blob, sourceFileName);\n  }, [isReady, editor, sourceFileName]);\n\n  const theme = useTheme();\n\n  const [isOpenDialogOpen, setIsOpenDialogOpen] = useState(false);\n  const showOpenDialog = useCallback(() => setIsOpenDialogOpen(true), []);\n  const hideOpenDialog = useCallback(() => setIsOpenDialogOpen(false), []);\n  const [isSettingsDialogOpen, setIsSettingsDialogOpen] = useState(false);\n  const showSettingsDialog = useCallback(\n    () => setIsSettingsDialogOpen(true),\n    []\n  );\n  const hideSettingsDialog = useCallback(\n    () => setIsSettingsDialogOpen(false),\n    []\n  );\n  const [isHelpDialogOpen, setIsHelpDialogOpen] = useState(false);\n  const showHelpDialog = useCallback(() => setIsHelpDialogOpen(true), []);\n  const hideHelpDialog = useCallback(() => setIsHelpDialogOpen(false), []);\n\n  return (\n    <>\n      <AppBar position=\"relative\" color=\"default\">\n        <Toolbar>\n          <Typography variant=\"h6\" style={{flexGrow: 1}}>\n            qbjc playground\n          </Typography>\n          {isReady && (\n            <>\n              <Tooltip title=\"Open program\">\n                <IconButton\n                  aria-label=\"Open program\"\n                  color=\"inherit\"\n                  onClick={showOpenDialog}\n                >\n                  <FolderIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Save program\">\n                <IconButton\n                  aria-label=\"Save program\"\n                  color=\"inherit\"\n                  onClick={onSaveClick}\n                >\n                  <SaveIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Settings\">\n                <IconButton\n                  aria-label=\"Edit settings\"\n                  color=\"inherit\"\n                  onClick={showSettingsDialog}\n                >\n                  <SettingsIcon />\n                </IconButton>\n              </Tooltip>\n            </>\n          )}\n          <Tooltip title=\"Help\">\n            <IconButton\n              aria-label=\"Help\"\n              color=\"inherit\"\n              onClick={showHelpDialog}\n            >\n              <HelpIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip\n            title={\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                View on GitHub\n                <LaunchIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    marginLeft: '0.1rem',\n                  }}\n                />\n              </div>\n            }\n          >\n            <IconButton\n              aria-label=\"View on GitHub\"\n              color=\"inherit\"\n              href=\"https://github.com/jichu4n/qbjc\"\n              target=\"_blank\"\n            >\n              <GitHubIcon />\n            </IconButton>\n          </Tooltip>\n        </Toolbar>\n      </AppBar>\n\n      <OpenDialog\n        isOpen={isOpenDialogOpen}\n        onClose={hideOpenDialog}\n        editor={editor}\n        onChangeSourceFileName={onChangeSourceFileName}\n      />\n      <SettingsDialog\n        isOpen={isSettingsDialogOpen}\n        onClose={hideSettingsDialog}\n      />\n      <HelpDialog isOpen={isHelpDialogOpen} onClose={hideHelpDialog} />\n    </>\n  );\n}\n\nexport default AppHeader;\n","import CircularProgress from '@material-ui/core/CircularProgress';\nimport {useTheme} from '@material-ui/core/styles';\nimport React, {useEffect, useState} from 'react';\n\nfunction AppSplashScreen({isReady}: {isReady: boolean}) {\n  enum Status {\n    VISIBLE = 'visible',\n    TRANSITIONING = 'transitioning',\n    HIDDEN = 'hidden',\n  }\n  const TRANSITION_DELAY_MS = 600;\n  const [status, setStatus] = useState<Status>(Status.VISIBLE);\n  const theme = useTheme();\n\n  useEffect(() => {\n    if (isReady && status === Status.VISIBLE) {\n      setStatus(Status.TRANSITIONING);\n      setTimeout(() => setStatus(Status.HIDDEN), TRANSITION_DELAY_MS);\n    }\n  }, [isReady, status, Status]);\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: '100%',\n        height: '100%',\n        zIndex: 200,\n        backgroundColor: theme.palette.background.paper,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        transition: `opacity ${TRANSITION_DELAY_MS}ms`,\n        ...(status === Status.VISIBLE\n          ? {\n              opacity: 1,\n            }\n          : {}),\n        ...(status === Status.TRANSITIONING\n          ? {\n              opacity: 0,\n            }\n          : {}),\n        ...(status === Status.HIDDEN\n          ? {\n              display: 'none',\n            }\n          : {}),\n      }}\n    >\n      <CircularProgress />\n    </div>\n  );\n}\n\nexport default AppSplashScreen;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ace, {Ace} from 'ace-builds';\nimport 'ace-builds/webpack-resolver';\nimport {saveAs} from 'file-saver';\nimport _ from 'lodash';\nimport CodeBracesBoxIcon from 'mdi-material-ui/CodeBracesBox';\nimport NodejsIcon from 'mdi-material-ui/Nodejs';\nimport TextBoxOutline from 'mdi-material-ui/TextBoxOutline';\nimport {autorun, IReactionDisposer} from 'mobx';\nimport {compile, CompileResult} from 'qbjc';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {ConfigKey} from './config-manager';\n\nenum CompileResultType {\n  MODULE = 'module',\n  BUNDLE = 'bundle',\n}\n\nconst COMPILE_RESULT_TYPE_SPECS = [\n  {\n    compileResultType: CompileResultType.MODULE,\n    iconClass: TextBoxOutline,\n    label: 'ES6 module',\n  },\n  {\n    compileResultType: CompileResultType.BUNDLE,\n    iconClass: NodejsIcon,\n    label: 'Standalone Node.js program',\n  },\n] as const;\n\nfunction CompileResultTypeSelect({\n  value,\n  onChange,\n  style = {},\n}: {\n  value: CompileResultType;\n  onChange: (newValue: CompileResultType) => void;\n  style?: React.CSSProperties;\n}) {\n  const [menuAnchor, setMenuAnchor] = React.useState<HTMLElement | null>(null);\n  const onButtonClick = useCallback((event: React.MouseEvent<HTMLElement>) => {\n    setMenuAnchor(event.currentTarget);\n  }, []);\n  const onMenuSelect = useCallback(\n    (newValue: CompileResultType) => {\n      setMenuAnchor(null);\n      onChange(newValue);\n    },\n    [onChange]\n  );\n  const onMenuClose = useCallback(() => {\n    setMenuAnchor(null);\n  }, []);\n\n  const {iconClass: IconClass, label} = _.find(COMPILE_RESULT_TYPE_SPECS, [\n    'compileResultType',\n    value,\n  ])!;\n  return (\n    <>\n      <Button\n        startIcon={<IconClass />}\n        endIcon={<KeyboardArrowDownIcon fontSize=\"small\" />}\n        onClick={onButtonClick}\n        style={style}\n      >\n        {label}\n      </Button>\n      <Menu\n        anchorEl={menuAnchor}\n        keepMounted={true}\n        open={!!menuAnchor}\n        onClose={onMenuClose}\n      >\n        {COMPILE_RESULT_TYPE_SPECS.map(\n          ({compileResultType, iconClass: IconClass, label}) => (\n            <MenuItem\n              key={compileResultType}\n              selected={compileResultType === value}\n              onClick={() => onMenuSelect(compileResultType)}\n            >\n              <ListItemIcon>\n                <IconClass />\n              </ListItemIcon>\n              <Typography variant=\"inherit\">{label}</Typography>\n            </MenuItem>\n          )\n        )}\n      </Menu>\n    </>\n  );\n}\n\nexport default function CompileResultDialog({\n  compileResult: moduleCompileResult,\n  isOpen,\n  onClose: _onClose,\n}: {\n  compileResult: CompileResult | null;\n  isOpen: boolean;\n  onClose: () => void;\n}) {\n  const theme = useTheme();\n\n  const [compileResultType, setCompileResultType] = useState<CompileResultType>(\n    CompileResultType.MODULE\n  );\n  const [bundleCompileResult, setBundleCompileResult] =\n    useState<CompileResult | null>(null);\n\n  const editorRef = useRef<Ace.Editor | null>(null);\n\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  const enterFullScreen = useCallback(() => {\n    setIsFullScreen(true);\n    setTimeout(() => editorRef.current?.resize(), 0);\n  }, []);\n  const exitFullScreen = useCallback(() => {\n    setIsFullScreen(false);\n    setTimeout(() => editorRef.current?.resize(), 0);\n  }, []);\n\n  const onCompileResultChange = useCallback(() => {\n    const editor = editorRef.current;\n    if (!editor) {\n      return;\n    }\n    if (!moduleCompileResult) {\n      editor.setValue('');\n      if (bundleCompileResult) {\n        setBundleCompileResult(null);\n      }\n      return;\n    }\n    if (\n      !bundleCompileResult ||\n      bundleCompileResult.source !== moduleCompileResult.source\n    ) {\n      compile({\n        source: moduleCompileResult.source,\n        sourceFileName: moduleCompileResult.sourceFileName,\n        enableBundling: true,\n      }).then(setBundleCompileResult);\n    }\n    const newValue =\n      (compileResultType === CompileResultType.MODULE\n        ? moduleCompileResult.code\n        : bundleCompileResult?.code) || '';\n    if (newValue && editor.getValue() !== newValue) {\n      editor.setValue(newValue);\n    }\n  }, [compileResultType, moduleCompileResult, bundleCompileResult]);\n\n  useEffect(() => {\n    onCompileResultChange();\n  }, [onCompileResultChange]);\n\n  const editorConfigChangeListenerDisposerRef =\n    useRef<IReactionDisposer | null>(null);\n  const init = useCallback(\n    (node: HTMLDivElement | null) => {\n      if (!node || editorRef.current || !isOpen) {\n        return;\n      }\n      const editor = ace.edit(node, {\n        useWorker: false, // Disable syntax warnings\n      });\n      editorConfigChangeListenerDisposerRef.current = autorun(() => {\n        editor.setOptions({\n          fontFamily: configManager.getKey(ConfigKey.EDITOR_FONT_FAMILY),\n          fontSize: `${configManager.getKey(ConfigKey.EDITOR_FONT_SIZE)}px`,\n        });\n        editor.setTheme(\n          `ace/theme/${configManager.getKey(ConfigKey.EDITOR_THEME)}`\n        );\n        const keybindings = configManager.getKey(ConfigKey.EDITOR_KEYBINDINGS);\n        editor.setKeyboardHandler(\n          keybindings ? `ace/keyboard/${keybindings}` : ''\n        );\n      });\n      editor.setShowPrintMargin(false);\n      editor.session.setMode('ace/mode/javascript');\n      editor.setReadOnly(true);\n\n      editor.clearSelection();\n      editor.moveCursorTo(0, 0);\n      editor.focus();\n      editorRef.current = editor;\n\n      onCompileResultChange();\n    },\n    [isOpen, onCompileResultChange]\n  );\n\n  const onClose = useCallback(() => {\n    if (editorConfigChangeListenerDisposerRef.current) {\n      editorConfigChangeListenerDisposerRef.current();\n      editorConfigChangeListenerDisposerRef.current = null;\n    }\n    if (editorRef.current) {\n      editorRef.current.destroy();\n      editorRef.current = null;\n    }\n    _onClose();\n  }, [_onClose]);\n\n  const onSaveClick = useCallback(() => {\n    const editor = editorRef.current;\n    if (!editor) {\n      return;\n    }\n    const blob = new Blob([editor.getValue()], {\n      type: 'text/plain;charset=utf-8',\n    });\n    saveAs(blob, `${moduleCompileResult?.sourceFileName}.js`);\n  }, [moduleCompileResult?.sourceFileName]);\n\n  return (\n    <Dialog\n      onClose={onClose}\n      open={isOpen}\n      fullWidth={true}\n      fullScreen={isFullScreen}\n      maxWidth=\"lg\"\n    >\n      <DialogTitle\n        disableTypography={true}\n        style={{display: 'flex', alignItems: 'center'}}\n      >\n        <CodeBracesBoxIcon style={{marginRight: '0.4rem'}} />\n        <Typography variant=\"h6\" style={{flexGrow: 1}}>\n          Compiled code\n        </Typography>\n        <CompileResultTypeSelect\n          value={compileResultType}\n          onChange={setCompileResultType}\n          style={{\n            marginRight: theme.spacing(1),\n          }}\n        />\n        <Tooltip title=\"Save compiled JavaScript program\">\n          <IconButton onClick={onSaveClick}>\n            <SaveIcon />\n          </IconButton>\n        </Tooltip>\n        {isFullScreen ? (\n          <Tooltip title=\"Exit full screen\">\n            <IconButton onClick={exitFullScreen}>\n              <FullscreenExitIcon />\n            </IconButton>\n          </Tooltip>\n        ) : (\n          <Tooltip title=\"Full screen\">\n            <IconButton onClick={enterFullScreen}>\n              <FullscreenIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n        <Tooltip title=\"Close\">\n          <IconButton\n            onClick={onClose}\n            style={{marginRight: -theme.spacing(2)}}\n          >\n            <CloseIcon />\n          </IconButton>\n        </Tooltip>\n      </DialogTitle>\n      <DialogContent\n        dividers={true}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: '80vh',\n          padding: 0,\n        }}\n      >\n        <div\n          ref={init}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n            // height in the parent but prevents it from growing beyond the parent size when changing\n            // lineHeight. \\_()_/\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n        ></div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, {ReactNode} from 'react';\n\nfunction PaneHeader({\n  title,\n  icon,\n  children,\n}: {\n  title: ReactNode;\n  icon?: ReactNode;\n  children?: ReactNode;\n}) {\n  const theme = useTheme();\n  return (\n    <Paper\n      elevation={2}\n      square={true}\n      style={{\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: theme.palette.background.default,\n        cursor: 'pointer',\n      }}\n    >\n      <div style={{display: 'flex', padding: '0 8px 0 12px'}}>{icon}</div>\n      <Typography\n        variant=\"overline\"\n        color=\"textSecondary\"\n        style={{flexGrow: 1, paddingRight: '12px'}}\n      >\n        {title}\n      </Typography>\n      {children}\n    </Paper>\n  );\n}\n\nexport default PaneHeader;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport ace, {Ace} from 'ace-builds';\nimport 'ace-builds/webpack-resolver';\nimport {autorun} from 'mobx';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {ConfigKey} from './config-manager';\nimport {DEFAULT_EXAMPLE} from './examples';\nimport PaneHeader from './pane-header';\n\nconst SETTING_EDITOR_INPUT_WIDTH = 400;\n\nfunction TextFieldEditorDialog({\n  title,\n  value: valueProp,\n  onChange,\n  isOpen,\n  onClose,\n}: {\n  title: string;\n  value: string;\n  onChange: (newValue: string) => void;\n  isOpen: boolean;\n  onClose: () => void;\n}) {\n  const [value, setValue] = useState(valueProp);\n\n  // Set value to valueProp whenever it changes.\n  const prevValueProp = useRef(valueProp);\n  useEffect(() => {\n    if (prevValueProp.current !== valueProp && value !== valueProp) {\n      setValue(valueProp);\n    }\n    prevValueProp.current = valueProp;\n  }, [value, valueProp]);\n\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <TextField\n          autoFocus={true}\n          required={true}\n          fullWidth={true}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          style={{width: SETTING_EDITOR_INPUT_WIDTH, maxWidth: '100%'}}\n          InputProps={{style: {fontSize: '0.9rem'}}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            onClose();\n            onChange(value);\n          }, [onClose, onChange, value])}\n          disabled={!value.trim()}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst EditorPane = observer(\n  ({\n    sourceFileName,\n    onChangeSourceFileName,\n    onReady,\n    style = {},\n  }: {\n    sourceFileName: string;\n    onChangeSourceFileName: (sourceFileName: string) => void;\n    onReady: (editor: Ace.Editor) => void;\n    style?: React.CSSProperties;\n  }) => {\n    const theme = useTheme();\n\n    const editorRef = useRef<Ace.Editor | null>(null);\n\n    const containerElRef = useRef<HTMLDivElement | null>(null);\n    const [isFullScreen, setIsFullScreen] = useState(false);\n    const containerHeightBeforeFullScreenRef = useRef<string | null>(null);\n    const enterFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const editor = editorRef.current;\n      if (!containerEl || !editor) {\n        return;\n      }\n      containerHeightBeforeFullScreenRef.current = containerEl.style.height;\n      setIsFullScreen(true);\n      setTimeout(() => {\n        editor.resize(true);\n        editor.focus();\n      }, 0);\n    }, []);\n    const exitFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const editor = editorRef.current;\n      if (!containerEl || !editor) {\n        return;\n      }\n      setIsFullScreen(false);\n      setTimeout(() => {\n        const containerHeightBeforeFullScreen =\n          containerHeightBeforeFullScreenRef.current;\n        if (containerHeightBeforeFullScreen) {\n          containerEl.style.height = containerHeightBeforeFullScreen;\n          containerHeightBeforeFullScreenRef.current = null;\n        }\n        editor.resize(true);\n        editor.focus();\n      }, 0);\n    }, []);\n\n    const init = useCallback(\n      (node: HTMLDivElement | null) => {\n        if (!node || editorRef.current) {\n          return;\n        }\n        const editor = ace.edit(node);\n        autorun(() => {\n          editor.setOptions({\n            fontFamily: configManager.getKey(ConfigKey.EDITOR_FONT_FAMILY),\n            fontSize: `${configManager.getKey(ConfigKey.EDITOR_FONT_SIZE)}px`,\n          });\n          editor.setTheme(\n            `ace/theme/${configManager.getKey(ConfigKey.EDITOR_THEME)}`\n          );\n          const keybindings = configManager.getKey(\n            ConfigKey.EDITOR_KEYBINDINGS\n          );\n          editor.setKeyboardHandler(\n            keybindings ? `ace/keyboard/${keybindings}` : ''\n          );\n        });\n        editor.setShowPrintMargin(false);\n        editor.session.setMode('ace/mode/vbscript');\n\n        const initialContent = configManager.currentSourceFile.content.trim()\n          ? configManager.currentSourceFile.content\n          : DEFAULT_EXAMPLE.content;\n        editor.setValue(initialContent);\n        editor.clearSelection();\n        editor.moveCursorTo(0, 0);\n        editor.focus();\n        editor.on('change', () =>\n          configManager.setSourceFileContent(\n            configManager.currentSourceFile,\n            editor.getValue()\n          )\n        );\n        editorRef.current = editor;\n        onReady(editor);\n      },\n      [onReady]\n    );\n\n    const [\n      isSourceFileNameEditorDialogOpen,\n      setIsSourceFileNameEditorDialogOpen,\n    ] = useState(false);\n    const showSourceFileNameEditorDialog = useCallback(\n      () => setIsSourceFileNameEditorDialogOpen(true),\n      []\n    );\n    const hideSourceFileNameEditorDialog = useCallback(\n      () => setIsSourceFileNameEditorDialogOpen(false),\n      []\n    );\n\n    return (\n      <>\n        <div\n          ref={containerElRef}\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            ...style,\n            ...(isFullScreen\n              ? {\n                  position: 'fixed',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  // Must be greater than z-index of AppBar (1100) and less than\n                  // z-index of tooltip (1500).\n                  //\n                  // See https://material-ui.com/customization/z-index/\n                  zIndex: 1200,\n                }\n              : {}),\n          }}\n        >\n          <PaneHeader\n            title={\n              <Tooltip title=\"Click to rename\">\n                <span\n                  onClick={showSourceFileNameEditorDialog}\n                  style={{\n                    padding: 10,\n                    marginTop: -10,\n                    marginLeft: -10,\n                  }}\n                >\n                  {sourceFileName}\n                </span>\n              </Tooltip>\n            }\n            icon={\n              <DescriptionIcon\n                style={{\n                  fontSize: theme.typography.overline.fontSize,\n                }}\n              />\n            }\n          >\n            {isFullScreen ? (\n              <Tooltip title=\"Exit full screen\">\n                <IconButton onClick={exitFullScreen}>\n                  <FullscreenExitIcon\n                    style={{\n                      fontSize: theme.typography.overline.fontSize,\n                      color: theme.palette.text.secondary,\n                    }}\n                  />\n                </IconButton>\n              </Tooltip>\n            ) : (\n              <Tooltip title=\"Full screen\">\n                <IconButton onClick={enterFullScreen}>\n                  <FullscreenIcon\n                    style={{\n                      fontSize: theme.typography.overline.fontSize,\n                      color: theme.palette.text.secondary,\n                    }}\n                  />\n                </IconButton>\n              </Tooltip>\n            )}\n          </PaneHeader>\n          <div\n            ref={init}\n            style={{\n              // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n              // height in the parent but prevents it from growing beyond the parent size.\n              flexGrow: 1,\n              height: 0,\n              // @ts-ignore\n              overflowY: 'overlay',\n            }}\n          ></div>\n        </div>\n\n        <TextFieldEditorDialog\n          title=\"Rename source file\"\n          value={sourceFileName}\n          onChange={onChangeSourceFileName}\n          isOpen={isSourceFileNameEditorDialogOpen}\n          onClose={hideSourceFileNameEditorDialog}\n        />\n      </>\n    );\n  }\n);\n\nexport default EditorPane;\n","import {Ace} from 'ace-builds';\nimport {action, computed, makeObservable, observable, runInAction} from 'mobx';\nimport {compile, CompileResult, Loc} from 'qbjc';\nimport {BrowserExecutor} from 'qbjc/browser';\nimport {Terminal} from 'xterm';\nimport configManager, {\n  ConfigKey,\n  DEFAULT_SOURCE_FILE_NAME,\n} from './config-manager';\n\nexport enum QbjcMessageType {\n  /** General error message. */\n  ERROR = 'error',\n  /** General informational message with no special formatting. */\n  INFO = 'info',\n  /** Specialized message representing program execution. */\n  EXECUTION = 'execution',\n}\nexport interface QbjcMessage {\n  /** Parsed location in the source code. */\n  loc?: Loc;\n  /** Message type. */\n  type: QbjcMessageType;\n  /** Message text. */\n  message: string;\n  /** For EXECUTION messages - the compiled code. */\n  compileResult?: CompileResult;\n}\n\nclass QbjcManager {\n  /** Whether we're currently compiling / running code. */\n  isRunning: boolean = false;\n\n  /** Compiler errors and status messages. */\n  messages: Array<QbjcMessage> = [];\n\n  /** Ace editor. */\n  editor: Ace.Editor | null = null;\n\n  /** Current file name. */\n  sourceFileName: string = configManager.getKey(\n    ConfigKey.CURRENT_SOURCE_FILE_NAME\n  );\n\n  /** xterm.js terminal. */\n  terminal: Terminal | null = null;\n\n  /** Current executor. */\n  private executor: BrowserExecutor | null = null;\n\n  /** Connects this QbjcManager to the provided editor and terminal. */\n  init({editor, terminal}: {editor?: Ace.Editor; terminal?: Terminal}) {\n    if (editor) {\n      this.editor = editor;\n    }\n    if (terminal) {\n      this.terminal = terminal;\n    }\n  }\n\n  /** Whether the required components (editor and terminal) are connected. */\n  get isReady() {\n    return !!this.editor && !!this.terminal;\n  }\n\n  async run() {\n    if (!this.editor || !this.terminal || this.isRunning) {\n      return;\n    }\n    const source = this.editor.getValue();\n    if (!source.trim()) {\n      return;\n    }\n\n    this.isRunning = true;\n    let compileResult: CompileResult;\n    try {\n      compileResult = await compile({\n        source,\n        sourceFileName: this.sourceFileName,\n      });\n      console.log(compileResult.code);\n    } catch (e) {\n      console.error(`Compile error: ${e.message ?? JSON.stringify(e)}`);\n      runInAction(() => {\n        this.isRunning = false;\n      });\n      if (e.message) {\n        this.pushMessage({\n          loc: e.loc,\n          type: QbjcMessageType.ERROR,\n          message: e.message,\n        });\n      }\n      return;\n    }\n\n    this.pushMessage({\n      type: QbjcMessageType.EXECUTION,\n      message: 'Running...',\n      compileResult: compileResult,\n    });\n    const startTs = new Date();\n    this.terminal.focus();\n    this.executor = new BrowserExecutor(this.terminal, {\n      stmtExecutionDelayUs: configManager.getKey(ConfigKey.EXECUTION_DELAY),\n    });\n    try {\n      await this.executor.executeModule(compileResult.code);\n    } finally {\n      const endTs = new Date();\n      runInAction(() => {\n        this.isRunning = false;\n      });\n      this.pushMessage({\n        type: QbjcMessageType.INFO,\n        message:\n          'Exited in ' +\n          `${((endTs.getTime() - startTs.getTime()) / 1000).toFixed(3)}s`,\n      });\n      this.executor = null;\n      this.editor.focus();\n    }\n  }\n\n  stop() {\n    if (!this.isRunning || !this.executor) {\n      return;\n    }\n    this.executor.stopExecution();\n  }\n\n  goToMessageLocInEditor(loc: Loc) {\n    if (!this.editor || !loc) {\n      return;\n    }\n    const {line, col} = loc;\n    this.editor.moveCursorTo(line - 1, col - 1);\n    this.editor.selection.selectWordRight();\n  }\n\n  pushMessage(message: QbjcMessage) {\n    this.messages.push(message);\n  }\n\n  clearMessages() {\n    this.messages.splice(0, this.messages.length);\n  }\n\n  updateSourceFileName(sourceFileName: string) {\n    this.sourceFileName = sourceFileName.trim() || DEFAULT_SOURCE_FILE_NAME;\n    configManager.setSourceFileName(\n      configManager.currentSourceFile,\n      this.sourceFileName\n    );\n    configManager.setKey(\n      ConfigKey.CURRENT_SOURCE_FILE_NAME,\n      this.sourceFileName\n    );\n  }\n\n  constructor() {\n    makeObservable(this, {\n      isRunning: observable,\n      messages: observable,\n      editor: observable.ref,\n      sourceFileName: observable,\n      terminal: observable.ref,\n      isReady: computed,\n      init: action,\n      run: action,\n      pushMessage: action,\n      clearMessages: action,\n      updateSourceFileName: action,\n    });\n  }\n}\n\nexport default QbjcManager;\n","import Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {Theme, useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport BlockIcon from '@material-ui/icons/Block';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport PlayCircleIcon from '@material-ui/icons/PlayCircleFilled';\nimport CodeBracesBoxIcon from 'mdi-material-ui/CodeBracesBox';\nimport MessageTextIcon from 'mdi-material-ui/MessageText';\nimport {runInAction} from 'mobx';\nimport {observer} from 'mobx-react';\nimport {CompileResult, Loc} from 'qbjc';\nimport React, {useCallback, useEffect, useRef} from 'react';\nimport PaneHeader from './pane-header';\nimport {QbjcMessage, QbjcMessageType} from './qbjc-manager';\n\nfunction getMessageDisplayProps(theme: Theme, messageType: QbjcMessageType) {\n  const MESSAGE_DISPLAY_PROPS = {\n    [QbjcMessageType.ERROR]: {\n      iconClass: ErrorIcon,\n      color: theme.palette.warning.dark,\n    },\n    [QbjcMessageType.INFO]: {\n      iconClass: null,\n      color: theme.palette.text.hint,\n    },\n    [QbjcMessageType.EXECUTION]: {\n      iconClass: PlayCircleIcon,\n      color: theme.palette.text.hint,\n    },\n  };\n  return MESSAGE_DISPLAY_PROPS[messageType];\n}\n\nconst MessagesPane = observer(\n  ({\n    messages,\n    onLocClick,\n    onShowCompileResultClick,\n    style = {},\n  }: {\n    messages: Array<QbjcMessage>;\n    onLocClick: (loc: Loc) => void;\n    onShowCompileResultClick: (compileResult: CompileResult) => void;\n    style?: React.CSSProperties;\n  }) => {\n    const theme = useTheme();\n\n    const scrollContainerRef = useRef<HTMLDivElement | null>(null);\n    const isScrolledToBottomRef = useRef<boolean>(true);\n    const prevNumMessagesRef = useRef<number>(0);\n\n    useEffect(() => {\n      const {current: scrollContainerEl} = scrollContainerRef;\n      const {current: prevNumMessages} = prevNumMessagesRef;\n      const {current: isScrolledToBottom} = isScrolledToBottomRef;\n      const numMessages = messages.length;\n      if (!scrollContainerEl || numMessages === prevNumMessages) {\n        return;\n      }\n      if (isScrolledToBottom) {\n        scrollContainerEl.scrollTop = scrollContainerEl.scrollHeight;\n      }\n      prevNumMessagesRef.current = numMessages;\n    });\n\n    return (\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          ...style,\n        }}\n      >\n        <PaneHeader\n          title=\"Messages\"\n          icon={\n            <MessageTextIcon\n              style={{\n                fontSize: theme.typography.overline.fontSize,\n              }}\n            />\n          }\n        >\n          <Tooltip title=\"Clear messages\">\n            <IconButton\n              onClick={() =>\n                runInAction(() => {\n                  messages.length = 0;\n                })\n              }\n            >\n              <BlockIcon\n                style={{\n                  fontSize: theme.typography.overline.fontSize,\n                  color: theme.palette.text.secondary,\n                }}\n              />\n            </IconButton>\n          </Tooltip>\n        </PaneHeader>\n        <div\n          ref={scrollContainerRef}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the\n            // full height in the parent but prevents it from growing to accomodate the list\n            // content. \\_()_/\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n          onScroll={useCallback(() => {\n            const {current: scrollContainerEl} = scrollContainerRef;\n            if (!scrollContainerEl) {\n              return;\n            }\n            isScrolledToBottomRef.current =\n              scrollContainerEl.scrollHeight -\n                scrollContainerEl.scrollTop -\n                scrollContainerEl.clientHeight <\n              1;\n          }, [])}\n        >\n          <List dense={true} disablePadding={true}>\n            {messages.map(({loc, message, type, compileResult}, idx) => {\n              const {iconClass: Icon, color} = getMessageDisplayProps(\n                theme,\n                type\n              );\n              let iconElement: React.ReactNode = null;\n              if (Icon) {\n                iconElement = (\n                  <Icon\n                    htmlColor={color}\n                    style={{fontSize: theme.typography.body2.fontSize}}\n                  />\n                );\n              }\n              return (\n                <ListItem\n                  key={idx}\n                  button={true}\n                  divider={true}\n                  style={{paddingTop: 0, paddingBottom: 0}}\n                  onClick={() => (loc ? onLocClick(loc) : null)}\n                >\n                  {iconElement && <ListItemIcon>{iconElement}</ListItemIcon>}\n                  <ListItemText\n                    primary={message}\n                    primaryTypographyProps={{\n                      variant: 'caption',\n                      style: {fontSize: '0.7rem'},\n                    }}\n                    inset={!iconElement}\n                    style={{\n                      color,\n                      marginTop: 3,\n                      marginBottom: 3,\n                      marginLeft: -28,\n                    }}\n                  />\n                  {compileResult && (\n                    <ListItemSecondaryAction style={{marginRight: -6}}>\n                      <Tooltip title=\"View compiled JavaScript code\">\n                        <Button\n                          startIcon={\n                            <CodeBracesBoxIcon\n                              style={{\n                                fontSize: theme.typography.overline.fontSize,\n                                color: theme.palette.text.secondary,\n                                marginRight: -2,\n                              }}\n                            />\n                          }\n                          onClick={() =>\n                            onShowCompileResultClick(compileResult)\n                          }\n                          style={{\n                            marginRight: -2,\n                            fontSize: '0.6rem',\n                            color,\n                          }}\n                        >\n                          Compiled code\n                        </Button>\n                      </Tooltip>\n                    </ListItemSecondaryAction>\n                  )}\n                </ListItem>\n              );\n            })}\n          </List>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default MessagesPane;\n","import CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport BlockIcon from '@material-ui/icons/Block';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport _ from 'lodash';\nimport MonitorIcon from 'mdi-material-ui/Monitor';\nimport {autorun} from 'mobx';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport {Terminal} from 'xterm';\nimport {FitAddon} from 'xterm-addon-fit';\nimport * as XtermWebfont from 'xterm-webfont';\nimport 'xterm/css/xterm.css';\nimport configManager, {ConfigKey} from './config-manager';\nimport PaneHeader from './pane-header';\n\nconst OutputScreenPane = observer(\n  ({\n    isRunning,\n    onReady = () => {},\n    style = {},\n    dimensions = null,\n  }: {\n    isRunning: boolean;\n    onReady?: (terminal: Terminal) => void;\n    style?: React.CSSProperties;\n    dimensions?: any;\n  }) => {\n    const theme = useTheme();\n\n    const terminalRef = useRef<Terminal | null>(null);\n    const fitAddOnRef = useRef<FitAddon | null>(null);\n\n    const containerElRef = useRef<HTMLDivElement | null>(null);\n    const [isFullScreen, setIsFullScreen] = useState(false);\n    const containerHeightBeforeFullScreenRef = useRef<string | null>(null);\n    const enterFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const terminal = terminalRef.current;\n      const fitAddOn = fitAddOnRef.current;\n      if (!containerEl || !terminal || !fitAddOn) {\n        return;\n      }\n      containerHeightBeforeFullScreenRef.current = containerEl.style.height;\n      console.log(\n        `Saving height: ${containerHeightBeforeFullScreenRef.current}`\n      );\n      setIsFullScreen(true);\n      setTimeout(() => {\n        fitAddOn.fit();\n        terminal.focus();\n      }, 0);\n    }, []);\n    const exitFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const terminal = terminalRef.current;\n      const fitAddOn = fitAddOnRef.current;\n      if (!containerEl || !terminal || !fitAddOn) {\n        return;\n      }\n      setIsFullScreen(false);\n      setTimeout(() => {\n        const containerHeightBeforeFullScreen =\n          containerHeightBeforeFullScreenRef.current;\n        if (containerHeightBeforeFullScreen) {\n          console.log(\n            `Restoring height: ${containerHeightBeforeFullScreenRef.current}`\n          );\n          containerEl.style.height = containerHeightBeforeFullScreen;\n          containerHeightBeforeFullScreenRef.current = null;\n        }\n        fitAddOn.fit();\n        terminal.focus();\n      }, 0);\n    }, []);\n\n    const init = useCallback(\n      async (node: HTMLDivElement | null) => {\n        if (!node || terminalRef.current) {\n          return;\n        }\n        const terminal = new Terminal({\n          // Output from compiled program will only specify \\n for new lines, which need to be\n          // translated to \\r\\n.\n          convertEol: true,\n          // Must set initial font family to allow xterm-webfont to wait for this\n          // font to load.\n          fontFamily: configManager.getKey(ConfigKey.SCREEN_FONT_FAMILY),\n        });\n        terminalRef.current = terminal;\n        const fitAddon = new FitAddon();\n        terminal.loadAddon(fitAddon);\n        terminal.loadAddon(new XtermWebfont());\n        // @ts-ignore: method added by xterm-webfont addon\n        await terminal.loadWebfontAndOpen(node);\n        autorun(() => {\n          terminal.setOption(\n            'fontFamily',\n            configManager.getKey(ConfigKey.SCREEN_FONT_FAMILY)\n          );\n          terminal.setOption(\n            'fontSize',\n            configManager.getKey(ConfigKey.SCREEN_FONT_SIZE)\n          );\n          terminal.setOption(\n            'letterSpacing',\n            configManager.getKey(ConfigKey.SCREEN_LETTER_SPACING)\n          );\n          terminal.setOption(\n            'lineHeight',\n            configManager.getKey(ConfigKey.SCREEN_LINE_HEIGHT)\n          );\n          fitAddon.fit();\n        });\n        window.addEventListener(\n          'resize',\n          _.debounce(() => fitAddon.fit(), 200)\n        );\n        terminal.onResize(({rows, cols}) =>\n          console.log(`Resized terminal to ${cols}x${rows}`)\n        );\n        fitAddOnRef.current = fitAddon;\n        onReady(terminal);\n      },\n      [onReady]\n    );\n    const prevDimensionsJson = useRef('');\n    const dimensionsJson = JSON.stringify(dimensions);\n    useEffect(() => {\n      if (\n        prevDimensionsJson.current === dimensionsJson ||\n        !terminalRef.current ||\n        !fitAddOnRef.current\n      ) {\n        return;\n      }\n      fitAddOnRef.current.fit();\n      prevDimensionsJson.current = dimensionsJson;\n    }, [dimensionsJson]);\n\n    return (\n      <div\n        ref={containerElRef}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          backgroundColor: theme.palette.background.paper,\n          ...style,\n          ...(isFullScreen\n            ? {\n                position: 'fixed',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%',\n                // Must be greater than z-index of AppBar (1100) and less than\n                // z-index of tooltip (1500).\n                //\n                // See https://material-ui.com/customization/z-index/\n                zIndex: 1200,\n              }\n            : {}),\n        }}\n      >\n        <PaneHeader\n          title=\"Output\"\n          icon={\n            <MonitorIcon\n              style={{\n                fontSize: theme.typography.overline.fontSize,\n              }}\n            />\n          }\n        >\n          {isRunning ? (\n            <div style={{marginRight: 12, paddingTop: 8, paddingBottom: 8}}>\n              <Tooltip title=\"Running program...\">\n                <CircularProgress color=\"inherit\" size={10} />\n              </Tooltip>\n            </div>\n          ) : (\n            <Tooltip title=\"Clear output\">\n              <IconButton onClick={() => terminalRef.current?.reset()}>\n                <BlockIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </IconButton>\n            </Tooltip>\n          )}\n          {isFullScreen ? (\n            <Tooltip title=\"Exit full screen\">\n              <IconButton onClick={exitFullScreen}>\n                <FullscreenExitIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </IconButton>\n            </Tooltip>\n          ) : (\n            <Tooltip title=\"Full screen\">\n              <IconButton onClick={enterFullScreen}>\n                <FullscreenIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </IconButton>\n            </Tooltip>\n          )}\n        </PaneHeader>\n        <div\n          ref={init}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n            // height in the parent but prevents it from growing beyond the parent size when changing\n            // lineHeight. \\_()_/\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n        ></div>\n      </div>\n    );\n  }\n);\n\nexport default OutputScreenPane;\n","import Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport {observer} from 'mobx-react';\nimport React, {useCallback} from 'react';\nimport QbjcManager from './qbjc-manager';\n\nconst RunFab = observer(({qbjcManager}: {qbjcManager: QbjcManager}) => {\n  const isRunning = qbjcManager.isRunning;\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        right: '2rem',\n        bottom: '2rem',\n      }}\n    >\n      <div style={{position: 'relative'}}>\n        <Tooltip title={isRunning ? 'Stop program' : 'Run program'}>\n          <Fab\n            onClick={useCallback(async () => {\n              if (isRunning) {\n                qbjcManager.stop();\n              } else {\n                await qbjcManager.run();\n              }\n            }, [qbjcManager, isRunning])}\n            color={isRunning ? 'secondary' : 'primary'}\n            style={{\n              zIndex: 10,\n            }}\n          >\n            {isRunning ? <StopIcon /> : <PlayArrowIcon />}\n          </Fab>\n        </Tooltip>\n        {/*\n        isRunning && (\n          <CircularProgress\n            size={68}\n            style={{position: 'absolute', top: -6, left: -6, zIndex: 1}}\n          />\n        )\n        */}\n      </div>\n    </div>\n  );\n});\n\nexport default RunFab;\n","import '@fontsource/cascadia-mono';\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\nimport blue from '@material-ui/core/colors/blue';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {createTheme, ThemeProvider} from '@material-ui/core/styles';\nimport {observer} from 'mobx-react';\nimport {CompileResult} from 'qbjc';\nimport React, {useCallback, useRef, useState} from 'react';\nimport {Helmet} from 'react-helmet';\nimport Split from 'react-split';\nimport AppHeader from './app-header';\nimport AppSplashScreen from './app-splash-screen';\nimport './app.css';\nimport CompileResultDialog from './compile-result-dialog';\nimport EditorPane from './editor-pane';\nimport MessagesPane from './messages-pane';\nimport OutputScreenPane from './output-screen-pane';\nimport QbjcManager from './qbjc-manager';\nimport RunFab from './run-fab';\nimport './split.css';\n\nconst darkTheme = createTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      light: blue[300],\n      main: blue[400],\n      dark: blue[700],\n      contrastText: 'white',\n    },\n  },\n});\n\nconst SPLIT_GUTTER_SIZE = 6;\n\nconst App = observer(() => {\n  const qbjcManagerRef = useRef<QbjcManager>(new QbjcManager());\n  const qbjcManager = qbjcManagerRef.current;\n\n  const [dimensions, setDimensions] = useState<{\n    horizontalSplit?: Array<number>;\n    rightVerticalSplit?: Array<number>;\n  } | null>({});\n\n  const [isCompileResultDialogOpen, setIsCompileResultDialogOpen] =\n    useState(false);\n  const [displayedCompileResult, setDisplayedCompileResult] =\n    useState<CompileResult | null>(null);\n  const showCompileResultDialog = useCallback(\n    (compileResult: CompileResult) => {\n      setDisplayedCompileResult(compileResult);\n      setIsCompileResultDialogOpen(true);\n    },\n    []\n  );\n  const hideCompileResultDialog = useCallback(() => {\n    setIsCompileResultDialogOpen(false);\n    setDisplayedCompileResult(null);\n  }, []);\n\n  const onChangeSourceFileName = useCallback(\n    (sourceFileName: string) =>\n      qbjcManager.updateSourceFileName(sourceFileName),\n    [qbjcManager]\n  );\n\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <CssBaseline />\n      <AppSplashScreen isReady={qbjcManager.isReady} />\n      <Helmet>\n        <title>\n          qbjc playground{qbjcManager.isRunning ? ' - Running...' : ''}\n        </title>\n      </Helmet>\n\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: '100%',\n          width: '100%',\n          backgroundColor: darkTheme.palette.background.default,\n        }}\n      >\n        <AppHeader\n          isReady={qbjcManager.isReady}\n          editor={qbjcManager.editor}\n          sourceFileName={qbjcManager.sourceFileName}\n          onChangeSourceFileName={onChangeSourceFileName}\n        />\n\n        <Split\n          minSize={300}\n          sizes={[50, 50]}\n          onDragEnd={(sizes: Array<number>) => {\n            setDimensions({\n              ...dimensions,\n              horizontalSplit: sizes,\n            });\n          }}\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            flexGrow: 1,\n            marginTop: 5,\n          }}\n          gutterSize={SPLIT_GUTTER_SIZE}\n        >\n          <div style={{position: 'relative'}}>\n            <EditorPane\n              sourceFileName={qbjcManager.sourceFileName}\n              onChangeSourceFileName={onChangeSourceFileName}\n              onReady={(editor) => qbjcManager.init({editor})}\n              style={{\n                width: '100%',\n                height: '100%',\n                // @ts-ignore\n                overflow: 'overlay',\n              }}\n            />\n            <RunFab qbjcManager={qbjcManager} />\n          </div>\n\n          <Split\n            direction=\"vertical\"\n            sizes={[80, 20]}\n            minSize={100}\n            expandToMin={true}\n            onDragEnd={(sizes: Array<number>) => {\n              setDimensions({\n                ...dimensions,\n                rightVerticalSplit: sizes,\n              });\n            }}\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n            }}\n            gutterSize={SPLIT_GUTTER_SIZE}\n          >\n            <OutputScreenPane\n              onReady={(terminal) => qbjcManager.init({terminal})}\n              dimensions={dimensions}\n              isRunning={qbjcManager.isRunning}\n            />\n            <MessagesPane\n              messages={qbjcManager.messages}\n              onLocClick={useCallback(\n                (loc) => qbjcManager.goToMessageLocInEditor(loc),\n                [qbjcManager]\n              )}\n              onShowCompileResultClick={showCompileResultDialog}\n            />\n          </Split>\n        </Split>\n      </div>\n\n      <CompileResultDialog\n        compileResult={displayedCompileResult}\n        isOpen={isCompileResultDialogOpen}\n        onClose={hideCompileResultDialog}\n      />\n    </ThemeProvider>\n  );\n});\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}