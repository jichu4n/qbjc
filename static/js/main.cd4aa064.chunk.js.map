{"version":3,"sources":["../../qbjc/dist/lib/symbol-table.js","../../qbjc/dist/runtime/compiled-code.js","../../qbjc/dist/index.js","../../qbjc/dist/lib/ast.js","../../qbjc/dist/runtime/init-value.js","../../qbjc/dist/runtime/runtime.js","../../qbjc/dist/parser/lexer.js","../../qbjc/dist/runtime/builtins.js","../../qbjc/dist/lib/round-half-to-even.js","../../qbjc/dist/runtime/executor.js","../../qbjc/dist/runtime/qb-array.js","../../qbjc/dist/runtime/qb-udt.js","../../qbjc/dist/runtime/browser-platform.js","../ /^/.//.*$","../examples/cal.bas","../examples/check.bas","../examples/guess.bas","../examples/nibbles.bas","../examples/strtonum.bas","../../qbjc/dist/lib/types.js","../../qbjc/dist/compile.js","../../qbjc/dist/codegen/codegen.js","../../qbjc/dist/runtime/node-runtime-bundle.js","../../qbjc/dist/parser/parser.js","../../qbjc/dist/parser/grammar.js","../../qbjc/dist/semantic-analysis/semantic-analysis.js","../../qbjc/dist/lib/data-item.js","../../qbjc/dist/runtime/ansi-terminal-platform.js","../../qbjc/dist/runtime/ansi-terminal-key-code-map.js","examples.ts","open-dialog.tsx","config-manager.ts","settings-dialog.tsx","app-header.tsx","app-splash-screen.tsx","compile-result-dialog.tsx","pane-header.tsx","editor-pane.tsx","qbjc-manager.ts","messages-pane.tsx","output-screen-pane.tsx","run-fab.tsx","app.tsx","index.tsx","../../qbjc/dist/lib/error-with-loc.js"],"names":["Object","defineProperty","exports","value","lookupSymbols","lookupSymbol","VarScope","VarType","symbolTable","name","_a","find","symbol","toLowerCase","filter","PrintArgType","ExecutionDirectiveType","__createBinding","this","create","o","m","k","k2","undefined","enumerable","get","__exportStar","p","prototype","hasOwnProperty","call","__importDefault","mod","__esModule","QbUdt","QbArray","RuntimePlatform","Executor","ExecutionError","compile","compile_1","require","default","executor_1","runtime_1","qb_array_1","qb_udt_1","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","TypeError","String","__","constructor","AstVisitor","AstVisitorError","UnaryOp","BinaryOp","ExprType","isLhsExpr","InputType","PrintSep","CondLoopStructure","CaseExprType","isSingularTypeExpr","DataTypeExprType","DimType","StmtType","isFnProcOrDefFnProc","error_with_loc_1","types_1","proc","isFnOrDefFn","type","typeExpr","ARRAY","expr","VAR_REF","SUBSCRIPT","MEMBER","includes","_super","message","_b","sourceFileName","node","loc","accept","ProcType","SUB","FN","DEF_FN","visitProc","LABEL","visitLabelStmt","DIM","visitDimStmt","ASSIGN","visitAssignStmt","CONST","visitConstStmt","GOTO","visitGotoStmt","IF","visitIfStmt","SELECT","visitSelectStmt","COND_LOOP","visitCondLoopStmt","UNCOND_LOOP","visitUncondLoopStmt","EXIT_LOOP","visitExitLoopStmt","FOR","visitForStmt","NEXT","visitNextStmt","EXIT_FOR","visitExitForStmt","GOSUB","visitGosubStmt","RETURN","visitReturnStmt","CALL","visitCallStmt","EXIT_PROC","visitExitProcStmt","END","visitEndStmt","SWAP","visitSwapStmt","PRINT","visitPrintStmt","INPUT","visitInputStmt","DEF_TYPE","visitDefTypeStmt","DATA","visitDataStmt","READ","visitReadStmt","RESTORE","visitRestoreStmt","LITERAL","visitLiteralExpr","visitVarRefExpr","FN_CALL","visitFnCallExpr","BINARY_OP","visitBinaryOpExpr","UNARY_OP","visitUnaryOpExpr","visitSubscriptExpr","visitMemberExpr","Error","JSON","stringify","acceptAll","nodes","_this","map","throwError","ELEMENTARY_TYPE_INIT_VALUES","DataType","INTEGER","LONG","SINGLE","DOUBLE","STRING","typeSpec","dataType","isElementaryType","UDT","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","pop","length","push","__spreadArray","to","from","i","il","j","SCREEN_MODE_CONFIGS","moo_1","builtins_1","compiled_code_1","round_half_to_even_1","shouldStopExecution","mode","textModeDimensions","rows","cols","colorMap","Runtime","platform","roundHalfToEven","printFormatStringLexer","NUMBER","DOLLAR_SIGNS","match","lineBreaks","inputLexer","WHITESPACE","QUOTED_STRING","text","substr","COMMA","currentScreenMode","executeBuiltinProc","argTypeSpecs","args","_i","arguments","builtinProc","runContext","lookupBuiltin","BUILTIN_FNS","BUILTIN_SUBS","runtime","run","ptr","print","formatString","line","printWithFormatString","printWithDefaultFormat","VALUE","pieces","argIdx","reset","nextArg","token","split","integralFormat","fractionFormat","integralFormatLength","replace","formattedValue","Math","floor","padStart","toFixed","indexOf","join","args_1","arg","SEMICOLON","numPaddingChars","repeat","inputLine","prompt","setCursorVisibility","input","resultTypes","results","tokens","tokenIdx","errorMessage","resultIdx","resultType","errorMessagePrefix","tokenValue","numericValue","lexInput","isString","isNumeric","parseFloat","isNaN","trim","setScreenMode","configurable","Keywords","mooLexer","states","main","COMMENT","IDENTIFIER","keywordsTransformFn","keywords","caseInsensitiveKeywords","STRING_LITERAL","NUMERIC_LITERAL","HEX_LITERAL","parseInt","OCT_LITERAL","COLON","DOT","LPAREN","RPAREN","ADD","MUL","EXP","DIV","INTDIV","EQ","NE","GTE","LTE","GT","LT","comment","NEWLINE","TOKEN_TYPES_TO_DISCARD","lexer","Lexer","lastToken","isNextTokenFirstOnLine","tokenQueue","isFirstTokenOnLine","pushState","peek","save","chunk","state","formatError","has","tokenType","__assign","assign","s","singlebyte_1","symbol_table_1","overload","paramTypeSpecsList","paramTypeSpecs","doubleSpec","returnTypeSpec","abs","stringSpec","longSpec","strToBuf","atan","bufToStr","Buffer","cos","singleSpec","getCursorPosition","now","Date","getMonth","getDate","getFullYear","toString","exp","sign","toUpperCase","c","getChar","haystack","needle","integerSpec","start","arraySpec","array","dimensionSpecs","dimensionIdx","log","trimStart","startIdx","x","max","random","trimEnd","sin","sqrt","col","_c","getScreenSize","moveCursorTo","tan","getHours","getMinutes","getSeconds","midnight","setHours","getTime","beep","clearScreen","getColorName","fg","bg","currentScreenModeConfig","Number","isFinite","setFgColor","setBgColor","row","cursor","origPos","newX","newY","numSeconds","startTimeMs","nowMs","procs","shouldReturnIfArgTypeMismatch","builtinFnsMatchingName","builtinFn","every","paramTypeSpec","areMatchingElementaryTypes","isArray","round","data_item_1","init_value_1","module","stmt","EndDirective","isEndDirective","stmtExecutionDelayUs","currentModule","localStaticVarsMap","moduleLabelIndexMap","procLabelIndexMap","dataCursor","stmtIdx","itemIdx","defaultStmtExecutionDelayUs","executeModule","moduleOrCode","ctx","e_1","loadCompiledModule","buildLabelIndexMaps","restore","executeProc","bind","read","localVars","initVars","localSymbols","VAR","localStaticVars","globalVars","globalSymbols","tempVars","executeStmts","stmts","stopExecution","prevCtx","argPtrs","paramSymbols","procTypeName","STATIC_VAR","varSymbolTable","includeVarTypes","container","varSymbolTable_1","varType","labelIndexMap","gosubStates","_loop_1","this_1","errorArgs","directive","e_2","gotoLabel","gosubState","delay","nextStmtIdx","destLabel","dataItem","getNextDataItem","getDataItem","data","buildLabelIndexMap","name_1","forEach","idx","arrayTypeSpec","_values","init","elementTypeSpec","_typeSpec","currentDimensionArrays","minIdx","numElements","nextDimensionArrays","currentDimensionArrays_1","dimensionArray","nextDimensionArray","getIdx","qbIdx","maxIdx","udtTypeSpec","fieldSpecs","fieldSpec","clone","newQbUdt","isUdt","BrowserExecutor","BrowserPlatform","ansi_escapes_1","ansi_terminal_platform_1","terminal","code","moduleObj","Function","fn","delayInUs","t0","window","performance","setTimeout","write","cursorIdx","initialX","disposeFns","removeOnDataListenerFn","onData","splice","cursorBackward","cursorSavePosition","eraseEndLine","slice","cursorRestorePosition","cursorForward","console","charCodeAt","dispose","checkShouldStopExecutionIntervalId","setInterval","clearInterval","translateKeyCode","cursorGetPosition","opts","webpackContext","req","id","webpackContextResolve","__webpack_require__","keys","getType","typeSpec1","typeSpec2","ProcDefType","typeSpecName","areMatchingSingularTypes","isSingularType","isIntegral","procType","terser_1","codegen_1","parser_1","semantic_analysis_1","source","enableBundling","enableMinify","astModule","sourceMap","sourceMapContent","_d","minifiedCode","minifiedSourceMap","_e","minify","filename","content","CodeGenerator","lodash_1","source_map_1","ast_1","nodeRuntimeBundleCode","BINARY_OP_MAP","MOD","AND","OR","openForStmtStates","openLoopStmtStates","indent","nextGeneratedLabelIdx","indentWidth","compiledModuleSourceNode","visitModule","bundle","toStringWithSourceMap","sourceNode","SourceNode","add","chunks","lines","visitStmts","flattenDeep","generateLoc","createSourceNode","origOpenForStmtStatesLength","sourceNodes","forStmt","generateLabelStmt","varDecls","varDecl","dimType","SHARED","dimensionSpecExprs","generateVarRefCode","minIdxExpr","maxIdxExpr","createStmtSourceNode","targetExpr","generateAssignableValueCode","valueExpr","flatMap","constDefs","constDef","generateGotoCode","visitCondStmt","generateLabel","ifBranch","condExpr","labelPrefix","testValue","generateTempVarRef","testExpr","caseBranch","condExprs","RANGE","lowerBoundExpr","upperBoundExpr","COMP","rightExpr","generateCondExprCode","branchLabels","ifBranches","elseBranch","endIfLabel","nextBranchLabelIdx","nextBranchNode","nextBranchLabel","loopStartLabel","loopEndLabel","cond","isCondNegated","condStmt","loopStmt","endLabel","structure","COND_EXPR_BEFORE_STMTS","COND_EXPR_AFTER_STMTS","startLabel","stepValue","endValue","counterExpr","startExpr","stepExpr","endExpr","numForStmtStatesToClose","counterExprs","nextCounterExprString","_loop_2","this_2","visitProcCall","tempVarName","leftExpr","formatExpr","inputType","TOKENIZED","targetExprs","LINE","generateRunCode","valueString","OP_MAP","NEG","NOT","PARENS","arrayExpr","indexExprs","indexExpr","generateSubscriptCode","dimension","udtExpr","fieldName","tempVarPrefix","tempVarIdx","argExprs","argExpr","argTypeProps","shouldPassByRef","ARG","generateVarContainerCode","containerCode","lastIndexExprCode","executeProcCodePrefixMap","BUILTIN","MODULE","procDefType","values","outputLines","values_1","indentStr","varContainer","varScope","LOCAL","GLOBAL","targetTypeSpec","valueTypeSpec","valueCode","createParser","nearley_1","grammar_1","lexer_1","Parser","Grammar","fromCompiled","parser","feed","tree","discard","useLoc","tokenOrAstNode","buildBinaryOpExpr","$1","$2","$3","buildUnaryOpExpr","buildDataItem","grammar","ParserRules","concat","reduce","a","udts","STATIC","FUNCTION","$4","$5","params","isDefaultStatic","DEF","position","startsWith","DECLARE","$1_1","elementTypeExpr","TYPE","fieldSpecExprs","$2_1","TO","LET","ELSE","THEN","ELSEIF","$6","$7","$6_1","$6_2","$6_5","CASE","$5_1","$5_2","$5_3","IS","WHILE","WEND","DO","LOOP","UNTIL","EXIT","STEP","nextToken","SYSTEM","STOP","USING","location","flatten","arg1","arg2","DEFINT","ranges","DEFSNG","DEFDBL","DEFLNG","DEFSTR","minPrefix","maxPrefix","LOCATE","COLOR","$2_2","NaN","SEG","VIEW","AS","ELEMENTARY","ParserStart","SemanticAnalyzer","TYPE_SUFFIX_MAP","freeze","$","DEFAULT_DIMENSION_SPEC","udtStack","currentProc","defTypeMap","setUpDefTypeMap","visitUdt","preprocessProc","labels","getLabels","param","getTypeSpecForVarDeclOrParam","getDefaultTypeSpecFromName","labelLocMap","stmts_1","udt","udtStackIdx","udtsInCycle","fieldTypeSpec","fieldUdt","lookupUdtOrThrow","resolvedSymbol","moduleLocalSymbol","createLocalVarSymbol","addLocalSymbol","symbolProps","lookupLabelOrThrow","requireNumericExpr","exprs","exprs_1","requireElementaryTypeExpr","exprs_2","condExprs_1","exprs_3","resolvedSub","lookupSub","defType","range","fromCharCode","lookupFn","fnCallExpr","resolvedFn","subscriptExpr","leftTypeSpec","rightTypeSpec","requireNumericOperands","useCoercedNumericType","coerceNumericTypes","resolvedProc","argTypeSpec","isEqual","typeSpecs","RULES","operands","resultTypeSpec","matchingRule","getLocalSymbols","idxExprs","idxExprs_1","idxExpr","context","foundLabel","existingLabel","dataItemTypeName","throwDataItemTypeError","item","expectedTypeSpec","ansi_styles_1","ansi_terminal_key_code_map_1","AnsiTerminalPlatform","cursorTo","isCursorVisible","cursorShow","cursorHide","eraseScreen","colorName","open","bgColorName","ESC","NUL","ANSI_TERMINAL_KEY_CODE_MAP","EXAMPLE_SPECS","fileName","title","description","spec","DEFAULT_EXAMPLE","ConfirmationDialog","isOpen","onClose","onConfirm","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","color","useCallback","ExamplesTab","onSelect","onExampleClick","exampleIdx","EXAMPLES","List","subheader","ListItem","button","ListItemAvatar","Avatar","ListItemText","primary","secondary","UploadTab","onChange","selectedFiles","selectedFile","style","display","flex","height","alignItems","justifyContent","acceptedFiles","filesLimit","showPreviews","showPreviewsInDropzone","ConfigKey","OpenDialog","observer","editor","onChangeSourceFileName","theme","useTheme","isFullScreen","useMediaQuery","breakpoints","down","selectedFileSpecRef","useRef","useState","isOverwriteConfirmationDialogOpen","setIsOverwriteConfirmationDialogOpen","openSelectedFile","selectedFileSpec","current","setValue","fileSpec","trimmedSource","getValue","shouldConfirm","some","activeTab","setActiveTab","fullScreen","fullWidth","maxWidth","scroll","Tabs","orientation","variant","event","borderRight","palette","divider","indicatorColor","textColor","Tab","icon","backgroundColor","background","paper","overflowY","paddingLeft","paddingRight","DEFAULT_SOURCE_FILE_NAME","DEFAULT_CONFIG","SOURCE_FILES","CURRENT_SOURCE_FILE_NAME","EDITOR_FONT_FAMILY","EDITOR_FONT_SIZE","EDITOR_THEME","EDITOR_KEYBINDINGS","SCREEN_FONT_FAMILY","SCREEN_FONT_SIZE","SCREEN_LETTER_SPACING","SCREEN_LINE_HEIGHT","EXECUTION_DELAY","EDITOR_THEME_GROUPS","EDITOR_THEMES","group","configManager","config","makeObservable","observable","setKey","action","load","sourceFiles","computed","currentSourceFile","setSourceFileName","setSourceFileContent","reaction","toJS","key","defaultValue","currentValue","localStorage","removeItem","setItem","rawValue","getItem","parse","warn","getKey","sourceFile","newSourceFileName","newContent","TextSettingEditorDialog","configKey","dividers","TextField","autoFocus","required","target","width","InputProps","fontSize","disabled","SliderSettingEditorDialog","min","Slider","marks","valueLabelDisplay","marginTop","SingleChoiceSettingEditorDialog","groups","choices","listRef","selectedListItemRef","didScrollToSelectedListItem","scrollToSelectedListItem","scrollIntoView","scrollHeight","scrollTop","clientHeight","useEffect","overflowX","ref","padding","ListSubheader","choice","isSelected","selected","primaryTypographyProps","ListItemSecondaryAction","Radio","checked","SettingsDialog","isEditorFontDialogOpen","setIsEditorFontDialogOpen","isEditorFontSizeDialogOpen","setIsEditorFontSizeDialogOpen","isEditorThemeDialogOpen","setIsEditorThemeDialogOpen","isEditorKeybindingsDialogOpen","setIsEditorKeybindingsDialogOpen","isScreenFontDialogOpen","setIsScreenFontDialogOpen","isScreenFontSizeDialogOpen","setIsScreenFontSizeDialogOpen","isScreenLetterSpacingDialogOpen","setIsScreenLetterSpacingDialogOpen","isScreenLineHeightDialogOpen","setIsScreenLineHeightDialogOpen","isExecutionDelayDialogOpen","setIsExecutionDelayDialogOpen","AppHeader","isReady","onSaveClick","blob","Blob","saveAs","isSettingsDialogOpen","setIsSettingsDialogOpen","isOpenDialogOpen","setIsOpenDialogOpen","AppBar","Toolbar","Typography","flexGrow","Tooltip","IconButton","typography","overline","marginLeft","href","AppSplashScreen","CompileResultType","Status","VISIBLE","status","setStatus","TRANSITIONING","HIDDEN","left","top","zIndex","transition","opacity","CircularProgress","COMPILE_RESULT_TYPE_SPECS","compileResultType","iconClass","TextBoxOutline","BUNDLE","NodejsIcon","CompileResultTypeSelect","React","menuAnchor","setMenuAnchor","onButtonClick","currentTarget","onMenuSelect","newValue","onMenuClose","IconClass","startIcon","endIcon","Menu","anchorEl","keepMounted","MenuItem","ListItemIcon","CompileResultDialog","moduleCompileResult","compileResult","_onClose","setCompileResultType","bundleCompileResult","setBundleCompileResult","editorRef","setIsFullScreen","enterFullScreen","resize","exitFullScreen","onCompileResultChange","editorConfigChangeListenerDisposerRef","ace","edit","useWorker","autorun","setOptions","fontFamily","setTheme","keybindings","setKeyboardHandler","setShowPrintMargin","session","setMode","setReadOnly","clearSelection","focus","destroy","disableTypography","marginRight","spacing","flexDirection","PaneHeader","children","Paper","elevation","square","TextFieldEditorDialog","valueProp","prevValueProp","QbjcMessageType","EditorPane","onReady","containerElRef","containerHeightBeforeFullScreenRef","containerEl","containerHeightBeforeFullScreen","initialContent","on","isSourceFileNameEditorDialogOpen","setIsSourceFileNameEditorDialogOpen","showSourceFileNameEditorDialog","hideSourceFileNameEditorDialog","QbjcManager","isRunning","messages","executor","pushMessage","clearMessages","updateSourceFileName","error","runInAction","ERROR","EXECUTION","startTs","endTs","INFO","selection","selectWordRight","MessagesPane","onLocClick","onShowCompileResultClick","scrollContainerRef","isScrolledToBottomRef","prevNumMessagesRef","scrollContainerEl","prevNumMessages","isScrolledToBottom","numMessages","onScroll","dense","disablePadding","messageType","ErrorIcon","warning","dark","hint","PlayCircleIcon","getMessageDisplayProps","Icon","iconElement","htmlColor","body2","paddingTop","paddingBottom","inset","marginBottom","OutputScreenPane","dimensions","terminalRef","fitAddOnRef","fitAddOn","fit","Terminal","convertEol","fitAddon","FitAddon","loadAddon","XtermWebfont","loadWebfontAndOpen","setOption","addEventListener","debounce","onResize","prevDimensionsJson","dimensionsJson","size","RunFab","qbjcManager","right","bottom","Fab","stop","darkTheme","createTheme","light","blue","contrastText","App","setDimensions","isCompileResultDialogOpen","setIsCompileResultDialogOpen","displayedCompileResult","setDisplayedCompileResult","showCompileResultDialog","hideCompileResultDialog","ThemeProvider","CssBaseline","Helmet","minSize","sizes","onDragEnd","horizontalSplit","gutterSize","overflow","direction","expandToMin","rightVerticalSplit","goToMessageLocInEditor","ReactDOM","render","StrictMode","document","getElementById","ErrorWithLoc","sourceFileNamePrefix","locPrefix"],"mappings":"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","file":"static/js/main.cd4aa064.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupSymbols = exports.lookupSymbol = exports.VarScope = exports.VarType = void 0;\n/** Type of a variable symbol. */\nvar VarType;\n(function (VarType) {\n    /** Regular variable. */\n    VarType[\"VAR\"] = \"var\";\n    /** Static variable. */\n    VarType[\"STATIC_VAR\"] = \"staticVar\";\n    /** Constant. */\n    VarType[\"CONST\"] = \"const\";\n    /** FUNCTION or SUB argument. */\n    VarType[\"ARG\"] = \"arg\";\n})(VarType = exports.VarType || (exports.VarType = {}));\n/** Scope of a variable symbol. */\nvar VarScope;\n(function (VarScope) {\n    VarScope[\"LOCAL\"] = \"local\";\n    VarScope[\"GLOBAL\"] = \"global\";\n})(VarScope = exports.VarScope || (exports.VarScope = {}));\nfunction lookupSymbol(symbolTable, name) {\n    var _a;\n    return ((_a = symbolTable.find(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); })) !== null && _a !== void 0 ? _a : null);\n}\nexports.lookupSymbol = lookupSymbol;\nfunction lookupSymbols(symbolTable, name) {\n    return symbolTable.filter(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); });\n}\nexports.lookupSymbols = lookupSymbols;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PrintArgType = exports.ExecutionDirectiveType = void 0;\nvar ExecutionDirectiveType;\n(function (ExecutionDirectiveType) {\n    ExecutionDirectiveType[\"GOTO\"] = \"goto\";\n    ExecutionDirectiveType[\"GOSUB\"] = \"gosub\";\n    ExecutionDirectiveType[\"RETURN\"] = \"return\";\n    ExecutionDirectiveType[\"END\"] = \"end\";\n    ExecutionDirectiveType[\"EXIT_PROC\"] = \"exitProc\";\n})(ExecutionDirectiveType = exports.ExecutionDirectiveType || (exports.ExecutionDirectiveType = {}));\n/** Type of an argument to print(). */\nvar PrintArgType;\n(function (PrintArgType) {\n    PrintArgType[\"COMMA\"] = \"comma\";\n    PrintArgType[\"SEMICOLON\"] = \"semicolon\";\n    PrintArgType[\"VALUE\"] = \"value\";\n})(PrintArgType = exports.PrintArgType || (exports.PrintArgType = {}));\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QbUdt = exports.QbArray = exports.RuntimePlatform = exports.Executor = exports.ExecutionError = exports.compile = void 0;\nvar compile_1 = require(\"./compile\");\nObject.defineProperty(exports, \"compile\", { enumerable: true, get: function () { return __importDefault(compile_1).default; } });\n__exportStar(require(\"./lib/error-with-loc\"), exports);\n__exportStar(require(\"./lib/types\"), exports);\nvar executor_1 = require(\"./runtime/executor\");\nObject.defineProperty(exports, \"ExecutionError\", { enumerable: true, get: function () { return executor_1.ExecutionError; } });\nObject.defineProperty(exports, \"Executor\", { enumerable: true, get: function () { return __importDefault(executor_1).default; } });\nvar runtime_1 = require(\"./runtime/runtime\");\nObject.defineProperty(exports, \"RuntimePlatform\", { enumerable: true, get: function () { return runtime_1.RuntimePlatform; } });\nvar qb_array_1 = require(\"./runtime/qb-array\");\nObject.defineProperty(exports, \"QbArray\", { enumerable: true, get: function () { return __importDefault(qb_array_1).default; } });\nvar qb_udt_1 = require(\"./runtime/qb-udt\");\nObject.defineProperty(exports, \"QbUdt\", { enumerable: true, get: function () { return __importDefault(qb_udt_1).default; } });\n__exportStar(require(\"./runtime/compiled-code\"), exports);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AstVisitor = exports.AstVisitorError = exports.UnaryOp = exports.BinaryOp = exports.ExprType = exports.isLhsExpr = exports.InputType = exports.PrintSep = exports.CondLoopStructure = exports.CaseExprType = exports.isSingularTypeExpr = exports.DataTypeExprType = exports.DimType = exports.StmtType = exports.isFnProcOrDefFnProc = void 0;\nvar error_with_loc_1 = __importDefault(require(\"./error-with-loc\"));\nvar types_1 = require(\"./types\");\nfunction isFnProcOrDefFnProc(proc) {\n    return types_1.isFnOrDefFn(proc.type);\n}\nexports.isFnProcOrDefFnProc = isFnProcOrDefFnProc;\nvar StmtType;\n(function (StmtType) {\n    StmtType[\"LABEL\"] = \"label\";\n    StmtType[\"DIM\"] = \"dim\";\n    StmtType[\"ASSIGN\"] = \"assign\";\n    StmtType[\"CONST\"] = \"const\";\n    StmtType[\"GOTO\"] = \"goto\";\n    StmtType[\"IF\"] = \"if\";\n    StmtType[\"SELECT\"] = \"select\";\n    StmtType[\"COND_LOOP\"] = \"condLoop\";\n    StmtType[\"UNCOND_LOOP\"] = \"uncondLoop\";\n    StmtType[\"EXIT_LOOP\"] = \"exitLoop\";\n    StmtType[\"FOR\"] = \"for\";\n    StmtType[\"NEXT\"] = \"next\";\n    StmtType[\"EXIT_FOR\"] = \"exitFor\";\n    StmtType[\"GOSUB\"] = \"gosub\";\n    StmtType[\"RETURN\"] = \"return\";\n    StmtType[\"CALL\"] = \"call\";\n    StmtType[\"EXIT_PROC\"] = \"exitProc\";\n    StmtType[\"END\"] = \"end\";\n    StmtType[\"SWAP\"] = \"swap\";\n    StmtType[\"PRINT\"] = \"print\";\n    StmtType[\"INPUT\"] = \"input\";\n    StmtType[\"DEF_TYPE\"] = \"defType\";\n    StmtType[\"DATA\"] = \"data\";\n    StmtType[\"READ\"] = \"read\";\n    StmtType[\"RESTORE\"] = \"restore\";\n})(StmtType = exports.StmtType || (exports.StmtType = {}));\nvar DimType;\n(function (DimType) {\n    DimType[\"LOCAL\"] = \"local\";\n    DimType[\"SHARED\"] = \"shared\";\n    DimType[\"STATIC\"] = \"static\";\n})(DimType = exports.DimType || (exports.DimType = {}));\nvar DataTypeExprType;\n(function (DataTypeExprType) {\n    DataTypeExprType[\"ELEMENTARY\"] = \"elementary\";\n    DataTypeExprType[\"ARRAY\"] = \"array\";\n    DataTypeExprType[\"UDT\"] = \"udt\";\n})(DataTypeExprType = exports.DataTypeExprType || (exports.DataTypeExprType = {}));\nfunction isSingularTypeExpr(typeExpr) {\n    return typeExpr.type !== DataTypeExprType.ARRAY;\n}\nexports.isSingularTypeExpr = isSingularTypeExpr;\nvar CaseExprType;\n(function (CaseExprType) {\n    /** Single value expression. */\n    CaseExprType[\"VALUE\"] = \"value\";\n    /** Range, e.g. 1 TO 5. */\n    CaseExprType[\"RANGE\"] = \"range\";\n    /** Comparison operator, e.g. IS >= 5. */\n    CaseExprType[\"COMP\"] = \"comp\";\n})(CaseExprType = exports.CaseExprType || (exports.CaseExprType = {}));\nvar CondLoopStructure;\n(function (CondLoopStructure) {\n    CondLoopStructure[\"COND_EXPR_BEFORE_STMTS\"] = \"condExprBeforeStmts\";\n    CondLoopStructure[\"COND_EXPR_AFTER_STMTS\"] = \"condExprAfterStmts\";\n})(CondLoopStructure = exports.CondLoopStructure || (exports.CondLoopStructure = {}));\n/** An unimplemented statement that we can ignore for codegen purposes. */\nvar PrintSep;\n(function (PrintSep) {\n    PrintSep[\"COMMA\"] = \"comma\";\n    PrintSep[\"SEMICOLON\"] = \"semicolon\";\n})(PrintSep = exports.PrintSep || (exports.PrintSep = {}));\nvar InputType;\n(function (InputType) {\n    /** INPUT. */\n    InputType[\"TOKENIZED\"] = \"tokenized\";\n    /** LINE INPUT. */\n    InputType[\"LINE\"] = \"line\";\n})(InputType = exports.InputType || (exports.InputType = {}));\nfunction isLhsExpr(expr) {\n    return [ExprType.VAR_REF, ExprType.SUBSCRIPT, ExprType.MEMBER].includes(expr.type);\n}\nexports.isLhsExpr = isLhsExpr;\nvar ExprType;\n(function (ExprType) {\n    ExprType[\"LITERAL\"] = \"literal\";\n    ExprType[\"VAR_REF\"] = \"varRef\";\n    ExprType[\"FN_CALL\"] = \"fnCall\";\n    ExprType[\"BINARY_OP\"] = \"binaryOp\";\n    ExprType[\"UNARY_OP\"] = \"unaryOp\";\n    ExprType[\"SUBSCRIPT\"] = \"subscript\";\n    ExprType[\"MEMBER\"] = \"member\";\n})(ExprType = exports.ExprType || (exports.ExprType = {}));\nvar BinaryOp;\n(function (BinaryOp) {\n    BinaryOp[\"ADD\"] = \"add\";\n    BinaryOp[\"SUB\"] = \"sub\";\n    BinaryOp[\"MUL\"] = \"mul\";\n    BinaryOp[\"DIV\"] = \"div\";\n    BinaryOp[\"INTDIV\"] = \"intdiv\";\n    BinaryOp[\"EXP\"] = \"exp\";\n    BinaryOp[\"MOD\"] = \"mod\";\n    BinaryOp[\"AND\"] = \"and\";\n    BinaryOp[\"OR\"] = \"or\";\n    BinaryOp[\"EQ\"] = \"eq\";\n    BinaryOp[\"NE\"] = \"ne\";\n    BinaryOp[\"GT\"] = \"gt\";\n    BinaryOp[\"GTE\"] = \"gte\";\n    BinaryOp[\"LT\"] = \"lt\";\n    BinaryOp[\"LTE\"] = \"lte\";\n})(BinaryOp = exports.BinaryOp || (exports.BinaryOp = {}));\nvar UnaryOp;\n(function (UnaryOp) {\n    UnaryOp[\"NOT\"] = \"not\";\n    UnaryOp[\"NEG\"] = \"sub\";\n    UnaryOp[\"PARENS\"] = \"parens\";\n})(UnaryOp = exports.UnaryOp || (exports.UnaryOp = {}));\n/** Error thrown by AST visitors. */\nvar AstVisitorError = /** @class */ (function (_super) {\n    __extends(AstVisitorError, _super);\n    function AstVisitorError(message, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, node = _b.node;\n        return _super.call(this, message, { sourceFileName: sourceFileName, loc: node === null || node === void 0 ? void 0 : node.loc }) || this;\n    }\n    return AstVisitorError;\n}(error_with_loc_1.default));\nexports.AstVisitorError = AstVisitorError;\n/** Base class for AST visitors. */\nvar AstVisitor = /** @class */ (function () {\n    function AstVisitor() {\n    }\n    /** Invokes the visitor method corresponding to the specified AstNode. */\n    AstVisitor.prototype.accept = function (node) {\n        switch (node.type) {\n            case types_1.ProcType.SUB:\n            case types_1.ProcType.FN:\n            case types_1.ProcType.DEF_FN:\n                return this.visitProc(node);\n            case StmtType.LABEL:\n                return this.visitLabelStmt(node);\n            case StmtType.DIM:\n                return this.visitDimStmt(node);\n            case StmtType.ASSIGN:\n                return this.visitAssignStmt(node);\n            case StmtType.CONST:\n                return this.visitConstStmt(node);\n            case StmtType.GOTO:\n                return this.visitGotoStmt(node);\n            case StmtType.IF:\n                return this.visitIfStmt(node);\n            case StmtType.SELECT:\n                return this.visitSelectStmt(node);\n            case StmtType.COND_LOOP:\n                return this.visitCondLoopStmt(node);\n            case StmtType.UNCOND_LOOP:\n                return this.visitUncondLoopStmt(node);\n            case StmtType.EXIT_LOOP:\n                return this.visitExitLoopStmt(node);\n            case StmtType.FOR:\n                return this.visitForStmt(node);\n            case StmtType.NEXT:\n                return this.visitNextStmt(node);\n            case StmtType.EXIT_FOR:\n                return this.visitExitForStmt(node);\n            case StmtType.GOSUB:\n                return this.visitGosubStmt(node);\n            case StmtType.RETURN:\n                return this.visitReturnStmt(node);\n            case StmtType.CALL:\n                return this.visitCallStmt(node);\n            case StmtType.EXIT_PROC:\n                return this.visitExitProcStmt(node);\n            case StmtType.END:\n                return this.visitEndStmt(node);\n            case StmtType.SWAP:\n                return this.visitSwapStmt(node);\n            case StmtType.PRINT:\n                return this.visitPrintStmt(node);\n            case StmtType.INPUT:\n                return this.visitInputStmt(node);\n            case StmtType.DEF_TYPE:\n                return this.visitDefTypeStmt(node);\n            case StmtType.DATA:\n                return this.visitDataStmt(node);\n            case StmtType.READ:\n                return this.visitReadStmt(node);\n            case StmtType.RESTORE:\n                return this.visitRestoreStmt(node);\n            case ExprType.LITERAL:\n                return this.visitLiteralExpr(node);\n            case ExprType.VAR_REF:\n                return this.visitVarRefExpr(node);\n            case ExprType.FN_CALL:\n                return this.visitFnCallExpr(node);\n            case ExprType.BINARY_OP:\n                return this.visitBinaryOpExpr(node);\n            case ExprType.UNARY_OP:\n                return this.visitUnaryOpExpr(node);\n            case ExprType.SUBSCRIPT:\n                return this.visitSubscriptExpr(node);\n            case ExprType.MEMBER:\n                return this.visitMemberExpr(node);\n            default:\n                throw new Error(\"Unknown node type: \" + JSON.stringify(node));\n        }\n    };\n    /** Invokes the corresponding visitor methods for each of the provided AstNodes. */\n    AstVisitor.prototype.acceptAll = function (nodes) {\n        var _this = this;\n        return nodes.map(function (node) { return _this.accept(node); });\n    };\n    /** Throws an AstVisitorError for the corresponding AstNode. */\n    AstVisitor.prototype.throwError = function (message, node) {\n        throw new AstVisitorError(message, {\n            sourceFileName: this.sourceFileName,\n            node: node,\n        });\n    };\n    return AstVisitor;\n}());\nexports.AstVisitor = AstVisitor;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar qb_array_1 = __importDefault(require(\"./qb-array\"));\nvar qb_udt_1 = __importDefault(require(\"./qb-udt\"));\n/** Initial value for elementary data types. */\nvar ELEMENTARY_TYPE_INIT_VALUES = (_a = {},\n    _a[types_1.DataType.INTEGER] = 0,\n    _a[types_1.DataType.LONG] = 0,\n    _a[types_1.DataType.SINGLE] = 0.0,\n    _a[types_1.DataType.DOUBLE] = 0.0,\n    _a[types_1.DataType.STRING] = '',\n    _a);\nfunction initValue(typeSpec) {\n    var dataType = typeSpec.type;\n    if (types_1.isElementaryType(dataType)) {\n        return ELEMENTARY_TYPE_INIT_VALUES[dataType];\n    }\n    switch (typeSpec.type) {\n        case types_1.DataType.ARRAY:\n            return new qb_array_1.default(typeSpec);\n        case types_1.DataType.UDT:\n            return new qb_udt_1.default(typeSpec);\n        default:\n            throw new Error(\"Unknown type: \" + JSON.stringify(typeSpec));\n    }\n}\nexports.default = initValue;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SCREEN_MODE_CONFIGS = exports.RuntimePlatform = void 0;\nvar moo_1 = __importDefault(require(\"moo\"));\nvar types_1 = require(\"../lib/types\");\nvar builtins_1 = require(\"./builtins\");\nvar compiled_code_1 = require(\"./compiled-code\");\nvar round_half_to_even_1 = __importDefault(require(\"../lib/round-half-to-even\"));\n/** Interface for platform-specific runtime functionality. */\nvar RuntimePlatform = /** @class */ (function () {\n    function RuntimePlatform() {\n        /** Flag indicating we should stop executing.\n         *\n         * Setting this flag will cause blocking methods like `inputLine()` to exit early.\n         */\n        this.shouldStopExecution = false;\n    }\n    return RuntimePlatform;\n}());\nexports.RuntimePlatform = RuntimePlatform;\nexports.SCREEN_MODE_CONFIGS = [\n    {\n        mode: 0,\n        textModeDimensions: [{ rows: 80, cols: 25 }],\n        colorMap: [\n            'black',\n            'blue',\n            'green',\n            'cyan',\n            'red',\n            'magenta',\n            'yellow',\n            'white',\n            'gray',\n            'blueBright',\n            'greenBright',\n            'cyanBright',\n            'redBright',\n            'magentaBright',\n            'yellowBright',\n            'whiteBright',\n        ],\n    },\n];\n/** Runtime support library.\n *\n * This class provides the interface invoked by compiled code. It is platform-agnostic, and wraps\n * the low-level, platform-dependent functionality in the injected RuntimePlatform.\n */\nvar Runtime = /** @class */ (function () {\n    function Runtime(platform) {\n        this.platform = platform;\n        this.roundHalfToEven = round_half_to_even_1.default;\n        this.printFormatStringLexer = moo_1.default.compile({\n            NUMBER: /(?:[#,])*\\.#+|[#,]+/,\n            STRING: '&',\n            DOLLAR_SIGNS: /\\$+/,\n            LITERAL: {\n                match: /[^.#&\\$]+/,\n                lineBreaks: true,\n            },\n        });\n        /** Lexer for input(). */\n        this.inputLexer = moo_1.default.compile({\n            WHITESPACE: { match: /\\s+/, lineBreaks: true },\n            QUOTED_STRING: {\n                match: /\"[^\"]*\"/,\n                value: function (text) { return text.substr(1, text.length - 2); },\n                type: function () { return 'STRING'; },\n            },\n            COMMA: ',',\n            STRING: /[^,\\s]+/,\n        });\n        this.currentScreenMode = 0;\n    }\n    Runtime.prototype.executeBuiltinProc = function (name, argTypeSpecs) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var builtinProc, runContext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs) ||\n                            builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs);\n                        if (!builtinProc) {\n                            throw new Error(\"No matching built-in procedure found: \\\"\" + name + \"\\\"\");\n                        }\n                        if (argTypeSpecs.length !== args.length) {\n                            throw new Error(\"Argument types and values do not match: \" +\n                                (\"expected \" + argTypeSpecs.length + \" arguments, got \" + args.length));\n                        }\n                        runContext = {\n                            runtime: this,\n                            platform: this.platform,\n                            argTypeSpecs: argTypeSpecs,\n                            args: args,\n                        };\n                        return [4 /*yield*/, builtinProc.run.apply(builtinProc, __spreadArray(__spreadArray([], args.map(function (ptr) { return ptr[0][ptr[1]]; })), [runContext]))];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Runtime.prototype.print = function (formatString) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var line;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        line = formatString\n                            ? this.printWithFormatString(formatString, args)\n                            : this.printWithDefaultFormat(args);\n                        if (args.length === 0 ||\n                            args[args.length - 1].type === compiled_code_1.PrintArgType.VALUE) {\n                            line += '\\n';\n                        }\n                        return [4 /*yield*/, this.platform.print(line)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Implements PRINT USING format strings.\n     *\n     * This is a VERY incomplete implementation. Supported:\n     *\n     *   - Formatting numbers with ##.##\n     *   - Formatting string with &\n     */\n    Runtime.prototype.printWithFormatString = function (formatString, args) {\n        var pieces = [];\n        var argIdx = 0;\n        this.printFormatStringLexer.reset(formatString);\n        for (;;) {\n            while (argIdx < args.length && args[argIdx].type !== compiled_code_1.PrintArgType.VALUE) {\n                ++argIdx;\n            }\n            var nextArg = argIdx < args.length ? args[argIdx] : null;\n            var token = this.printFormatStringLexer.next();\n            if (!token) {\n                break;\n            }\n            switch (token.type) {\n                case 'NUMBER':\n                    if (!nextArg || typeof nextArg.value !== 'number') {\n                        throw new Error('Formatting error: expected number ' +\n                            (\"as argument #\" + (argIdx + 1) + \", got \" + typeof (nextArg === null || nextArg === void 0 ? void 0 : nextArg.value)));\n                    }\n                    var _a = token.value.split('.'), integralFormat = _a[0], fractionFormat = _a[1];\n                    // Not supporting commas yet.\n                    var integralFormatLength = integralFormat.replace(/,/, '').length;\n                    if (fractionFormat) {\n                        var formattedValue = (\"\" + Math.floor(nextArg.value)).padStart(integralFormatLength) +\n                            '.' +\n                            nextArg.value.toFixed(fractionFormat.length).split('.')[1];\n                        pieces.push(formattedValue);\n                    }\n                    else {\n                        var formattedValue = nextArg.value.toFixed(0).padStart(integralFormatLength) +\n                            (token.value.indexOf('.') >= 0 ? '.' : '');\n                        pieces.push(formattedValue);\n                    }\n                    ++argIdx;\n                    break;\n                case 'STRING':\n                    if (!nextArg || typeof nextArg.value !== 'string') {\n                        throw new Error(\"Formatting error: expected string as argument #\" + (argIdx + 1));\n                    }\n                    pieces.push(nextArg.value);\n                    ++argIdx;\n                    break;\n                case 'DOLLAR_SIGNS': {\n                    var value = void 0;\n                    if (token.value.length <= 1) {\n                        value = token.value;\n                    }\n                    else if (token.value.length === 2) {\n                        value = ' $';\n                    }\n                    else {\n                        value = '%$';\n                    }\n                    pieces.push(value);\n                    break;\n                }\n                case 'LITERAL':\n                    pieces.push(token.value);\n                    break;\n                default:\n                    throw new Error(\"Unexpected token type: \" + JSON.stringify(token));\n            }\n        }\n        return pieces.join('');\n    };\n    Runtime.prototype.printWithDefaultFormat = function (args) {\n        var PRINT_ZONE_LENGTH = 14;\n        var line = '';\n        for (var _i = 0, args_1 = args; _i < args_1.length; _i++) {\n            var arg = args_1[_i];\n            switch (arg.type) {\n                case compiled_code_1.PrintArgType.SEMICOLON:\n                    break;\n                case compiled_code_1.PrintArgType.COMMA:\n                    var numPaddingChars = PRINT_ZONE_LENGTH - (line.length % PRINT_ZONE_LENGTH);\n                    line += ' '.repeat(numPaddingChars);\n                    break;\n                case compiled_code_1.PrintArgType.VALUE:\n                    if (typeof arg.value === 'string') {\n                        line += \"\" + arg.value;\n                        break;\n                    }\n                    else if (typeof arg.value === 'number') {\n                        line += \"\" + (arg.value >= 0 ? ' ' : '') + arg.value + \" \";\n                        break;\n                    }\n                    else {\n                        // Fall through\n                    }\n                default:\n                    throw new Error(\"Unknown print arg: '\" + JSON.stringify(arg) + \"'\");\n            }\n        }\n        return line;\n    };\n    Runtime.prototype.inputLine = function (prompt) {\n        return __awaiter(this, void 0, void 0, function () {\n            var line;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!prompt) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.platform.print(prompt)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, this.platform.setCursorVisibility(true)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.platform.inputLine()];\n                    case 4:\n                        line = _a.sent();\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/, line];\n                }\n            });\n        });\n    };\n    Runtime.prototype.input = function (prompt) {\n        var resultTypes = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            resultTypes[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var results, line, tokens, tokenIdx, errorMessage, resultIdx, resultType, errorMessagePrefix, tokenValue, numericValue;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        results = [];\n                        return [4 /*yield*/, this.platform.print(prompt)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.inputLine('')];\n                    case 2:\n                        line = _a.sent();\n                        if (this.platform.shouldStopExecution) {\n                            return [2 /*return*/, results];\n                        }\n                        tokens = this.lexInput(line);\n                        tokenIdx = 0;\n                        errorMessage = null;\n                        for (resultIdx = 0; resultIdx < resultTypes.length; ++resultIdx) {\n                            resultType = resultTypes[resultIdx];\n                            errorMessagePrefix = \"Error parsing value \" + (resultIdx + 1) + \": \";\n                            // Consume comma token for result 1+.\n                            if (resultIdx > 0) {\n                                if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'COMMA') {\n                                    ++tokenIdx;\n                                }\n                                else {\n                                    errorMessage = errorMessagePrefix + \"Comma expected\";\n                                    break;\n                                }\n                            }\n                            // Consume value.\n                            if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'STRING') {\n                                tokenValue = tokens[tokenIdx].value;\n                                if (types_1.isString(resultType)) {\n                                    results.push(tokenValue);\n                                }\n                                else if (types_1.isNumeric(resultType)) {\n                                    numericValue = parseFloat(tokenValue);\n                                    if (isNaN(numericValue)) {\n                                        errorMessage = errorMessagePrefix + \"Invalid numeric value \\\"\" + tokenValue + \"\\\"\";\n                                        break;\n                                    }\n                                    else {\n                                        results.push(numericValue);\n                                    }\n                                }\n                                else {\n                                    throw new Error(\"Unexpected result type \" + resultType.type);\n                                }\n                                ++tokenIdx;\n                            }\n                            else {\n                                errorMessage = errorMessagePrefix + \"No value provided\";\n                                break;\n                            }\n                        }\n                        if (!(results.length === resultTypes.length)) return [3 /*break*/, 3];\n                        return [2 /*return*/, results];\n                    case 3:\n                        if (!(results.length < resultTypes.length)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.platform.print(\"\\n\" + (errorMessage ? errorMessage + \"\\n\" : '') + \"Redo from start\\n\")];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5: \n                    // This would indicate a logic error above - we should stop consuming from input once the\n                    // expected number of results has been reached.\n                    throw new Error(\"Too many results: expected \" + resultTypes.length + \", got \" + results.length);\n                    case 6: return [3 /*break*/, 0];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Runtime.prototype.lexInput = function (line) {\n        this.inputLexer.reset(line.trim());\n        var tokens = [];\n        for (;;) {\n            var token = this.inputLexer.next();\n            if (!token) {\n                break;\n            }\n            if (token.type !== 'WHITESPACE') {\n                tokens.push(token);\n            }\n        }\n        return tokens;\n    };\n    Runtime.prototype.setScreenMode = function (n) {\n        var screenMode = exports.SCREEN_MODE_CONFIGS.find(function (_a) {\n            var mode = _a.mode;\n            return mode === n;\n        });\n        if (!screenMode) {\n            throw new Error(\"Unsupported screen mode: \" + n);\n        }\n        this.currentScreenMode = n;\n    };\n    Object.defineProperty(Runtime.prototype, \"currentScreenModeConfig\", {\n        get: function () {\n            var _this = this;\n            return exports.SCREEN_MODE_CONFIGS.find(function (_a) {\n                var mode = _a.mode;\n                return mode === _this.currentScreenMode;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Runtime;\n}());\nexports.default = Runtime;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Keywords = void 0;\nvar moo_1 = __importDefault(require(\"moo\"));\n/** QBasic keywords.\n *\n * Note that the values must be lowercase!\n */\nvar Keywords;\n(function (Keywords) {\n    Keywords[\"AND\"] = \"and\";\n    Keywords[\"AS\"] = \"as\";\n    Keywords[\"CALL\"] = \"call\";\n    Keywords[\"CASE\"] = \"case\";\n    Keywords[\"COLOR\"] = \"color\";\n    Keywords[\"CONST\"] = \"const\";\n    Keywords[\"DATA\"] = \"data\";\n    Keywords[\"DECLARE\"] = \"declare\";\n    Keywords[\"DEF\"] = \"def\";\n    Keywords[\"DEFINT\"] = \"defint\";\n    Keywords[\"DEFSNG\"] = \"defsng\";\n    Keywords[\"DEFDBL\"] = \"defdbl\";\n    Keywords[\"DEFLNG\"] = \"deflng\";\n    Keywords[\"DEFSTR\"] = \"defstr\";\n    Keywords[\"DIM\"] = \"dim\";\n    Keywords[\"DO\"] = \"do\";\n    Keywords[\"DOUBLE\"] = \"double\";\n    Keywords[\"ELSE\"] = \"else\";\n    Keywords[\"ELSEIF\"] = \"elseif\";\n    Keywords[\"END\"] = \"end\";\n    Keywords[\"EXIT\"] = \"exit\";\n    Keywords[\"FUNCTION\"] = \"function\";\n    Keywords[\"FOR\"] = \"for\";\n    Keywords[\"GOSUB\"] = \"gosub\";\n    Keywords[\"GOTO\"] = \"goto\";\n    Keywords[\"IF\"] = \"if\";\n    Keywords[\"IS\"] = \"is\";\n    Keywords[\"INPUT\"] = \"input\";\n    Keywords[\"INTEGER\"] = \"integer\";\n    Keywords[\"LET\"] = \"let\";\n    Keywords[\"LINE\"] = \"line\";\n    Keywords[\"LOCATE\"] = \"locate\";\n    Keywords[\"LONG\"] = \"long\";\n    Keywords[\"LOOP\"] = \"loop\";\n    Keywords[\"MOD\"] = \"mod\";\n    Keywords[\"NEXT\"] = \"next\";\n    Keywords[\"NOT\"] = \"not\";\n    Keywords[\"OR\"] = \"or\";\n    Keywords[\"PRINT\"] = \"print\";\n    Keywords[\"READ\"] = \"read\";\n    Keywords[\"REM\"] = \"rem\";\n    Keywords[\"RESTORE\"] = \"restore\";\n    Keywords[\"RETURN\"] = \"return\";\n    Keywords[\"SEG\"] = \"seg\";\n    Keywords[\"SELECT\"] = \"select\";\n    Keywords[\"SHARED\"] = \"shared\";\n    Keywords[\"SINGLE\"] = \"single\";\n    Keywords[\"STATIC\"] = \"static\";\n    Keywords[\"STEP\"] = \"step\";\n    Keywords[\"STOP\"] = \"stop\";\n    Keywords[\"STRING\"] = \"string\";\n    Keywords[\"SUB\"] = \"sub\";\n    Keywords[\"SYSTEM\"] = \"system\";\n    Keywords[\"SWAP\"] = \"swap\";\n    Keywords[\"THEN\"] = \"then\";\n    Keywords[\"TO\"] = \"to\";\n    Keywords[\"TYPE\"] = \"type\";\n    Keywords[\"UNTIL\"] = \"until\";\n    Keywords[\"USING\"] = \"using\";\n    Keywords[\"VIEW\"] = \"view\";\n    Keywords[\"WEND\"] = \"wend\";\n    Keywords[\"WHILE\"] = \"while\";\n})(Keywords = exports.Keywords || (exports.Keywords = {}));\n/** moo lexer used internally by Lexer. */\nvar mooLexer = moo_1.default.states({\n    main: {\n        WHITESPACE: {\n            match: /\\s+/,\n            type: function (text) { return (text.includes('\\n') ? 'NEWLINE' : ''); },\n            lineBreaks: true,\n        },\n        COMMENT: {\n            match: /'/,\n            push: 'comment',\n        },\n        IDENTIFIER: {\n            match: /[a-zA-Z_][a-zA-Z0-9_]*(?:\\$|%|#|&|!)?/,\n            type: caseInsensitiveKeywords(Keywords),\n        },\n        STRING_LITERAL: {\n            match: /\"[^\"]*\"/,\n            value: function (text) { return text.substr(1, text.length - 2); },\n        },\n        NUMERIC_LITERAL: /(?:\\d*\\.\\d+|\\d+)/,\n        HEX_LITERAL: {\n            match: /&[hH][\\da-fA-F]+&?/,\n            type: function () { return 'NUMERIC_LITERAL'; },\n            value: function (text) { return \"\" + parseInt(text.substr(2), 16); },\n        },\n        OCT_LITERAL: {\n            match: /&[oO]?[0-7]+&?/,\n            type: function () { return 'NUMERIC_LITERAL'; },\n            value: function (text) { return \"\" + parseInt(text.match(/[0-7]+/)[0], 8); },\n        },\n        COLON: ':',\n        SEMICOLON: ';',\n        COMMA: ',',\n        DOT: '.',\n        LPAREN: '(',\n        RPAREN: ')',\n        ADD: '+',\n        SUB: '-',\n        MUL: '*',\n        EXP: '^',\n        DIV: '/',\n        INTDIV: '\\\\',\n        // Note: order matters in the comparison operators!\n        EQ: '=',\n        NE: '<>',\n        GTE: '>=',\n        LTE: '<=',\n        GT: '>',\n        LT: '<',\n    },\n    comment: {\n        COMMENT: {\n            match: /[^\\n]+/,\n            pop: 1,\n        },\n        NEWLINE: {\n            match: /\\n/,\n            pop: 1,\n            lineBreaks: true,\n        },\n    },\n}, 'main');\nvar TOKEN_TYPES_TO_DISCARD = ['WHITESPACE', 'COMMENT', 'REM'];\n/** Lexer for QBasic.\n *\n * This class wraps the moo lexer with some additional capabilities:\n *\n *   - Discard irrelevant tokens, based on https://github.com/no-context/moo/issues/81.\n *   - Set isFirstTokenOnLine flag on tokens to help disambiguate labels from statements.\n *   - Support lookahead with peek().\n *   - Store the last token for debugging output.\n */\nvar Lexer = /** @class */ (function () {\n    function Lexer(mooLexer) {\n        this.mooLexer = mooLexer;\n        this.lastToken = undefined;\n        this.isNextTokenFirstOnLine = true;\n        this.tokenQueue = [];\n    }\n    Lexer.prototype.next = function () {\n        if (this.tokenQueue.length > 0) {\n            return this.tokenQueue.pop();\n        }\n        var token;\n        do {\n            token = this.mooLexer.next();\n            if (token) {\n                this.lastToken = token;\n                token.isFirstTokenOnLine = this.isNextTokenFirstOnLine;\n                if (token.type === 'NEWLINE') {\n                    this.isNextTokenFirstOnLine = true;\n                }\n                else {\n                    this.isNextTokenFirstOnLine = false;\n                }\n                if (token.type === 'REM') {\n                    this.mooLexer.pushState('comment');\n                }\n            }\n        } while (token &&\n            token.type &&\n            TOKEN_TYPES_TO_DISCARD.includes(token.type));\n        return token;\n    };\n    Lexer.prototype.peek = function () {\n        var token = this.next();\n        this.tokenQueue.push(token);\n        return token;\n    };\n    Lexer.prototype.save = function () {\n        return this.mooLexer.save();\n    };\n    Lexer.prototype.reset = function (chunk, state) {\n        this.mooLexer.reset(chunk, state);\n        this.isNextTokenFirstOnLine = true;\n        this.lastToken = undefined;\n        this.tokenQueue = [];\n        return this;\n    };\n    Lexer.prototype.formatError = function (token, message) {\n        return this.mooLexer.formatError(token, message);\n    };\n    Lexer.prototype.has = function (tokenType) {\n        return this.mooLexer.has(tokenType);\n    };\n    return Lexer;\n}());\n// Based on https://github.com/no-context/moo/pull/85#issue-178701835\nfunction caseInsensitiveKeywords(map) {\n    var keywordsTransformFn = moo_1.default.keywords(map);\n    return function (text) { return keywordsTransformFn(text.toLowerCase()); };\n}\nvar lexer = new Lexer(mooLexer);\nexports.default = lexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupBuiltin = exports.BUILTIN_SUBS = exports.BUILTIN_FNS = void 0;\nvar singlebyte_1 = __importDefault(require(\"singlebyte\"));\nvar round_half_to_even_1 = __importDefault(require(\"../lib/round-half-to-even\"));\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\n/** Built-in functions. */\nexports.BUILTIN_FNS = __spreadArray(__spreadArray([\n    {\n        name: 'abs',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.abs(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'asc',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (s.length === 0) {\n                        throw new Error('Expected non-empty string in ASC()');\n                    }\n                    // We could use iconv-lite here instead:\n                    // return iconv.encode(s[0], 'cp437')[0];\n                    return [2 /*return*/, singlebyte_1.default.strToBuf(s[0], 'cp437')[0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'atn',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.atan(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'chr$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    // We could use iconv-lite here instead:\n                    // return iconv.decode(Buffer.from([n]), 'cp437');\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437')];\n                });\n            });\n        },\n    },\n    {\n        name: 'cdbl',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n];\n                });\n            });\n        },\n    },\n    {\n        name: 'cint',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'clng',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'cos',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.cos(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'csng',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.singleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n];\n                });\n            });\n        },\n    },\n    {\n        name: 'csrlin',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (_a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1: return [2 /*return*/, (_b.sent()).y + 1];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'date$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    return [2 /*return*/, [now.getMonth() + 1, now.getDate(), now.getFullYear()]\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\n                            .join('-')];\n                });\n            });\n        },\n    },\n    {\n        name: 'exp',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.exp(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'fix',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sign(n) * Math.floor(Math.abs(n))];\n                });\n            });\n        },\n    },\n    {\n        name: 'hex$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n.toString(16).toUpperCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'inkey$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (_a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var c;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getChar()];\n                        case 1:\n                            c = _b.sent();\n                            return [2 /*return*/, c !== null && c !== void 0 ? c : ''];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'input$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var result, c;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            result = [];\n                            _b.label = 1;\n                        case 1:\n                            if (!(result.length < n && !platform.shouldStopExecution)) return [3 /*break*/, 3];\n                            return [4 /*yield*/, platform.getChar()];\n                        case 2:\n                            c = _b.sent();\n                            if (c) {\n                                result.push(c);\n                            }\n                            return [3 /*break*/, 1];\n                        case 3: return [2 /*return*/, result.join('')];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'instr',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (haystack, needle) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, haystack.indexOf(needle) + 1];\n                });\n            });\n        },\n    },\n    {\n        name: 'instr',\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.integerSpec(),\n        run: function (start, haystack, needle) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, haystack.indexOf(needle, start - 1) + 1];\n                });\n            });\n        },\n    },\n    {\n        name: 'int',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.floor(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'lbound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'lbound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array, dimensionIdx) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (dimensionIdx < 1 ||\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\n                        throw new Error(\"Invalid dimension index: \" + dimensionIdx);\n                    }\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'lcase$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.toLowerCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'left$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(0, n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'len',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.length];\n                });\n            });\n        },\n    },\n    {\n        name: 'log',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.log(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'ltrim$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.trimStart()];\n                });\n            });\n        },\n    },\n    {\n        name: 'mid$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, startIdx, length) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(startIdx - 1, length)];\n                });\n            });\n        },\n    },\n    {\n        name: 'oct$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n.toString(8)];\n                });\n            });\n        },\n    },\n    {\n        name: 'peek',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    // STUB\n                    return [2 /*return*/, 0];\n                });\n            });\n        },\n    },\n    {\n        name: 'pos',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (_, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1: return [2 /*return*/, (_b.sent()).x + 1];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'right$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(Math.max(0, s.length - n))];\n                });\n            });\n        },\n    }\n], overload({\n    name: 'rnd',\n    returnTypeSpec: types_1.doubleSpec(),\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, Math.random()];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), [\n    {\n        name: 'rtrim$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, _a) {\n            var args = _a.args;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    return [2 /*return*/, s.trimEnd()];\n                });\n            });\n        },\n    },\n    {\n        name: 'sgn',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sign(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'sin',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sin(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'spc',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, ' '.repeat(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'space$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, ' '.repeat(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'sqr',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sqrt(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'str$',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, \"\" + (n >= 0 ? ' ' : '') + n];\n                });\n            });\n        },\n    },\n    {\n        name: 'string$',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (m, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437').repeat(m)];\n                });\n            });\n        },\n    },\n    {\n        name: 'string$',\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (m, s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (s.length === 0) {\n                        throw new Error(\"Empty string argument to STRING$\");\n                    }\n                    return [2 /*return*/, s[0].repeat(m)];\n                });\n            });\n        },\n    },\n    {\n        name: 'tab',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (col, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var _b, x, y, cols;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1:\n                            _b = _c.sent(), x = _b.x, y = _b.y;\n                            return [4 /*yield*/, platform.getScreenSize()];\n                        case 2:\n                            cols = (_c.sent()).cols;\n                            col = (Math.max(1, col) - 1) % cols;\n                            return [4 /*yield*/, platform.moveCursorTo(col, x <= col ? y : y + 1)];\n                        case 3:\n                            _c.sent();\n                            return [2 /*return*/, ''];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'tan',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.tan(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'time$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    return [2 /*return*/, [now.getHours(), now.getMinutes(), now.getSeconds()]\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\n                            .join(':')];\n                });\n            });\n        },\n    },\n    {\n        name: 'timer',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.longSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now, midnight, result;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    midnight = new Date(now);\n                    midnight.setHours(0, 0, 0, 0);\n                    result = (now.getTime() - midnight.getTime()) / 1000;\n                    return [2 /*return*/, result];\n                });\n            });\n        },\n    },\n    {\n        name: 'ubound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][1]];\n                });\n            });\n        },\n    },\n    {\n        name: 'ubound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array, dimensionIdx) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (dimensionIdx < 1 ||\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\n                        throw new Error(\"Invalid dimension index: \" + dimensionIdx);\n                    }\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][1]];\n                });\n            });\n        },\n    },\n    {\n        name: 'ucase$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.toUpperCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'val',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                var v;\n                return __generator(this, function (_a) {\n                    v = parseFloat(s);\n                    return [2 /*return*/, isNaN(v) ? 0 : v];\n                });\n            });\n        },\n    },\n]);\n/** Simple statements implemented as built-in subs. */\nexports.BUILTIN_SUBS = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([\n    {\n        name: 'beep',\n        paramTypeSpecs: [],\n        run: function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return __awaiter(this, void 0, void 0, function () {\n                var platform;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            platform = args.pop().platform;\n                            return [4 /*yield*/, platform.beep()];\n                        case 1:\n                            _a.sent();\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        },\n    }\n], overload({\n    name: 'cls',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        return [4 /*yield*/, platform.clearScreen()];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'color',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, platform, runtime, getColorName, fg, bg;\n            return __generator(this, function (_b) {\n                _a = args.pop(), platform = _a.platform, runtime = _a.runtime;\n                getColorName = function (n) {\n                    if (n < 0 || n >= runtime.currentScreenModeConfig.colorMap.length) {\n                        throw new Error(\"Invalid color: \" + n);\n                    }\n                    return runtime.currentScreenModeConfig.colorMap[n];\n                };\n                fg = args[0], bg = args[1];\n                if (Number.isFinite(fg)) {\n                    platform.setFgColor(getColorName(fg));\n                }\n                if (Number.isFinite(bg)) {\n                    platform.setBgColor(getColorName(bg));\n                }\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), overload({\n    name: '__def_seg',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'locate',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform, row, col, cursor, origPos, newX, newY;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        row = args[0], col = args[1], cursor = args[2];\n                        if (!(Number.isFinite(row) && Number.isFinite(col))) return [3 /*break*/, 2];\n                        return [4 /*yield*/, platform.moveCursorTo(col - 1, row - 1)];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 2:\n                        if (!(Number.isFinite(row) || Number.isFinite(col))) return [3 /*break*/, 5];\n                        return [4 /*yield*/, platform.getCursorPosition()];\n                    case 3:\n                        origPos = _a.sent();\n                        newX = Number.isFinite(col) ? col - 1 : origPos.x;\n                        newY = Number.isFinite(row) ? row - 1 : origPos.y;\n                        if (!(newX !== origPos.x || newY !== origPos.y)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, platform.moveCursorTo(newX, newY)];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5:\n                        if (!Number.isFinite(cursor)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, platform.setCursorVisibility(!!cursor)];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), [\n    {\n        name: 'play',\n        paramTypeSpecs: [types_1.stringSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    },\n    {\n        name: 'poke',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    }\n]), overload({\n    name: 'randomize',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'screen',\n    run: function (mode) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var runtime;\n            return __generator(this, function (_a) {\n                runtime = args.pop().runtime;\n                runtime.setScreenMode(mode);\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), overload({\n    name: 'sleep',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform, numSeconds, startTimeMs, nowMs, c;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        numSeconds = args.length > 0 ? args[0] : 0;\n                        startTimeMs = new Date().getTime();\n                        _a.label = 1;\n                    case 1: return [4 /*yield*/, platform.getChar()];\n                    case 2:\n                        c = _a.sent();\n                        nowMs = new Date().getTime();\n                        _a.label = 3;\n                    case 3:\n                        if (c === null &&\n                            (numSeconds <= 0 || nowMs - startTimeMs < numSeconds * 1000) &&\n                            !platform.shouldStopExecution) return [3 /*break*/, 1];\n                        _a.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: '__view_print',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec(), types_1.longSpec()]])), [\n    {\n        name: 'width',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    },\n]);\n/** Helper function to generate multiple signatures that map to the same built-in proc. */\nfunction overload(proc, paramTypeSpecsList) {\n    return paramTypeSpecsList.map(function (paramTypeSpecs) {\n        return (__assign(__assign({}, proc), { paramTypeSpecs: paramTypeSpecs }));\n    });\n}\nfunction lookupBuiltin(procs, name, argTypeSpecs, _a) {\n    var _b = _a === void 0 ? {} : _a, shouldReturnIfArgTypeMismatch = _b.shouldReturnIfArgTypeMismatch;\n    var builtinFnsMatchingName = symbol_table_1.lookupSymbols(procs, name);\n    var builtinFn = builtinFnsMatchingName.find(function (_a) {\n        var paramTypeSpecs = _a.paramTypeSpecs;\n        return paramTypeSpecs.length === argTypeSpecs.length &&\n            paramTypeSpecs.every(function (paramTypeSpec, i) {\n                return types_1.areMatchingElementaryTypes(paramTypeSpec, argTypeSpecs[i]) ||\n                    (types_1.isArray(paramTypeSpec) && types_1.isArray(argTypeSpecs[i]));\n            });\n    });\n    return (builtinFn !== null && builtinFn !== void 0 ? builtinFn : (shouldReturnIfArgTypeMismatch && builtinFnsMatchingName.length > 0\n        ? builtinFnsMatchingName[0]\n        : null));\n}\nexports.lookupBuiltin = lookupBuiltin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Round a number to integer using BASIC's round-half-to-even rule. */\nfunction roundHalfToEven(n) {\n    if (n - Math.floor(n) === 0.5) {\n        return Math.round(n / 2) * 2;\n    }\n    else {\n        return Math.round(n);\n    }\n}\nexports.default = roundHalfToEven;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExecutionError = void 0;\nvar data_item_1 = require(\"../lib/data-item\");\nvar error_with_loc_1 = __importDefault(require(\"../lib/error-with-loc\"));\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar compiled_code_1 = require(\"./compiled-code\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\nvar runtime_1 = __importDefault(require(\"./runtime\"));\nvar ExecutionError = /** @class */ (function (_super) {\n    __extends(ExecutionError, _super);\n    function ExecutionError(message, _a) {\n        var _b = _a === void 0 ? {} : _a, module = _b.module, stmt = _b.stmt;\n        return _super.call(this, message, {\n            sourceFileName: module === null || module === void 0 ? void 0 : module.sourceFileName,\n            loc: (stmt === null || stmt === void 0 ? void 0 : stmt.loc) ? { line: stmt.loc[0], col: stmt.loc[1] } : undefined,\n        }) || this;\n    }\n    return ExecutionError;\n}(error_with_loc_1.default));\nexports.ExecutionError = ExecutionError;\n/** Exception thrown to signal program termination via END. */\nvar EndDirective = /** @class */ (function (_super) {\n    __extends(EndDirective, _super);\n    function EndDirective() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isEndDirective = true;\n        return _this;\n    }\n    return EndDirective;\n}(Error));\n/** Manages the execution of a compiled program. */\nvar Executor = /** @class */ (function () {\n    function Executor(platform, _a) {\n        var _b = _a === void 0 ? {} : _a, stmtExecutionDelayUs = _b.stmtExecutionDelayUs;\n        this.platform = platform;\n        /** Current module being executed. */\n        this.currentModule = null;\n        /** Static vars, indexed by proc name. */\n        this.localStaticVarsMap = {};\n        /** Label index map for module-level statements. */\n        this.moduleLabelIndexMap = {};\n        /** Label index map for procs. */\n        this.procLabelIndexMap = {};\n        /** Cursor for READ. */\n        this.dataCursor = {\n            stmtIdx: 0,\n            itemIdx: 0,\n        };\n        this.stmtExecutionDelayUs =\n            stmtExecutionDelayUs !== null && stmtExecutionDelayUs !== void 0 ? stmtExecutionDelayUs : platform.defaultStmtExecutionDelayUs;\n    }\n    /** Executes a compiled module. */\n    Executor.prototype.executeModule = function (moduleOrCode) {\n        return __awaiter(this, void 0, void 0, function () {\n            var module, _a, ctx, e_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(typeof moduleOrCode === 'string')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.platform.loadCompiledModule(moduleOrCode)];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = moduleOrCode;\n                        _b.label = 3;\n                    case 3:\n                        module = _a;\n                        this.currentModule = module;\n                        this.buildLabelIndexMaps();\n                        this.localStaticVarsMap = {};\n                        this.restore();\n                        this.platform.shouldStopExecution = false;\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\n                    case 4:\n                        _b.sent();\n                        ctx = {\n                            runtime: new runtime_1.default(this.platform),\n                            executeProc: this.executeProc.bind(this),\n                            read: this.read.bind(this),\n                            restore: this.restore.bind(this),\n                            args: {},\n                            localVars: this.initVars(module.localSymbols, [\n                                symbol_table_1.VarType.VAR,\n                                symbol_table_1.VarType.CONST,\n                            ]),\n                            localStaticVars: {},\n                            globalVars: this.initVars(module.globalSymbols, [\n                                symbol_table_1.VarType.VAR,\n                                symbol_table_1.VarType.CONST,\n                            ]),\n                            tempVars: {},\n                        };\n                        _b.label = 5;\n                    case 5:\n                        _b.trys.push([5, 7, 8, 10]);\n                        return [4 /*yield*/, this.executeStmts(ctx, module.stmts, this.moduleLabelIndexMap)];\n                    case 6:\n                        _b.sent();\n                        return [3 /*break*/, 10];\n                    case 7:\n                        e_1 = _b.sent();\n                        if (e_1.isEndDirective) {\n                            // Swallow error\n                        }\n                        else {\n                            throw e_1;\n                        }\n                        return [3 /*break*/, 10];\n                    case 8:\n                        this.currentModule = null;\n                        this.moduleLabelIndexMap = {};\n                        this.procLabelIndexMap = {};\n                        this.localStaticVarsMap = {};\n                        this.restore();\n                        this.platform.shouldStopExecution = false;\n                        return [4 /*yield*/, this.platform.setCursorVisibility(true)];\n                    case 9:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Sets flag to stop execution. */\n    Executor.prototype.stopExecution = function () {\n        this.platform.shouldStopExecution = true;\n    };\n    Executor.prototype.executeProc = function (prevCtx, name) {\n        var argPtrs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            argPtrs[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var proc, args, i, ctx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        proc = symbol_table_1.lookupSymbol(this.currentModule.procs, name);\n                        if (!proc) {\n                            throw new Error(\"Procedure not found: \\\"\" + name + \"\\\"\");\n                        }\n                        // Init args.\n                        if (argPtrs.length !== proc.paramSymbols.length) {\n                            throw new Error('Incorrect number of arguments to ' +\n                                (types_1.procTypeName(proc.type) + \" \\\"\" + proc.name + \"\\\": \") +\n                                (\"expected \" + proc.paramSymbols.length + \", got \" + argPtrs.length));\n                        }\n                        args = {};\n                        for (i = 0; i < argPtrs.length; ++i) {\n                            args[proc.paramSymbols[i].name] = argPtrs[i];\n                        }\n                        // Init static vars.\n                        if (!this.localStaticVarsMap[proc.name]) {\n                            this.localStaticVarsMap[proc.name] = this.initVars(proc.localSymbols, [\n                                symbol_table_1.VarType.STATIC_VAR,\n                            ]);\n                        }\n                        ctx = __assign(__assign({}, prevCtx), { args: args, localVars: this.initVars(proc.localSymbols, [symbol_table_1.VarType.VAR, symbol_table_1.VarType.CONST]), localStaticVars: this.localStaticVarsMap[proc.name], tempVars: {} });\n                        if (!this.procLabelIndexMap[proc.name]) {\n                            throw new Error(\"Label index map not found for \\\"\" + proc.name + \"\\\"\");\n                        }\n                        return [4 /*yield*/, this.executeStmts(ctx, proc.stmts, this.procLabelIndexMap[proc.name])];\n                    case 1:\n                        _a.sent();\n                        // Return value.\n                        if (types_1.isFnOrDefFn(proc.type)) {\n                            return [2 /*return*/, ctx.localVars[proc.name]];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Executor.prototype.initVars = function (varSymbolTable, includeVarTypes) {\n        var container = {};\n        for (var _i = 0, varSymbolTable_1 = varSymbolTable; _i < varSymbolTable_1.length; _i++) {\n            var symbol = varSymbolTable_1[_i];\n            if (!includeVarTypes.includes(symbol.varType)) {\n                continue;\n            }\n            container[symbol.name] = init_value_1.default(symbol.typeSpec);\n        }\n        return container;\n    };\n    Executor.prototype.executeStmts = function (ctx, stmts, labelIndexMap) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gosubStates, stmtIdx, _loop_1, this_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        gosubStates = [];\n                        stmtIdx = 0;\n                        _loop_1 = function () {\n                            var stmt, errorArgs, directive, e_2, gotoLabel, gosubState;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        if (this_1.platform.shouldStopExecution) {\n                                            this_1.platform.shouldStopExecution = false;\n                                            throw new EndDirective();\n                                        }\n                                        stmt = stmts[stmtIdx];\n                                        errorArgs = { module: this_1.currentModule, stmt: stmt };\n                                        if (!(this_1.stmtExecutionDelayUs > 0)) return [3 /*break*/, 2];\n                                        return [4 /*yield*/, this_1.platform.delay(this_1.stmtExecutionDelayUs)];\n                                    case 1:\n                                        _b.sent();\n                                        _b.label = 2;\n                                    case 2:\n                                        directive = void 0;\n                                        if (!('run' in stmt)) return [3 /*break*/, 6];\n                                        _b.label = 3;\n                                    case 3:\n                                        _b.trys.push([3, 5, , 6]);\n                                        return [4 /*yield*/, stmt.run(ctx)];\n                                    case 4:\n                                        directive = _b.sent();\n                                        return [3 /*break*/, 6];\n                                    case 5:\n                                        e_2 = _b.sent();\n                                        if (e_2.isEndDirective) {\n                                            throw e_2;\n                                        }\n                                        else {\n                                            throw new ExecutionError(e_2.message, errorArgs);\n                                        }\n                                        return [3 /*break*/, 6];\n                                    case 6:\n                                        if (!directive) {\n                                            ++stmtIdx;\n                                            return [2 /*return*/, \"continue\"];\n                                        }\n                                        gotoLabel = function (label) {\n                                            stmtIdx = labelIndexMap[label];\n                                            if (stmtIdx === undefined) {\n                                                throw new ExecutionError(\"Label not found: \\\"\" + label + \"\\\"\", errorArgs);\n                                            }\n                                        };\n                                        switch (directive.type) {\n                                            case compiled_code_1.ExecutionDirectiveType.GOSUB:\n                                                gosubStates.push({\n                                                    nextStmtIdx: stmtIdx + 1,\n                                                });\n                                                gotoLabel(directive.destLabel);\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.GOTO:\n                                                gotoLabel(directive.destLabel);\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.RETURN:\n                                                if (gosubStates.length === 0) {\n                                                    throw new ExecutionError(\"RETURN without prior GOSUB\", errorArgs);\n                                                }\n                                                gosubState = gosubStates.pop();\n                                                if (directive.destLabel) {\n                                                    gotoLabel(directive.destLabel);\n                                                }\n                                                else {\n                                                    stmtIdx = gosubState.nextStmtIdx;\n                                                }\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.END:\n                                                throw new EndDirective();\n                                            case compiled_code_1.ExecutionDirectiveType.EXIT_PROC:\n                                                stmtIdx = stmts.length;\n                                                break;\n                                            default:\n                                                throw new ExecutionError(\"Unrecognized execution directive: \" + JSON.stringify(directive), errorArgs);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _a.label = 1;\n                    case 1:\n                        if (!(stmtIdx < stmts.length)) return [3 /*break*/, 3];\n                        return [5 /*yield**/, _loop_1()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 1];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Executor.prototype.read = function () {\n        var resultTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resultTypes[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var results, i, dataItem;\n            return __generator(this, function (_a) {\n                results = [];\n                for (i = 0; i < resultTypes.length; ++i) {\n                    dataItem = this.getNextDataItem();\n                    if (!dataItem) {\n                        throw new Error(\"Data exhausted at item \" + (i + 1));\n                    }\n                    try {\n                        results.push(data_item_1.getDataItem(dataItem, resultTypes[i]));\n                    }\n                    catch (e) {\n                        e.message = \"Error reading item \" + (i + 1) + \": \" + e.message;\n                        throw e;\n                    }\n                }\n                return [2 /*return*/, results];\n            });\n        });\n    };\n    Executor.prototype.getNextDataItem = function () {\n        var stmts = this.currentModule.stmts;\n        for (;;) {\n            if (this.dataCursor.stmtIdx >= stmts.length) {\n                return null;\n            }\n            var stmt = stmts[this.dataCursor.stmtIdx];\n            if (!('data' in stmt)) {\n                ++this.dataCursor.stmtIdx;\n                continue;\n            }\n            if (this.dataCursor.itemIdx >= stmt.data.length) {\n                ++this.dataCursor.stmtIdx;\n                this.dataCursor.itemIdx = 0;\n                continue;\n            }\n            return stmt.data[this.dataCursor.itemIdx++];\n        }\n    };\n    Executor.prototype.restore = function (destLabel) {\n        return __awaiter(this, void 0, void 0, function () {\n            var stmtIdx;\n            var _a, _b;\n            return __generator(this, function (_c) {\n                if (destLabel) {\n                    stmtIdx = this.moduleLabelIndexMap[destLabel];\n                    if (stmtIdx === undefined) {\n                        throw new Error(\"Label not found: \\\"\" + destLabel + \"\\\"\");\n                    }\n                    _a = [stmtIdx, 0], this.dataCursor.stmtIdx = _a[0], this.dataCursor.itemIdx = _a[1];\n                }\n                else {\n                    _b = [0, 0], this.dataCursor.stmtIdx = _b[0], this.dataCursor.itemIdx = _b[1];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    Executor.prototype.buildLabelIndexMaps = function () {\n        this.moduleLabelIndexMap = this.buildLabelIndexMap(this.currentModule.stmts);\n        for (var _i = 0, _a = this.currentModule.procs; _i < _a.length; _i++) {\n            var _b = _a[_i], name_1 = _b.name, stmts = _b.stmts;\n            this.procLabelIndexMap[name_1] = this.buildLabelIndexMap(stmts);\n        }\n    };\n    Executor.prototype.buildLabelIndexMap = function (stmts) {\n        var _this = this;\n        var labelIndexMap = {};\n        stmts.forEach(function (stmt, idx) {\n            if ('label' in stmt) {\n                if (stmt.label in labelIndexMap) {\n                    throw new ExecutionError(\"Duplicate label \\\"\" + stmt.label + \"\\\"\", {\n                        module: _this.currentModule,\n                        stmt: stmt,\n                    });\n                }\n                labelIndexMap[stmt.label] = idx;\n            }\n        });\n        return labelIndexMap;\n    };\n    return Executor;\n}());\nexports.default = Executor;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\n/** Runtime representation for QBasic arrays. */\nvar QbArray = /** @class */ (function () {\n    function QbArray(arrayTypeSpec) {\n        /** The underlying array storing the actual elements. */\n        this._values = [];\n        this.init(arrayTypeSpec.elementTypeSpec, arrayTypeSpec.dimensionSpecs);\n    }\n    /** Initializes the array with the provided spec, discarding any previous contents. */\n    QbArray.prototype.init = function (elementTypeSpec, dimensionSpecs) {\n        if (dimensionSpecs.length === 0) {\n            throw new Error('No dimension specs provided');\n        }\n        this._typeSpec = types_1.arraySpec(elementTypeSpec, dimensionSpecs);\n        this._values.length = 0;\n        var currentDimensionArrays = [this._values];\n        for (var i = 0; i < dimensionSpecs.length; ++i) {\n            var _a = dimensionSpecs[i], minIdx = _a[0], maxIdx = _a[1];\n            var numElements = maxIdx - minIdx + 1;\n            var nextDimensionArrays = [];\n            for (var _i = 0, currentDimensionArrays_1 = currentDimensionArrays; _i < currentDimensionArrays_1.length; _i++) {\n                var dimensionArray = currentDimensionArrays_1[_i];\n                if (i === dimensionSpecs.length - 1) {\n                    for (var j = 0; j < numElements; ++j) {\n                        dimensionArray.push(init_value_1.default(elementTypeSpec));\n                    }\n                }\n                else {\n                    for (var j = 0; j < numElements; ++j) {\n                        var nextDimensionArray = new Array();\n                        nextDimensionArrays.push(nextDimensionArray);\n                        dimensionArray.push(nextDimensionArray);\n                    }\n                }\n            }\n            currentDimensionArrays = nextDimensionArrays;\n        }\n    };\n    /** Translates a QBasic index into the index in the underlying array. */\n    QbArray.prototype.getIdx = function (dimensionIdx, qbIdx) {\n        var dimensionSpecs = this._typeSpec.dimensionSpecs;\n        if (!Number.isFinite(dimensionIdx) ||\n            dimensionIdx < 0 ||\n            dimensionIdx >= dimensionSpecs.length) {\n            throw new Error('Invalid dimension in getIndex: ' +\n                (\"expected number between 0 and \" + (dimensionSpecs.length - 1) + \", \") +\n                (\"got \" + dimensionIdx));\n        }\n        var _a = dimensionSpecs[dimensionIdx], minIdx = _a[0], maxIdx = _a[1];\n        if (!Number.isFinite(qbIdx) || qbIdx < minIdx || qbIdx > maxIdx) {\n            throw new Error(\"Index out of range for dimension \" + (dimensionIdx + 1) + \": \" +\n                (\"expected number between \" + minIdx + \" and \" + maxIdx + \", \") +\n                (\"got \" + qbIdx));\n        }\n        return qbIdx - minIdx;\n    };\n    Object.defineProperty(QbArray.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(QbArray.prototype, \"typeSpec\", {\n        get: function () {\n            return this._typeSpec;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return QbArray;\n}());\nexports.default = QbArray;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\n/** Runtime representation for QBasic user-defined types. */\nvar QbUdt = /** @class */ (function () {\n    function QbUdt(udtTypeSpec) {\n        /** The underlying array storing the actual elements. */\n        this._values = {};\n        this._typeSpec = __assign({}, udtTypeSpec);\n        this.init();\n    }\n    QbUdt.prototype.init = function () {\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\n            var fieldSpec = _a[_i];\n            this._values[fieldSpec.name] = init_value_1.default(fieldSpec.typeSpec);\n        }\n    };\n    QbUdt.prototype.clone = function () {\n        var newQbUdt = new QbUdt(this._typeSpec);\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\n            var fieldSpec = _a[_i];\n            var value = this._values[fieldSpec.name];\n            newQbUdt._values[fieldSpec.name] = types_1.isUdt(fieldSpec.typeSpec)\n                ? value.clone()\n                : value;\n        }\n        return newQbUdt;\n    };\n    Object.defineProperty(QbUdt.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(QbUdt.prototype, \"typeSpec\", {\n        get: function () {\n            return this._typeSpec;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return QbUdt;\n}());\nexports.default = QbUdt;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserExecutor = exports.BrowserPlatform = void 0;\nvar ansi_escapes_1 = __importDefault(require(\"ansi-escapes\"));\nvar ansi_terminal_platform_1 = __importDefault(require(\"./ansi-terminal-platform\"));\nvar executor_1 = __importDefault(require(\"./executor\"));\n/** RuntimePlatform for the browser environment based on xterm.js. */\nvar BrowserPlatform = /** @class */ (function (_super) {\n    __extends(BrowserPlatform, _super);\n    function BrowserPlatform(terminal) {\n        var _this = _super.call(this) || this;\n        _this.terminal = terminal;\n        // When running in the browser, delay is implemented as a busy loop as\n        // setImmediate will block input processing. So disabling delay by default.\n        _this.defaultStmtExecutionDelayUs = 0;\n        return _this;\n    }\n    BrowserPlatform.prototype.loadCompiledModule = function (code) {\n        return __awaiter(this, void 0, void 0, function () {\n            var match, fn, moduleObj;\n            return __generator(this, function (_a) {\n                match = code.match(/^(?:#![^\\n]+\\n)?([\\s\\S]+)$/);\n                if (!match) {\n                    throw new Error(\"Empty code string\");\n                }\n                fn = new Function('module', match[1]);\n                moduleObj = { exports: {} };\n                fn(moduleObj);\n                return [2 /*return*/, moduleObj.exports];\n            });\n        });\n    };\n    BrowserPlatform.prototype.delay = function (delayInUs) {\n        return __awaiter(this, void 0, void 0, function () {\n            var t0;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(typeof window === 'undefined' ||\n                            typeof window.performance === 'undefined')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, new Promise(function (resolve) {\n                                return setTimeout(resolve, Math.round(delayInUs / 1000));\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        t0 = performance.now();\n                        while ((performance.now() - t0) * 1000 < delayInUs) { }\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserPlatform.prototype.print = function (s) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.terminal.write(s);\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserPlatform.prototype.inputLine = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var text, cursorIdx, initialX, cols, disposeFns;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        text = [];\n                        cursorIdx = 0;\n                        return [4 /*yield*/, this.getCursorPosition()];\n                    case 1:\n                        initialX = (_a.sent()).x;\n                        return [4 /*yield*/, this.getScreenSize()];\n                    case 2:\n                        cols = (_a.sent()).cols;\n                        disposeFns = [];\n                        return [4 /*yield*/, new Promise(function (resolve) {\n                                var removeOnDataListenerFn = _this.terminal.onData(function (chunk) { return __awaiter(_this, void 0, void 0, function () {\n                                    return __generator(this, function (_a) {\n                                        switch (chunk) {\n                                            case '\\r':\n                                                this.print('\\n');\n                                                resolve();\n                                                break;\n                                            case '\\x7f': // backspace\n                                                if (text.length > 0 && cursorIdx > 0) {\n                                                    text.splice(--cursorIdx, 1);\n                                                    this.print(ansi_escapes_1.default.cursorBackward());\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(ansi_escapes_1.default.eraseEndLine);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                break;\n                                            case '\\x1b[3~': // delete\n                                                if (cursorIdx < text.length) {\n                                                    text.splice(cursorIdx, 1);\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(ansi_escapes_1.default.eraseEndLine);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                break;\n                                            case '\\x1b[C': // right\n                                                if (cursorIdx < text.length) {\n                                                    ++cursorIdx;\n                                                    this.print(chunk);\n                                                }\n                                                break;\n                                            case '\\x1b[D': // left\n                                                if (cursorIdx > 0) {\n                                                    --cursorIdx;\n                                                    this.print(chunk);\n                                                }\n                                                break;\n                                            case '\\x1b[F': // end\n                                                if (cursorIdx < text.length) {\n                                                    this.print(ansi_escapes_1.default.cursorForward(text.length - cursorIdx));\n                                                    cursorIdx = text.length;\n                                                }\n                                                break;\n                                            case '\\x1b[H': // home\n                                                if (cursorIdx > 0) {\n                                                    this.print(ansi_escapes_1.default.cursorBackward(cursorIdx));\n                                                    cursorIdx = 0;\n                                                }\n                                                break;\n                                            default:\n                                                // TODO: Support multi-line line editing.\n                                                if (chunk.match(/^[\\x20-\\x7e]$/) &&\n                                                    initialX + text.length < cols - 2) {\n                                                    // Printable ASCII\n                                                    text.splice(cursorIdx++, 0, chunk);\n                                                    this.print(chunk);\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                else {\n                                                    console.log(chunk\n                                                        .split('')\n                                                        .map(function (c) { return c.charCodeAt(0); })\n                                                        .join(', '));\n                                                }\n                                                break;\n                                        }\n                                        return [2 /*return*/];\n                                    });\n                                }); }).dispose;\n                                disposeFns.push(removeOnDataListenerFn);\n                                var checkShouldStopExecutionIntervalId = setInterval(function () {\n                                    if (_this.shouldStopExecution) {\n                                        resolve();\n                                    }\n                                }, 20);\n                                disposeFns.push(function () { return clearInterval(checkShouldStopExecutionIntervalId); });\n                            })];\n                    case 3:\n                        _a.sent();\n                        disposeFns.forEach(function (fn) { return fn(); });\n                        return [2 /*return*/, text.join('')];\n                }\n            });\n        });\n    };\n    BrowserPlatform.prototype.getChar = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, dispose;\n            var _this = this;\n            return __generator(this, function (_a) {\n                result = null;\n                dispose = this.terminal.onData(function (chunk) {\n                    result = _this.translateKeyCode(chunk.toString());\n                }).dispose;\n                return [2 /*return*/, new Promise(function (resolve) {\n                        setTimeout(function () {\n                            dispose();\n                            resolve(result);\n                        }, 20);\n                    })];\n            });\n        });\n    };\n    BrowserPlatform.prototype.getCursorPosition = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var dispose = _this.terminal.onData(function (chunk) {\n                            dispose();\n                            var match = chunk.toString().match(/\\[(\\d+)\\;(\\d+)R/);\n                            if (match) {\n                                var _a = [match[1], match[2]], row = _a[0], col = _a[1];\n                                var result = {\n                                    // ANSI row & col numbers are 1-based.\n                                    x: parseInt(col) - 1,\n                                    y: parseInt(row) - 1,\n                                };\n                                resolve(result);\n                            }\n                            else {\n                                reject();\n                            }\n                        }).dispose;\n                        _this.print(ansi_escapes_1.default.cursorGetPosition);\n                    })];\n            });\n        });\n    };\n    BrowserPlatform.prototype.getScreenSize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, {\n                        rows: this.terminal.rows,\n                        cols: this.terminal.cols,\n                    }];\n            });\n        });\n    };\n    return BrowserPlatform;\n}(ansi_terminal_platform_1.default));\nexports.BrowserPlatform = BrowserPlatform;\nvar BrowserExecutor = /** @class */ (function (_super) {\n    __extends(BrowserExecutor, _super);\n    function BrowserExecutor(terminal, opts) {\n        if (opts === void 0) { opts = {}; }\n        return _super.call(this, new BrowserPlatform(terminal), opts) || this;\n    }\n    return BrowserExecutor;\n}(executor_1.default));\nexports.BrowserExecutor = BrowserExecutor;\n","var map = {\n\t\"./cal.bas\": 248,\n\t\"./check.bas\": 249,\n\t\"./guess.bas\": 250,\n\t\"./nibbles.bas\": 251,\n\t\"./strtonum.bas\": 252\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 247;","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\r\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\r\\n\\r\\nDEFINT A-Z               ' Default variable type is integer\\r\\n\\r\\n' Define a data type for the names of the months and the\\r\\n' number of days in each:\\r\\nTYPE MonthType\\r\\n   Number AS INTEGER     ' Number of days in the month\\r\\n   MName AS STRING * 9   ' Name of the month\\r\\nEND TYPE\\r\\n\\r\\n' Declare procedures used:\\r\\nDECLARE FUNCTION IsLeapYear% (N%)\\r\\nDECLARE FUNCTION GetInput% (Prompt$, Row%, LowVal%, HighVal%)\\r\\n\\r\\nDECLARE SUB PrintCalendar (Year%, Month%)\\r\\nDECLARE SUB ComputeMonth (Year%, Month%, StartDay%, TotalDays%)\\r\\n\\r\\nDIM MonthData(1 TO 12) AS MonthType\\r\\n\\r\\n' Initialize month definitions from DATA statements below:\\r\\nFOR I = 1 TO 12\\r\\n   READ MonthData(I).MName, MonthData(I).Number\\r\\nNEXT\\r\\n\\r\\n' Main loop, repeat for as many months as desired:\\r\\nDO\\r\\n\\r\\n   CLS\\r\\n\\r\\n   ' Get year and month as input:\\r\\n   Year = GetInput(\\\"Year (1899 to 2099): \\\", 1, 1899, 2099)\\r\\n   Month = GetInput(\\\"Month (1 to 12): \\\", 2, 1, 12)\\r\\n\\r\\n   ' Print the calendar:\\r\\n   PrintCalendar Year, Month\\r\\n\\r\\n   ' Another Date?\\r\\n   LOCATE 13, 1         ' Locate in 13th row, 1st column\\r\\n   PRINT \\\"New Date? \\\";  ' Keep cursor on same line\\r\\n   LOCATE , , 1, 0, 13  ' Turn cursor on and make it one\\r\\n                        ' character high\\r\\n   Resp$ = INPUT$(1)    ' Wait for a key press\\r\\n   PRINT Resp$          ' Print the key pressed\\r\\n\\r\\nLOOP WHILE UCASE$(Resp$) = \\\"Y\\\"\\r\\nEND\\r\\n\\r\\n' Data for the months of a year:\\r\\nDATA January, 31, February, 28, March, 31\\r\\nDATA April, 30, May, 31, June, 30, July, 31, August, 31\\r\\nDATA September, 30, October, 31, November, 30, December, 31\\r\\n'\\r\\n' ====================== COMPUTEMONTH ========================\\r\\n'     Computes the first day and the total days in a month.\\r\\n' ============================================================\\r\\n'\\r\\nSUB ComputeMonth (Year, Month, StartDay, TotalDays) STATIC\\r\\n   SHARED MonthData() AS MonthType\\r\\n   CONST LEAP = 366 MOD 7\\r\\n   CONST NORMAL = 365 MOD 7\\r\\n\\r\\n   ' Calculate total number of days (NumDays) since 1/1/1899.\\r\\n\\r\\n   ' Start with whole years:\\r\\n   NumDays = 0\\r\\n   FOR I = 1899 TO Year - 1\\r\\n      IF IsLeapYear(I) THEN         ' If year is leap, add\\r\\n         NumDays = NumDays + LEAP   ' 366 MOD 7.\\r\\n      ELSE                          ' If normal year, add\\r\\n         NumDays = NumDays + NORMAL ' 365 MOD 7.\\r\\n      END IF\\r\\n   NEXT\\r\\n\\r\\n   ' Next, add in days from whole months:\\r\\n   FOR I = 1 TO Month - 1\\r\\n      NumDays = NumDays + MonthData(I).Number\\r\\n   NEXT\\r\\n\\r\\n   ' Set the number of days in the requested month:\\r\\n   TotalDays = MonthData(Month).Number\\r\\n\\r\\n   ' Compensate if requested year is a leap year:\\r\\n   IF IsLeapYear(Year) THEN\\r\\n\\r\\n      ' If after February, add one to total days:\\r\\n      IF Month > 2 THEN\\r\\n         NumDays = NumDays + 1\\r\\n\\r\\n      ' If February, add one to the month's days:\\r\\n      ELSEIF Month = 2 THEN\\r\\n         TotalDays = TotalDays + 1\\r\\n\\r\\n      END IF\\r\\n   END IF\\r\\n\\r\\n   ' 1/1/1899 was a Sunday, so calculating \\\"NumDays MOD 7\\\"\\r\\n   ' gives the day of week (Sunday = 0, Monday = 1, Tuesday = 2,\\r\\n   ' and so on) for the first day of the input month:\\r\\n   StartDay = NumDays MOD 7\\r\\nEND SUB\\r\\n'\\r\\n' ======================== GETINPUT ==========================\\r\\n'       Prompts for input, then tests for a valid range.\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION GetInput (Prompt$, Row, LowVal, HighVal) STATIC\\r\\n\\r\\n   ' Locate prompt at specified row, turn cursor on and\\r\\n   ' make it one character high:\\r\\n   LOCATE Row, 1, 1, 0, 13\\r\\n   PRINT Prompt$;\\r\\n\\r\\n   ' Save column position:\\r\\n   Column = POS(0)\\r\\n\\r\\n   ' Input value until it's within range:\\r\\n   DO\\r\\n      LOCATE Row, Column   ' Locate cursor at end of prompt\\r\\n      PRINT SPACE$(10)     ' Erase anything already there\\r\\n      LOCATE Row, Column   ' Relocate cursor at end of prompt\\r\\n      INPUT \\\"\\\", Value      ' Input value with no prompt\\r\\n   LOOP WHILE (Value < LowVal OR Value > HighVal)\\r\\n\\r\\n   ' Return valid input as value of function:\\r\\n   GetInput = Value\\r\\n\\r\\nEND FUNCTION\\r\\n'\\r\\n' ====================== ISLEAPYEAR ==========================\\r\\n'         Determines if a year is a leap year or not.\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION IsLeapYear (N) STATIC\\r\\n\\r\\n   ' If the year is evenly divisible by 4 and not divisible\\r\\n   ' by 100, or if the year is evenly divisible by 400, then\\r\\n   ' it's a leap year:\\r\\n   IsLeapYear = (N MOD 4 = 0 AND N MOD 100 <> 0) OR (N MOD 400 = 0)\\r\\nEND FUNCTION\\r\\n'\\r\\n' ===================== PRINTCALENDAR ========================\\r\\n'     Prints a formatted calendar given the year and month.\\r\\n' ============================================================\\r\\n'\\r\\nSUB PrintCalendar (Year, Month) STATIC\\r\\nSHARED MonthData() AS MonthType\\r\\n\\r\\n   ' Compute starting day (Su M Tu ...) and total days\\r\\n   ' for the month:\\r\\n   ComputeMonth Year, Month, StartDay, TotalDays\\r\\n   CLS\\r\\n   Header$ = RTRIM$(MonthData(Month).MName) + \\\",\\\" + STR$(Year)\\r\\n\\r\\n   ' Calculates location for centering month and year:\\r\\n   LeftMargin = (35 - LEN(Header$)) \\\\ 2\\r\\n\\r\\n   ' Print header:\\r\\n   PRINT TAB(LeftMargin); Header$\\r\\n   PRINT\\r\\n   PRINT \\\"Su    M   Tu    W   Th    F   Sa\\\"\\r\\n   PRINT\\r\\n\\r\\n   ' Recalculate and print tab to the first day\\r\\n   ' of the month (Su M Tu ...):\\r\\n   LeftMargin = 5 * StartDay + 1\\r\\n   PRINT TAB(LeftMargin);\\r\\n\\r\\n   ' Print out the days of the month:\\r\\n   FOR I = 1 TO TotalDays\\r\\n      PRINT USING \\\"##   \\\"; I;\\r\\n\\r\\n      ' Advance to the next line when the cursor\\r\\n      ' is past column 32:\\r\\n      IF POS(0) > 32 THEN PRINT\\r\\n   NEXT\\r\\n\\r\\nEND SUB\\r\\n\";","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\n\\nDIM Amount(1 TO 100)\\nCONST FALSE = 0, TRUE = NOT FALSE\\n\\nCLS\\n' Get account's starting balance:\\nINPUT \\\"Type starting balance, then press <ENTER>: \\\", Balance\\n\\n' Get transactions. Continue accepting input\\n' until the input is zero for a transaction,\\n' or until 100 transactions have been entered:\\nFOR TransacNum% = 1 TO 100\\n    PRINT TransacNum%;\\n    PRINT \\\") Enter transaction amount (0 to end): \\\";\\n    INPUT \\\"\\\", Amount(TransacNum%)\\n    IF Amount(TransacNum%) = 0 THEN\\n    TransacNum% = TransacNum% - 1\\n    EXIT FOR\\n    END IF\\nNEXT\\n\\n' Sort transactions in ascending order,\\n' using a \\\"bubble sort\\\":\\nLimit% = TransacNum%\\nDO\\n    Swaps% = FALSE\\n    FOR I% = 1 TO (Limit% - 1)\\n\\n    ' If two adjacent elements are out of order,\\n    ' switch those elements:\\n    IF Amount(I%) < Amount(I% + 1) THEN\\n        SWAP Amount(I%), Amount(I% + 1)\\n        Swaps% = I%\\n    END IF\\n    NEXT I%\\n\\n    ' Sort on next pass only to where last switch was made:\\n    Limit% = Swaps%\\n\\n' Sort until no elements are exchanged:\\nLOOP WHILE Swaps%\\n\\n' Print the sorted transaction array. If a transaction\\n' is greater than zero, print it as a \\\"CREDIT\\\"; if a\\n' transaction is less than zero, print it as a \\\"DEBIT\\\":\\nFOR I% = 1 TO TransacNum%\\n    IF Amount(I%) > 0 THEN\\n    PRINT USING \\\"CREDIT: $$#####.##\\\"; Amount(I%)\\n    ELSEIF Amount(I%) < 0 THEN\\n    PRINT USING \\\"DEBIT: $$#####.##\\\"; Amount(I%)\\n    END IF\\n\\n    ' Update balance:\\n    Balance = Balance + Amount(I%)\\nNEXT I%\\n\\n' Print the final balance:\\nPRINT\\nPRINT \\\"--------------------------\\\"\\nPRINT USING \\\"Final Balance: $$######.##\\\"; Balance\\nEND\\n \";","export default \"' Welcome to qbjc playground!\\n'\\n' qbjc is a QBasic to JavaScript compiler. The qbjc playground\\n' lets you edit and run QBasic / QuickBASIC programs directly in\\n' the browser.\\n'\\n' To get started:\\n'\\n' - Press the blue \\\"PLAY\\\" button below to run this program. The\\n'   result will be displayed in the \\\"OUTPUT\\\" window on the right.\\n'\\n' - Feel free to modify and play around with this program. You\\n'   can also check out some other example programs using the\\n'   \\\"Open\\\" button at the top.\\n' \\n\\nCLS\\nPRINT \\\"Hi! Welcome to qbjc playground!\\\"\\nPRINT\\n\\nINPUT \\\"What's your name? \\\", name$\\nPRINT\\nPRINT \\\"Hello, \\\"; name$; \\\"! Let's play a game! \\\"\\n\\nDO\\n  PRINT\\n  PlayNumberGuessingGame\\n  PRINT\\n  playAgain$ = InputYN$(\\\"Play again?\\\")\\n  PRINT\\nLOOP WHILE playAgain$ = \\\"Y\\\"\\n\\nPRINT\\nPRINT \\\"Thanks for playing \\\"; name$; \\\"! Have a great day!\\\"\\nPRINT\\n\\n\\nSUB PlayNumberGuessingGame\\n  PRINT \\\"I'll think of a number between 1 and 10, \\\";\\n  PRINT \\\"and you have 3 tries to guess it!\\\"\\n  answer = INT(RND * 10) + 1\\n  remainingTries = 3\\n  DO\\n    PRINT\\n    INPUT \\\"Enter your guess: \\\", guess\\n    IF answer = guess THEN\\n      PRINT \\\"Yay! You guessed the answer!\\\"\\n      EXIT DO\\n    ELSE\\n      remainingTries = remainingTries - 1\\n      IF remainingTries <= 0 THEN\\n        PRINT \\\"Sorry, you lost! The answer was\\\"; answer\\n        EXIT DO\\n      ELSEIF answer < guess THEN\\n        PRINT \\\"The answer is smaller than\\\"; guess\\n      ELSE\\n        PRINT \\\"The answer is larger than\\\"; guess\\n      END IF\\n    END IF\\n  LOOP\\nEND SUB\\n\\n\\nFUNCTION InputYN$(prompt$)\\n  PRINT prompt$; \\\" (Y/N)\\\";\\n  DO\\n    key$ = UCASE$(INKEY$)\\n  LOOP UNTIL key$ = \\\"Y\\\" OR key$ = \\\"N\\\"\\n  InputYN$ = key$\\nEND FUNCTION\\n\";","export default \"' Sample program from original QBasic distribution\\n' Source: https://archive.org/details/NibblesQbasic\\n\\n'\\n'                         Q B a s i c   N i b b l e s\\n'\\n'                   Copyright (C) Microsoft Corporation 1990\\n'\\n' Nibbles is a game for one or two players.  Navigate your snakes\\n' around the game board trying to eat up numbers while avoiding\\n' running into walls or other snakes.  The more numbers you eat up,\\n' the more points you gain and the longer your snake becomes.\\n'\\n' To run this game, press Shift+F5.\\n'\\n' To exit QBasic, press Alt, F, X.\\n'\\n' To get help on a BASIC keyword, move the cursor to the keyword and press\\n' F1 or click the right mouse button.\\n'\\n\\n'Set default data type to integer for faster game play\\nDEFINT A-Z\\n\\n'User-defined TYPEs\\nTYPE snakeBody\\n    row AS INTEGER\\n    col AS INTEGER\\nEND TYPE\\n\\n'This type defines the player's snake\\nTYPE snaketype\\n    head      AS INTEGER\\n    length    AS INTEGER\\n    row       AS INTEGER\\n    col       AS INTEGER\\n    direction AS INTEGER\\n    lives     AS INTEGER\\n    score     AS INTEGER\\n    scolor    AS INTEGER\\n    alive     AS INTEGER\\nEND TYPE\\n\\n'This type is used to represent the playing screen in memory\\n'It is used to simulate graphics in text mode, and has some interesting,\\n'and slightly advanced methods to increasing the speed of operation.\\n'Instead of the normal 80x25 text graphics using chr$(219) \\\"█\\\", we will be\\n'using chr$(220)\\\"▄\\\" and chr$(223) \\\"▀\\\" and chr$(219) \\\"█\\\" to mimic an 80x50\\n'pixel screen.\\n'Check out sub-programs SET and POINTISTHERE to see how this is implemented\\n'feel free to copy these (as well as arenaType and the DIM ARENA stmt and the\\n'initialization code in the DrawScreen subprogram) and use them in your own\\n'programs\\nTYPE arenaType\\n    realRow     AS INTEGER        'Maps the 80x50 point into the real 80x25\\n    acolor      AS INTEGER        'Stores the current color of the point\\n    sister      AS INTEGER        'Each char has 2 points in it.  .SISTER is\\nEND TYPE                          '-1 if sister point is above, +1 if below\\n\\n'Sub Declarations\\nDECLARE SUB SpacePause (text$)\\nDECLARE SUB PrintScore (NumPlayers%, score1%, score2%, lives1%, lives2%)\\nDECLARE SUB Intro ()\\nDECLARE SUB GetInputs (NumPlayers, speed, diff$, monitor$)\\nDECLARE SUB DrawScreen ()\\nDECLARE SUB PlayNibbles (NumPlayers, speed, diff$)\\nDECLARE SUB Set (row, col, acolor)\\nDECLARE SUB Center (row, text$)\\nDECLARE SUB DoIntro ()\\nDECLARE SUB Initialize ()\\nDECLARE SUB SparklePause ()\\nDECLARE SUB Level (WhatToDO, sammy() AS snaketype)\\nDECLARE SUB InitColors ()\\nDECLARE SUB EraseSnake (snake() AS ANY, snakeBod() AS ANY, snakeNum%)\\nDECLARE FUNCTION StillWantsToPlay ()\\nDECLARE FUNCTION PointIsThere (row, col, backColor)\\n\\n'Constants\\nCONST TRUE = -1\\nCONST FALSE = NOT TRUE\\nCONST MAXSNAKELENGTH = 1000\\nCONST STARTOVER = 1             ' Parameters to 'Level' SUB\\nCONST SAMELEVEL = 2\\nCONST NEXTLEVEL = 3\\n\\n'Global Variables\\nDIM SHARED arena(1 TO 50, 1 TO 80) AS arenaType\\nDIM SHARED curLevel, colorTable(10)\\n\\n    RANDOMIZE TIMER\\n    GOSUB ClearKeyLocks\\n    Intro\\n    GetInputs NumPlayers, speed, diff$, monitor$\\n    GOSUB SetColors\\n    DrawScreen\\n\\n    DO\\n      PlayNibbles NumPlayers, speed, diff$\\n    LOOP WHILE StillWantsToPlay\\n\\n    GOSUB RestoreKeyLocks\\n    COLOR 15, 0\\n    CLS\\nEND\\n\\nClearKeyLocks:\\n    DEF SEG = 0                     ' Turn off CapLock, NumLock and ScrollLock\\n    KeyFlags = PEEK(1047)\\n    POKE 1047, &H0\\n    DEF SEG\\n    RETURN\\n\\nRestoreKeyLocks:\\n    DEF SEG = 0                     ' Restore CapLock, NumLock and ScrollLock states\\n    POKE 1047, KeyFlags\\n    DEF SEG\\n    RETURN\\n\\nSetColors:\\n    IF monitor$ = \\\"M\\\" THEN\\n        RESTORE mono\\n    ELSE\\n        RESTORE normal\\n    END IF\\n\\n    FOR a = 1 TO 6\\n        READ colorTable(a)\\n    NEXT a\\n    RETURN\\n\\n           'snake1     snake2   Walls  Background  Dialogs-Fore  Back\\nmono:   DATA 15,         7,       7,     0,          15,            0\\nnormal: DATA 14,         13,      12,    1,          15,            4\\nEND\\n\\n'Center:\\n'  Centers text on given row\\nSUB Center (row, text$)\\n    LOCATE row, 41 - LEN(text$) / 2\\n    PRINT text$;\\nEND SUB\\n\\n'DrawScreen:\\n'  Draws playing field\\nSUB DrawScreen\\n\\n    'initialize screen\\n    VIEW PRINT\\n    COLOR colorTable(1), colorTable(4)\\n    CLS\\n\\n    'Print title & message\\n    Center 1, \\\"Nibbles!\\\"\\n    Center 11, \\\"Initializing Playing Field...\\\"\\n    \\n    'Initialize arena array\\n    FOR row = 1 TO 50\\n        FOR col = 1 TO 80\\n            arena(row, col).realRow = INT((row + 1) / 2)\\n            arena(row, col).sister = (row MOD 2) * 2 - 1\\n        NEXT col\\n    NEXT row\\nEND SUB\\n\\n'EraseSnake:\\n'  Erases snake to facilitate moving through playing field\\nSUB EraseSnake (snake() AS snaketype, snakeBod() AS snakeBody, snakeNum)\\n\\n    FOR c = 0 TO 9\\n        FOR b = snake(snakeNum).length - c TO 0 STEP -10\\n            tail = (snake(snakeNum).head + MAXSNAKELENGTH - b) MOD MAXSNAKELENGTH\\n            Set snakeBod(tail, snakeNum).row, snakeBod(tail, snakeNum).col, colorTable(4)\\n        NEXT b\\n    NEXT c\\n    \\nEND SUB\\n\\n'GetInputs:\\n'  Gets player inputs\\nSUB GetInputs (NumPlayers, speed, diff$, monitor$)\\n\\n    COLOR 7, 0\\n    CLS\\n\\n    DO\\n        LOCATE 5, 47: PRINT SPACE$(34);\\n        LOCATE 5, 20\\n        INPUT \\\"How many players (1 or 2)\\\"; num$\\n    LOOP UNTIL VAL(num$) = 1 OR VAL(num$) = 2\\n    NumPlayers = VAL(num$)\\n\\n    LOCATE 8, 21: PRINT \\\"Skill level (1 to 100)\\\"\\n    LOCATE 9, 22: PRINT \\\"1   = Novice\\\"\\n    LOCATE 10, 22: PRINT \\\"90  = Expert\\\"\\n    LOCATE 11, 22: PRINT \\\"100 = Twiddle Fingers\\\"\\n    LOCATE 12, 15: PRINT \\\"(Computer speed may affect your skill level)\\\"\\n    DO\\n        LOCATE 8, 44: PRINT SPACE$(35);\\n        LOCATE 8, 43\\n        INPUT gamespeed$\\n    LOOP UNTIL VAL(gamespeed$) >= 1 AND VAL(gamespeed$) <= 100\\n    speed = VAL(gamespeed$)\\n  \\n    speed = (100 - speed) * 2 + 1\\n\\n    DO\\n        LOCATE 15, 56: PRINT SPACE$(25);\\n        LOCATE 15, 15\\n        INPUT \\\"Increase game speed during play (Y or N)\\\"; diff$\\n        diff$ = UCASE$(diff$)\\n    LOOP UNTIL diff$ = \\\"Y\\\" OR diff$ = \\\"N\\\"\\n\\n    DO\\n        LOCATE 17, 46: PRINT SPACE$(34);\\n        LOCATE 17, 17\\n        INPUT \\\"Monochrome or color monitor (M or C)\\\"; monitor$\\n        monitor$ = UCASE$(monitor$)\\n    LOOP UNTIL monitor$ = \\\"M\\\" OR monitor$ = \\\"C\\\"\\n\\n    startTime# = TIMER                          ' Calculate speed of system\\n    FOR i# = 1 TO 1000: NEXT i#                 ' and do some compensation\\n    stopTime# = TIMER\\n    speed = speed * .5 / (stopTime# - startTime#)\\n\\nEND SUB\\n\\n'InitColors:\\n'Initializes playing field colors\\nSUB InitColors\\n    \\n    FOR row = 1 TO 50\\n        FOR col = 1 TO 80\\n            arena(row, col).acolor = colorTable(4)\\n        NEXT col\\n    NEXT row\\n\\n    CLS\\n   \\n    'Set (turn on) pixels for screen border\\n    FOR col = 1 TO 80\\n        Set 3, col, colorTable(3)\\n        Set 50, col, colorTable(3)\\n    NEXT col\\n\\n    FOR row = 4 TO 49\\n        Set row, 1, colorTable(3)\\n        Set row, 80, colorTable(3)\\n    NEXT row\\n\\nEND SUB\\n\\n'Intro:\\n'  Displays game introduction\\nSUB Intro\\n    SCREEN 0\\n    WIDTH 80, 25\\n    COLOR 15, 0\\n    CLS\\n\\n    Center 4, \\\"Q B a s i c   N i b b l e s\\\"\\n    COLOR 7\\n    Center 6, \\\"Copyright (C) Microsoft Corporation 1990\\\"\\n    Center 8, \\\"Nibbles is a game for one or two players.  Navigate your snakes\\\"\\n    Center 9, \\\"around the game board trying to eat up numbers while avoiding\\\"\\n    Center 10, \\\"running into walls or other snakes.  The more numbers you eat up,\\\"\\n    Center 11, \\\"the more points you gain and the longer your snake becomes.\\\"\\n    Center 13, \\\" Game Controls \\\"\\n    Center 15, \\\"  General             Player 1               Player 2    \\\"\\n    Center 16, \\\"                        (Up)                   (Up)      \\\"\\n    Center 17, \\\"P - Pause                \\\" + CHR$(24) + \\\"                      W       \\\"\\n    Center 18, \\\"                     (Left) \\\" + CHR$(27) + \\\"   \\\" + CHR$(26) + \\\" (Right)   (Left) A   D (Right)  \\\"\\n    Center 19, \\\"                         \\\" + CHR$(25) + \\\"                      S       \\\"\\n    Center 20, \\\"                       (Down)                 (Down)     \\\"\\n    Center 24, \\\"Press any key to continue\\\"\\n\\n    PLAY \\\"MBT160O1L8CDEDCDL4ECC\\\"\\n    SparklePause\\n\\nEND SUB\\n\\n'Level:\\n'Sets game level\\nSUB Level (WhatToDO, sammy() AS snaketype) STATIC\\n    \\n    SELECT CASE (WhatToDO)\\n\\n    CASE STARTOVER\\n        curLevel = 1\\n    CASE NEXTLEVEL\\n        curLevel = curLevel + 1\\n    END SELECT\\n\\n    sammy(1).head = 1                       'Initialize Snakes\\n    sammy(1).length = 2\\n    sammy(1).alive = TRUE\\n    sammy(2).head = 1\\n    sammy(2).length = 2\\n    sammy(2).alive = TRUE\\n\\n    InitColors\\n    \\n    SELECT CASE curLevel\\n    CASE 1\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 4: sammy(2).direction = 3\\n\\n\\n    CASE 2\\n        FOR i = 20 TO 60\\n            Set 25, i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 60: sammy(2).col = 20\\n        sammy(1).direction = 3: sammy(2).direction = 4\\n\\n    CASE 3\\n        FOR i = 10 TO 40\\n            Set i, 20, colorTable(3)\\n            Set i, 60, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n\\n    CASE 4\\n        FOR i = 4 TO 30\\n            Set i, 20, colorTable(3)\\n            Set 53 - i, 60, colorTable(3)\\n        NEXT i\\n        FOR i = 2 TO 40\\n            Set 38, i, colorTable(3)\\n            Set 15, 81 - i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 60: sammy(2).col = 20\\n        sammy(1).direction = 3: sammy(2).direction = 4\\n   \\n    CASE 5\\n        FOR i = 13 TO 39\\n            Set i, 21, colorTable(3)\\n            Set i, 59, colorTable(3)\\n        NEXT i\\n        FOR i = 23 TO 57\\n            Set 11, i, colorTable(3)\\n            Set 41, i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n\\n    CASE 6\\n        FOR i = 4 TO 49\\n            IF i > 30 OR i < 23 THEN\\n                Set i, 10, colorTable(3)\\n                Set i, 20, colorTable(3)\\n                Set i, 30, colorTable(3)\\n                Set i, 40, colorTable(3)\\n                Set i, 50, colorTable(3)\\n                Set i, 60, colorTable(3)\\n                Set i, 70, colorTable(3)\\n            END IF\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 7\\n        FOR i = 4 TO 49 STEP 2\\n            Set i, 40, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 8\\n        FOR i = 4 TO 40\\n            Set i, 10, colorTable(3)\\n            Set 53 - i, 20, colorTable(3)\\n            Set i, 30, colorTable(3)\\n            Set 53 - i, 40, colorTable(3)\\n            Set i, 50, colorTable(3)\\n            Set 53 - i, 60, colorTable(3)\\n            Set i, 70, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 9\\n        FOR i = 6 TO 47\\n            Set i, i, colorTable(3)\\n            Set i, i + 28, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 40: sammy(2).row = 15\\n        sammy(1).col = 75: sammy(2).col = 5\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n   \\n    CASE ELSE\\n        FOR i = 4 TO 49 STEP 2\\n            Set i, 10, colorTable(3)\\n            Set i + 1, 20, colorTable(3)\\n            Set i, 30, colorTable(3)\\n            Set i + 1, 40, colorTable(3)\\n            Set i, 50, colorTable(3)\\n            Set i + 1, 60, colorTable(3)\\n            Set i, 70, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    END SELECT\\nEND SUB\\n\\n'PlayNibbles:\\n'  Main routine that controls game play\\nSUB PlayNibbles (NumPlayers, speed, diff$)\\n\\n    'Initialize Snakes\\n    DIM sammyBody(MAXSNAKELENGTH - 1, 1 TO 2) AS snakeBody\\n    DIM sammy(1 TO 2) AS snaketype\\n    sammy(1).lives = 5\\n    sammy(1).score = 0\\n    sammy(1).scolor = colorTable(1)\\n    sammy(2).lives = 5\\n    sammy(2).score = 0\\n    sammy(2).scolor = colorTable(2)\\n                 \\n    Level STARTOVER, sammy()\\n    startRow1 = sammy(1).row: startCol1 = sammy(1).col\\n    startRow2 = sammy(2).row: startCol2 = sammy(2).col\\n\\n    curSpeed = speed\\n\\n    'play Nibbles until finished\\n\\n    SpacePause \\\"     Level\\\" + STR$(curLevel) + \\\",  Push Space\\\"\\n    gameOver = FALSE\\n    DO\\n        IF NumPlayers = 1 THEN\\n            sammy(2).row = 0\\n        END IF\\n\\n        number = 1          'Current number that snakes are trying to run into\\n        nonum = TRUE        'nonum = TRUE if a number is not on the screen\\n\\n        playerDied = FALSE\\n        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n        PLAY \\\"T160O1>L20CDEDCDL10ECC\\\"\\n\\n        DO\\n            'Print number if no number exists\\n            IF nonum = TRUE THEN\\n                DO\\n                    numberRow = INT(RND(1) * 47 + 3)\\n                    NumberCol = INT(RND(1) * 78 + 2)\\n                    sisterRow = numberRow + arena(numberRow, NumberCol).sister\\n                LOOP UNTIL NOT PointIsThere(numberRow, NumberCol, colorTable(4)) AND NOT PointIsThere(sisterRow, NumberCol, colorTable(4))\\n                numberRow = arena(numberRow, NumberCol).realRow\\n                nonum = FALSE\\n                COLOR colorTable(1), colorTable(4)\\n                LOCATE numberRow, NumberCol\\n                PRINT RIGHT$(STR$(number), 1);\\n                count = 0\\n            END IF\\n\\n            'Delay game\\n            FOR a# = 1 TO curSpeed:  NEXT a#\\n\\n            'Get keyboard input & Change direction accordingly\\n            kbd$ = INKEY$\\n            SELECT CASE kbd$\\n                CASE \\\"w\\\", \\\"W\\\": IF sammy(2).direction <> 2 THEN sammy(2).direction = 1\\n                CASE \\\"s\\\", \\\"S\\\": IF sammy(2).direction <> 1 THEN sammy(2).direction = 2\\n                CASE \\\"a\\\", \\\"A\\\": IF sammy(2).direction <> 4 THEN sammy(2).direction = 3\\n                CASE \\\"d\\\", \\\"D\\\": IF sammy(2).direction <> 3 THEN sammy(2).direction = 4\\n                CASE CHR$(0) + \\\"H\\\": IF sammy(1).direction <> 2 THEN sammy(1).direction = 1\\n                CASE CHR$(0) + \\\"P\\\": IF sammy(1).direction <> 1 THEN sammy(1).direction = 2\\n                CASE CHR$(0) + \\\"K\\\": IF sammy(1).direction <> 4 THEN sammy(1).direction = 3\\n                CASE CHR$(0) + \\\"M\\\": IF sammy(1).direction <> 3 THEN sammy(1).direction = 4\\n                CASE \\\"p\\\", \\\"P\\\": SpacePause \\\" Game Paused ... Push Space  \\\"\\n                CASE ELSE\\n            END SELECT\\n\\n            FOR a = 1 TO NumPlayers\\n                'Move Snake\\n                SELECT CASE sammy(a).direction\\n                    CASE 1: sammy(a).row = sammy(a).row - 1\\n                    CASE 2: sammy(a).row = sammy(a).row + 1\\n                    CASE 3: sammy(a).col = sammy(a).col - 1\\n                    CASE 4: sammy(a).col = sammy(a).col + 1\\n                END SELECT\\n\\n                'If snake hits number, respond accordingly\\n                IF numberRow = INT((sammy(a).row + 1) / 2) AND NumberCol = sammy(a).col THEN\\n                    PLAY \\\"MBO0L16>CCCE\\\"\\n                    IF sammy(a).length < (MAXSNAKELENGTH - 30) THEN\\n                        sammy(a).length = sammy(a).length + number * 4\\n                    END IF\\n                    sammy(a).score = sammy(a).score + number\\n                    PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                    number = number + 1\\n                    IF number = 10 THEN\\n                        EraseSnake sammy(), sammyBody(), 1\\n                        EraseSnake sammy(), sammyBody(), 2\\n                        LOCATE numberRow, NumberCol: PRINT \\\" \\\"\\n                        Level NEXTLEVEL, sammy()\\n                        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                        SpacePause \\\"     Level\\\" + STR$(curLevel) + \\\",  Push Space\\\"\\n                        IF NumPlayers = 1 THEN sammy(2).row = 0\\n                        number = 1\\n                        IF diff$ = \\\"P\\\" THEN speed = speed - 10: curSpeed = speed\\n                    END IF\\n                    nonum = TRUE\\n                    IF curSpeed < 1 THEN curSpeed = 1\\n                END IF\\n            NEXT a\\n\\n            FOR a = 1 TO NumPlayers\\n                'If player runs into any point, or the head of the other snake, it dies.\\n                IF PointIsThere(sammy(a).row, sammy(a).col, colorTable(4)) OR (sammy(1).row = sammy(2).row AND sammy(1).col = sammy(2).col) THEN\\n                    PLAY \\\"MBO0L32EFGEFDC\\\"\\n                    COLOR , colorTable(4)\\n                    LOCATE numberRow, NumberCol\\n                    PRINT \\\" \\\"\\n                   \\n                    playerDied = TRUE\\n                    sammy(a).alive = FALSE\\n                    sammy(a).lives = sammy(a).lives - 1\\n\\n                'Otherwise, move the snake, and erase the tail\\n                ELSE\\n                    sammy(a).head = (sammy(a).head + 1) MOD MAXSNAKELENGTH\\n                    sammyBody(sammy(a).head, a).row = sammy(a).row\\n                    sammyBody(sammy(a).head, a).col = sammy(a).col\\n                    tail = (sammy(a).head + MAXSNAKELENGTH - sammy(a).length) MOD MAXSNAKELENGTH\\n                    Set sammyBody(tail, a).row, sammyBody(tail, a).col, colorTable(4)\\n                    sammyBody(tail, a).row = 0\\n                    Set sammy(a).row, sammy(a).col, sammy(a).scolor\\n                END IF\\n            NEXT a\\n\\n        LOOP UNTIL playerDied\\n\\n        curSpeed = speed                ' reset speed to initial value\\n       \\n        FOR a = 1 TO NumPlayers\\n            EraseSnake sammy(), sammyBody(), a\\n\\n            'If dead, then erase snake in really cool way\\n            IF sammy(a).alive = FALSE THEN\\n                'Update score\\n                sammy(a).score = sammy(a).score - 10\\n                PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                \\n                IF a = 1 THEN\\n                    SpacePause \\\" Sammy Dies! Push Space! --->\\\"\\n                ELSE\\n                    SpacePause \\\" <---- Jake Dies! Push Space \\\"\\n                END IF\\n            END IF\\n        NEXT a\\n\\n        Level SAMELEVEL, sammy()\\n        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n     \\n    'Play next round, until either of snake's lives have run out.\\n    LOOP UNTIL sammy(1).lives = 0 OR sammy(2).lives = 0\\n\\nEND SUB\\n\\n'PointIsThere:\\n'  Checks the global  arena array to see if the boolean flag is set\\nFUNCTION PointIsThere (row, col, acolor)\\n    IF row <> 0 THEN\\n        IF arena(row, col).acolor <> acolor THEN\\n            PointIsThere = TRUE\\n        ELSE\\n            PointIsThere = FALSE\\n        END IF\\n    END IF\\nEND FUNCTION\\n\\n'PrintScore:\\n'  Prints players scores and number of lives remaining\\nSUB PrintScore (NumPlayers, score1, score2, lives1, lives2)\\n    COLOR 15, colorTable(4)\\n\\n    IF NumPlayers = 2 THEN\\n        LOCATE 1, 1\\n        PRINT USING \\\"#,###,#00  Lives: #  <--JAKE\\\"; score2; lives2\\n    END IF\\n\\n    LOCATE 1, 49\\n    PRINT USING \\\"SAMMY-->  Lives: #     #,###,#00\\\"; lives1; score1\\nEND SUB\\n\\n'Set:\\n'  Sets row and column on playing field to given color to facilitate moving\\n'  of snakes around the field.\\nSUB Set (row, col, acolor)\\n    IF row <> 0 THEN\\n        arena(row, col).acolor = acolor             'assign color to arena\\n        realRow = arena(row, col).realRow           'Get real row of pixel\\n        topFlag = arena(row, col).sister + 1 / 2    'Deduce whether pixel\\n                                                    'is on top▀, or bottom▄\\n        sisterRow = row + arena(row, col).sister    'Get arena row of sister\\n        sisterColor = arena(sisterRow, col).acolor  'Determine sister's color\\n\\n        LOCATE realRow, col\\n\\n        IF acolor = sisterColor THEN                'If both points are same\\n            COLOR acolor, acolor                           'Print chr$(219) \\\"█\\\"\\n            PRINT CHR$(219);\\n        ELSE\\n            IF topFlag THEN                         'Since you cannot have\\n                IF acolor > 7 THEN                  'bright backgrounds\\n                    COLOR acolor, sisterColor       'determine best combo\\n                    PRINT CHR$(223);                'to use.\\n                ELSE\\n                    COLOR sisterColor, acolor\\n                    PRINT CHR$(220);\\n                END IF\\n            ELSE\\n                IF acolor > 7 THEN\\n                    COLOR acolor, sisterColor\\n                    PRINT CHR$(220);\\n                ELSE\\n                    COLOR sisterColor, acolor\\n                    PRINT CHR$(223);\\n                END IF\\n            END IF\\n        END IF\\n    END IF\\nEND SUB\\n\\n'SpacePause:\\n'  Pauses game play and waits for space bar to be pressed before continuing\\nSUB SpacePause (text$)\\n\\n    COLOR colorTable(5), colorTable(6)\\n    Center 11, \\\"█▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀█\\\"\\n    Center 12, \\\"█ \\\" + LEFT$(text$ + SPACE$(29), 29) + \\\" █\\\"\\n    Center 13, \\\"█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█\\\"\\n    WHILE INKEY$ <> \\\"\\\": WEND\\n    WHILE INKEY$ <> \\\" \\\": WEND\\n    COLOR 15, colorTable(4)\\n\\n    FOR i = 21 TO 26            ' Restore the screen background\\n        FOR j = 24 TO 56\\n            Set i, j, arena(i, j).acolor\\n        NEXT j\\n    NEXT i\\n\\nEND SUB\\n\\n'SparklePause:\\n'  Creates flashing border for intro screen\\nSUB SparklePause\\n\\n    COLOR 4, 0\\n    a$ = \\\"*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    \\\"\\n    WHILE INKEY$ <> \\\"\\\": WEND 'Clear keyboard buffer\\n\\n    WHILE INKEY$ = \\\"\\\"\\n        FOR a = 1 TO 5\\n            LOCATE 1, 1                             'print horizontal sparkles\\n            PRINT MID$(a$, a, 80);\\n            LOCATE 22, 1\\n            PRINT MID$(a$, 6 - a, 80);\\n\\n            FOR b = 2 TO 21                         'Print Vertical sparkles\\n                c = (a + b) MOD 5\\n                IF c = 1 THEN\\n                    LOCATE b, 80\\n                    PRINT \\\"*\\\";\\n                    LOCATE 23 - b, 1\\n                    PRINT \\\"*\\\";\\n                ELSE\\n                    LOCATE b, 80\\n                    PRINT \\\" \\\";\\n                    LOCATE 23 - b, 1\\n                    PRINT \\\" \\\";\\n                END IF\\n            NEXT b\\n        NEXT a\\n    WEND\\n\\nEND SUB\\n\\n'StillWantsToPlay:\\n'  Determines if users want to play game again.\\nFUNCTION StillWantsToPlay\\n\\n    COLOR colorTable(5), colorTable(6)\\n    Center 10, \\\"█▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀█\\\"\\n    Center 11, \\\"█       G A M E   O V E R       █\\\"\\n    Center 12, \\\"█                               █\\\"\\n    Center 13, \\\"█      Play Again?   (Y/N)      █\\\"\\n    Center 14, \\\"█▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄█\\\"\\n\\n    WHILE INKEY$ <> \\\"\\\": WEND\\n    DO\\n        kbd$ = UCASE$(INKEY$)\\n    LOOP UNTIL kbd$ = \\\"Y\\\" OR kbd$ = \\\"N\\\"\\n\\n    COLOR 15, colorTable(4)\\n    Center 10, \\\"                                 \\\"\\n    Center 11, \\\"                                 \\\"\\n    Center 12, \\\"                                 \\\"\\n    Center 13, \\\"                                 \\\"\\n    Center 14, \\\"                                 \\\"\\n\\n    IF kbd$ = \\\"Y\\\" THEN\\n        StillWantsToPlay = TRUE\\n    ELSE\\n        StillWantsToPlay = FALSE\\n        COLOR 7, 0\\n        CLS\\n    END IF\\n\\nEND FUNCTION\\n\\n\";","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\r\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\r\\n\\r\\nDECLARE FUNCTION Filter$ (Txt$, FilterString$)\\r\\n\\r\\n' Input a line:\\r\\nLINE INPUT \\\"Enter a number with commas: \\\", A$\\r\\n\\r\\n' Look for only valid numeric characters (0123456789.-) in the\\r\\n' input string:\\r\\nCleanNum$ = Filter$(A$, \\\"0123456789.-\\\")\\r\\n\\r\\n' Convert the string to a number:\\r\\nPRINT \\\"The number's value = \\\"; VAL(CleanNum$)\\r\\nEND\\r\\n'\\r\\n' ========================== FILTER ==========================\\r\\n'         Takes unwanted characters out of a string by\\r\\n'        comparing them with a filter string containing\\r\\n'             only acceptable numeric characters\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION Filter$ (Txt$, FilterString$) STATIC\\r\\n   Temp$ = \\\"\\\"\\r\\n   TxtLength = LEN(Txt$)\\r\\n\\r\\n   FOR I = 1 TO TxtLength     ' Isolate each character in\\r\\n      C$ = MID$(Txt$, I, 1)   ' the string.\\r\\n\\r\\n      ' If the character is in the filter string, save it:\\r\\n      IF INSTR(FilterString$, C$) <> 0 THEN\\r\\n         Temp$ = Temp$ + C$\\r\\n      END IF\\r\\n   NEXT I\\r\\n\\r\\n   Filter$ = Temp$\\r\\nEND FUNCTION\\r\\n\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProcDefType = exports.procTypeName = exports.isFnOrDefFn = exports.ProcType = exports.typeSpecName = exports.areMatchingSingularTypes = exports.areMatchingElementaryTypes = exports.isSingularType = exports.isUdt = exports.isElementaryType = exports.isArray = exports.isString = exports.isIntegral = exports.isNumeric = exports.arraySpec = exports.stringSpec = exports.doubleSpec = exports.singleSpec = exports.longSpec = exports.integerSpec = exports.DataType = void 0;\n/** Overall type of the value. */\nvar DataType;\n(function (DataType) {\n    /** 16-bit integer */\n    DataType[\"INTEGER\"] = \"integer\";\n    /** 32-bit integer */\n    DataType[\"LONG\"] = \"long\";\n    /** 32-bit floating point. */\n    DataType[\"SINGLE\"] = \"single\";\n    /** 64-bit floating point. */\n    DataType[\"DOUBLE\"] = \"double\";\n    /** String. */\n    DataType[\"STRING\"] = \"string\";\n    /** Array. */\n    DataType[\"ARRAY\"] = \"array\";\n    /** User-defined data type, a.k.a. records. */\n    DataType[\"UDT\"] = \"udt\";\n})(DataType = exports.DataType || (exports.DataType = {}));\n// Helpers for creating DataTypeSpec instances.\nfunction integerSpec() {\n    return { type: DataType.INTEGER };\n}\nexports.integerSpec = integerSpec;\nfunction longSpec() {\n    return { type: DataType.LONG };\n}\nexports.longSpec = longSpec;\nfunction singleSpec() {\n    return { type: DataType.SINGLE };\n}\nexports.singleSpec = singleSpec;\nfunction doubleSpec() {\n    return { type: DataType.DOUBLE };\n}\nexports.doubleSpec = doubleSpec;\nfunction stringSpec() {\n    return { type: DataType.STRING };\n}\nexports.stringSpec = stringSpec;\nfunction arraySpec(elementTypeSpec, dimensionSpecs) {\n    return { type: DataType.ARRAY, elementTypeSpec: elementTypeSpec, dimensionSpecs: dimensionSpecs };\n}\nexports.arraySpec = arraySpec;\n// Helpers for type checking.\nfunction isNumeric(t) {\n    return [\n        DataType.INTEGER,\n        DataType.LONG,\n        DataType.SINGLE,\n        DataType.DOUBLE,\n    ].includes(getType(t));\n}\nexports.isNumeric = isNumeric;\nfunction isIntegral(t) {\n    return [DataType.INTEGER, DataType.LONG].includes(getType(t));\n}\nexports.isIntegral = isIntegral;\nfunction isString(t) {\n    return getType(t) === DataType.STRING;\n}\nexports.isString = isString;\nfunction isArray(t) {\n    return getType(t) === DataType.ARRAY;\n}\nexports.isArray = isArray;\nfunction isElementaryType(t) {\n    return isNumeric(t) || isString(t);\n}\nexports.isElementaryType = isElementaryType;\nfunction isUdt(t) {\n    return getType(t) === DataType.UDT;\n}\nexports.isUdt = isUdt;\nfunction isSingularType(t) {\n    return isElementaryType(t) || isUdt(t);\n}\nexports.isSingularType = isSingularType;\nfunction areMatchingElementaryTypes(typeSpec1, typeSpec2) {\n    return ((isNumeric(typeSpec1) && isNumeric(typeSpec2)) ||\n        (isString(typeSpec1) && isString(typeSpec2)));\n}\nexports.areMatchingElementaryTypes = areMatchingElementaryTypes;\nfunction areMatchingSingularTypes(typeSpec1, typeSpec2) {\n    return (areMatchingElementaryTypes(typeSpec1, typeSpec2) ||\n        (isUdt(typeSpec1) && isUdt(typeSpec2) && typeSpec1.name === typeSpec2.name));\n}\nexports.areMatchingSingularTypes = areMatchingSingularTypes;\nfunction typeSpecName(t) {\n    switch (t.type) {\n        case DataType.ARRAY:\n            return typeSpecName(t.elementTypeSpec) + \" array\";\n        case DataType.UDT:\n            return \"\\\"\" + t.name + \"\\\"\";\n        default:\n            return t.type;\n    }\n}\nexports.typeSpecName = typeSpecName;\nfunction getType(t) {\n    return typeof t === 'object' ? t.type : t;\n}\n/** Type of a procedure. */\nvar ProcType;\n(function (ProcType) {\n    /** SUB procedure. */\n    ProcType[\"SUB\"] = \"sub\";\n    /** FUNCTION procedure. */\n    ProcType[\"FN\"] = \"fn\";\n    /** DEF FN procedure. */\n    ProcType[\"DEF_FN\"] = \"defFn\";\n})(ProcType = exports.ProcType || (exports.ProcType = {}));\nfunction isFnOrDefFn(procType) {\n    return procType === ProcType.FN || procType === ProcType.DEF_FN;\n}\nexports.isFnOrDefFn = isFnOrDefFn;\n/** Returns the user-facing name of a ProcType. */\nfunction procTypeName(procType) {\n    var _a;\n    var NAMES = (_a = {},\n        _a[ProcType.SUB] = 'SUB procedure',\n        _a[ProcType.FN] = 'FUNCTION procedure',\n        _a[ProcType.DEF_FN] = 'DEF FN procedure',\n        _a);\n    return NAMES[procType];\n}\nexports.procTypeName = procTypeName;\n/** The type of a procedure definition. */\nvar ProcDefType;\n(function (ProcDefType) {\n    /** Built-in function. */\n    ProcDefType[\"BUILTIN\"] = \"builtin\";\n    /** User-defined function in the current module. */\n    ProcDefType[\"MODULE\"] = \"module\";\n})(ProcDefType = exports.ProcDefType || (exports.ProcDefType = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar terser_1 = require(\"terser\");\nvar codegen_1 = __importDefault(require(\"./codegen/codegen\"));\nvar parser_1 = __importDefault(require(\"./parser/parser\"));\nvar semantic_analysis_1 = __importDefault(require(\"./semantic-analysis/semantic-analysis\"));\nvar DEFAULT_SOURCE_FILE_NAME = 'source.bas';\n/** Compiles a QBasic program.\n *\n * This is the main entrypoint to qbjc's compiler.\n */\nfunction compile(_a) {\n    var source = _a.source, _b = _a.sourceFileName, sourceFileName = _b === void 0 ? DEFAULT_SOURCE_FILE_NAME : _b, enableBundling = _a.enableBundling, enableMinify = _a.enableMinify;\n    return __awaiter(this, void 0, void 0, function () {\n        var astModule, _c, code, sourceMap, sourceMapContent, _d, minifiedCode, minifiedSourceMap;\n        return __generator(this, function (_e) {\n            switch (_e.label) {\n                case 0:\n                    astModule = parser_1.default(source, { sourceFileName: sourceFileName });\n                    if (!astModule) {\n                        throw new Error(\"Invalid parse tree\");\n                    }\n                    // 2. Semantic analysis.\n                    semantic_analysis_1.default(astModule, { sourceFileName: sourceFileName });\n                    _c = codegen_1.default(astModule, {\n                        sourceFileName: sourceFileName,\n                        enableBundling: enableBundling,\n                    }), code = _c.code, sourceMap = _c.map;\n                    sourceMapContent = sourceMap.toString();\n                    if (!enableMinify) return [3 /*break*/, 2];\n                    return [4 /*yield*/, terser_1.minify(code, {\n                            sourceMap: {\n                                filename: sourceFileName,\n                                content: sourceMapContent,\n                            },\n                        })];\n                case 1:\n                    _d = _e.sent(), minifiedCode = _d.code, minifiedSourceMap = _d.map;\n                    if (minifiedCode && minifiedSourceMap) {\n                        code = minifiedCode;\n                        sourceMapContent = minifiedSourceMap;\n                    }\n                    _e.label = 2;\n                case 2: return [2 /*return*/, {\n                        source: source,\n                        sourceFileName: sourceFileName,\n                        code: code,\n                        map: sourceMapContent,\n                        astModule: astModule,\n                    }];\n            }\n        });\n    });\n}\nexports.default = compile;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGenerator = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar source_map_1 = require(\"source-map\");\nvar ast_1 = require(\"../lib/ast\");\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar compiled_code_1 = require(\"../runtime/compiled-code\");\n// Generated by src/tools/build-runtime-bundle.ts at build time.\nvar nodeRuntimeBundleCode = require('../runtime/node-runtime-bundle')\n    .default;\n/** Default indentation per level. */\nvar DEFAULT_INDENT_WIDTH = 4;\nvar BINARY_OP_MAP = (_a = {},\n    _a[ast_1.BinaryOp.ADD] = '+',\n    _a[ast_1.BinaryOp.SUB] = '-',\n    _a[ast_1.BinaryOp.MUL] = '*',\n    _a[ast_1.BinaryOp.DIV] = '/',\n    _a[ast_1.BinaryOp.MOD] = '%',\n    _a[ast_1.BinaryOp.AND] = '&&',\n    _a[ast_1.BinaryOp.OR] = '||',\n    _a[ast_1.BinaryOp.EQ] = '===',\n    _a[ast_1.BinaryOp.NE] = '!=',\n    _a[ast_1.BinaryOp.GT] = '>',\n    _a[ast_1.BinaryOp.GTE] = '>=',\n    _a[ast_1.BinaryOp.LT] = '<',\n    _a[ast_1.BinaryOp.LTE] = '<=',\n    _a);\n/** Code generation pass.\n *\n * Depends on semantic analysis info in the AST.\n */\nvar CodeGenerator = /** @class */ (function (_super) {\n    __extends(CodeGenerator, _super);\n    function CodeGenerator(module, opts) {\n        if (opts === void 0) { opts = {}; }\n        var _this = _super.call(this) || this;\n        _this.module = module;\n        /** Stack of open for loops in current context. */\n        _this.openForStmtStates = [];\n        /** Stack of open do loops in current context. */\n        _this.openLoopStmtStates = [];\n        /** Current indentation level. */\n        _this.indent = 0;\n        /** Current generated label index. */\n        _this.nextGeneratedLabelIdx = 1;\n        _this.opts = __assign({ sourceFileName: '', indentWidth: DEFAULT_INDENT_WIDTH, enableBundling: false }, opts);\n        _this.sourceFileName = _this.opts.sourceFileName;\n        return _this;\n    }\n    CodeGenerator.prototype.run = function () {\n        var compiledModuleSourceNode = this.visitModule(this.module);\n        return this.bundle(compiledModuleSourceNode).toStringWithSourceMap();\n    };\n    CodeGenerator.prototype.bundle = function (compiledModuleSourceNode) {\n        var sourceNode = new source_map_1.SourceNode();\n        if (this.opts.enableBundling) {\n            sourceNode.add('#!/usr/bin/env node\\n\\n');\n            sourceNode.add(compiledModuleSourceNode);\n            sourceNode.add(nodeRuntimeBundleCode);\n        }\n        else {\n            sourceNode.add(compiledModuleSourceNode);\n            sourceNode.add('module.exports = compiledModule;\\n');\n        }\n        return sourceNode;\n    };\n    CodeGenerator.prototype.visitModule = function (module) {\n        this.indent = 0;\n        var chunks = [];\n        chunks.push(this.lines('const compiledModule = {', +1, \"sourceFileName: \" + JSON.stringify(this.opts.sourceFileName) + \",\", \"localSymbols: \" + JSON.stringify(module.localSymbols) + \",\", \"globalSymbols: \" + JSON.stringify(module.globalSymbols) + \",\", ''));\n        chunks.push(this.lines('stmts: [', '', +1), this.visitStmts(module.stmts), this.lines(-1, '],', ''));\n        chunks.push(this.lines('procs: [', '', +1), this.acceptAll(module.procs), this.lines(-1, '],', ''));\n        chunks.push(this.lines(-1, '};', ''));\n        return new source_map_1.SourceNode(null, null, this.opts.sourceFileName, lodash_1.default.flattenDeep(chunks));\n    };\n    CodeGenerator.prototype.visitProc = function (node) {\n        var chunks = [];\n        chunks.push(this.lines('{', +1, this.generateLoc(node), \"type: '\" + node.type + \"',\", \"name: '\" + node.name + \"',\", \"localSymbols: \" + JSON.stringify(node.localSymbols) + \",\", \"paramSymbols: \" + JSON.stringify(node.paramSymbols) + \",\", 'stmts: [', '', +1), this.visitStmts(node.stmts), this.lines(-1, '],', -1, '},', ''));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitStmts = function (stmts) {\n        var origOpenForStmtStatesLength = this.openForStmtStates.length;\n        var sourceNodes = this.acceptAll(stmts);\n        if (this.openForStmtStates.length > origOpenForStmtStatesLength) {\n            this.throwError('FOR statement without corresponding NEXT statement', this.openForStmtStates[this.openForStmtStates.length - 1].forStmt);\n        }\n        return sourceNodes;\n    };\n    CodeGenerator.prototype.visitLabelStmt = function (node) {\n        return this.createSourceNode(node, this.generateLabelStmt(node, node.label));\n    };\n    CodeGenerator.prototype.visitDimStmt = function (node) {\n        var _this = this;\n        var chunks = [];\n        for (var _i = 0, _a = node.varDecls; _i < _a.length; _i++) {\n            var varDecl = _a[_i];\n            var typeExpr = varDecl.typeExpr;\n            var typeSpec = varDecl.symbol.typeSpec;\n            switch (typeExpr.type) {\n                case ast_1.DataTypeExprType.ARRAY:\n                    if (!types_1.isArray(typeSpec)) {\n                        this.throwError(\"Mismatch types: expected array, got \" + typeSpec.type, varDecl);\n                    }\n                    if (node.dimType === ast_1.DimType.SHARED &&\n                        typeExpr.dimensionSpecExprs.length === 0) {\n                        // SHARED statement only indicating scoping.\n                        continue;\n                    }\n                    chunks.push.apply(chunks, __spreadArray(__spreadArray([this.generateVarRefCode(varDecl, varDecl.symbol),\n                        '.init(',\n                        JSON.stringify(typeSpec.elementTypeSpec),\n                        ', ['], typeExpr.dimensionSpecExprs.map(function (_a) {\n                        var minIdxExpr = _a.minIdxExpr, maxIdxExpr = _a.maxIdxExpr;\n                        return [\n                            '[',\n                            minIdxExpr ? _this.accept(minIdxExpr) : '0',\n                            ', ',\n                            _this.accept(maxIdxExpr),\n                            '],',\n                        ];\n                    })), [']); ']));\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (chunks.length > 0) {\n            return this.createStmtSourceNode(node, function () { return chunks; });\n        }\n        else {\n            return new source_map_1.SourceNode();\n        }\n    };\n    CodeGenerator.prototype.visitAssignStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            return [\n                _this.accept(node.targetExpr),\n                ' = ',\n                _this.generateAssignableValueCode(node.valueExpr, node.targetExpr.typeSpec),\n                ';',\n            ];\n        });\n    };\n    CodeGenerator.prototype.visitConstStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray([], lodash_1.default.flatMap(node.constDefs, function (constDef) { return [\n            _this.generateVarRefCode(constDef, constDef.symbol) + \" = \",\n            _this.accept(constDef.valueExpr),\n            '; ',\n        ]; })); });\n    };\n    CodeGenerator.prototype.visitGotoStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(node.destLabel);\n        });\n    };\n    CodeGenerator.prototype.visitIfStmt = function (node) {\n        var _this = this;\n        return this.visitCondStmt(node, this.generateLabel(), function (ifBranch) { return _this.accept(ifBranch.condExpr); });\n    };\n    CodeGenerator.prototype.visitSelectStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var testValue = this.generateTempVarRef(labelPrefix + \"_test\");\n        return this.createSourceNode(node, this.createStmtSourceNode(node, function () { return [\n            testValue + \" = \",\n            _this.accept(node.testExpr),\n            ';',\n        ]; }), this.visitCondStmt(node, labelPrefix, function (caseBranch) {\n            var chunks = [];\n            for (var i = 0; i < caseBranch.condExprs.length; ++i) {\n                var condExpr = caseBranch.condExprs[i];\n                if (i > 0) {\n                    chunks.push(' || ');\n                }\n                switch (condExpr.type) {\n                    case ast_1.CaseExprType.VALUE:\n                        chunks.push(testValue + \" === \", _this.accept(condExpr.valueExpr));\n                        break;\n                    case ast_1.CaseExprType.RANGE:\n                        chunks.push(\"(\" + testValue + \" >= \", _this.accept(condExpr.lowerBoundExpr), \" && \" + testValue + \" <= \", _this.accept(condExpr.upperBoundExpr), ')');\n                        break;\n                    case ast_1.CaseExprType.COMP:\n                        chunks.push(testValue + \" \" + BINARY_OP_MAP[condExpr.op] + \" \", _this.accept(condExpr.rightExpr));\n                        break;\n                    default:\n                        _this.throwError(\"Unknown case expression type: \" + JSON.stringify(condExpr), node);\n                }\n            }\n            return chunks;\n        }), this.createStmtSourceNode(node, function () { return \"delete \" + testValue + \";\"; }));\n    };\n    CodeGenerator.prototype.visitCondStmt = function (node, labelPrefix, generateCondExprCode) {\n        var _this = this;\n        // Generate labels for each \"elseif\" branch, the else branch, and the \"end if\".\n        var branchLabels = [];\n        for (var i = 1; i < node.ifBranches.length; ++i) {\n            branchLabels.push({\n                node: node.ifBranches[i],\n                label: labelPrefix + \"_elif\" + i,\n            });\n        }\n        if (node.elseBranch && node.elseBranch.stmts.length > 0) {\n            branchLabels.push({\n                node: node.elseBranch,\n                label: labelPrefix + \"_else\",\n            });\n        }\n        var endIfLabel = labelPrefix + \"_endif\";\n        branchLabels.push({ node: null, label: endIfLabel });\n        var chunks = [];\n        var nextBranchLabelIdx = 0;\n        var _loop_1 = function (ifBranch) {\n            var _b = branchLabels[nextBranchLabelIdx], nextBranchNode = _b.node, nextBranchLabel = _b.label;\n            chunks.push(this_1.createStmtSourceNode(ifBranch, function () {\n                return lodash_1.default.flattenDeep([\n                    'if (!(',\n                    generateCondExprCode(ifBranch),\n                    \")) { \" + _this.generateGotoCode(nextBranchLabel) + \" }\",\n                ]);\n            }));\n            ++this_1.indent;\n            chunks.push(this_1.visitStmts(ifBranch.stmts));\n            if (nextBranchLabelIdx < branchLabels.length - 1) {\n                chunks.push(this_1.createStmtSourceNode(ifBranch, function () {\n                    return _this.generateGotoCode(endIfLabel);\n                }));\n            }\n            --this_1.indent;\n            chunks.push(this_1.generateLabelStmt(nextBranchNode, nextBranchLabel));\n            ++nextBranchLabelIdx;\n        };\n        var this_1 = this;\n        // Generate code for \"if\" and \"elseif\" branches.\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var ifBranch = _a[_i];\n            _loop_1(ifBranch);\n        }\n        // Generate code for \"else\" branch.\n        if (node.elseBranch && node.elseBranch.stmts.length > 0) {\n            ++this.indent;\n            chunks.push(this.visitStmts(node.elseBranch.stmts));\n            --this.indent;\n            chunks.push(this.generateLabelStmt(null, endIfLabel));\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitCondLoopStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var loopStartLabel = labelPrefix + \"_loopStart\";\n        var loopEndLabel = labelPrefix + \"_loopEnd\";\n        var cond = node.isCondNegated\n            ? [this.accept(node.condExpr)]\n            : ['!(', this.accept(node.condExpr), ')'];\n        var condStmt = this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([\n            'if ('\n        ], cond), [\n            \") { \" + _this.generateGotoCode(loopEndLabel) + \" }\",\n        ]); });\n        ++this.indent;\n        this.openLoopStmtStates.push({\n            loopStmt: node,\n            endLabel: loopEndLabel,\n        });\n        var stmts = this.visitStmts(node.stmts);\n        this.openLoopStmtStates.pop();\n        --this.indent;\n        var chunks = [];\n        chunks.push(this.generateLabelStmt(node, loopStartLabel));\n        switch (node.structure) {\n            case ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS:\n                chunks.push(condStmt, stmts);\n                break;\n            case ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS:\n                chunks.push(stmts, condStmt);\n                break;\n            default:\n                this.throwError(\"Unexpected loop structure: \" + JSON.stringify(node), node);\n        }\n        chunks.push(this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(loopStartLabel);\n        }), this.generateLabelStmt(node, loopEndLabel));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitUncondLoopStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var loopStartLabel = labelPrefix + \"_loopStart\";\n        var loopEndLabel = labelPrefix + \"_loopEnd\";\n        var chunks = [];\n        chunks.push(this.generateLabelStmt(node, loopStartLabel));\n        ++this.indent;\n        this.openLoopStmtStates.push({\n            loopStmt: node,\n            endLabel: loopEndLabel,\n        });\n        chunks.push(this.visitStmts(node.stmts));\n        this.openLoopStmtStates.pop();\n        --this.indent;\n        chunks.push(this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(loopStartLabel);\n        }), this.generateLabelStmt(node, loopEndLabel));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitExitLoopStmt = function (node) {\n        var _this = this;\n        if (this.openLoopStmtStates.length === 0) {\n            this.throwError(\"EXIT DO statement outside DO loop\", node);\n        }\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(_this.openLoopStmtStates[_this.openLoopStmtStates.length - 1].endLabel);\n        });\n    };\n    CodeGenerator.prototype.visitForStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var startLabel = labelPrefix + \"_loopStart\";\n        var endLabel = labelPrefix + \"_loopEnd\";\n        var stepValue = this.generateTempVarRef(labelPrefix + \"_step\");\n        var endValue = this.generateTempVarRef(labelPrefix + \"_end\");\n        this.openForStmtStates.push({\n            forStmt: node,\n            startLabel: startLabel,\n            endLabel: endLabel,\n            stepValue: stepValue,\n            endValue: endValue,\n        });\n        var chunks = [];\n        chunks.push(this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray(__spreadArray([], [\n            _this.accept(node.counterExpr),\n            ' = ',\n            _this.accept(node.startExpr),\n            '; ',\n        ]), [\n            stepValue + \" = \",\n            node.stepExpr ? _this.accept(node.stepExpr) : '1',\n            '; ',\n        ]), [endValue + \" = \", _this.accept(node.endExpr), ';']); }), this.generateLabelStmt(node, startLabel));\n        ++this.indent;\n        chunks.push(this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([], [\"const counterValue = \", _this.accept(node.counterExpr), '; ']), [\n            'if (',\n            \"(\" + stepValue + \" >= 0 && counterValue > \" + endValue + \") || \",\n            \"(\" + stepValue + \" < 0 && counterValue < \" + endValue + \")\",\n            \") { \" + _this.generateGotoCode(endLabel) + \" }\",\n        ]); }));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitNextStmt = function (node) {\n        var _this = this;\n        // Determine how many open FOR statements this NEXT statement will close.\n        var numForStmtStatesToClose = node.counterExprs.length || 1;\n        if (numForStmtStatesToClose > this.openForStmtStates.length) {\n            this.throwError(\"NEXT statement without corresponding FOR statement\", node);\n        }\n        // Verify that the counter expressions match the corresponding FOR statements.\n        for (var i = 0; i < node.counterExprs.length; ++i) {\n            var nextCounterExprString = this.accept(node.counterExprs[i]).toString();\n            var forStmt = this.openForStmtStates[this.openForStmtStates.length - 1 - i].forStmt;\n            var forStmtCounterExprString = this.accept(forStmt.counterExpr).toString();\n            if (nextCounterExprString !== forStmtCounterExprString) {\n                this.throwError(\"Counter #\" + (i + 1) + \" does not match corresponding FOR statement\", node);\n            }\n        }\n        // Generate code.\n        var chunks = [];\n        var _loop_2 = function (i) {\n            var _a = this_2.openForStmtStates.pop(), forStmt = _a.forStmt, startLabel = _a.startLabel, endLabel = _a.endLabel, stepValue = _a.stepValue, endValue = _a.endValue;\n            chunks.push(this_2.createStmtSourceNode(node, function () { return [\n                _this.accept(forStmt.counterExpr),\n                \" += \" + stepValue + \"; \",\n                _this.generateGotoCode(startLabel),\n            ]; }));\n            --this_2.indent;\n            chunks.push(this_2.generateLabelStmt(forStmt, endLabel));\n            chunks.push(this_2.createStmtSourceNode(forStmt, function () { return \"delete \" + stepValue + \"; delete \" + endValue + \";\"; }));\n        };\n        var this_2 = this;\n        for (var i = 0; i < numForStmtStatesToClose; ++i) {\n            _loop_2(i);\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitExitForStmt = function (node) {\n        var _this = this;\n        if (this.openForStmtStates.length === 0) {\n            this.throwError(\"EXIT FOR statement outside FOR loop\", node);\n        }\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(_this.openForStmtStates[_this.openForStmtStates.length - 1].endLabel);\n        });\n    };\n    CodeGenerator.prototype.visitGosubStmt = function (node) {\n        return this.createStmtSourceNode(node, function () {\n            return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.GOSUB + \"', destLabel: '\" + node.destLabel + \"' };\";\n        });\n    };\n    CodeGenerator.prototype.visitReturnStmt = function (node) {\n        return this.createStmtSourceNode(node, function () {\n            return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.RETURN + \"'\" + (node.destLabel ? \", destLabel: '\" + node.destLabel + \"'\" : '') + \" };\";\n        });\n    };\n    CodeGenerator.prototype.visitCallStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return [\n            _this.visitProcCall(node),\n            ';',\n        ]; });\n    };\n    CodeGenerator.prototype.visitExitProcStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.EXIT_PROC + \"' };\"; });\n    };\n    CodeGenerator.prototype.visitEndStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.END + \"' };\"; });\n    };\n    CodeGenerator.prototype.visitSwapStmt = function (node) {\n        var _this = this;\n        var tempVarName = this.generateLabel() + \"_temp\";\n        return this.createStmtSourceNode(node, function () { return [\n            _this.generateTempVarRef(tempVarName),\n            ' = ',\n            _this.accept(node.leftExpr),\n            '; ',\n            _this.accept(node.leftExpr),\n            ' = ',\n            _this.accept(node.rightExpr),\n            '; ',\n            _this.accept(node.rightExpr),\n            ' = ',\n            _this.generateTempVarRef(tempVarName),\n            '; ',\n            'delete ',\n            _this.generateTempVarRef(tempVarName),\n            ';',\n        ]; });\n    };\n    CodeGenerator.prototype.visitPrintStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([\n            'await ctx.runtime.print(',\n            node.formatExpr ? _this.accept(node.formatExpr) : 'null',\n            ', '\n        ], node.args.map(function (arg) {\n            return typeof arg === 'string'\n                ? \"{ type: '\" + arg + \"' }, \"\n                : _this.createSourceNode(arg, \"{ type: '\" + compiled_code_1.PrintArgType.VALUE + \"', value: \", _this.accept(arg), ' }, ');\n        })), [\n            ');',\n        ]); });\n    };\n    CodeGenerator.prototype.visitInputStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            switch (node.inputType) {\n                case ast_1.InputType.TOKENIZED:\n                    return __spreadArray([\n                        'const results = await ctx.runtime.input(',\n                        JSON.stringify(node.prompt) + \", \",\n                        node.targetExprs\n                            .map(function (expr) { return JSON.stringify(expr.typeSpec); })\n                            .join(', '),\n                        '); '\n                    ], node.targetExprs.map(function (expr, i) {\n                        return _this.createSourceNode(expr, _this.accept(expr), \" = results[\" + i + \"]; \");\n                    }));\n                case ast_1.InputType.LINE:\n                    return _this.createSourceNode(node.targetExprs[0], _this.accept(node.targetExprs[0]), \" = await ctx.runtime.inputLine(\" + JSON.stringify(node.prompt) + \");\");\n                default:\n                    _this.throwError(\"Unknown input type: \" + JSON.stringify(node.inputType), node);\n            }\n        });\n    };\n    CodeGenerator.prototype.visitDefTypeStmt = function (node) {\n        return new source_map_1.SourceNode();\n    };\n    CodeGenerator.prototype.visitDataStmt = function (node) {\n        return this.createSourceNode(node, this.lines('{', +1, this.generateLoc(node), \"data: \" + JSON.stringify(node.data) + \",\", -1, \"},\", ''));\n    };\n    CodeGenerator.prototype.visitReadStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray([\n            'const results = await ctx.read(',\n            node.targetExprs.map(function (expr) { return JSON.stringify(expr.typeSpec); }).join(', '),\n            '); '\n        ], node.targetExprs.map(function (expr, i) {\n            return _this.createSourceNode(expr, _this.accept(expr), \" = results[\" + i + \"]; \");\n        })); });\n    };\n    CodeGenerator.prototype.visitRestoreStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"ctx.restore(\" + (node.destLabel ? \"'\" + node.destLabel + \"'\" : '') + \");\"; });\n    };\n    CodeGenerator.prototype.createStmtSourceNode = function (node, generateRunCode) {\n        return this.createSourceNode(node, this.lines('{', +1, ''), this.lines(this.generateLoc(node), ''), this.lines('async run(ctx) { '), generateRunCode(), ' },\\n', this.lines(-1, '},', ''));\n    };\n    CodeGenerator.prototype.visitLiteralExpr = function (node) {\n        var valueString;\n        if (typeof node.value === 'string') {\n            valueString = JSON.stringify(node.value);\n        }\n        else if (typeof node.value === 'number') {\n            valueString = \"\" + node.value;\n        }\n        else {\n            this.throwError(\"Unrecognized literal value: \" + JSON.stringify(node.value), node);\n        }\n        return this.createSourceNode(node, valueString);\n    };\n    CodeGenerator.prototype.visitVarRefExpr = function (node) {\n        return this.createSourceNode(node, this.generateVarRefCode(node, node.symbol));\n    };\n    CodeGenerator.prototype.visitFnCallExpr = function (node) {\n        return this.visitProcCall(node);\n    };\n    CodeGenerator.prototype.visitBinaryOpExpr = function (node) {\n        var chunks = [];\n        switch (node.op) {\n            case ast_1.BinaryOp.EXP:\n                chunks.push('Math.pow(', this.accept(node.leftExpr), ', ', this.accept(node.rightExpr), ')');\n                break;\n            case ast_1.BinaryOp.INTDIV:\n                chunks.push('Math.floor(', this.accept(node.leftExpr), ' / ', this.accept(node.rightExpr), ')');\n                break;\n            default:\n                chunks.push('(', this.accept(node.leftExpr), \" \" + BINARY_OP_MAP[node.op] + \" \", this.accept(node.rightExpr), ')');\n                break;\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitUnaryOpExpr = function (node) {\n        var _a;\n        var OP_MAP = (_a = {},\n            _a[ast_1.UnaryOp.NEG] = '-',\n            _a[ast_1.UnaryOp.NOT] = '!',\n            _a[ast_1.UnaryOp.PARENS] = '',\n            _a);\n        return this.createSourceNode(node, '(', OP_MAP[node.op], this.accept(node.rightExpr), ')');\n    };\n    CodeGenerator.prototype.visitSubscriptExpr = function (node) {\n        var _this = this;\n        return this.createSourceNode.apply(this, __spreadArray([node,\n            this.accept(node.arrayExpr),\n            '.values'], node.indexExprs.map(function (indexExpr, i) { return [\n            '[',\n            _this.generateSubscriptCode(node.arrayExpr, i, indexExpr),\n            ']',\n        ]; })));\n    };\n    CodeGenerator.prototype.generateSubscriptCode = function (arrayExpr, dimension, indexExpr) {\n        return [\n            this.accept(arrayExpr),\n            \".getIdx(\" + dimension + \", \",\n            this.accept(indexExpr),\n            ')',\n        ];\n    };\n    CodeGenerator.prototype.visitMemberExpr = function (node) {\n        return this.createSourceNode(node, this.accept(node.udtExpr), \".values['\" + node.fieldName + \"']\");\n    };\n    CodeGenerator.prototype.visitProcCall = function (node) {\n        var _a;\n        var _this = this;\n        var argPtrs = [];\n        var tempVars = [];\n        var tempVarPrefix = null;\n        var tempVarIdx = 0;\n        for (var i = 0; i < node.argExprs.length; ++i) {\n            var argExpr = node.argExprs[i];\n            var _b = node.argTypeProps[i], paramTypeSpec = _b.paramTypeSpec, shouldPassByRef = _b.shouldPassByRef;\n            if (shouldPassByRef) {\n                switch (argExpr.type) {\n                    case ast_1.ExprType.VAR_REF:\n                        argPtrs.push(this.createSourceNode(argExpr, argExpr.symbol.varType === symbol_table_1.VarType.ARG\n                            ? \"ctx.args['\" + argExpr.symbol.name + \"']\"\n                            : \"[\" + this.generateVarContainerCode(argExpr, argExpr.symbol) + \", '\" + argExpr.symbol.name + \"']\"));\n                        break;\n                    case ast_1.ExprType.SUBSCRIPT:\n                        var containerCode = this.accept(__assign(__assign({}, argExpr), { indexExprs: argExpr.indexExprs.slice(0, argExpr.indexExprs.length - 1) }));\n                        var lastIndexExprCode = this.generateSubscriptCode(argExpr.arrayExpr, argExpr.indexExprs.length - 1, argExpr.indexExprs[argExpr.indexExprs.length - 1]);\n                        argPtrs.push(this.createSourceNode(argExpr, '[', containerCode, ', ', lastIndexExprCode, ']'));\n                        break;\n                    case ast_1.ExprType.MEMBER:\n                        argPtrs.push(this.createSourceNode(argExpr, '[', this.accept(argExpr.udtExpr), '.values, ', \"'\" + argExpr.fieldName + \"']\"));\n                        break;\n                    default:\n                        this.throwError(\"Unknown pass-by-reference expression type: \" + JSON.stringify(argExpr), argExpr);\n                }\n            }\n            else {\n                if (!tempVarPrefix) {\n                    tempVarPrefix = this.generateLabel();\n                }\n                var tempVarName = tempVarPrefix + \"_\" + tempVarIdx++;\n                tempVars.push({\n                    name: tempVarName,\n                    argExpr: argExpr,\n                    paramTypeSpec: paramTypeSpec,\n                });\n                argPtrs.push(\"[ctx.tempVars, '\" + tempVarName + \"']\");\n            }\n        }\n        var executeProcCodePrefixMap = (_a = {},\n            _a[types_1.ProcDefType.BUILTIN] = 'ctx.runtime.executeBuiltinProc(' +\n                (\"'\" + node.name + \"', \" + JSON.stringify(node.argExprs.map(function (_a) {\n                    var typeSpec = _a.typeSpec;\n                    return typeSpec;\n                }))),\n            _a[types_1.ProcDefType.MODULE] = \"ctx.executeProc(ctx, '\" + node.name + \"'\",\n            _a);\n        return this.createSourceNode.apply(this, __spreadArray(__spreadArray([node,\n            '(await (async () => {\\n',\n            this.lines(+1)], tempVars.map(function (_a) {\n            var name = _a.name, argExpr = _a.argExpr, paramTypeSpec = _a.paramTypeSpec;\n            return [\n                _this.lines(_this.generateTempVarRef(name) + \" = \"),\n                _this.generateAssignableValueCode(argExpr, paramTypeSpec),\n                ';\\n',\n            ];\n        })), [this.lines.apply(this, __spreadArray(__spreadArray([\"const result = await \" + executeProcCodePrefixMap[node.procDefType] + \", \" + argPtrs.join(', ') + \");\"], tempVars.map(function (_a) {\n                var name = _a.name;\n                return \"delete \" + _this.generateTempVarRef(name) + \";\";\n            })), ['return result;',\n                -1,\n                '})())']))]));\n    };\n    CodeGenerator.prototype.createSourceNode = function (node) {\n        var chunks = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            chunks[_i - 1] = arguments[_i];\n        }\n        return new source_map_1.SourceNode(node.loc.line, node.loc.col, this.opts.sourceFileName, lodash_1.default.flattenDeep(chunks));\n    };\n    CodeGenerator.prototype.lines = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        var outputLines = [];\n        for (var _a = 0, values_1 = values; _a < values_1.length; _a++) {\n            var value = values_1[_a];\n            if (typeof value === 'string') {\n                var indentStr = value\n                    ? ' '.repeat(this.opts.indentWidth * this.indent)\n                    : '';\n                outputLines.push(indentStr + value);\n            }\n            else if (typeof value === 'number') {\n                this.indent += value;\n            }\n            else {\n                throw new Error(\"Unexpected line value: \" + JSON.stringify(value));\n            }\n        }\n        return outputLines.join('\\n');\n    };\n    CodeGenerator.prototype.generateLabel = function () {\n        return \"$\" + this.nextGeneratedLabelIdx++;\n    };\n    CodeGenerator.prototype.generateLoc = function (node) {\n        return node.loc ? \"loc: [\" + node.loc.line + \", \" + node.loc.col + \"],\" : '';\n    };\n    CodeGenerator.prototype.generateLabelStmt = function (node, label) {\n        return this.lines.apply(this, __spreadArray(__spreadArray(['{',\n            +1], (node ? [this.generateLoc(node)] : [])), [\"label: '\" + label + \"',\", -1, \"},\", '']));\n    };\n    CodeGenerator.prototype.generateVarRefCode = function (node, symbol) {\n        var varContainer = this.generateVarContainerCode(node, symbol);\n        if (symbol.varType === symbol_table_1.VarType.ARG) {\n            return varContainer + \"['\" + symbol.name + \"'][0][\" + varContainer + \"['\" + symbol.name + \"'][1]]\";\n        }\n        else {\n            return varContainer + \"['\" + symbol.name + \"']\";\n        }\n    };\n    CodeGenerator.prototype.generateVarContainerCode = function (node, symbol) {\n        if (symbol.varType === symbol_table_1.VarType.ARG) {\n            return 'ctx.args';\n        }\n        else if (symbol.varScope === symbol_table_1.VarScope.LOCAL) {\n            switch (symbol.varType) {\n                case symbol_table_1.VarType.STATIC_VAR:\n                    return 'ctx.localStaticVars';\n                case symbol_table_1.VarType.VAR:\n                case symbol_table_1.VarType.CONST:\n                    return 'ctx.localVars';\n                default:\n                    this.throwError(\"Unexpected local var type: \" + JSON.stringify(symbol.varType), node);\n            }\n        }\n        else if (symbol.varScope === symbol_table_1.VarScope.GLOBAL) {\n            return 'ctx.globalVars';\n        }\n        else {\n            this.throwError(\"Unknown variable type or scope: \" + JSON.stringify(symbol), node);\n        }\n    };\n    CodeGenerator.prototype.generateAssignableValueCode = function (valueExpr, targetTypeSpec) {\n        var valueTypeSpec = valueExpr.typeSpec;\n        var valueCode = this.accept(valueExpr);\n        if (types_1.isIntegral(targetTypeSpec) && !types_1.isIntegral(valueTypeSpec)) {\n            return ['ctx.runtime.roundHalfToEven(', valueCode, ')'];\n        }\n        else if (types_1.isUdt(targetTypeSpec)) {\n            return [valueCode, '.clone()'];\n        }\n        else {\n            return valueCode;\n        }\n    };\n    CodeGenerator.prototype.generateGotoCode = function (destLabel) {\n        return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.GOTO + \"', destLabel: '\" + destLabel + \"' };\";\n    };\n    CodeGenerator.prototype.generateTempVarRef = function (label) {\n        return \"ctx.tempVars['\" + label + \"']\";\n    };\n    return CodeGenerator;\n}(ast_1.AstVisitor));\nexports.CodeGenerator = CodeGenerator;\nfunction codegen(module, opts) {\n    if (opts === void 0) { opts = {}; }\n    return new CodeGenerator(module, opts).run();\n}\nexports.default = codegen;\n","module.exports = { default: \"/******/ (() => { // webpackBootstrap\\n/******/ \\tvar __webpack_modules__ = ({\\n\\n/***/ 575:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\n\\nconst ansiEscapes = module.exports;\\n// TODO: remove this in the next major version\\nmodule.exports.default = ansiEscapes;\\n\\nconst ESC = '\\\\u001B[';\\nconst OSC = '\\\\u001B]';\\nconst BEL = '\\\\u0007';\\nconst SEP = ';';\\nconst isTerminalApp = process.env.TERM_PROGRAM === 'Apple_Terminal';\\n\\nansiEscapes.cursorTo = (x, y) => {\\n\\tif (typeof x !== 'number') {\\n\\t\\tthrow new TypeError('The `x` argument is required');\\n\\t}\\n\\n\\tif (typeof y !== 'number') {\\n\\t\\treturn ESC + (x + 1) + 'G';\\n\\t}\\n\\n\\treturn ESC + (y + 1) + ';' + (x + 1) + 'H';\\n};\\n\\nansiEscapes.cursorMove = (x, y) => {\\n\\tif (typeof x !== 'number') {\\n\\t\\tthrow new TypeError('The `x` argument is required');\\n\\t}\\n\\n\\tlet ret = '';\\n\\n\\tif (x < 0) {\\n\\t\\tret += ESC + (-x) + 'D';\\n\\t} else if (x > 0) {\\n\\t\\tret += ESC + x + 'C';\\n\\t}\\n\\n\\tif (y < 0) {\\n\\t\\tret += ESC + (-y) + 'A';\\n\\t} else if (y > 0) {\\n\\t\\tret += ESC + y + 'B';\\n\\t}\\n\\n\\treturn ret;\\n};\\n\\nansiEscapes.cursorUp = (count = 1) => ESC + count + 'A';\\nansiEscapes.cursorDown = (count = 1) => ESC + count + 'B';\\nansiEscapes.cursorForward = (count = 1) => ESC + count + 'C';\\nansiEscapes.cursorBackward = (count = 1) => ESC + count + 'D';\\n\\nansiEscapes.cursorLeft = ESC + 'G';\\nansiEscapes.cursorSavePosition = isTerminalApp ? '\\\\u001B7' : ESC + 's';\\nansiEscapes.cursorRestorePosition = isTerminalApp ? '\\\\u001B8' : ESC + 'u';\\nansiEscapes.cursorGetPosition = ESC + '6n';\\nansiEscapes.cursorNextLine = ESC + 'E';\\nansiEscapes.cursorPrevLine = ESC + 'F';\\nansiEscapes.cursorHide = ESC + '?25l';\\nansiEscapes.cursorShow = ESC + '?25h';\\n\\nansiEscapes.eraseLines = count => {\\n\\tlet clear = '';\\n\\n\\tfor (let i = 0; i < count; i++) {\\n\\t\\tclear += ansiEscapes.eraseLine + (i < count - 1 ? ansiEscapes.cursorUp() : '');\\n\\t}\\n\\n\\tif (count) {\\n\\t\\tclear += ansiEscapes.cursorLeft;\\n\\t}\\n\\n\\treturn clear;\\n};\\n\\nansiEscapes.eraseEndLine = ESC + 'K';\\nansiEscapes.eraseStartLine = ESC + '1K';\\nansiEscapes.eraseLine = ESC + '2K';\\nansiEscapes.eraseDown = ESC + 'J';\\nansiEscapes.eraseUp = ESC + '1J';\\nansiEscapes.eraseScreen = ESC + '2J';\\nansiEscapes.scrollUp = ESC + 'S';\\nansiEscapes.scrollDown = ESC + 'T';\\n\\nansiEscapes.clearScreen = '\\\\u001Bc';\\n\\nansiEscapes.clearTerminal = process.platform === 'win32' ?\\n\\t`${ansiEscapes.eraseScreen}${ESC}0f` :\\n\\t// 1. Erases the screen (Only done in case `2` is not supported)\\n\\t// 2. Erases the whole screen including scrollback buffer\\n\\t// 3. Moves cursor to the top-left position\\n\\t// More info: https://www.real-world-systems.com/docs/ANSIcode.html\\n\\t`${ansiEscapes.eraseScreen}${ESC}3J${ESC}H`;\\n\\nansiEscapes.beep = BEL;\\n\\nansiEscapes.link = (text, url) => {\\n\\treturn [\\n\\t\\tOSC,\\n\\t\\t'8',\\n\\t\\tSEP,\\n\\t\\tSEP,\\n\\t\\turl,\\n\\t\\tBEL,\\n\\t\\ttext,\\n\\t\\tOSC,\\n\\t\\t'8',\\n\\t\\tSEP,\\n\\t\\tSEP,\\n\\t\\tBEL\\n\\t].join('');\\n};\\n\\nansiEscapes.image = (buffer, options = {}) => {\\n\\tlet ret = `${OSC}1337;File=inline=1`;\\n\\n\\tif (options.width) {\\n\\t\\tret += `;width=${options.width}`;\\n\\t}\\n\\n\\tif (options.height) {\\n\\t\\tret += `;height=${options.height}`;\\n\\t}\\n\\n\\tif (options.preserveAspectRatio === false) {\\n\\t\\tret += ';preserveAspectRatio=0';\\n\\t}\\n\\n\\treturn ret + ':' + buffer.toString('base64') + BEL;\\n};\\n\\nansiEscapes.iTerm = {\\n\\tsetCwd: (cwd = process.cwd()) => `${OSC}50;CurrentDir=${cwd}${BEL}`,\\n\\n\\tannotation: (message, options = {}) => {\\n\\t\\tlet ret = `${OSC}1337;`;\\n\\n\\t\\tconst hasX = typeof options.x !== 'undefined';\\n\\t\\tconst hasY = typeof options.y !== 'undefined';\\n\\t\\tif ((hasX || hasY) && !(hasX && hasY && typeof options.length !== 'undefined')) {\\n\\t\\t\\tthrow new Error('`x`, `y` and `length` must be defined when `x` or `y` is defined');\\n\\t\\t}\\n\\n\\t\\tmessage = message.replace(/\\\\|/g, '');\\n\\n\\t\\tret += options.isHidden ? 'AddHiddenAnnotation=' : 'AddAnnotation=';\\n\\n\\t\\tif (options.length > 0) {\\n\\t\\t\\tret +=\\n\\t\\t\\t\\t\\t(hasX ?\\n\\t\\t\\t\\t\\t\\t[message, options.length, options.x, options.y] :\\n\\t\\t\\t\\t\\t\\t[options.length, message]).join('|');\\n\\t\\t} else {\\n\\t\\t\\tret += message;\\n\\t\\t}\\n\\n\\t\\treturn ret + BEL;\\n\\t}\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 566:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n/* module decorator */ module = __nccwpck_require__.nmd(module);\\n\\n\\nconst ANSI_BACKGROUND_OFFSET = 10;\\n\\nconst wrapAnsi256 = (offset = 0) => code => `\\\\u001B[${38 + offset};5;${code}m`;\\n\\nconst wrapAnsi16m = (offset = 0) => (red, green, blue) => `\\\\u001B[${38 + offset};2;${red};${green};${blue}m`;\\n\\nfunction assembleStyles() {\\n\\tconst codes = new Map();\\n\\tconst styles = {\\n\\t\\tmodifier: {\\n\\t\\t\\treset: [0, 0],\\n\\t\\t\\t// 21 isn't widely supported and 22 does the same thing\\n\\t\\t\\tbold: [1, 22],\\n\\t\\t\\tdim: [2, 22],\\n\\t\\t\\titalic: [3, 23],\\n\\t\\t\\tunderline: [4, 24],\\n\\t\\t\\toverline: [53, 55],\\n\\t\\t\\tinverse: [7, 27],\\n\\t\\t\\thidden: [8, 28],\\n\\t\\t\\tstrikethrough: [9, 29]\\n\\t\\t},\\n\\t\\tcolor: {\\n\\t\\t\\tblack: [30, 39],\\n\\t\\t\\tred: [31, 39],\\n\\t\\t\\tgreen: [32, 39],\\n\\t\\t\\tyellow: [33, 39],\\n\\t\\t\\tblue: [34, 39],\\n\\t\\t\\tmagenta: [35, 39],\\n\\t\\t\\tcyan: [36, 39],\\n\\t\\t\\twhite: [37, 39],\\n\\n\\t\\t\\t// Bright color\\n\\t\\t\\tblackBright: [90, 39],\\n\\t\\t\\tredBright: [91, 39],\\n\\t\\t\\tgreenBright: [92, 39],\\n\\t\\t\\tyellowBright: [93, 39],\\n\\t\\t\\tblueBright: [94, 39],\\n\\t\\t\\tmagentaBright: [95, 39],\\n\\t\\t\\tcyanBright: [96, 39],\\n\\t\\t\\twhiteBright: [97, 39]\\n\\t\\t},\\n\\t\\tbgColor: {\\n\\t\\t\\tbgBlack: [40, 49],\\n\\t\\t\\tbgRed: [41, 49],\\n\\t\\t\\tbgGreen: [42, 49],\\n\\t\\t\\tbgYellow: [43, 49],\\n\\t\\t\\tbgBlue: [44, 49],\\n\\t\\t\\tbgMagenta: [45, 49],\\n\\t\\t\\tbgCyan: [46, 49],\\n\\t\\t\\tbgWhite: [47, 49],\\n\\n\\t\\t\\t// Bright color\\n\\t\\t\\tbgBlackBright: [100, 49],\\n\\t\\t\\tbgRedBright: [101, 49],\\n\\t\\t\\tbgGreenBright: [102, 49],\\n\\t\\t\\tbgYellowBright: [103, 49],\\n\\t\\t\\tbgBlueBright: [104, 49],\\n\\t\\t\\tbgMagentaBright: [105, 49],\\n\\t\\t\\tbgCyanBright: [106, 49],\\n\\t\\t\\tbgWhiteBright: [107, 49]\\n\\t\\t}\\n\\t};\\n\\n\\t// Alias bright black as gray (and grey)\\n\\tstyles.color.gray = styles.color.blackBright;\\n\\tstyles.bgColor.bgGray = styles.bgColor.bgBlackBright;\\n\\tstyles.color.grey = styles.color.blackBright;\\n\\tstyles.bgColor.bgGrey = styles.bgColor.bgBlackBright;\\n\\n\\tfor (const [groupName, group] of Object.entries(styles)) {\\n\\t\\tfor (const [styleName, style] of Object.entries(group)) {\\n\\t\\t\\tstyles[styleName] = {\\n\\t\\t\\t\\topen: `\\\\u001B[${style[0]}m`,\\n\\t\\t\\t\\tclose: `\\\\u001B[${style[1]}m`\\n\\t\\t\\t};\\n\\n\\t\\t\\tgroup[styleName] = styles[styleName];\\n\\n\\t\\t\\tcodes.set(style[0], style[1]);\\n\\t\\t}\\n\\n\\t\\tObject.defineProperty(styles, groupName, {\\n\\t\\t\\tvalue: group,\\n\\t\\t\\tenumerable: false\\n\\t\\t});\\n\\t}\\n\\n\\tObject.defineProperty(styles, 'codes', {\\n\\t\\tvalue: codes,\\n\\t\\tenumerable: false\\n\\t});\\n\\n\\tstyles.color.close = '\\\\u001B[39m';\\n\\tstyles.bgColor.close = '\\\\u001B[49m';\\n\\n\\tstyles.color.ansi256 = wrapAnsi256();\\n\\tstyles.color.ansi16m = wrapAnsi16m();\\n\\tstyles.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);\\n\\tstyles.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);\\n\\n\\t// From https://github.com/Qix-/color-convert/blob/3f0e0d4e92e235796ccb17f6e85c72094a651f49/conversions.js\\n\\tObject.defineProperties(styles, {\\n\\t\\trgbToAnsi256: {\\n\\t\\t\\tvalue: (red, green, blue) => {\\n\\t\\t\\t\\t// We use the extended greyscale palette here, with the exception of\\n\\t\\t\\t\\t// black and white. normal palette only has 4 greyscale shades.\\n\\t\\t\\t\\tif (red === green && green === blue) {\\n\\t\\t\\t\\t\\tif (red < 8) {\\n\\t\\t\\t\\t\\t\\treturn 16;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (red > 248) {\\n\\t\\t\\t\\t\\t\\treturn 231;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn Math.round(((red - 8) / 247) * 24) + 232;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn 16 +\\n\\t\\t\\t\\t\\t(36 * Math.round(red / 255 * 5)) +\\n\\t\\t\\t\\t\\t(6 * Math.round(green / 255 * 5)) +\\n\\t\\t\\t\\t\\tMath.round(blue / 255 * 5);\\n\\t\\t\\t},\\n\\t\\t\\tenumerable: false\\n\\t\\t},\\n\\t\\thexToRgb: {\\n\\t\\t\\tvalue: hex => {\\n\\t\\t\\t\\tconst matches = /(?<colorString>[a-f\\\\d]{6}|[a-f\\\\d]{3})/i.exec(hex.toString(16));\\n\\t\\t\\t\\tif (!matches) {\\n\\t\\t\\t\\t\\treturn [0, 0, 0];\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tlet {colorString} = matches.groups;\\n\\n\\t\\t\\t\\tif (colorString.length === 3) {\\n\\t\\t\\t\\t\\tcolorString = colorString.split('').map(character => character + character).join('');\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst integer = Number.parseInt(colorString, 16);\\n\\n\\t\\t\\t\\treturn [\\n\\t\\t\\t\\t\\t(integer >> 16) & 0xFF,\\n\\t\\t\\t\\t\\t(integer >> 8) & 0xFF,\\n\\t\\t\\t\\t\\tinteger & 0xFF\\n\\t\\t\\t\\t];\\n\\t\\t\\t},\\n\\t\\t\\tenumerable: false\\n\\t\\t},\\n\\t\\thexToAnsi256: {\\n\\t\\t\\tvalue: hex => styles.rgbToAnsi256(...styles.hexToRgb(hex)),\\n\\t\\t\\tenumerable: false\\n\\t\\t}\\n\\t});\\n\\n\\treturn styles;\\n}\\n\\n// Make the export immutable\\nObject.defineProperty(module, 'exports', {\\n\\tenumerable: true,\\n\\tget: assembleStyles\\n});\\n\\n\\n/***/ }),\\n\\n/***/ 721:\\n/***/ ((module) => {\\n\\nvar hasOwn = Object.prototype.hasOwnProperty;\\nvar toString = Object.prototype.toString;\\n\\nfunction isPlainObject(obj) {\\n\\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval)\\n\\t\\treturn false;\\n\\n\\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\\n\\tvar has_is_property_of_method = hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\\n\\t// Not own constructor property must be Object\\n\\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method)\\n\\t\\treturn false;\\n\\n\\t// Own properties are enumerated firstly, so to speed up,\\n\\t// if last one is own, then all properties are own.\\n\\tvar key;\\n\\tfor ( key in obj ) {}\\n\\n\\treturn key === undefined || hasOwn.call( obj, key );\\n};\\n\\nmodule.exports = function extend() {\\n\\tvar options, name, src, copy, copyIsArray, clone,\\n\\t    target = arguments[0] || {},\\n\\t    i = 1,\\n\\t    length = arguments.length,\\n\\t    deep = false;\\n\\n\\t// Handle a deep copy situation\\n\\tif ( typeof target === \\\"boolean\\\" ) {\\n\\t\\tdeep = target;\\n\\t\\ttarget = arguments[1] || {};\\n\\t\\t// skip the boolean and the target\\n\\t\\ti = 2;\\n\\t}\\n\\n\\t// Handle case when target is a string or something (possible in deep copy)\\n\\tif ( typeof target !== \\\"object\\\" && typeof target !== \\\"function\\\") {\\n\\t\\ttarget = {};\\n\\t}\\n\\n\\tfor ( ; i < length; i++ ) {\\n\\t\\t// Only deal with non-null/undefined values\\n\\t\\tif ( (options = arguments[ i ]) != null ) {\\n\\t\\t\\t// Extend the base object\\n\\t\\t\\tfor ( name in options ) {\\n\\t\\t\\t\\tsrc = target[ name ];\\n\\t\\t\\t\\tcopy = options[ name ];\\n\\n\\t\\t\\t\\t// Prevent never-ending loop\\n\\t\\t\\t\\tif ( target === copy ) {\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// Recurse if we're merging plain objects or arrays\\n\\t\\t\\t\\tif ( deep && copy && ( isPlainObject(copy) || (copyIsArray = Array.isArray(copy)) ) ) {\\n\\t\\t\\t\\t\\tif ( copyIsArray ) {\\n\\t\\t\\t\\t\\t\\tcopyIsArray = false;\\n\\t\\t\\t\\t\\t\\tclone = src && Array.isArray(src) ? src : [];\\n\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tclone = src && isPlainObject(src) ? src : {};\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Never move original objects, clone them\\n\\t\\t\\t\\t\\ttarget[ name ] = extend( deep, clone, copy );\\n\\n\\t\\t\\t\\t// Don't bring in undefined values\\n\\t\\t\\t\\t} else if ( copy !== undefined ) {\\n\\t\\t\\t\\t\\ttarget[ name ] = copy;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t// Return the modified object\\n\\treturn target;\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 357:\\n/***/ (function(module) {\\n\\n(function(root, factory) {\\n  if (typeof define === 'function' && define.amd) {\\n    define([], factory) /* global define */\\n  } else if ( true && module.exports) {\\n    module.exports = factory()\\n  } else {\\n    root.moo = factory()\\n  }\\n}(this, function() {\\n  'use strict';\\n\\n  var hasOwnProperty = Object.prototype.hasOwnProperty\\n  var toString = Object.prototype.toString\\n  var hasSticky = typeof new RegExp().sticky === 'boolean'\\n\\n  /***************************************************************************/\\n\\n  function isRegExp(o) { return o && toString.call(o) === '[object RegExp]' }\\n  function isObject(o) { return o && typeof o === 'object' && !isRegExp(o) && !Array.isArray(o) }\\n\\n  function reEscape(s) {\\n    return s.replace(/[-\\\\/\\\\\\\\^$*+?.()|[\\\\]{}]/g, '\\\\\\\\$&')\\n  }\\n  function reGroups(s) {\\n    var re = new RegExp('|' + s)\\n    return re.exec('').length - 1\\n  }\\n  function reCapture(s) {\\n    return '(' + s + ')'\\n  }\\n  function reUnion(regexps) {\\n    if (!regexps.length) return '(?!)'\\n    var source =  regexps.map(function(s) {\\n      return \\\"(?:\\\" + s + \\\")\\\"\\n    }).join('|')\\n    return \\\"(?:\\\" + source + \\\")\\\"\\n  }\\n\\n  function regexpOrLiteral(obj) {\\n    if (typeof obj === 'string') {\\n      return '(?:' + reEscape(obj) + ')'\\n\\n    } else if (isRegExp(obj)) {\\n      // TODO: consider /u support\\n      if (obj.ignoreCase) throw new Error('RegExp /i flag not allowed')\\n      if (obj.global) throw new Error('RegExp /g flag is implied')\\n      if (obj.sticky) throw new Error('RegExp /y flag is implied')\\n      if (obj.multiline) throw new Error('RegExp /m flag is implied')\\n      return obj.source\\n\\n    } else {\\n      throw new Error('Not a pattern: ' + obj)\\n    }\\n  }\\n\\n  function objectToRules(object) {\\n    var keys = Object.getOwnPropertyNames(object)\\n    var result = []\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      var thing = object[key]\\n      var rules = [].concat(thing)\\n      if (key === 'include') {\\n        for (var j = 0; j < rules.length; j++) {\\n          result.push({include: rules[j]})\\n        }\\n        continue\\n      }\\n      var match = []\\n      rules.forEach(function(rule) {\\n        if (isObject(rule)) {\\n          if (match.length) result.push(ruleOptions(key, match))\\n          result.push(ruleOptions(key, rule))\\n          match = []\\n        } else {\\n          match.push(rule)\\n        }\\n      })\\n      if (match.length) result.push(ruleOptions(key, match))\\n    }\\n    return result\\n  }\\n\\n  function arrayToRules(array) {\\n    var result = []\\n    for (var i = 0; i < array.length; i++) {\\n      var obj = array[i]\\n      if (obj.include) {\\n        var include = [].concat(obj.include)\\n        for (var j = 0; j < include.length; j++) {\\n          result.push({include: include[j]})\\n        }\\n        continue\\n      }\\n      if (!obj.type) {\\n        throw new Error('Rule has no type: ' + JSON.stringify(obj))\\n      }\\n      result.push(ruleOptions(obj.type, obj))\\n    }\\n    return result\\n  }\\n\\n  function ruleOptions(type, obj) {\\n    if (!isObject(obj)) {\\n      obj = { match: obj }\\n    }\\n    if (obj.include) {\\n      throw new Error('Matching rules cannot also include states')\\n    }\\n\\n    // nb. error and fallback imply lineBreaks\\n    var options = {\\n      defaultType: type,\\n      lineBreaks: !!obj.error || !!obj.fallback,\\n      pop: false,\\n      next: null,\\n      push: null,\\n      error: false,\\n      fallback: false,\\n      value: null,\\n      type: null,\\n      shouldThrow: false,\\n    }\\n\\n    // Avoid Object.assign(), so we support IE9+\\n    for (var key in obj) {\\n      if (hasOwnProperty.call(obj, key)) {\\n        options[key] = obj[key]\\n      }\\n    }\\n\\n    // type transform cannot be a string\\n    if (typeof options.type === 'string' && type !== options.type) {\\n      throw new Error(\\\"Type transform cannot be a string (type '\\\" + options.type + \\\"' for token '\\\" + type + \\\"')\\\")\\n    }\\n\\n    // convert to array\\n    var match = options.match\\n    options.match = Array.isArray(match) ? match : match ? [match] : []\\n    options.match.sort(function(a, b) {\\n      return isRegExp(a) && isRegExp(b) ? 0\\n           : isRegExp(b) ? -1 : isRegExp(a) ? +1 : b.length - a.length\\n    })\\n    return options\\n  }\\n\\n  function toRules(spec) {\\n    return Array.isArray(spec) ? arrayToRules(spec) : objectToRules(spec)\\n  }\\n\\n  var defaultErrorRule = ruleOptions('error', {lineBreaks: true, shouldThrow: true})\\n  function compileRules(rules, hasStates) {\\n    var errorRule = null\\n    var fast = Object.create(null)\\n    var fastAllowed = true\\n    var unicodeFlag = null\\n    var groups = []\\n    var parts = []\\n\\n    // If there is a fallback rule, then disable fast matching\\n    for (var i = 0; i < rules.length; i++) {\\n      if (rules[i].fallback) {\\n        fastAllowed = false\\n      }\\n    }\\n\\n    for (var i = 0; i < rules.length; i++) {\\n      var options = rules[i]\\n\\n      if (options.include) {\\n        // all valid inclusions are removed by states() preprocessor\\n        throw new Error('Inheritance is not allowed in stateless lexers')\\n      }\\n\\n      if (options.error || options.fallback) {\\n        // errorRule can only be set once\\n        if (errorRule) {\\n          if (!options.fallback === !errorRule.fallback) {\\n            throw new Error(\\\"Multiple \\\" + (options.fallback ? \\\"fallback\\\" : \\\"error\\\") + \\\" rules not allowed (for token '\\\" + options.defaultType + \\\"')\\\")\\n          } else {\\n            throw new Error(\\\"fallback and error are mutually exclusive (for token '\\\" + options.defaultType + \\\"')\\\")\\n          }\\n        }\\n        errorRule = options\\n      }\\n\\n      var match = options.match.slice()\\n      if (fastAllowed) {\\n        while (match.length && typeof match[0] === 'string' && match[0].length === 1) {\\n          var word = match.shift()\\n          fast[word.charCodeAt(0)] = options\\n        }\\n      }\\n\\n      // Warn about inappropriate state-switching options\\n      if (options.pop || options.push || options.next) {\\n        if (!hasStates) {\\n          throw new Error(\\\"State-switching options are not allowed in stateless lexers (for token '\\\" + options.defaultType + \\\"')\\\")\\n        }\\n        if (options.fallback) {\\n          throw new Error(\\\"State-switching options are not allowed on fallback tokens (for token '\\\" + options.defaultType + \\\"')\\\")\\n        }\\n      }\\n\\n      // Only rules with a .match are included in the RegExp\\n      if (match.length === 0) {\\n        continue\\n      }\\n      fastAllowed = false\\n\\n      groups.push(options)\\n\\n      // Check unicode flag is used everywhere or nowhere\\n      for (var j = 0; j < match.length; j++) {\\n        var obj = match[j]\\n        if (!isRegExp(obj)) {\\n          continue\\n        }\\n\\n        if (unicodeFlag === null) {\\n          unicodeFlag = obj.unicode\\n        } else if (unicodeFlag !== obj.unicode && options.fallback === false) {\\n          throw new Error('If one rule is /u then all must be')\\n        }\\n      }\\n\\n      // convert to RegExp\\n      var pat = reUnion(match.map(regexpOrLiteral))\\n\\n      // validate\\n      var regexp = new RegExp(pat)\\n      if (regexp.test(\\\"\\\")) {\\n        throw new Error(\\\"RegExp matches empty string: \\\" + regexp)\\n      }\\n      var groupCount = reGroups(pat)\\n      if (groupCount > 0) {\\n        throw new Error(\\\"RegExp has capture groups: \\\" + regexp + \\\"\\\\nUse (?: … ) instead\\\")\\n      }\\n\\n      // try and detect rules matching newlines\\n      if (!options.lineBreaks && regexp.test('\\\\n')) {\\n        throw new Error('Rule should declare lineBreaks: ' + regexp)\\n      }\\n\\n      // store regex\\n      parts.push(reCapture(pat))\\n    }\\n\\n\\n    // If there's no fallback rule, use the sticky flag so we only look for\\n    // matches at the current index.\\n    //\\n    // If we don't support the sticky flag, then fake it using an irrefutable\\n    // match (i.e. an empty pattern).\\n    var fallbackRule = errorRule && errorRule.fallback\\n    var flags = hasSticky && !fallbackRule ? 'ym' : 'gm'\\n    var suffix = hasSticky || fallbackRule ? '' : '|'\\n\\n    if (unicodeFlag === true) flags += \\\"u\\\"\\n    var combined = new RegExp(reUnion(parts) + suffix, flags)\\n    return {regexp: combined, groups: groups, fast: fast, error: errorRule || defaultErrorRule}\\n  }\\n\\n  function compile(rules) {\\n    var result = compileRules(toRules(rules))\\n    return new Lexer({start: result}, 'start')\\n  }\\n\\n  function checkStateGroup(g, name, map) {\\n    var state = g && (g.push || g.next)\\n    if (state && !map[state]) {\\n      throw new Error(\\\"Missing state '\\\" + state + \\\"' (in token '\\\" + g.defaultType + \\\"' of state '\\\" + name + \\\"')\\\")\\n    }\\n    if (g && g.pop && +g.pop !== 1) {\\n      throw new Error(\\\"pop must be 1 (in token '\\\" + g.defaultType + \\\"' of state '\\\" + name + \\\"')\\\")\\n    }\\n  }\\n  function compileStates(states, start) {\\n    var all = states.$all ? toRules(states.$all) : []\\n    delete states.$all\\n\\n    var keys = Object.getOwnPropertyNames(states)\\n    if (!start) start = keys[0]\\n\\n    var ruleMap = Object.create(null)\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      ruleMap[key] = toRules(states[key]).concat(all)\\n    }\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      var rules = ruleMap[key]\\n      var included = Object.create(null)\\n      for (var j = 0; j < rules.length; j++) {\\n        var rule = rules[j]\\n        if (!rule.include) continue\\n        var splice = [j, 1]\\n        if (rule.include !== key && !included[rule.include]) {\\n          included[rule.include] = true\\n          var newRules = ruleMap[rule.include]\\n          if (!newRules) {\\n            throw new Error(\\\"Cannot include nonexistent state '\\\" + rule.include + \\\"' (in state '\\\" + key + \\\"')\\\")\\n          }\\n          for (var k = 0; k < newRules.length; k++) {\\n            var newRule = newRules[k]\\n            if (rules.indexOf(newRule) !== -1) continue\\n            splice.push(newRule)\\n          }\\n        }\\n        rules.splice.apply(rules, splice)\\n        j--\\n      }\\n    }\\n\\n    var map = Object.create(null)\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      map[key] = compileRules(ruleMap[key], true)\\n    }\\n\\n    for (var i = 0; i < keys.length; i++) {\\n      var name = keys[i]\\n      var state = map[name]\\n      var groups = state.groups\\n      for (var j = 0; j < groups.length; j++) {\\n        checkStateGroup(groups[j], name, map)\\n      }\\n      var fastKeys = Object.getOwnPropertyNames(state.fast)\\n      for (var j = 0; j < fastKeys.length; j++) {\\n        checkStateGroup(state.fast[fastKeys[j]], name, map)\\n      }\\n    }\\n\\n    return new Lexer(map, start)\\n  }\\n\\n  function keywordTransform(map) {\\n    var reverseMap = Object.create(null)\\n    var byLength = Object.create(null)\\n    var types = Object.getOwnPropertyNames(map)\\n    for (var i = 0; i < types.length; i++) {\\n      var tokenType = types[i]\\n      var item = map[tokenType]\\n      var keywordList = Array.isArray(item) ? item : [item]\\n      keywordList.forEach(function(keyword) {\\n        (byLength[keyword.length] = byLength[keyword.length] || []).push(keyword)\\n        if (typeof keyword !== 'string') {\\n          throw new Error(\\\"keyword must be string (in keyword '\\\" + tokenType + \\\"')\\\")\\n        }\\n        reverseMap[keyword] = tokenType\\n      })\\n    }\\n\\n    // fast string lookup\\n    // https://jsperf.com/string-lookups\\n    function str(x) { return JSON.stringify(x) }\\n    var source = ''\\n    source += 'switch (value.length) {\\\\n'\\n    for (var length in byLength) {\\n      var keywords = byLength[length]\\n      source += 'case ' + length + ':\\\\n'\\n      source += 'switch (value) {\\\\n'\\n      keywords.forEach(function(keyword) {\\n        var tokenType = reverseMap[keyword]\\n        source += 'case ' + str(keyword) + ': return ' + str(tokenType) + '\\\\n'\\n      })\\n      source += '}\\\\n'\\n    }\\n    source += '}\\\\n'\\n    return Function('value', source) // type\\n  }\\n\\n  /***************************************************************************/\\n\\n  var Lexer = function(states, state) {\\n    this.startState = state\\n    this.states = states\\n    this.buffer = ''\\n    this.stack = []\\n    this.reset()\\n  }\\n\\n  Lexer.prototype.reset = function(data, info) {\\n    this.buffer = data || ''\\n    this.index = 0\\n    this.line = info ? info.line : 1\\n    this.col = info ? info.col : 1\\n    this.queuedToken = info ? info.queuedToken : null\\n    this.queuedThrow = info ? info.queuedThrow : null\\n    this.setState(info ? info.state : this.startState)\\n    this.stack = info && info.stack ? info.stack.slice() : []\\n    return this\\n  }\\n\\n  Lexer.prototype.save = function() {\\n    return {\\n      line: this.line,\\n      col: this.col,\\n      state: this.state,\\n      stack: this.stack.slice(),\\n      queuedToken: this.queuedToken,\\n      queuedThrow: this.queuedThrow,\\n    }\\n  }\\n\\n  Lexer.prototype.setState = function(state) {\\n    if (!state || this.state === state) return\\n    this.state = state\\n    var info = this.states[state]\\n    this.groups = info.groups\\n    this.error = info.error\\n    this.re = info.regexp\\n    this.fast = info.fast\\n  }\\n\\n  Lexer.prototype.popState = function() {\\n    this.setState(this.stack.pop())\\n  }\\n\\n  Lexer.prototype.pushState = function(state) {\\n    this.stack.push(this.state)\\n    this.setState(state)\\n  }\\n\\n  var eat = hasSticky ? function(re, buffer) { // assume re is /y\\n    return re.exec(buffer)\\n  } : function(re, buffer) { // assume re is /g\\n    var match = re.exec(buffer)\\n    // will always match, since we used the |(?:) trick\\n    if (match[0].length === 0) {\\n      return null\\n    }\\n    return match\\n  }\\n\\n  Lexer.prototype._getGroup = function(match) {\\n    var groupCount = this.groups.length\\n    for (var i = 0; i < groupCount; i++) {\\n      if (match[i + 1] !== undefined) {\\n        return this.groups[i]\\n      }\\n    }\\n    throw new Error('Cannot find token type for matched text')\\n  }\\n\\n  function tokenToString() {\\n    return this.value\\n  }\\n\\n  Lexer.prototype.next = function() {\\n    var index = this.index\\n\\n    // If a fallback token matched, we don't need to re-run the RegExp\\n    if (this.queuedGroup) {\\n      var token = this._token(this.queuedGroup, this.queuedText, index)\\n      this.queuedGroup = null\\n      this.queuedText = \\\"\\\"\\n      return token\\n    }\\n\\n    var buffer = this.buffer\\n    if (index === buffer.length) {\\n      return // EOF\\n    }\\n\\n    // Fast matching for single characters\\n    var group = this.fast[buffer.charCodeAt(index)]\\n    if (group) {\\n      return this._token(group, buffer.charAt(index), index)\\n    }\\n\\n    // Execute RegExp\\n    var re = this.re\\n    re.lastIndex = index\\n    var match = eat(re, buffer)\\n\\n    // Error tokens match the remaining buffer\\n    var error = this.error\\n    if (match == null) {\\n      return this._token(error, buffer.slice(index, buffer.length), index)\\n    }\\n\\n    var group = this._getGroup(match)\\n    var text = match[0]\\n\\n    if (error.fallback && match.index !== index) {\\n      this.queuedGroup = group\\n      this.queuedText = text\\n\\n      // Fallback tokens contain the unmatched portion of the buffer\\n      return this._token(error, buffer.slice(index, match.index), index)\\n    }\\n\\n    return this._token(group, text, index)\\n  }\\n\\n  Lexer.prototype._token = function(group, text, offset) {\\n    // count line breaks\\n    var lineBreaks = 0\\n    if (group.lineBreaks) {\\n      var matchNL = /\\\\n/g\\n      var nl = 1\\n      if (text === '\\\\n') {\\n        lineBreaks = 1\\n      } else {\\n        while (matchNL.exec(text)) { lineBreaks++; nl = matchNL.lastIndex }\\n      }\\n    }\\n\\n    var token = {\\n      type: (typeof group.type === 'function' && group.type(text)) || group.defaultType,\\n      value: typeof group.value === 'function' ? group.value(text) : text,\\n      text: text,\\n      toString: tokenToString,\\n      offset: offset,\\n      lineBreaks: lineBreaks,\\n      line: this.line,\\n      col: this.col,\\n    }\\n    // nb. adding more props to token object will make V8 sad!\\n\\n    var size = text.length\\n    this.index += size\\n    this.line += lineBreaks\\n    if (lineBreaks !== 0) {\\n      this.col = size - nl + 1\\n    } else {\\n      this.col += size\\n    }\\n\\n    // throw, if no rule with {error: true}\\n    if (group.shouldThrow) {\\n      throw new Error(this.formatError(token, \\\"invalid syntax\\\"))\\n    }\\n\\n    if (group.pop) this.popState()\\n    else if (group.push) this.pushState(group.push)\\n    else if (group.next) this.setState(group.next)\\n\\n    return token\\n  }\\n\\n  if (typeof Symbol !== 'undefined' && Symbol.iterator) {\\n    var LexerIterator = function(lexer) {\\n      this.lexer = lexer\\n    }\\n\\n    LexerIterator.prototype.next = function() {\\n      var token = this.lexer.next()\\n      return {value: token, done: !token}\\n    }\\n\\n    LexerIterator.prototype[Symbol.iterator] = function() {\\n      return this\\n    }\\n\\n    Lexer.prototype[Symbol.iterator] = function() {\\n      return new LexerIterator(this)\\n    }\\n  }\\n\\n  Lexer.prototype.formatError = function(token, message) {\\n    if (token == null) {\\n      // An undefined token indicates EOF\\n      var text = this.buffer.slice(this.index)\\n      var token = {\\n        text: text,\\n        offset: this.index,\\n        lineBreaks: text.indexOf('\\\\n') === -1 ? 0 : 1,\\n        line: this.line,\\n        col: this.col,\\n      }\\n    }\\n    var start = Math.max(0, token.offset - token.col + 1)\\n    var eol = token.lineBreaks ? token.text.indexOf('\\\\n') : token.text.length\\n    var firstLine = this.buffer.substring(start, token.offset + eol)\\n    message += \\\" at line \\\" + token.line + \\\" col \\\" + token.col + \\\":\\\\n\\\\n\\\"\\n    message += \\\"  \\\" + firstLine + \\\"\\\\n\\\"\\n    message += \\\"  \\\" + Array(token.col).join(\\\" \\\") + \\\"^\\\"\\n    return message\\n  }\\n\\n  Lexer.prototype.clone = function() {\\n    return new Lexer(this.states, this.state)\\n  }\\n\\n  Lexer.prototype.has = function(tokenType) {\\n    return true\\n  }\\n\\n\\n  return {\\n    compile: compile,\\n    states: compileStates,\\n    error: Object.freeze({error: true}),\\n    fallback: Object.freeze({fallback: true}),\\n    keywords: keywordTransform,\\n  }\\n\\n}));\\n\\n\\n/***/ }),\\n\\n/***/ 7:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n/* module decorator */ module = __nccwpck_require__.nmd(module);\\n\\n\\nvar Module = __nccwpck_require__(282);\\nvar path = __nccwpck_require__(622);\\n\\nmodule.exports = function requireFromString(code, filename, opts) {\\n\\tif (typeof filename === 'object') {\\n\\t\\topts = filename;\\n\\t\\tfilename = undefined;\\n\\t}\\n\\n\\topts = opts || {};\\n\\tfilename = filename || '';\\n\\n\\topts.appendPaths = opts.appendPaths || [];\\n\\topts.prependPaths = opts.prependPaths || [];\\n\\n\\tif (typeof code !== 'string') {\\n\\t\\tthrow new Error('code must be a string, not ' + typeof code);\\n\\t}\\n\\n\\tvar paths = Module._nodeModulePaths(path.dirname(filename));\\n\\n\\tvar parent = module.parent;\\n\\tvar m = new Module(filename, parent);\\n\\tm.filename = filename;\\n\\tm.paths = [].concat(opts.prependPaths).concat(paths).concat(opts.appendPaths);\\n\\tm._compile(code, filename);\\n\\n\\tvar exports = m.exports;\\n\\tparent && parent.children && parent.children.splice(parent.children.indexOf(m), 1);\\n\\n\\treturn exports;\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 770:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\nvar extend = __nccwpck_require__(721);\\r\\n\\r\\nvar singlebyte = function(){\\r\\n   /* jshint indent: false */\\r\\n   if(!( this instanceof singlebyte )){\\r\\n      return new singlebyte();\\r\\n   }\\r\\n\\r\\n   this.encodings = [];\\r\\n\\r\\n   // CP437\\r\\n   this.learnEncoding('cp437', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xA2,   0xA3,   0xA5,  0x20A7, 0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,  0x2310,  0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x3B1,  0x3B2,  0x393,  0x3C0,  0x3A3,  0x3C3,  0x3BC,  0x3C4,\\r\\n      0x3A6,  0x398,  0x3A9,  0x3B4,  0x221E, 0x3C6,  0x3B5,  0x2229,\\r\\n      0x2261,  0xB1,  0x2265, 0x2264, 0x2320, 0x2321,  0xF7,  0x2248,\\r\\n      0xB0,   0x2219,  0xB7,  0x221A, 0x207F,  0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP850\\r\\n   this.learnEncoding('cp850', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xF8,   0xA3,   0xD8,   0xD7,  0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,   0xAE,   0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524,  0xC1,   0xC2,   0xC0,\\r\\n       0xA9,  0x2563, 0x2551, 0x2557, 0x255D,  0xA2,   0xA5,  0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C,  0xE3,   0xC3,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C,  0xA4,\\r\\n       0xF0,   0xD0,   0xCA,   0xCB,   0xC8,  0x131,   0xCD,   0xCE,\\r\\n       0xCF,  0x2518, 0x250C, 0x2588, 0x2584,  0xA6,   0xCC,  0x2580,\\r\\n       0xD3,   0xDF,   0xD4,   0xD2,   0xF5,   0xD5,   0xB5,   0xFE,\\r\\n       0xDE,   0xDA,   0xDB,   0xD9,   0xFD,   0xDD,   0xAF,   0xB4,\\r\\n       0xAD,   0xB1,  0x2017,  0xBE,   0xB6,   0xA7,   0xF7,   0xB8,\\r\\n       0xB0,   0xA8,   0xB7,   0xB9,   0xB3,   0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP858\\r\\n   this.learnEncoding('cp858', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xF8,   0xA3,   0xD8,   0xD7,  0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,   0xAE,   0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524,  0xC1,   0xC2,   0xC0,\\r\\n       0xA9,  0x2563, 0x2551, 0x2557, 0x255D,  0xA2,   0xA5,  0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C,  0xE3,   0xC3,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C,  0xA4,\\r\\n       0xF0,   0xD0,   0xCA,   0xCB,   0xC8,  0x20AC,   0xCD,   0xCE,\\r\\n       0xCF,  0x2518, 0x250C, 0x2588, 0x2584,  0xA6,   0xCC,  0x2580,\\r\\n       0xD3,   0xDF,   0xD4,   0xD2,   0xF5,   0xD5,   0xB5,   0xFE,\\r\\n       0xDE,   0xDA,   0xDB,   0xD9,   0xFD,   0xDD,   0xAF,   0xB4,\\r\\n       0xAD,   0xB1,  0x2017,  0xBE,   0xB6,   0xA7,   0xF7,   0xB8,\\r\\n       0xB0,   0xA8,   0xB7,   0xB9,   0xB3,   0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP808\\r\\n   this.learnEncoding('cp808', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x404,  0x454,  0x407,  0x457,  0x40E,  0x45E,\\r\\n       0xB0,  0x2219,  0xB7,  0x221A, 0x2116, 0x20AC, 0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP866\\r\\n   this.learnEncoding('cp866', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x404,  0x454,  0x407,  0x457,  0x40E,  0x45E,\\r\\n       0xB0,  0x2219,  0xB7,  0x221A, 0x2116,  0xA4,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP1125\\r\\n   this.learnEncoding('cp1125', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x490,  0x491,  0x404,  0x454,  0x406,  0x456,\\r\\n      0x407,  0x457,   0xB7,  0x221A, 0x2116,  0xA4,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // KOI8-R\\r\\n   this.learnEncoding('koi8-r', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x2553, 0x2554, 0x2555, 0x2556,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x255C, 0x255D, 0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x2562, 0x2563, 0x2564, 0x2565,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x256B, 0x256C,  0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // KOI8-U\\r\\n   this.learnEncoding('koi8-u', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x454,  0x2554, 0x456,  0x457,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x491,  0x255D, 0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x404,  0x2563, 0x406,  0x407,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x490,  0x256C,  0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // KOI8-RU\\r\\n   this.learnEncoding('koi8-ru', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x454,  0x2554, 0x456,  0x457,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x491,  0x45E,  0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x404,  0x2563, 0x406,  0x407,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x490,  0x40E,   0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // LATIN-1 aka ISO 8859-1 (Western European)\\r\\n   this.learnEncoding('latin-1', this.extendASCII([\\r\\n      0x80, 0x81, 0x82, 0x83, 0x84, 0x85, 0x86, 0x87,\\r\\n      0x88, 0x89, 0x8A, 0x8B, 0x8C, 0x8D, 0x8E, 0x8F,\\r\\n      0x90, 0x91, 0x92, 0x93, 0x94, 0x95, 0x96, 0x97,\\r\\n      0x98, 0x99, 0x9A, 0x9B, 0x9C, 0x9D, 0x9E, 0x9F,\\r\\n      0xA0, 0xA1, 0xA2, 0xA3, 0xA4, 0xA5, 0xA6, 0xA7,\\r\\n      0xA8, 0xA9, 0xAA, 0xAB, 0xAC, 0xAD, 0xAE, 0xAF,\\r\\n      0xB0, 0xB1, 0xB2, 0xB3, 0xB4, 0xB5, 0xB6, 0xB7,\\r\\n      0xB8, 0xB9, 0xBA, 0xBB, 0xBC, 0xBD, 0xBE, 0xBF,\\r\\n      0xC0, 0xC1, 0xC2, 0xC3, 0xC4, 0xC5, 0xC6, 0xC7,\\r\\n      0xC8, 0xC9, 0xCA, 0xCB, 0xCC, 0xCD, 0xCE, 0xCF,\\r\\n      0xD0, 0xD1, 0xD2, 0xD3, 0xD4, 0xD5, 0xD6, 0xD7,\\r\\n      0xD8, 0xD9, 0xDA, 0xDB, 0xDC, 0xDD, 0xDE, 0xDF,\\r\\n      0xE0, 0xE1, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6, 0xE7,\\r\\n      0xE8, 0xE9, 0xEA, 0xEB, 0xEC, 0xED, 0xEE, 0xEF,\\r\\n      0xF0, 0xF1, 0xF2, 0xF3, 0xF4, 0xF5, 0xF6, 0xF7,\\r\\n      0xF8, 0xF9, 0xFA, 0xFB, 0xFC, 0xFD, 0xFE, 0xFF\\r\\n   ]));\\r\\n\\r\\n   // Windows-1252\\r\\n   this.learnEncoding('cp1252', this.extendASCII([\\r\\n      0x20AC,  0x81,  0x201A, 0x192,  0x201E, 0x2026, 0x2020, 0x2021,\\r\\n      0x2C6,  0x2030, 0x160,  0x2039, 0x152,   0x8D,  0x017D,  0x8F,\\r\\n       0x90,  0x2018, 0x2019, 0x201C, 0x201D, 0x2022, 0x2013, 0x2014,\\r\\n      0x02DC, 0x2122, 0x161,  0x203A, 0x0153,  0x9D,  0x17E,  0x178,\\r\\n       0xA0,   0xA1,   0xA2,   0xA3,   0xA4,   0xA5,   0xA6,   0xA7,\\r\\n       0xA8,   0xA9,   0xAA,   0xAB,   0xAC,   0xAD,   0xAE,   0xAF,\\r\\n       0xB0,   0xB1,   0xB2,   0xB3,   0xB4,   0xB5,   0xB6,   0xB7,\\r\\n       0xB8,   0xB9,   0xBA,   0xBB,   0xBC,   0xBD,   0xBE,   0xBF,\\r\\n       0xC0,   0xC1,   0xC2,   0xC3,   0xC4,   0xC5,   0xC6,   0xC7,\\r\\n       0xC8,   0xC9,   0xCA,   0xCB,   0xCC,   0xCD,   0xCE,   0xCF,\\r\\n       0xD0,   0xD1,   0xD2,   0xD3,   0xD4,   0xD5,   0xD6,   0xD7,\\r\\n       0xD8,   0xD9,   0xDA,   0xDB,   0xDC,   0xDD,   0xDE,   0xDF,\\r\\n       0xE0,   0xE1,   0xE2,   0xE3,   0xE4,   0xE5,   0xE6,   0xE7,\\r\\n       0xE8,   0xE9,   0xEA,   0xEB,   0xEC,   0xED,   0xEE,   0xEF,\\r\\n       0xF0,   0xF1,   0xF2,   0xF3,   0xF4,   0xF5,   0xF6,   0xF7,\\r\\n       0xF8,   0xF9,   0xFA,   0xFB,   0xFC,   0xFD,   0xFE,   0xFF\\r\\n   ]));\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.isEncoding = function(encodingName){\\r\\n   if( Buffer.isEncoding(encodingName) ) return true;\\r\\n   for( var i = 0; i < this.encodings.length; i++ ){\\r\\n      if( this.encodings[i].name === encodingName ) return true;\\r\\n   }\\r\\n   return false;\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.learnEncoding = function(encodingName, encodingTable){\\r\\n   /*jshint bitwise: false */\\r\\n   if( Buffer.isEncoding(encodingName) ){\\r\\n      throw new Error(this.errors.BUFFER_ENCODING);\\r\\n   }\\r\\n\\r\\n   if( encodingTable.length !== 256 ){\\r\\n      throw new Error(this.errors.INVALID_TABLE_LENGTH);\\r\\n   }\\r\\n\\r\\n   var _this = this;\\r\\n   encodingTable = encodingTable.map(function(item){\\r\\n      var nextCode = item |0;\\r\\n      if( 0 > nextCode || nextCode > 0x10FFFF ){\\r\\n         throw new Error(_this.errors.OUT_OF_UNICODE);\\r\\n      }\\r\\n      return item;\\r\\n   });\\r\\n\\r\\n   if( this.isEncoding(encodingName) ){\\r\\n      for( var i = 0; i < this.encodings.length; i++ ){\\r\\n         if( this.encodings[i].name === encodingName ){\\r\\n            this.encodings[i].table = encodingTable;\\r\\n            return;\\r\\n         }\\r\\n      }\\r\\n   } else {\\r\\n      this.encodings.push({\\r\\n         name:  encodingName,\\r\\n         table: encodingTable\\r\\n      });\\r\\n   }\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.getEncodingTable = function(encodingName){\\r\\n   for( var i = 0; i < this.encodings.length; i++ ){\\r\\n      if( this.encodings[i].name === encodingName ){\\r\\n         return this.encodings[i].table;\\r\\n      }\\r\\n   }\\r\\n   return null;\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.extendASCII = function(extensionTable){\\r\\n   if( extensionTable.length !== 128 ){\\r\\n      throw new Error(this.errors.INVALID_EXTENSION);\\r\\n   }\\r\\n\\r\\n   var output = [];\\r\\n   for( var i = 0; i < 128; i++ ) output.push(i);\\r\\n   return output.concat(extensionTable);\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.bufToStr = function(buf, encoding, start, end){\\r\\n   /* jshint bitwise: false */\\r\\n   if(!( Buffer.isBuffer(buf) )){\\r\\n      throw new Error(this.errors.NOT_A_BUFFER);\\r\\n   }\\r\\n   if( Buffer.isEncoding(encoding) ){\\r\\n      return buf.toString(encoding, start, end);\\r\\n   }\\r\\n   var table = this.getEncodingTable(encoding);\\r\\n   if( table === null ) throw new Error(this.errors.UNKNOWN_ENCODING);\\r\\n\\r\\n   if( typeof end   === 'undefined' ) end   = buf.length;\\r\\n   if( typeof start === 'undefined' ) start = 0;\\r\\n\\r\\n   var output = '';\\r\\n   var sourceValue;\\r\\n   for( var i = start; i < end; i++ ){\\r\\n      sourceValue = table[ buf[i] ];\\r\\n      if( sourceValue <= 0xFFFF ){\\r\\n         output += String.fromCharCode(sourceValue);\\r\\n      } else if( 0x10000 <= sourceValue && sourceValue <= 0x10FFFF ){\\r\\n         sourceValue -= 0x10000;\\r\\n         output += String.fromCharCode( 0xD800 + (sourceValue >> 10) );\\r\\n         output += String.fromCharCode( 0xDC00 + (sourceValue & 0x3FF) );\\r\\n      } else throw new Error(this.errors.OUT_OF_UNICODE);\\r\\n   }\\r\\n   return output;\\r\\n};\\r\\n\\r\\nvar strToBufDefaults = {\\r\\n   defaultCode: 0x3F   // '?'\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.strToBuf = function(str, encoding, encodingOptions){\\r\\n   if( Buffer.isEncoding(encoding) ){\\r\\n      return new Buffer(str, encoding);\\r\\n   }\\r\\n   str = '' + str;\\r\\n   var options = extend({}, strToBufDefaults, encodingOptions);\\r\\n   var table = this.getEncodingTable(encoding);\\r\\n   if( table === null ) throw new Error(this.errors.UNKNOWN_ENCODING);\\r\\n   var output = [];\\r\\n   for( var i = 0; i < str.length; i++ ){\\r\\n      var charUnicode;\\r\\n      var thisCharCode = str.charCodeAt(i);\\r\\n      if( 0xD800 <= thisCharCode && thisCharCode <= 0xDBFF &&\\r\\n         i+1 < str.length\\r\\n      ){\\r\\n         var nextCharCode = str.charCodeAt(i+1);\\r\\n         if( 0xDC00 <= nextCharCode && nextCharCode <= 0xDFFF ){\\r\\n            charUnicode = 0x10000 + (thisCharCode - 0xD800)*0x400 +\\r\\n               (nextCharCode - 0xDC00);\\r\\n            i++;\\r\\n         } else {\\r\\n            charUnicode = thisCharCode;\\r\\n         }\\r\\n      } else {\\r\\n         charUnicode = thisCharCode;\\r\\n      }\\r\\n\\r\\n      var codeFoundIndex = table.indexOf(charUnicode);\\r\\n      if( codeFoundIndex < 0 ){\\r\\n         output.push(options.defaultCode);\\r\\n      } else {\\r\\n         output.push(codeFoundIndex);\\r\\n      }\\r\\n   }\\r\\n   return new Buffer(output);\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.errors = {\\r\\n   NOT_A_BUFFER : 'The given source is not a buffer!',\\r\\n   UNKNOWN_ENCODING : 'The given encoding is not defined!',\\r\\n   INVALID_TABLE_LENGTH : 'The encoding table must have 256 elements!',\\r\\n   INVALID_EXTENSION : 'The ASCII extension table must have 128 elements!',\\r\\n   BUFFER_ENCODING : \\\"Cannot redefine a Node's encoding!\\\",\\r\\n   OUT_OF_UNICODE : \\\"An encoding table's element is greater than 0x10FFFF!\\\"\\r\\n};\\r\\n\\r\\nmodule.exports = singlebyte();\\n\\n/***/ }),\\n\\n/***/ 962:\\n/***/ ((__unused_webpack_module, exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.getDataItem = exports.dataItemTypeName = void 0;\\nvar types_1 = __nccwpck_require__(521);\\nfunction dataItemTypeName(_a) {\\n    var _ = _a[0], value = _a[1];\\n    return value === null ? 'null' : typeof value;\\n}\\nexports.dataItemTypeName = dataItemTypeName;\\n/** Converts a data item to the expected type. */\\nfunction getDataItem(item, expectedTypeSpec) {\\n    var _ = item[0], value = item[1];\\n    if (types_1.isNumeric(expectedTypeSpec)) {\\n        switch (typeof value) {\\n            case 'number':\\n                return value;\\n            case 'object':\\n                return 0;\\n            default:\\n                throwDataItemTypeError(item, expectedTypeSpec);\\n        }\\n    }\\n    else if (types_1.isString(expectedTypeSpec)) {\\n        switch (typeof value) {\\n            case 'string':\\n                return value;\\n            case 'object':\\n                return '';\\n            default:\\n                throwDataItemTypeError(item, expectedTypeSpec);\\n        }\\n    }\\n    else {\\n        throw new Error(\\\"Unknown expected type spec: \\\" + JSON.stringify(expectedTypeSpec));\\n    }\\n}\\nexports.getDataItem = getDataItem;\\nfunction throwDataItemTypeError(item, expectedTypeSpec) {\\n    var _a = item[0], line = _a[0], col = _a[1], _ = item[1];\\n    throw new Error(\\\"expected \\\" + types_1.typeSpecName(expectedTypeSpec) + \\\", \\\" +\\n        (\\\"got \\\" + dataItemTypeName(item) + \\\" data item \\\") +\\n        (\\\"(defined at \\\" + line + \\\":\\\" + col + \\\")\\\"));\\n}\\n\\n\\n/***/ }),\\n\\n/***/ 813:\\n/***/ (function(__unused_webpack_module, exports) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** An error with source file and location info. */\\nvar ErrorWithLoc = /** @class */ (function (_super) {\\n    __extends(ErrorWithLoc, _super);\\n    function ErrorWithLoc(message, _a) {\\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, loc = _b.loc;\\n        var _this = _super.call(this, message) || this;\\n        if (loc) {\\n            var sourceFileNamePrefix = sourceFileName ? sourceFileName + \\\":\\\" : '';\\n            var locPrefix = loc.line + \\\":\\\" + loc.col;\\n            _this.message = \\\"\\\" + sourceFileNamePrefix + locPrefix + \\\" - \\\" + _this.message;\\n            _this.loc = loc;\\n        }\\n        return _this;\\n    }\\n    return ErrorWithLoc;\\n}(Error));\\nexports.default = ErrorWithLoc;\\n\\n\\n/***/ }),\\n\\n/***/ 345:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** Round a number to integer using BASIC's round-half-to-even rule. */\\nfunction roundHalfToEven(n) {\\n    if (n - Math.floor(n) === 0.5) {\\n        return Math.round(n / 2) * 2;\\n    }\\n    else {\\n        return Math.round(n);\\n    }\\n}\\nexports.default = roundHalfToEven;\\n\\n\\n/***/ }),\\n\\n/***/ 973:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.lookupSymbols = exports.lookupSymbol = exports.VarScope = exports.VarType = void 0;\\n/** Type of a variable symbol. */\\nvar VarType;\\n(function (VarType) {\\n    /** Regular variable. */\\n    VarType[\\\"VAR\\\"] = \\\"var\\\";\\n    /** Static variable. */\\n    VarType[\\\"STATIC_VAR\\\"] = \\\"staticVar\\\";\\n    /** Constant. */\\n    VarType[\\\"CONST\\\"] = \\\"const\\\";\\n    /** FUNCTION or SUB argument. */\\n    VarType[\\\"ARG\\\"] = \\\"arg\\\";\\n})(VarType = exports.VarType || (exports.VarType = {}));\\n/** Scope of a variable symbol. */\\nvar VarScope;\\n(function (VarScope) {\\n    VarScope[\\\"LOCAL\\\"] = \\\"local\\\";\\n    VarScope[\\\"GLOBAL\\\"] = \\\"global\\\";\\n})(VarScope = exports.VarScope || (exports.VarScope = {}));\\nfunction lookupSymbol(symbolTable, name) {\\n    var _a;\\n    return ((_a = symbolTable.find(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); })) !== null && _a !== void 0 ? _a : null);\\n}\\nexports.lookupSymbol = lookupSymbol;\\nfunction lookupSymbols(symbolTable, name) {\\n    return symbolTable.filter(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); });\\n}\\nexports.lookupSymbols = lookupSymbols;\\n\\n\\n/***/ }),\\n\\n/***/ 521:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.ProcDefType = exports.procTypeName = exports.isFnOrDefFn = exports.ProcType = exports.typeSpecName = exports.areMatchingSingularTypes = exports.areMatchingElementaryTypes = exports.isSingularType = exports.isUdt = exports.isElementaryType = exports.isArray = exports.isString = exports.isIntegral = exports.isNumeric = exports.arraySpec = exports.stringSpec = exports.doubleSpec = exports.singleSpec = exports.longSpec = exports.integerSpec = exports.DataType = void 0;\\n/** Overall type of the value. */\\nvar DataType;\\n(function (DataType) {\\n    /** 16-bit integer */\\n    DataType[\\\"INTEGER\\\"] = \\\"integer\\\";\\n    /** 32-bit integer */\\n    DataType[\\\"LONG\\\"] = \\\"long\\\";\\n    /** 32-bit floating point. */\\n    DataType[\\\"SINGLE\\\"] = \\\"single\\\";\\n    /** 64-bit floating point. */\\n    DataType[\\\"DOUBLE\\\"] = \\\"double\\\";\\n    /** String. */\\n    DataType[\\\"STRING\\\"] = \\\"string\\\";\\n    /** Array. */\\n    DataType[\\\"ARRAY\\\"] = \\\"array\\\";\\n    /** User-defined data type, a.k.a. records. */\\n    DataType[\\\"UDT\\\"] = \\\"udt\\\";\\n})(DataType = exports.DataType || (exports.DataType = {}));\\n// Helpers for creating DataTypeSpec instances.\\nfunction integerSpec() {\\n    return { type: DataType.INTEGER };\\n}\\nexports.integerSpec = integerSpec;\\nfunction longSpec() {\\n    return { type: DataType.LONG };\\n}\\nexports.longSpec = longSpec;\\nfunction singleSpec() {\\n    return { type: DataType.SINGLE };\\n}\\nexports.singleSpec = singleSpec;\\nfunction doubleSpec() {\\n    return { type: DataType.DOUBLE };\\n}\\nexports.doubleSpec = doubleSpec;\\nfunction stringSpec() {\\n    return { type: DataType.STRING };\\n}\\nexports.stringSpec = stringSpec;\\nfunction arraySpec(elementTypeSpec, dimensionSpecs) {\\n    return { type: DataType.ARRAY, elementTypeSpec: elementTypeSpec, dimensionSpecs: dimensionSpecs };\\n}\\nexports.arraySpec = arraySpec;\\n// Helpers for type checking.\\nfunction isNumeric(t) {\\n    return [\\n        DataType.INTEGER,\\n        DataType.LONG,\\n        DataType.SINGLE,\\n        DataType.DOUBLE,\\n    ].includes(getType(t));\\n}\\nexports.isNumeric = isNumeric;\\nfunction isIntegral(t) {\\n    return [DataType.INTEGER, DataType.LONG].includes(getType(t));\\n}\\nexports.isIntegral = isIntegral;\\nfunction isString(t) {\\n    return getType(t) === DataType.STRING;\\n}\\nexports.isString = isString;\\nfunction isArray(t) {\\n    return getType(t) === DataType.ARRAY;\\n}\\nexports.isArray = isArray;\\nfunction isElementaryType(t) {\\n    return isNumeric(t) || isString(t);\\n}\\nexports.isElementaryType = isElementaryType;\\nfunction isUdt(t) {\\n    return getType(t) === DataType.UDT;\\n}\\nexports.isUdt = isUdt;\\nfunction isSingularType(t) {\\n    return isElementaryType(t) || isUdt(t);\\n}\\nexports.isSingularType = isSingularType;\\nfunction areMatchingElementaryTypes(typeSpec1, typeSpec2) {\\n    return ((isNumeric(typeSpec1) && isNumeric(typeSpec2)) ||\\n        (isString(typeSpec1) && isString(typeSpec2)));\\n}\\nexports.areMatchingElementaryTypes = areMatchingElementaryTypes;\\nfunction areMatchingSingularTypes(typeSpec1, typeSpec2) {\\n    return (areMatchingElementaryTypes(typeSpec1, typeSpec2) ||\\n        (isUdt(typeSpec1) && isUdt(typeSpec2) && typeSpec1.name === typeSpec2.name));\\n}\\nexports.areMatchingSingularTypes = areMatchingSingularTypes;\\nfunction typeSpecName(t) {\\n    switch (t.type) {\\n        case DataType.ARRAY:\\n            return typeSpecName(t.elementTypeSpec) + \\\" array\\\";\\n        case DataType.UDT:\\n            return \\\"\\\\\\\"\\\" + t.name + \\\"\\\\\\\"\\\";\\n        default:\\n            return t.type;\\n    }\\n}\\nexports.typeSpecName = typeSpecName;\\nfunction getType(t) {\\n    return typeof t === 'object' ? t.type : t;\\n}\\n/** Type of a procedure. */\\nvar ProcType;\\n(function (ProcType) {\\n    /** SUB procedure. */\\n    ProcType[\\\"SUB\\\"] = \\\"sub\\\";\\n    /** FUNCTION procedure. */\\n    ProcType[\\\"FN\\\"] = \\\"fn\\\";\\n    /** DEF FN procedure. */\\n    ProcType[\\\"DEF_FN\\\"] = \\\"defFn\\\";\\n})(ProcType = exports.ProcType || (exports.ProcType = {}));\\nfunction isFnOrDefFn(procType) {\\n    return procType === ProcType.FN || procType === ProcType.DEF_FN;\\n}\\nexports.isFnOrDefFn = isFnOrDefFn;\\n/** Returns the user-facing name of a ProcType. */\\nfunction procTypeName(procType) {\\n    var _a;\\n    var NAMES = (_a = {},\\n        _a[ProcType.SUB] = 'SUB procedure',\\n        _a[ProcType.FN] = 'FUNCTION procedure',\\n        _a[ProcType.DEF_FN] = 'DEF FN procedure',\\n        _a);\\n    return NAMES[procType];\\n}\\nexports.procTypeName = procTypeName;\\n/** The type of a procedure definition. */\\nvar ProcDefType;\\n(function (ProcDefType) {\\n    /** Built-in function. */\\n    ProcDefType[\\\"BUILTIN\\\"] = \\\"builtin\\\";\\n    /** User-defined function in the current module. */\\n    ProcDefType[\\\"MODULE\\\"] = \\\"module\\\";\\n})(ProcDefType = exports.ProcDefType || (exports.ProcDefType = {}));\\n\\n\\n/***/ }),\\n\\n/***/ 168:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nvar _a;\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** Returns a VT100 escape sequence prefixed by \\\"ESC [\\\". */\\nfunction ESC(c) {\\n    return \\\"\\\\u001B[\\\" + c;\\n}\\n/** Returns a DOS keyboard scan code prefixed by NUL. */\\nfunction NUL(n) {\\n    return String.fromCharCode(0, n);\\n}\\n/** Map ANSI / VT100 sequences to DOS keyboard scan codes. */\\nvar ANSI_TERMINAL_KEY_CODE_MAP = (_a = {},\\n    _a[ESC('A')] = NUL(72),\\n    _a[ESC('B')] = NUL(80),\\n    _a[ESC('C')] = NUL(77),\\n    _a[ESC('D')] = NUL(75),\\n    _a);\\nexports.default = ANSI_TERMINAL_KEY_CODE_MAP;\\n\\n\\n/***/ }),\\n\\n/***/ 769:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar ansi_escapes_1 = __importDefault(__nccwpck_require__(575));\\nvar ansi_styles_1 = __importDefault(__nccwpck_require__(566));\\nvar ansi_terminal_key_code_map_1 = __importDefault(__nccwpck_require__(168));\\nvar runtime_1 = __nccwpck_require__(753);\\n/** RuntimePlatform implementing screen manipulation using ANSI escape codes.\\n *\\n * Ideally this functionality could be made into a mixin, but 1) it relies on this.print() etc and\\n * so must be a class and 2) abstract classes don't support mixins yet:\\n * https://github.com/microsoft/TypeScript/issues/35356\\n */\\nvar AnsiTerminalPlatform = /** @class */ (function (_super) {\\n    __extends(AnsiTerminalPlatform, _super);\\n    function AnsiTerminalPlatform() {\\n        return _super !== null && _super.apply(this, arguments) || this;\\n    }\\n    AnsiTerminalPlatform.prototype.moveCursorTo = function (x, y) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.cursorTo(x, y))];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setCursorVisibility = function (isCursorVisible) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(isCursorVisible ? ansi_escapes_1.default.cursorShow : ansi_escapes_1.default.cursorHide)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.clearScreen = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.eraseScreen)];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(0, 0)];\\n                    case 2:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setFgColor = function (colorName) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_styles_1.default[colorName].open)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setBgColor = function (colorName) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var bgColorName;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        bgColorName = \\\"bg\\\" + colorName[0].toUpperCase() + colorName.substr(1);\\n                        return [4 /*yield*/, this.print(ansi_styles_1.default[bgColorName].open)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.beep = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.beep)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Translates an ANSI / VT100 key code to the DOS equivalent. */\\n    AnsiTerminalPlatform.prototype.translateKeyCode = function (c) {\\n        var _a;\\n        return (_a = ansi_terminal_key_code_map_1.default[c]) !== null && _a !== void 0 ? _a : c;\\n    };\\n    return AnsiTerminalPlatform;\\n}(runtime_1.RuntimePlatform));\\nexports.default = AnsiTerminalPlatform;\\n\\n\\n/***/ }),\\n\\n/***/ 562:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\\n        to[j] = from[i];\\n    return to;\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.lookupBuiltin = exports.BUILTIN_SUBS = exports.BUILTIN_FNS = void 0;\\nvar singlebyte_1 = __importDefault(__nccwpck_require__(770));\\nvar round_half_to_even_1 = __importDefault(__nccwpck_require__(345));\\nvar symbol_table_1 = __nccwpck_require__(973);\\nvar types_1 = __nccwpck_require__(521);\\n/** Built-in functions. */\\nexports.BUILTIN_FNS = __spreadArray(__spreadArray([\\n    {\\n        name: 'abs',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.abs(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'asc',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (s.length === 0) {\\n                        throw new Error('Expected non-empty string in ASC()');\\n                    }\\n                    // We could use iconv-lite here instead:\\n                    // return iconv.encode(s[0], 'cp437')[0];\\n                    return [2 /*return*/, singlebyte_1.default.strToBuf(s[0], 'cp437')[0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'atn',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.atan(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'chr$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    // We could use iconv-lite here instead:\\n                    // return iconv.decode(Buffer.from([n]), 'cp437');\\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cdbl',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cint',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'clng',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cos',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.cos(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'csng',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.singleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'csrlin',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (_a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1: return [2 /*return*/, (_b.sent()).y + 1];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'date$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    return [2 /*return*/, [now.getMonth() + 1, now.getDate(), now.getFullYear()]\\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\\n                            .join('-')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'exp',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.exp(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'fix',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sign(n) * Math.floor(Math.abs(n))];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'hex$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n.toString(16).toUpperCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'inkey$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (_a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var c;\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getChar()];\\n                        case 1:\\n                            c = _b.sent();\\n                            return [2 /*return*/, c !== null && c !== void 0 ? c : ''];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'input$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var result, c;\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0:\\n                            result = [];\\n                            _b.label = 1;\\n                        case 1:\\n                            if (!(result.length < n && !platform.shouldStopExecution)) return [3 /*break*/, 3];\\n                            return [4 /*yield*/, platform.getChar()];\\n                        case 2:\\n                            c = _b.sent();\\n                            if (c) {\\n                                result.push(c);\\n                            }\\n                            return [3 /*break*/, 1];\\n                        case 3: return [2 /*return*/, result.join('')];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'instr',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (haystack, needle) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, haystack.indexOf(needle) + 1];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'instr',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.integerSpec(),\\n        run: function (start, haystack, needle) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, haystack.indexOf(needle, start - 1) + 1];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'int',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.floor(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lbound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lbound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array, dimensionIdx) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (dimensionIdx < 1 ||\\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\\n                        throw new Error(\\\"Invalid dimension index: \\\" + dimensionIdx);\\n                    }\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lcase$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.toLowerCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'left$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(0, n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'len',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.length];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'log',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.log(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ltrim$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.trimStart()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'mid$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, startIdx, length) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(startIdx - 1, length)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'oct$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n.toString(8)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'peek',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    // STUB\\n                    return [2 /*return*/, 0];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'pos',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (_, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1: return [2 /*return*/, (_b.sent()).x + 1];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'right$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(Math.max(0, s.length - n))];\\n                });\\n            });\\n        },\\n    }\\n], overload({\\n    name: 'rnd',\\n    returnTypeSpec: types_1.doubleSpec(),\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, Math.random()];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), [\\n    {\\n        name: 'rtrim$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, _a) {\\n            var args = _a.args;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    return [2 /*return*/, s.trimEnd()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sgn',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sign(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sin',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sin(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'spc',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, ' '.repeat(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'space$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, ' '.repeat(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sqr',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sqrt(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'str$',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, \\\"\\\" + (n >= 0 ? ' ' : '') + n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'string$',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (m, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437').repeat(m)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'string$',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (m, s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (s.length === 0) {\\n                        throw new Error(\\\"Empty string argument to STRING$\\\");\\n                    }\\n                    return [2 /*return*/, s[0].repeat(m)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'tab',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (col, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var _b, x, y, cols;\\n                return __generator(this, function (_c) {\\n                    switch (_c.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1:\\n                            _b = _c.sent(), x = _b.x, y = _b.y;\\n                            return [4 /*yield*/, platform.getScreenSize()];\\n                        case 2:\\n                            cols = (_c.sent()).cols;\\n                            col = (Math.max(1, col) - 1) % cols;\\n                            return [4 /*yield*/, platform.moveCursorTo(col, x <= col ? y : y + 1)];\\n                        case 3:\\n                            _c.sent();\\n                            return [2 /*return*/, ''];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'tan',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.tan(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'time$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    return [2 /*return*/, [now.getHours(), now.getMinutes(), now.getSeconds()]\\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\\n                            .join(':')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'timer',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now, midnight, result;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    midnight = new Date(now);\\n                    midnight.setHours(0, 0, 0, 0);\\n                    result = (now.getTime() - midnight.getTime()) / 1000;\\n                    return [2 /*return*/, result];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ubound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][1]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ubound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array, dimensionIdx) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (dimensionIdx < 1 ||\\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\\n                        throw new Error(\\\"Invalid dimension index: \\\" + dimensionIdx);\\n                    }\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][1]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ucase$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.toUpperCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'val',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var v;\\n                return __generator(this, function (_a) {\\n                    v = parseFloat(s);\\n                    return [2 /*return*/, isNaN(v) ? 0 : v];\\n                });\\n            });\\n        },\\n    },\\n]);\\n/** Simple statements implemented as built-in subs. */\\nexports.BUILTIN_SUBS = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([\\n    {\\n        name: 'beep',\\n        paramTypeSpecs: [],\\n        run: function () {\\n            var args = [];\\n            for (var _i = 0; _i < arguments.length; _i++) {\\n                args[_i] = arguments[_i];\\n            }\\n            return __awaiter(this, void 0, void 0, function () {\\n                var platform;\\n                return __generator(this, function (_a) {\\n                    switch (_a.label) {\\n                        case 0:\\n                            platform = args.pop().platform;\\n                            return [4 /*yield*/, platform.beep()];\\n                        case 1:\\n                            _a.sent();\\n                            return [2 /*return*/];\\n                    }\\n                });\\n            });\\n        },\\n    }\\n], overload({\\n    name: 'cls',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        return [4 /*yield*/, platform.clearScreen()];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'color',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a, platform, runtime, getColorName, fg, bg;\\n            return __generator(this, function (_b) {\\n                _a = args.pop(), platform = _a.platform, runtime = _a.runtime;\\n                getColorName = function (n) {\\n                    if (n < 0 || n >= runtime.currentScreenModeConfig.colorMap.length) {\\n                        throw new Error(\\\"Invalid color: \\\" + n);\\n                    }\\n                    return runtime.currentScreenModeConfig.colorMap[n];\\n                };\\n                fg = args[0], bg = args[1];\\n                if (Number.isFinite(fg)) {\\n                    platform.setFgColor(getColorName(fg));\\n                }\\n                if (Number.isFinite(bg)) {\\n                    platform.setBgColor(getColorName(bg));\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), overload({\\n    name: '__def_seg',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'locate',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform, row, col, cursor, origPos, newX, newY;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        row = args[0], col = args[1], cursor = args[2];\\n                        if (!(Number.isFinite(row) && Number.isFinite(col))) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, platform.moveCursorTo(col - 1, row - 1)];\\n                    case 1:\\n                        _a.sent();\\n                        return [3 /*break*/, 5];\\n                    case 2:\\n                        if (!(Number.isFinite(row) || Number.isFinite(col))) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, platform.getCursorPosition()];\\n                    case 3:\\n                        origPos = _a.sent();\\n                        newX = Number.isFinite(col) ? col - 1 : origPos.x;\\n                        newY = Number.isFinite(row) ? row - 1 : origPos.y;\\n                        if (!(newX !== origPos.x || newY !== origPos.y)) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, platform.moveCursorTo(newX, newY)];\\n                    case 4:\\n                        _a.sent();\\n                        _a.label = 5;\\n                    case 5:\\n                        if (!Number.isFinite(cursor)) return [3 /*break*/, 7];\\n                        return [4 /*yield*/, platform.setCursorVisibility(!!cursor)];\\n                    case 6:\\n                        _a.sent();\\n                        _a.label = 7;\\n                    case 7: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), [\\n    {\\n        name: 'play',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'poke',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    }\\n]), overload({\\n    name: 'randomize',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'screen',\\n    run: function (mode) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var runtime;\\n            return __generator(this, function (_a) {\\n                runtime = args.pop().runtime;\\n                runtime.setScreenMode(mode);\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), overload({\\n    name: 'sleep',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform, numSeconds, startTimeMs, nowMs, c;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        numSeconds = args.length > 0 ? args[0] : 0;\\n                        startTimeMs = new Date().getTime();\\n                        _a.label = 1;\\n                    case 1: return [4 /*yield*/, platform.getChar()];\\n                    case 2:\\n                        c = _a.sent();\\n                        nowMs = new Date().getTime();\\n                        _a.label = 3;\\n                    case 3:\\n                        if (c === null &&\\n                            (numSeconds <= 0 || nowMs - startTimeMs < numSeconds * 1000) &&\\n                            !platform.shouldStopExecution) return [3 /*break*/, 1];\\n                        _a.label = 4;\\n                    case 4: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: '__view_print',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec(), types_1.longSpec()]])), [\\n    {\\n        name: 'width',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    },\\n]);\\n/** Helper function to generate multiple signatures that map to the same built-in proc. */\\nfunction overload(proc, paramTypeSpecsList) {\\n    return paramTypeSpecsList.map(function (paramTypeSpecs) {\\n        return (__assign(__assign({}, proc), { paramTypeSpecs: paramTypeSpecs }));\\n    });\\n}\\nfunction lookupBuiltin(procs, name, argTypeSpecs, _a) {\\n    var _b = _a === void 0 ? {} : _a, shouldReturnIfArgTypeMismatch = _b.shouldReturnIfArgTypeMismatch;\\n    var builtinFnsMatchingName = symbol_table_1.lookupSymbols(procs, name);\\n    var builtinFn = builtinFnsMatchingName.find(function (_a) {\\n        var paramTypeSpecs = _a.paramTypeSpecs;\\n        return paramTypeSpecs.length === argTypeSpecs.length &&\\n            paramTypeSpecs.every(function (paramTypeSpec, i) {\\n                return types_1.areMatchingElementaryTypes(paramTypeSpec, argTypeSpecs[i]) ||\\n                    (types_1.isArray(paramTypeSpec) && types_1.isArray(argTypeSpecs[i]));\\n            });\\n    });\\n    return (builtinFn !== null && builtinFn !== void 0 ? builtinFn : (shouldReturnIfArgTypeMismatch && builtinFnsMatchingName.length > 0\\n        ? builtinFnsMatchingName[0]\\n        : null));\\n}\\nexports.lookupBuiltin = lookupBuiltin;\\n\\n\\n/***/ }),\\n\\n/***/ 308:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.PrintArgType = exports.ExecutionDirectiveType = void 0;\\nvar ExecutionDirectiveType;\\n(function (ExecutionDirectiveType) {\\n    ExecutionDirectiveType[\\\"GOTO\\\"] = \\\"goto\\\";\\n    ExecutionDirectiveType[\\\"GOSUB\\\"] = \\\"gosub\\\";\\n    ExecutionDirectiveType[\\\"RETURN\\\"] = \\\"return\\\";\\n    ExecutionDirectiveType[\\\"END\\\"] = \\\"end\\\";\\n    ExecutionDirectiveType[\\\"EXIT_PROC\\\"] = \\\"exitProc\\\";\\n})(ExecutionDirectiveType = exports.ExecutionDirectiveType || (exports.ExecutionDirectiveType = {}));\\n/** Type of an argument to print(). */\\nvar PrintArgType;\\n(function (PrintArgType) {\\n    PrintArgType[\\\"COMMA\\\"] = \\\"comma\\\";\\n    PrintArgType[\\\"SEMICOLON\\\"] = \\\"semicolon\\\";\\n    PrintArgType[\\\"VALUE\\\"] = \\\"value\\\";\\n})(PrintArgType = exports.PrintArgType || (exports.PrintArgType = {}));\\n\\n\\n/***/ }),\\n\\n/***/ 586:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.ExecutionError = void 0;\\nvar data_item_1 = __nccwpck_require__(962);\\nvar error_with_loc_1 = __importDefault(__nccwpck_require__(813));\\nvar symbol_table_1 = __nccwpck_require__(973);\\nvar types_1 = __nccwpck_require__(521);\\nvar compiled_code_1 = __nccwpck_require__(308);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\nvar runtime_1 = __importDefault(__nccwpck_require__(753));\\nvar ExecutionError = /** @class */ (function (_super) {\\n    __extends(ExecutionError, _super);\\n    function ExecutionError(message, _a) {\\n        var _b = _a === void 0 ? {} : _a, module = _b.module, stmt = _b.stmt;\\n        return _super.call(this, message, {\\n            sourceFileName: module === null || module === void 0 ? void 0 : module.sourceFileName,\\n            loc: (stmt === null || stmt === void 0 ? void 0 : stmt.loc) ? { line: stmt.loc[0], col: stmt.loc[1] } : undefined,\\n        }) || this;\\n    }\\n    return ExecutionError;\\n}(error_with_loc_1.default));\\nexports.ExecutionError = ExecutionError;\\n/** Exception thrown to signal program termination via END. */\\nvar EndDirective = /** @class */ (function (_super) {\\n    __extends(EndDirective, _super);\\n    function EndDirective() {\\n        var _this = _super !== null && _super.apply(this, arguments) || this;\\n        _this.isEndDirective = true;\\n        return _this;\\n    }\\n    return EndDirective;\\n}(Error));\\n/** Manages the execution of a compiled program. */\\nvar Executor = /** @class */ (function () {\\n    function Executor(platform, _a) {\\n        var _b = _a === void 0 ? {} : _a, stmtExecutionDelayUs = _b.stmtExecutionDelayUs;\\n        this.platform = platform;\\n        /** Current module being executed. */\\n        this.currentModule = null;\\n        /** Static vars, indexed by proc name. */\\n        this.localStaticVarsMap = {};\\n        /** Label index map for module-level statements. */\\n        this.moduleLabelIndexMap = {};\\n        /** Label index map for procs. */\\n        this.procLabelIndexMap = {};\\n        /** Cursor for READ. */\\n        this.dataCursor = {\\n            stmtIdx: 0,\\n            itemIdx: 0,\\n        };\\n        this.stmtExecutionDelayUs =\\n            stmtExecutionDelayUs !== null && stmtExecutionDelayUs !== void 0 ? stmtExecutionDelayUs : platform.defaultStmtExecutionDelayUs;\\n    }\\n    /** Executes a compiled module. */\\n    Executor.prototype.executeModule = function (moduleOrCode) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var module, _a, ctx, e_1;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        if (!(typeof moduleOrCode === 'string')) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.platform.loadCompiledModule(moduleOrCode)];\\n                    case 1:\\n                        _a = _b.sent();\\n                        return [3 /*break*/, 3];\\n                    case 2:\\n                        _a = moduleOrCode;\\n                        _b.label = 3;\\n                    case 3:\\n                        module = _a;\\n                        this.currentModule = module;\\n                        this.buildLabelIndexMaps();\\n                        this.localStaticVarsMap = {};\\n                        this.restore();\\n                        this.platform.shouldStopExecution = false;\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\\n                    case 4:\\n                        _b.sent();\\n                        ctx = {\\n                            runtime: new runtime_1.default(this.platform),\\n                            executeProc: this.executeProc.bind(this),\\n                            read: this.read.bind(this),\\n                            restore: this.restore.bind(this),\\n                            args: {},\\n                            localVars: this.initVars(module.localSymbols, [\\n                                symbol_table_1.VarType.VAR,\\n                                symbol_table_1.VarType.CONST,\\n                            ]),\\n                            localStaticVars: {},\\n                            globalVars: this.initVars(module.globalSymbols, [\\n                                symbol_table_1.VarType.VAR,\\n                                symbol_table_1.VarType.CONST,\\n                            ]),\\n                            tempVars: {},\\n                        };\\n                        _b.label = 5;\\n                    case 5:\\n                        _b.trys.push([5, 7, 8, 10]);\\n                        return [4 /*yield*/, this.executeStmts(ctx, module.stmts, this.moduleLabelIndexMap)];\\n                    case 6:\\n                        _b.sent();\\n                        return [3 /*break*/, 10];\\n                    case 7:\\n                        e_1 = _b.sent();\\n                        if (e_1.isEndDirective) {\\n                            // Swallow error\\n                        }\\n                        else {\\n                            throw e_1;\\n                        }\\n                        return [3 /*break*/, 10];\\n                    case 8:\\n                        this.currentModule = null;\\n                        this.moduleLabelIndexMap = {};\\n                        this.procLabelIndexMap = {};\\n                        this.localStaticVarsMap = {};\\n                        this.restore();\\n                        this.platform.shouldStopExecution = false;\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(true)];\\n                    case 9:\\n                        _b.sent();\\n                        return [7 /*endfinally*/];\\n                    case 10: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Sets flag to stop execution. */\\n    Executor.prototype.stopExecution = function () {\\n        this.platform.shouldStopExecution = true;\\n    };\\n    Executor.prototype.executeProc = function (prevCtx, name) {\\n        var argPtrs = [];\\n        for (var _i = 2; _i < arguments.length; _i++) {\\n            argPtrs[_i - 2] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var proc, args, i, ctx;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        proc = symbol_table_1.lookupSymbol(this.currentModule.procs, name);\\n                        if (!proc) {\\n                            throw new Error(\\\"Procedure not found: \\\\\\\"\\\" + name + \\\"\\\\\\\"\\\");\\n                        }\\n                        // Init args.\\n                        if (argPtrs.length !== proc.paramSymbols.length) {\\n                            throw new Error('Incorrect number of arguments to ' +\\n                                (types_1.procTypeName(proc.type) + \\\" \\\\\\\"\\\" + proc.name + \\\"\\\\\\\": \\\") +\\n                                (\\\"expected \\\" + proc.paramSymbols.length + \\\", got \\\" + argPtrs.length));\\n                        }\\n                        args = {};\\n                        for (i = 0; i < argPtrs.length; ++i) {\\n                            args[proc.paramSymbols[i].name] = argPtrs[i];\\n                        }\\n                        // Init static vars.\\n                        if (!this.localStaticVarsMap[proc.name]) {\\n                            this.localStaticVarsMap[proc.name] = this.initVars(proc.localSymbols, [\\n                                symbol_table_1.VarType.STATIC_VAR,\\n                            ]);\\n                        }\\n                        ctx = __assign(__assign({}, prevCtx), { args: args, localVars: this.initVars(proc.localSymbols, [symbol_table_1.VarType.VAR, symbol_table_1.VarType.CONST]), localStaticVars: this.localStaticVarsMap[proc.name], tempVars: {} });\\n                        if (!this.procLabelIndexMap[proc.name]) {\\n                            throw new Error(\\\"Label index map not found for \\\\\\\"\\\" + proc.name + \\\"\\\\\\\"\\\");\\n                        }\\n                        return [4 /*yield*/, this.executeStmts(ctx, proc.stmts, this.procLabelIndexMap[proc.name])];\\n                    case 1:\\n                        _a.sent();\\n                        // Return value.\\n                        if (types_1.isFnOrDefFn(proc.type)) {\\n                            return [2 /*return*/, ctx.localVars[proc.name]];\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Executor.prototype.initVars = function (varSymbolTable, includeVarTypes) {\\n        var container = {};\\n        for (var _i = 0, varSymbolTable_1 = varSymbolTable; _i < varSymbolTable_1.length; _i++) {\\n            var symbol = varSymbolTable_1[_i];\\n            if (!includeVarTypes.includes(symbol.varType)) {\\n                continue;\\n            }\\n            container[symbol.name] = init_value_1.default(symbol.typeSpec);\\n        }\\n        return container;\\n    };\\n    Executor.prototype.executeStmts = function (ctx, stmts, labelIndexMap) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var gosubStates, stmtIdx, _loop_1, this_1;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        gosubStates = [];\\n                        stmtIdx = 0;\\n                        _loop_1 = function () {\\n                            var stmt, errorArgs, directive, e_2, gotoLabel, gosubState;\\n                            return __generator(this, function (_b) {\\n                                switch (_b.label) {\\n                                    case 0:\\n                                        if (this_1.platform.shouldStopExecution) {\\n                                            this_1.platform.shouldStopExecution = false;\\n                                            throw new EndDirective();\\n                                        }\\n                                        stmt = stmts[stmtIdx];\\n                                        errorArgs = { module: this_1.currentModule, stmt: stmt };\\n                                        if (!(this_1.stmtExecutionDelayUs > 0)) return [3 /*break*/, 2];\\n                                        return [4 /*yield*/, this_1.platform.delay(this_1.stmtExecutionDelayUs)];\\n                                    case 1:\\n                                        _b.sent();\\n                                        _b.label = 2;\\n                                    case 2:\\n                                        directive = void 0;\\n                                        if (!('run' in stmt)) return [3 /*break*/, 6];\\n                                        _b.label = 3;\\n                                    case 3:\\n                                        _b.trys.push([3, 5, , 6]);\\n                                        return [4 /*yield*/, stmt.run(ctx)];\\n                                    case 4:\\n                                        directive = _b.sent();\\n                                        return [3 /*break*/, 6];\\n                                    case 5:\\n                                        e_2 = _b.sent();\\n                                        if (e_2.isEndDirective) {\\n                                            throw e_2;\\n                                        }\\n                                        else {\\n                                            throw new ExecutionError(e_2.message, errorArgs);\\n                                        }\\n                                        return [3 /*break*/, 6];\\n                                    case 6:\\n                                        if (!directive) {\\n                                            ++stmtIdx;\\n                                            return [2 /*return*/, \\\"continue\\\"];\\n                                        }\\n                                        gotoLabel = function (label) {\\n                                            stmtIdx = labelIndexMap[label];\\n                                            if (stmtIdx === undefined) {\\n                                                throw new ExecutionError(\\\"Label not found: \\\\\\\"\\\" + label + \\\"\\\\\\\"\\\", errorArgs);\\n                                            }\\n                                        };\\n                                        switch (directive.type) {\\n                                            case compiled_code_1.ExecutionDirectiveType.GOSUB:\\n                                                gosubStates.push({\\n                                                    nextStmtIdx: stmtIdx + 1,\\n                                                });\\n                                                gotoLabel(directive.destLabel);\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.GOTO:\\n                                                gotoLabel(directive.destLabel);\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.RETURN:\\n                                                if (gosubStates.length === 0) {\\n                                                    throw new ExecutionError(\\\"RETURN without prior GOSUB\\\", errorArgs);\\n                                                }\\n                                                gosubState = gosubStates.pop();\\n                                                if (directive.destLabel) {\\n                                                    gotoLabel(directive.destLabel);\\n                                                }\\n                                                else {\\n                                                    stmtIdx = gosubState.nextStmtIdx;\\n                                                }\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.END:\\n                                                throw new EndDirective();\\n                                            case compiled_code_1.ExecutionDirectiveType.EXIT_PROC:\\n                                                stmtIdx = stmts.length;\\n                                                break;\\n                                            default:\\n                                                throw new ExecutionError(\\\"Unrecognized execution directive: \\\" + JSON.stringify(directive), errorArgs);\\n                                        }\\n                                        return [2 /*return*/];\\n                                }\\n                            });\\n                        };\\n                        this_1 = this;\\n                        _a.label = 1;\\n                    case 1:\\n                        if (!(stmtIdx < stmts.length)) return [3 /*break*/, 3];\\n                        return [5 /*yield**/, _loop_1()];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 1];\\n                    case 3: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Executor.prototype.read = function () {\\n        var resultTypes = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            resultTypes[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var results, i, dataItem;\\n            return __generator(this, function (_a) {\\n                results = [];\\n                for (i = 0; i < resultTypes.length; ++i) {\\n                    dataItem = this.getNextDataItem();\\n                    if (!dataItem) {\\n                        throw new Error(\\\"Data exhausted at item \\\" + (i + 1));\\n                    }\\n                    try {\\n                        results.push(data_item_1.getDataItem(dataItem, resultTypes[i]));\\n                    }\\n                    catch (e) {\\n                        e.message = \\\"Error reading item \\\" + (i + 1) + \\\": \\\" + e.message;\\n                        throw e;\\n                    }\\n                }\\n                return [2 /*return*/, results];\\n            });\\n        });\\n    };\\n    Executor.prototype.getNextDataItem = function () {\\n        var stmts = this.currentModule.stmts;\\n        for (;;) {\\n            if (this.dataCursor.stmtIdx >= stmts.length) {\\n                return null;\\n            }\\n            var stmt = stmts[this.dataCursor.stmtIdx];\\n            if (!('data' in stmt)) {\\n                ++this.dataCursor.stmtIdx;\\n                continue;\\n            }\\n            if (this.dataCursor.itemIdx >= stmt.data.length) {\\n                ++this.dataCursor.stmtIdx;\\n                this.dataCursor.itemIdx = 0;\\n                continue;\\n            }\\n            return stmt.data[this.dataCursor.itemIdx++];\\n        }\\n    };\\n    Executor.prototype.restore = function (destLabel) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var stmtIdx;\\n            var _a, _b;\\n            return __generator(this, function (_c) {\\n                if (destLabel) {\\n                    stmtIdx = this.moduleLabelIndexMap[destLabel];\\n                    if (stmtIdx === undefined) {\\n                        throw new Error(\\\"Label not found: \\\\\\\"\\\" + destLabel + \\\"\\\\\\\"\\\");\\n                    }\\n                    _a = [stmtIdx, 0], this.dataCursor.stmtIdx = _a[0], this.dataCursor.itemIdx = _a[1];\\n                }\\n                else {\\n                    _b = [0, 0], this.dataCursor.stmtIdx = _b[0], this.dataCursor.itemIdx = _b[1];\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    Executor.prototype.buildLabelIndexMaps = function () {\\n        this.moduleLabelIndexMap = this.buildLabelIndexMap(this.currentModule.stmts);\\n        for (var _i = 0, _a = this.currentModule.procs; _i < _a.length; _i++) {\\n            var _b = _a[_i], name_1 = _b.name, stmts = _b.stmts;\\n            this.procLabelIndexMap[name_1] = this.buildLabelIndexMap(stmts);\\n        }\\n    };\\n    Executor.prototype.buildLabelIndexMap = function (stmts) {\\n        var _this = this;\\n        var labelIndexMap = {};\\n        stmts.forEach(function (stmt, idx) {\\n            if ('label' in stmt) {\\n                if (stmt.label in labelIndexMap) {\\n                    throw new ExecutionError(\\\"Duplicate label \\\\\\\"\\\" + stmt.label + \\\"\\\\\\\"\\\", {\\n                        module: _this.currentModule,\\n                        stmt: stmt,\\n                    });\\n                }\\n                labelIndexMap[stmt.label] = idx;\\n            }\\n        });\\n        return labelIndexMap;\\n    };\\n    return Executor;\\n}());\\nexports.default = Executor;\\n\\n\\n/***/ }),\\n\\n/***/ 176:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nvar _a;\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar qb_array_1 = __importDefault(__nccwpck_require__(59));\\nvar qb_udt_1 = __importDefault(__nccwpck_require__(83));\\n/** Initial value for elementary data types. */\\nvar ELEMENTARY_TYPE_INIT_VALUES = (_a = {},\\n    _a[types_1.DataType.INTEGER] = 0,\\n    _a[types_1.DataType.LONG] = 0,\\n    _a[types_1.DataType.SINGLE] = 0.0,\\n    _a[types_1.DataType.DOUBLE] = 0.0,\\n    _a[types_1.DataType.STRING] = '',\\n    _a);\\nfunction initValue(typeSpec) {\\n    var dataType = typeSpec.type;\\n    if (types_1.isElementaryType(dataType)) {\\n        return ELEMENTARY_TYPE_INIT_VALUES[dataType];\\n    }\\n    switch (typeSpec.type) {\\n        case types_1.DataType.ARRAY:\\n            return new qb_array_1.default(typeSpec);\\n        case types_1.DataType.UDT:\\n            return new qb_udt_1.default(typeSpec);\\n        default:\\n            throw new Error(\\\"Unknown type: \\\" + JSON.stringify(typeSpec));\\n    }\\n}\\nexports.default = initValue;\\n\\n\\n/***/ }),\\n\\n/***/ 999:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.NodeExecutor = exports.NodePlatform = void 0;\\nvar ansi_escapes_1 = __importDefault(__nccwpck_require__(575));\\nvar perf_hooks_1 = __nccwpck_require__(630);\\nvar require_from_string_1 = __importDefault(__nccwpck_require__(7));\\nvar ansi_terminal_platform_1 = __importDefault(__nccwpck_require__(769));\\nvar executor_1 = __importDefault(__nccwpck_require__(586));\\n/** RuntimePlatform for Node.JS on TTY. */\\nvar NodePlatform = /** @class */ (function (_super) {\\n    __extends(NodePlatform, _super);\\n    function NodePlatform() {\\n        var _this = _super !== null && _super.apply(this, arguments) || this;\\n        // When running in Node, delay is implemented using setImmediate and won't\\n        // block other functionality. So we can safely set a higher delay value for\\n        // better compatibility.\\n        _this.defaultStmtExecutionDelayUs = 5;\\n        return _this;\\n    }\\n    NodePlatform.prototype.loadCompiledModule = function (code) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, require_from_string_1.default(code)];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.delay = function (delayInUs) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var t0;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        t0 = perf_hooks_1.performance.now();\\n                        _a.label = 1;\\n                    case 1:\\n                        if (!((perf_hooks_1.performance.now() - t0) * 1000 < delayInUs)) return [3 /*break*/, 3];\\n                        return [4 /*yield*/, new Promise(function (resolve) { return setImmediate(resolve); })];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 1];\\n                    case 3: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.print = function (s) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                process.stdout.write(s);\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.inputLine = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, new Promise(function (resolve) {\\n                        process.stdin.resume();\\n                        process.stdin.setRawMode(false);\\n                        process.stdin.once('data', function (chunk) {\\n                            process.stdin.pause();\\n                            resolve(chunk.toString());\\n                        });\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getChar = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var result, callbackFn;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                result = null;\\n                process.stdin.resume();\\n                process.stdin.setRawMode(true);\\n                callbackFn = function (chunk) {\\n                    result = _this.translateKeyCode(chunk.toString());\\n                    // Handle Ctrl-C\\n                    if (result === String.fromCharCode(3)) {\\n                        throw new Error('Received Ctrl-C, aborting');\\n                    }\\n                    process.stdin.pause();\\n                };\\n                process.stdin.once('data', callbackFn);\\n                return [2 /*return*/, new Promise(function (resolve) {\\n                        setTimeout(function () {\\n                            if (result === null) {\\n                                process.stdin.removeListener('data', callbackFn);\\n                                process.stdin.pause();\\n                            }\\n                            resolve(result);\\n                        }, 20);\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getCursorPosition = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var originalIsRaw;\\n            return __generator(this, function (_a) {\\n                // Based on https://github.com/bubkoo/get-cursor-position/blob/master/index.js\\n                process.stdin.resume();\\n                originalIsRaw = process.stdin.isRaw;\\n                process.stdin.setRawMode(true);\\n                return [2 /*return*/, new Promise(function (resolve, reject) {\\n                        process.stdin.once('data', function (chunk) {\\n                            process.stdin.pause();\\n                            process.stdin.setRawMode(originalIsRaw);\\n                            var match = chunk.toString().match(/\\\\[(\\\\d+)\\\\;(\\\\d+)R/);\\n                            if (match) {\\n                                var _a = [match[1], match[2]], row = _a[0], col = _a[1];\\n                                var result = {\\n                                    // ANSI row & col numbers are 1-based.\\n                                    x: parseInt(col) - 1,\\n                                    y: parseInt(row) - 1,\\n                                };\\n                                resolve(result);\\n                            }\\n                            else {\\n                                reject();\\n                            }\\n                        });\\n                        process.stdout.write(ansi_escapes_1.default.cursorGetPosition);\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getScreenSize = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var origPos, bottomRightPos;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.getCursorPosition()];\\n                    case 1:\\n                        origPos = _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(10000, 10000)];\\n                    case 2:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.getCursorPosition()];\\n                    case 3:\\n                        bottomRightPos = _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(origPos.x, origPos.y)];\\n                    case 4:\\n                        _a.sent();\\n                        return [2 /*return*/, {\\n                                rows: bottomRightPos.y + 1,\\n                                cols: bottomRightPos.x + 1,\\n                            }];\\n                }\\n            });\\n        });\\n    };\\n    return NodePlatform;\\n}(ansi_terminal_platform_1.default));\\nexports.NodePlatform = NodePlatform;\\nvar NodeExecutor = /** @class */ (function (_super) {\\n    __extends(NodeExecutor, _super);\\n    function NodeExecutor(opts) {\\n        if (opts === void 0) { opts = {}; }\\n        return _super.call(this, new NodePlatform(), opts) || this;\\n    }\\n    return NodeExecutor;\\n}(executor_1.default));\\nexports.NodeExecutor = NodeExecutor;\\n\\n\\n/***/ }),\\n\\n/***/ 421:\\n/***/ (function(module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar node_platform_1 = __nccwpck_require__(999);\\n/** Executes the bundled module.\\n *\\n * This is the main execution entrypoint to a compiled program.\\n */\\nfunction run(opts) {\\n    if (opts === void 0) { opts = {}; }\\n    return __awaiter(this, void 0, void 0, function () {\\n        var stmtExecutionDelayUs;\\n        return __generator(this, function (_a) {\\n            switch (_a.label) {\\n                case 0:\\n                    if (process.env.DELAY) {\\n                        stmtExecutionDelayUs = parseInt(process.env.DELAY);\\n                        if (isNaN(stmtExecutionDelayUs)) {\\n                            stmtExecutionDelayUs = undefined;\\n                        }\\n                    }\\n                    return [4 /*yield*/, new node_platform_1.NodeExecutor(__assign({ stmtExecutionDelayUs: stmtExecutionDelayUs }, opts)).executeModule(compiledModule)];\\n                case 1: return [2 /*return*/, _a.sent()];\\n            }\\n        });\\n    });\\n}\\nmodule.exports = __assign(__assign({}, (typeof compiledModule === 'undefined' ? {} : compiledModule)), { run: run });\\n// When invoked directly as part of a compiled program, execute the bundled module.\\nif (require.main === require.cache[eval('__filename')]) {\\n    run();\\n}\\n\\n\\n/***/ }),\\n\\n/***/ 59:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\n/** Runtime representation for QBasic arrays. */\\nvar QbArray = /** @class */ (function () {\\n    function QbArray(arrayTypeSpec) {\\n        /** The underlying array storing the actual elements. */\\n        this._values = [];\\n        this.init(arrayTypeSpec.elementTypeSpec, arrayTypeSpec.dimensionSpecs);\\n    }\\n    /** Initializes the array with the provided spec, discarding any previous contents. */\\n    QbArray.prototype.init = function (elementTypeSpec, dimensionSpecs) {\\n        if (dimensionSpecs.length === 0) {\\n            throw new Error('No dimension specs provided');\\n        }\\n        this._typeSpec = types_1.arraySpec(elementTypeSpec, dimensionSpecs);\\n        this._values.length = 0;\\n        var currentDimensionArrays = [this._values];\\n        for (var i = 0; i < dimensionSpecs.length; ++i) {\\n            var _a = dimensionSpecs[i], minIdx = _a[0], maxIdx = _a[1];\\n            var numElements = maxIdx - minIdx + 1;\\n            var nextDimensionArrays = [];\\n            for (var _i = 0, currentDimensionArrays_1 = currentDimensionArrays; _i < currentDimensionArrays_1.length; _i++) {\\n                var dimensionArray = currentDimensionArrays_1[_i];\\n                if (i === dimensionSpecs.length - 1) {\\n                    for (var j = 0; j < numElements; ++j) {\\n                        dimensionArray.push(init_value_1.default(elementTypeSpec));\\n                    }\\n                }\\n                else {\\n                    for (var j = 0; j < numElements; ++j) {\\n                        var nextDimensionArray = new Array();\\n                        nextDimensionArrays.push(nextDimensionArray);\\n                        dimensionArray.push(nextDimensionArray);\\n                    }\\n                }\\n            }\\n            currentDimensionArrays = nextDimensionArrays;\\n        }\\n    };\\n    /** Translates a QBasic index into the index in the underlying array. */\\n    QbArray.prototype.getIdx = function (dimensionIdx, qbIdx) {\\n        var dimensionSpecs = this._typeSpec.dimensionSpecs;\\n        if (!Number.isFinite(dimensionIdx) ||\\n            dimensionIdx < 0 ||\\n            dimensionIdx >= dimensionSpecs.length) {\\n            throw new Error('Invalid dimension in getIndex: ' +\\n                (\\\"expected number between 0 and \\\" + (dimensionSpecs.length - 1) + \\\", \\\") +\\n                (\\\"got \\\" + dimensionIdx));\\n        }\\n        var _a = dimensionSpecs[dimensionIdx], minIdx = _a[0], maxIdx = _a[1];\\n        if (!Number.isFinite(qbIdx) || qbIdx < minIdx || qbIdx > maxIdx) {\\n            throw new Error(\\\"Index out of range for dimension \\\" + (dimensionIdx + 1) + \\\": \\\" +\\n                (\\\"expected number between \\\" + minIdx + \\\" and \\\" + maxIdx + \\\", \\\") +\\n                (\\\"got \\\" + qbIdx));\\n        }\\n        return qbIdx - minIdx;\\n    };\\n    Object.defineProperty(QbArray.prototype, \\\"values\\\", {\\n        get: function () {\\n            return this._values;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(QbArray.prototype, \\\"typeSpec\\\", {\\n        get: function () {\\n            return this._typeSpec;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return QbArray;\\n}());\\nexports.default = QbArray;\\n\\n\\n/***/ }),\\n\\n/***/ 83:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\n/** Runtime representation for QBasic user-defined types. */\\nvar QbUdt = /** @class */ (function () {\\n    function QbUdt(udtTypeSpec) {\\n        /** The underlying array storing the actual elements. */\\n        this._values = {};\\n        this._typeSpec = __assign({}, udtTypeSpec);\\n        this.init();\\n    }\\n    QbUdt.prototype.init = function () {\\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\\n            var fieldSpec = _a[_i];\\n            this._values[fieldSpec.name] = init_value_1.default(fieldSpec.typeSpec);\\n        }\\n    };\\n    QbUdt.prototype.clone = function () {\\n        var newQbUdt = new QbUdt(this._typeSpec);\\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\\n            var fieldSpec = _a[_i];\\n            var value = this._values[fieldSpec.name];\\n            newQbUdt._values[fieldSpec.name] = types_1.isUdt(fieldSpec.typeSpec)\\n                ? value.clone()\\n                : value;\\n        }\\n        return newQbUdt;\\n    };\\n    Object.defineProperty(QbUdt.prototype, \\\"values\\\", {\\n        get: function () {\\n            return this._values;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(QbUdt.prototype, \\\"typeSpec\\\", {\\n        get: function () {\\n            return this._typeSpec;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return QbUdt;\\n}());\\nexports.default = QbUdt;\\n\\n\\n/***/ }),\\n\\n/***/ 753:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\\n        to[j] = from[i];\\n    return to;\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.SCREEN_MODE_CONFIGS = exports.RuntimePlatform = void 0;\\nvar moo_1 = __importDefault(__nccwpck_require__(357));\\nvar types_1 = __nccwpck_require__(521);\\nvar builtins_1 = __nccwpck_require__(562);\\nvar compiled_code_1 = __nccwpck_require__(308);\\nvar round_half_to_even_1 = __importDefault(__nccwpck_require__(345));\\n/** Interface for platform-specific runtime functionality. */\\nvar RuntimePlatform = /** @class */ (function () {\\n    function RuntimePlatform() {\\n        /** Flag indicating we should stop executing.\\n         *\\n         * Setting this flag will cause blocking methods like `inputLine()` to exit early.\\n         */\\n        this.shouldStopExecution = false;\\n    }\\n    return RuntimePlatform;\\n}());\\nexports.RuntimePlatform = RuntimePlatform;\\nexports.SCREEN_MODE_CONFIGS = [\\n    {\\n        mode: 0,\\n        textModeDimensions: [{ rows: 80, cols: 25 }],\\n        colorMap: [\\n            'black',\\n            'blue',\\n            'green',\\n            'cyan',\\n            'red',\\n            'magenta',\\n            'yellow',\\n            'white',\\n            'gray',\\n            'blueBright',\\n            'greenBright',\\n            'cyanBright',\\n            'redBright',\\n            'magentaBright',\\n            'yellowBright',\\n            'whiteBright',\\n        ],\\n    },\\n];\\n/** Runtime support library.\\n *\\n * This class provides the interface invoked by compiled code. It is platform-agnostic, and wraps\\n * the low-level, platform-dependent functionality in the injected RuntimePlatform.\\n */\\nvar Runtime = /** @class */ (function () {\\n    function Runtime(platform) {\\n        this.platform = platform;\\n        this.roundHalfToEven = round_half_to_even_1.default;\\n        this.printFormatStringLexer = moo_1.default.compile({\\n            NUMBER: /(?:[#,])*\\\\.#+|[#,]+/,\\n            STRING: '&',\\n            DOLLAR_SIGNS: /\\\\$+/,\\n            LITERAL: {\\n                match: /[^.#&\\\\$]+/,\\n                lineBreaks: true,\\n            },\\n        });\\n        /** Lexer for input(). */\\n        this.inputLexer = moo_1.default.compile({\\n            WHITESPACE: { match: /\\\\s+/, lineBreaks: true },\\n            QUOTED_STRING: {\\n                match: /\\\"[^\\\"]*\\\"/,\\n                value: function (text) { return text.substr(1, text.length - 2); },\\n                type: function () { return 'STRING'; },\\n            },\\n            COMMA: ',',\\n            STRING: /[^,\\\\s]+/,\\n        });\\n        this.currentScreenMode = 0;\\n    }\\n    Runtime.prototype.executeBuiltinProc = function (name, argTypeSpecs) {\\n        var args = [];\\n        for (var _i = 2; _i < arguments.length; _i++) {\\n            args[_i - 2] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var builtinProc, runContext;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs) ||\\n                            builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs);\\n                        if (!builtinProc) {\\n                            throw new Error(\\\"No matching built-in procedure found: \\\\\\\"\\\" + name + \\\"\\\\\\\"\\\");\\n                        }\\n                        if (argTypeSpecs.length !== args.length) {\\n                            throw new Error(\\\"Argument types and values do not match: \\\" +\\n                                (\\\"expected \\\" + argTypeSpecs.length + \\\" arguments, got \\\" + args.length));\\n                        }\\n                        runContext = {\\n                            runtime: this,\\n                            platform: this.platform,\\n                            argTypeSpecs: argTypeSpecs,\\n                            args: args,\\n                        };\\n                        return [4 /*yield*/, builtinProc.run.apply(builtinProc, __spreadArray(__spreadArray([], args.map(function (ptr) { return ptr[0][ptr[1]]; })), [runContext]))];\\n                    case 1: return [2 /*return*/, _a.sent()];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.print = function (formatString) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var line;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        line = formatString\\n                            ? this.printWithFormatString(formatString, args)\\n                            : this.printWithDefaultFormat(args);\\n                        if (args.length === 0 ||\\n                            args[args.length - 1].type === compiled_code_1.PrintArgType.VALUE) {\\n                            line += '\\\\n';\\n                        }\\n                        return [4 /*yield*/, this.platform.print(line)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Implements PRINT USING format strings.\\n     *\\n     * This is a VERY incomplete implementation. Supported:\\n     *\\n     *   - Formatting numbers with ##.##\\n     *   - Formatting string with &\\n     */\\n    Runtime.prototype.printWithFormatString = function (formatString, args) {\\n        var pieces = [];\\n        var argIdx = 0;\\n        this.printFormatStringLexer.reset(formatString);\\n        for (;;) {\\n            while (argIdx < args.length && args[argIdx].type !== compiled_code_1.PrintArgType.VALUE) {\\n                ++argIdx;\\n            }\\n            var nextArg = argIdx < args.length ? args[argIdx] : null;\\n            var token = this.printFormatStringLexer.next();\\n            if (!token) {\\n                break;\\n            }\\n            switch (token.type) {\\n                case 'NUMBER':\\n                    if (!nextArg || typeof nextArg.value !== 'number') {\\n                        throw new Error('Formatting error: expected number ' +\\n                            (\\\"as argument #\\\" + (argIdx + 1) + \\\", got \\\" + typeof (nextArg === null || nextArg === void 0 ? void 0 : nextArg.value)));\\n                    }\\n                    var _a = token.value.split('.'), integralFormat = _a[0], fractionFormat = _a[1];\\n                    // Not supporting commas yet.\\n                    var integralFormatLength = integralFormat.replace(/,/, '').length;\\n                    if (fractionFormat) {\\n                        var formattedValue = (\\\"\\\" + Math.floor(nextArg.value)).padStart(integralFormatLength) +\\n                            '.' +\\n                            nextArg.value.toFixed(fractionFormat.length).split('.')[1];\\n                        pieces.push(formattedValue);\\n                    }\\n                    else {\\n                        var formattedValue = nextArg.value.toFixed(0).padStart(integralFormatLength) +\\n                            (token.value.indexOf('.') >= 0 ? '.' : '');\\n                        pieces.push(formattedValue);\\n                    }\\n                    ++argIdx;\\n                    break;\\n                case 'STRING':\\n                    if (!nextArg || typeof nextArg.value !== 'string') {\\n                        throw new Error(\\\"Formatting error: expected string as argument #\\\" + (argIdx + 1));\\n                    }\\n                    pieces.push(nextArg.value);\\n                    ++argIdx;\\n                    break;\\n                case 'DOLLAR_SIGNS': {\\n                    var value = void 0;\\n                    if (token.value.length <= 1) {\\n                        value = token.value;\\n                    }\\n                    else if (token.value.length === 2) {\\n                        value = ' $';\\n                    }\\n                    else {\\n                        value = '%$';\\n                    }\\n                    pieces.push(value);\\n                    break;\\n                }\\n                case 'LITERAL':\\n                    pieces.push(token.value);\\n                    break;\\n                default:\\n                    throw new Error(\\\"Unexpected token type: \\\" + JSON.stringify(token));\\n            }\\n        }\\n        return pieces.join('');\\n    };\\n    Runtime.prototype.printWithDefaultFormat = function (args) {\\n        var PRINT_ZONE_LENGTH = 14;\\n        var line = '';\\n        for (var _i = 0, args_1 = args; _i < args_1.length; _i++) {\\n            var arg = args_1[_i];\\n            switch (arg.type) {\\n                case compiled_code_1.PrintArgType.SEMICOLON:\\n                    break;\\n                case compiled_code_1.PrintArgType.COMMA:\\n                    var numPaddingChars = PRINT_ZONE_LENGTH - (line.length % PRINT_ZONE_LENGTH);\\n                    line += ' '.repeat(numPaddingChars);\\n                    break;\\n                case compiled_code_1.PrintArgType.VALUE:\\n                    if (typeof arg.value === 'string') {\\n                        line += \\\"\\\" + arg.value;\\n                        break;\\n                    }\\n                    else if (typeof arg.value === 'number') {\\n                        line += \\\"\\\" + (arg.value >= 0 ? ' ' : '') + arg.value + \\\" \\\";\\n                        break;\\n                    }\\n                    else {\\n                        // Fall through\\n                    }\\n                default:\\n                    throw new Error(\\\"Unknown print arg: '\\\" + JSON.stringify(arg) + \\\"'\\\");\\n            }\\n        }\\n        return line;\\n    };\\n    Runtime.prototype.inputLine = function (prompt) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var line;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!prompt) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.platform.print(prompt)];\\n                    case 1:\\n                        _a.sent();\\n                        _a.label = 2;\\n                    case 2: return [4 /*yield*/, this.platform.setCursorVisibility(true)];\\n                    case 3:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.platform.inputLine()];\\n                    case 4:\\n                        line = _a.sent();\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\\n                    case 5:\\n                        _a.sent();\\n                        return [2 /*return*/, line];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.input = function (prompt) {\\n        var resultTypes = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            resultTypes[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var results, line, tokens, tokenIdx, errorMessage, resultIdx, resultType, errorMessagePrefix, tokenValue, numericValue;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        results = [];\\n                        return [4 /*yield*/, this.platform.print(prompt)];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.inputLine('')];\\n                    case 2:\\n                        line = _a.sent();\\n                        if (this.platform.shouldStopExecution) {\\n                            return [2 /*return*/, results];\\n                        }\\n                        tokens = this.lexInput(line);\\n                        tokenIdx = 0;\\n                        errorMessage = null;\\n                        for (resultIdx = 0; resultIdx < resultTypes.length; ++resultIdx) {\\n                            resultType = resultTypes[resultIdx];\\n                            errorMessagePrefix = \\\"Error parsing value \\\" + (resultIdx + 1) + \\\": \\\";\\n                            // Consume comma token for result 1+.\\n                            if (resultIdx > 0) {\\n                                if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'COMMA') {\\n                                    ++tokenIdx;\\n                                }\\n                                else {\\n                                    errorMessage = errorMessagePrefix + \\\"Comma expected\\\";\\n                                    break;\\n                                }\\n                            }\\n                            // Consume value.\\n                            if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'STRING') {\\n                                tokenValue = tokens[tokenIdx].value;\\n                                if (types_1.isString(resultType)) {\\n                                    results.push(tokenValue);\\n                                }\\n                                else if (types_1.isNumeric(resultType)) {\\n                                    numericValue = parseFloat(tokenValue);\\n                                    if (isNaN(numericValue)) {\\n                                        errorMessage = errorMessagePrefix + \\\"Invalid numeric value \\\\\\\"\\\" + tokenValue + \\\"\\\\\\\"\\\";\\n                                        break;\\n                                    }\\n                                    else {\\n                                        results.push(numericValue);\\n                                    }\\n                                }\\n                                else {\\n                                    throw new Error(\\\"Unexpected result type \\\" + resultType.type);\\n                                }\\n                                ++tokenIdx;\\n                            }\\n                            else {\\n                                errorMessage = errorMessagePrefix + \\\"No value provided\\\";\\n                                break;\\n                            }\\n                        }\\n                        if (!(results.length === resultTypes.length)) return [3 /*break*/, 3];\\n                        return [2 /*return*/, results];\\n                    case 3:\\n                        if (!(results.length < resultTypes.length)) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, this.platform.print(\\\"\\\\n\\\" + (errorMessage ? errorMessage + \\\"\\\\n\\\" : '') + \\\"Redo from start\\\\n\\\")];\\n                    case 4:\\n                        _a.sent();\\n                        return [3 /*break*/, 6];\\n                    case 5: \\n                    // This would indicate a logic error above - we should stop consuming from input once the\\n                    // expected number of results has been reached.\\n                    throw new Error(\\\"Too many results: expected \\\" + resultTypes.length + \\\", got \\\" + results.length);\\n                    case 6: return [3 /*break*/, 0];\\n                    case 7: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.lexInput = function (line) {\\n        this.inputLexer.reset(line.trim());\\n        var tokens = [];\\n        for (;;) {\\n            var token = this.inputLexer.next();\\n            if (!token) {\\n                break;\\n            }\\n            if (token.type !== 'WHITESPACE') {\\n                tokens.push(token);\\n            }\\n        }\\n        return tokens;\\n    };\\n    Runtime.prototype.setScreenMode = function (n) {\\n        var screenMode = exports.SCREEN_MODE_CONFIGS.find(function (_a) {\\n            var mode = _a.mode;\\n            return mode === n;\\n        });\\n        if (!screenMode) {\\n            throw new Error(\\\"Unsupported screen mode: \\\" + n);\\n        }\\n        this.currentScreenMode = n;\\n    };\\n    Object.defineProperty(Runtime.prototype, \\\"currentScreenModeConfig\\\", {\\n        get: function () {\\n            var _this = this;\\n            return exports.SCREEN_MODE_CONFIGS.find(function (_a) {\\n                var mode = _a.mode;\\n                return mode === _this.currentScreenMode;\\n            });\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return Runtime;\\n}());\\nexports.default = Runtime;\\n\\n\\n/***/ }),\\n\\n/***/ 282:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"module\\\");;\\n\\n/***/ }),\\n\\n/***/ 622:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"path\\\");;\\n\\n/***/ }),\\n\\n/***/ 630:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"perf_hooks\\\");;\\n\\n/***/ })\\n\\n/******/ \\t});\\n/************************************************************************/\\n/******/ \\t// The module cache\\n/******/ \\tvar __webpack_module_cache__ = {};\\n/******/ \\t\\n/******/ \\t// The require function\\n/******/ \\tfunction __nccwpck_require__(moduleId) {\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tvar cachedModule = __webpack_module_cache__[moduleId];\\n/******/ \\t\\tif (cachedModule !== undefined) {\\n/******/ \\t\\t\\treturn cachedModule.exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = __webpack_module_cache__[moduleId] = {\\n/******/ \\t\\t\\tid: moduleId,\\n/******/ \\t\\t\\tloaded: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/ \\t\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tvar threw = true;\\n/******/ \\t\\ttry {\\n/******/ \\t\\t\\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __nccwpck_require__);\\n/******/ \\t\\t\\tthrew = false;\\n/******/ \\t\\t} finally {\\n/******/ \\t\\t\\tif(threw) delete __webpack_module_cache__[moduleId];\\n/******/ \\t\\t}\\n/******/ \\t\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.loaded = true;\\n/******/ \\t\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/ \\t\\n/************************************************************************/\\n/******/ \\t/* webpack/runtime/node module decorator */\\n/******/ \\t(() => {\\n/******/ \\t\\t__nccwpck_require__.nmd = (module) => {\\n/******/ \\t\\t\\tmodule.paths = [];\\n/******/ \\t\\t\\tif (!module.children) module.children = [];\\n/******/ \\t\\t\\treturn module;\\n/******/ \\t\\t};\\n/******/ \\t})();\\n/******/ \\t\\n/******/ \\t/* webpack/runtime/compat */\\n/******/ \\t\\n/******/ \\tif (typeof __nccwpck_require__ !== 'undefined') __nccwpck_require__.ab = __dirname + \\\"/\\\";/************************************************************************/\\n/******/ \\t\\n/******/ \\t// startup\\n/******/ \\t// Load entry module and return exports\\n/******/ \\t// This entry module is referenced by other modules so it can't be inlined\\n/******/ \\tvar __webpack_exports__ = __nccwpck_require__(421);\\n/******/ \\tmodule.exports = __webpack_exports__;\\n/******/ \\t\\n/******/ })()\\n;\" };","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createParser = void 0;\nvar nearley_1 = require(\"nearley\");\nvar grammar_1 = __importDefault(require(\"./grammar\"));\nvar lexer_1 = __importDefault(require(\"./lexer\"));\nvar error_with_loc_1 = __importDefault(require(\"../lib/error-with-loc\"));\nfunction createParser(opts) {\n    return new nearley_1.Parser(nearley_1.Grammar.fromCompiled(grammar_1.default), opts);\n}\nexports.createParser = createParser;\n/** Entry point for parsing an input string into an AST module. */\nfunction parse(input, opts) {\n    var parser = createParser(opts);\n    try {\n        parser.feed(input);\n        // Add terminating line break (necessary due to lack of EOF terminal).\n        parser.feed('\\n');\n    }\n    catch (e) {\n        if ('token' in e) {\n            throw new error_with_loc_1.default(\n            // Hack to reduce verbosity of nearley error messages...\n            e.message.replace(/ Instead, I was expecting to see one of the following:$[\\s\\S]*/gm, ''), {\n                sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n                loc: e.token,\n            });\n        }\n        else {\n            throw e;\n        }\n    }\n    if (parser.results.length === 0) {\n        throw new error_with_loc_1.default(\"Unexpected end of input\", {\n            sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n            loc: lexer_1.default.lastToken,\n        });\n    }\n    else if (parser.results.length !== 1) {\n        throw new error_with_loc_1.default(parser.results.length + \" parse trees:\\n\\n\" +\n            parser.results\n                .map(function (tree, idx) {\n                return \"Parse tree #\" + (idx + 1) + \":\\n\" + JSON.stringify(tree, null, 4);\n            })\n                .join('\\n\\n'), {\n            sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n            loc: lexer_1.default.lastToken,\n        });\n    }\n    return parser.results[0];\n}\nexports.default = parse;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Generated automatically by nearley, version 2.20.1\n// http://github.com/Hardmath123/nearley\n// Bypasses TS6133. Allow declared but unused functions.\n// @ts-ignore\nfunction id(d) { return d[0]; }\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar lexer_1 = __importDefault(require(\"./lexer\"));\nvar ast_1 = require(\"../lib/ast\");\nvar types_1 = require(\"../lib/types\");\n// ----\n// Helper functions.\n// ----\nfunction discard() { return null; }\nfunction useLoc(tokenOrAstNode) {\n    if ('loc' in tokenOrAstNode) {\n        return { loc: tokenOrAstNode.loc };\n    }\n    else if (('line' in tokenOrAstNode) && ('col' in tokenOrAstNode)) {\n        return { loc: { line: tokenOrAstNode.line, col: tokenOrAstNode.col } };\n    }\n    else {\n        throw new Error(\"Invalid tokenOrAstNode: \" + JSON.stringify(tokenOrAstNode));\n    }\n}\nfunction buildBinaryOpExpr(_a) {\n    var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n    return __assign({ type: ast_1.ExprType.BINARY_OP, op: id($2).type.toLowerCase(), leftExpr: $1, rightExpr: $3 }, useLoc($1));\n}\nfunction buildUnaryOpExpr(_a) {\n    var $1 = _a[0], $2 = _a[1];\n    return __assign({ type: ast_1.ExprType.UNARY_OP, op: id($1).type.toLowerCase(), rightExpr: $2 }, useLoc(id($1)));\n}\nfunction buildDataItem(tokenOrAstNode, value) {\n    var _a = useLoc(tokenOrAstNode).loc, line = _a.line, col = _a.col;\n    return [[line, col], value];\n}\n;\n;\n;\n;\nvar grammar = {\n    Lexer: lexer_1.default,\n    ParserRules: [\n        { \"name\": \"module$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"module$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"module$ebnf$2\", \"symbols\": [\"moduleComponentWithSep\"] },\n        { \"name\": \"module$ebnf$2\", \"symbols\": [\"module$ebnf$2\", \"moduleComponentWithSep\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"module\", \"symbols\": [\"module$ebnf$1\", \"module$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return $2.reduce(function (a, b) { return ({\n                    stmts: __spreadArray(__spreadArray([], a.stmts), b.stmts),\n                    procs: __spreadArray(__spreadArray([], a.procs), b.procs),\n                    udts: __spreadArray(__spreadArray([], a.udts), b.udts),\n                }); });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"stmtWithSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    stmts: [$1],\n                    procs: [],\n                    udts: [],\n                });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"proc\", \"stmtSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return ({\n                    stmts: [],\n                    procs: $1 ? [$1] : [],\n                    udts: [],\n                });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"udt\", \"stmtSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return ({\n                    stmts: [],\n                    procs: [],\n                    udts: $1 ? [$1] : [],\n                });\n            }\n        },\n        { \"name\": \"proc\", \"symbols\": [\"fnProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"subProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"defFnExprProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"procDecl\"], \"postprocess\": discard },\n        { \"name\": \"fnProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"fnProc$ebnf$1\", \"symbols\": [\"fnProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"fnProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fnProc$ebnf$2\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC)], \"postprocess\": id },\n        { \"name\": \"fnProc$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fnProc\", \"symbols\": [(lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"fnProc$ebnf$1\", \"fnProc$ebnf$2\", \"stmts\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: types_1.ProcType.FN, name: $2.value, params: $3 ? $3[1] : [], stmts: $5, isDefaultStatic: !!$4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"subProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"subProc$ebnf$1\", \"symbols\": [\"subProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"subProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"subProc$ebnf$2\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC)], \"postprocess\": id },\n        { \"name\": \"subProc$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"subProc\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"subProc$ebnf$1\", \"subProc$ebnf$2\", \"stmts\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: types_1.ProcType.SUB, name: $2.value, params: $3 ? $3[1] : [], stmts: $5, isDefaultStatic: !!$4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defFnExprProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"defFnExprProc$ebnf$1\", \"symbols\": [\"defFnExprProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"defFnExprProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"defFnExprProc\", \"symbols\": [(lexer_1.default.has(\"DEF\") ? { type: \"DEF\" } : DEF), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"defFnExprProc$ebnf$1\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a, position, reject) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                if (!$2.value.toLowerCase().startsWith('fn')) {\n                    return reject;\n                }\n                return __assign({ type: types_1.ProcType.DEF_FN, name: $2.value, params: $3 ? $3[1] : [], stmts: [\n                        __assign({ type: ast_1.StmtType.ASSIGN, targetExpr: __assign({ type: ast_1.ExprType.VAR_REF, name: $2.value }, useLoc($4)), valueExpr: $5 }, useLoc($4))\n                    ], isDefaultStatic: false }, useLoc($1));\n            }\n        },\n        { \"name\": \"procDecl$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)] },\n        { \"name\": \"procDecl$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"procDecl$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"procDecl$ebnf$1\", \"symbols\": [\"procDecl$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"procDecl$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"procDecl\", \"symbols\": [(lexer_1.default.has(\"DECLARE\") ? { type: \"DECLARE\" } : DECLARE), \"procDecl$subexpression$1\", (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"procDecl$ebnf$1\"], \"postprocess\": discard },\n        { \"name\": \"params\", \"symbols\": [], \"postprocess\": function () { return []; } },\n        { \"name\": \"params$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"params$ebnf$1$subexpression$1\", \"symbols\": [\"param\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"params$ebnf$1\", \"symbols\": [\"params$ebnf$1\", \"params$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"params\", \"symbols\": [\"params$ebnf$1\", \"param\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"param\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"param\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ name: $1.value, typeExpr: __assign({ type: ast_1.DataTypeExprType.ARRAY, elementTypeExpr: $4, dimensionSpecExprs: [] }, useLoc($1)) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"udt\", \"symbols\": [(lexer_1.default.has(\"TYPE\") ? { type: \"TYPE\" } : TYPE), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"fieldExprs\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"TYPE\") ? { type: \"TYPE\" } : TYPE)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ name: $2.value, fieldSpecExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"fieldExprs$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs\", \"symbols\": [\"fieldExprs$ebnf$1\"], \"postprocess\": function () { return []; } },\n        { \"name\": \"fieldExprs$ebnf$2\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs$ebnf$3\", \"symbols\": [] },\n        { \"name\": \"fieldExprs$ebnf$3$subexpression$1\", \"symbols\": [\"fieldExpr\", \"stmtSep\"] },\n        { \"name\": \"fieldExprs$ebnf$3\", \"symbols\": [\"fieldExprs$ebnf$3\", \"fieldExprs$ebnf$3$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"fieldExprs$ebnf$4\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$4\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs\", \"symbols\": [\"fieldExprs$ebnf$2\", \"fieldExprs$ebnf$3\", \"fieldExpr\", \"fieldExprs$ebnf$4\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return __spreadArray(__spreadArray([], ($2 ? $2.map(function (_a) {\n                    var $2_1 = _a[0], $2_2 = _a[1];\n                    return $2_1;\n                }) : [])), [\n                    $3,\n                ]);\n            }\n        },\n        { \"name\": \"fieldExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"stmts$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmts$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmts$ebnf$2\", \"symbols\": [] },\n        { \"name\": \"stmts$ebnf$2\", \"symbols\": [\"stmts$ebnf$2\", \"stmtWithSep\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"stmts\", \"symbols\": [\"stmts$ebnf$1\", \"stmts$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return $2;\n            } },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)] },\n        { \"name\": \"stmtSep$ebnf$1\", \"symbols\": [\"stmtSep$ebnf$1$subexpression$1\"] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)] },\n        { \"name\": \"stmtSep$ebnf$1\", \"symbols\": [\"stmtSep$ebnf$1\", \"stmtSep$ebnf$1$subexpression$2\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"stmtSep\", \"symbols\": [\"stmtSep$ebnf$1\"], \"postprocess\": discard },\n        { \"name\": \"stmtWithSep$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"labelStmt\", \"stmtWithSep$ebnf$1\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"nonLabelStmt\", \"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$2\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"singleLineIfStmt\", \"stmtWithSep$ebnf$2\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"dimStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"assignStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"constStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"gotoStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"blockIfStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"selectStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"whileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doWhileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doUntilStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"loopWhileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"loopUntilStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doLoopStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitLoopStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"forStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"nextStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitForStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"gosubStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"returnStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"callStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitProcStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"endStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"swapStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"printStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"inputStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"defTypeStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"dataStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"readStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"restoreStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"callStmtWithOptParams\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"defSegStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"viewPrintStmt\"], \"postprocess\": id },\n        { \"name\": \"labelStmt\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0];\n                return $1.isFirstTokenOnLine ? __assign({ type: ast_1.StmtType.LABEL, label: $1.value }, useLoc($1)) : reject;\n            }\n        },\n        { \"name\": \"labelStmt\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0], $2 = _a[1];\n                // A line like \"f: f:\" should parse as a label \"f\" followed by an invocation of the\n                // sub \"f\", so need to explicitly disambiguate here.\n                return $1.isFirstTokenOnLine ? __assign({ type: ast_1.StmtType.LABEL, label: $1.value }, useLoc($1)) : reject;\n            }\n        },\n        { \"name\": \"dimStmt$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"SHARED\") ? { type: \"SHARED\" } : SHARED)], \"postprocess\": id },\n        { \"name\": \"dimStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"DIM\") ? { type: \"DIM\" } : DIM), \"dimStmt$ebnf$1\", \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: $2 ? ast_1.DimType.SHARED : ast_1.DimType.LOCAL, varDecls: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC), \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: ast_1.DimType.STATIC, varDecls: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"SHARED\") ? { type: \"SHARED\" } : SHARED), \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: ast_1.DimType.SHARED, varDecls: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varDecls$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"varDecls$ebnf$1$subexpression$1\", \"symbols\": [\"varDecl\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"varDecls$ebnf$1\", \"symbols\": [\"varDecls$ebnf$1\", \"varDecls$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"varDecls\", \"symbols\": [\"varDecls$ebnf$1\", \"varDecl\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"varDecl\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varDecl$ebnf$1\", \"symbols\": [\"dimensionSpecExprs\"], \"postprocess\": id },\n        { \"name\": \"varDecl$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"varDecl\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"varDecl$ebnf$1\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ name: $1.value, typeExpr: __assign({ type: ast_1.DataTypeExprType.ARRAY, elementTypeExpr: $5, dimensionSpecExprs: $3 !== null && $3 !== void 0 ? $3 : [] }, useLoc($1)) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimensionSpecExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"dimensionSpecExprs$ebnf$1$subexpression$1\", \"symbols\": [\"dimensionSpecExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"dimensionSpecExprs$ebnf$1\", \"symbols\": [\"dimensionSpecExprs$ebnf$1\", \"dimensionSpecExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"dimensionSpecExprs\", \"symbols\": [\"dimensionSpecExprs$ebnf$1\", \"dimensionSpecExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"dimensionSpecExpr\", \"symbols\": [\"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ maxIdxExpr: $1 }, useLoc($1)));\n            } },\n        { \"name\": \"dimensionSpecExpr\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ minIdxExpr: $1, maxIdxExpr: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"assignStmt$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"LET\") ? { type: \"LET\" } : LET)], \"postprocess\": id },\n        { \"name\": \"assignStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"assignStmt\", \"symbols\": [\"assignStmt$ebnf$1\", \"lhsExpr\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.ASSIGN, targetExpr: $2, valueExpr: $4 }, useLoc($1 || $2)));\n            }\n        },\n        { \"name\": \"constStmt\", \"symbols\": [(lexer_1.default.has(\"CONST\") ? { type: \"CONST\" } : CONST), \"constDefs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.CONST, constDefs: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"constDefs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"constDefs$ebnf$1$subexpression$1\", \"symbols\": [\"constDef\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"constDefs$ebnf$1\", \"symbols\": [\"constDefs$ebnf$1\", \"constDefs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"constDefs\", \"symbols\": [\"constDefs$ebnf$1\", \"constDef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"constDef\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ name: $1.value, valueExpr: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"gotoStmt\", \"symbols\": [(lexer_1.default.has(\"GOTO\") ? { type: \"GOTO\" } : GOTO), \"labelRef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.GOTO, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singleLineIfStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"singleLineStmts\"] },\n        { \"name\": \"singleLineIfStmt$ebnf$1\", \"symbols\": [\"singleLineIfStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"singleLineIfStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"singleLineIfStmt\", \"symbols\": [(lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), \"singleLineStmts\", \"singleLineIfStmt$ebnf$1\", (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: ast_1.StmtType.IF, ifBranches: [__assign({ condExpr: $2, stmts: $4 }, useLoc($1))], elseBranch: $5 ? __assign({ stmts: $5[1] }, useLoc($5[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"blockIfStmt$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"blockIfStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSEIF\") ? { type: \"ELSEIF\" } : ELSEIF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE), \"stmts\"] },\n        { \"name\": \"blockIfStmt$ebnf$1\", \"symbols\": [\"blockIfStmt$ebnf$1\", \"blockIfStmt$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"blockIfStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"stmts\"] },\n        { \"name\": \"blockIfStmt$ebnf$2\", \"symbols\": [\"blockIfStmt$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"blockIfStmt$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"blockIfStmt\", \"symbols\": [(lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE), \"stmts\", \"blockIfStmt$ebnf$1\", \"blockIfStmt$ebnf$2\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6], $8 = _a[7], $9 = _a[8];\n                return (__assign({ type: ast_1.StmtType.IF, ifBranches: __spreadArray([\n                        __assign({ condExpr: $2, stmts: $5 }, useLoc($1))\n                    ], $6.map(function (_a) {\n                        var $6_1 = _a[0], $6_2 = _a[1], $6_3 = _a[2], $6_4 = _a[3], $6_5 = _a[4];\n                        return (__assign({ condExpr: $6_2, stmts: $6_5 }, useLoc($6_1)));\n                    })), elseBranch: $7 ? __assign({ stmts: $7[1] }, useLoc($7[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"selectStmt$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"selectStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"selectStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"caseExprs\", \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$2\", \"symbols\": [\"selectStmt$ebnf$2$subexpression$1\"] },\n        { \"name\": \"selectStmt$ebnf$2$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"caseExprs\", \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$2\", \"symbols\": [\"selectStmt$ebnf$2\", \"selectStmt$ebnf$2$subexpression$2\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"selectStmt$ebnf$3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), (lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$3\", \"symbols\": [\"selectStmt$ebnf$3$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"selectStmt$ebnf$3\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"selectStmt\", \"symbols\": [(lexer_1.default.has(\"SELECT\") ? { type: \"SELECT\" } : SELECT), (lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"expr\", \"selectStmt$ebnf$1\", \"selectStmt$ebnf$2\", \"selectStmt$ebnf$3\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"SELECT\") ? { type: \"SELECT\" } : SELECT)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6], $8 = _a[7];\n                return (__assign({ type: ast_1.StmtType.SELECT, testExpr: $3, ifBranches: $5.map(function (_a) {\n                        var $5_1 = _a[0], $5_2 = _a[1], $5_3 = _a[2];\n                        return (__assign({ condExprs: $5_2, stmts: $5_3 }, useLoc($5_1)));\n                    }), elseBranch: $6 ? __assign({ stmts: $6[2] }, useLoc($6[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"caseExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"caseExprs$ebnf$1$subexpression$1\", \"symbols\": [\"caseExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"caseExprs$ebnf$1\", \"symbols\": [\"caseExprs$ebnf$1\", \"caseExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"caseExprs\", \"symbols\": [\"caseExprs$ebnf$1\", \"caseExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"caseExpr\", \"symbols\": [\"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    type: ast_1.CaseExprType.VALUE,\n                    valueExpr: $1,\n                });\n            }\n        },\n        { \"name\": \"caseExpr\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return ({\n                    type: ast_1.CaseExprType.RANGE,\n                    lowerBoundExpr: $1,\n                    upperBoundExpr: $3,\n                });\n            }\n        },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NE\") ? { type: \"NE\" } : NE)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GT\") ? { type: \"GT\" } : GT)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GTE\") ? { type: \"GTE\" } : GTE)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LT\") ? { type: \"LT\" } : LT)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LTE\") ? { type: \"LTE\" } : LTE)] },\n        { \"name\": \"caseExpr\", \"symbols\": [(lexer_1.default.has(\"IS\") ? { type: \"IS\" } : IS), \"caseExpr$subexpression$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return ({\n                    type: ast_1.CaseExprType.COMP,\n                    op: id($2).type.toLowerCase(),\n                    rightExpr: $3,\n                });\n            }\n        },\n        { \"name\": \"whileStmt\", \"symbols\": [(lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\", \"stmts\", (lexer_1.default.has(\"WEND\") ? { type: \"WEND\" } : WEND)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $2, isCondNegated: false, stmts: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doWhileStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), (lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\", \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $3, isCondNegated: false, stmts: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doUntilStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), (lexer_1.default.has(\"UNTIL\") ? { type: \"UNTIL\" } : UNTIL), \"expr\", \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $3, isCondNegated: true, stmts: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"loopWhileStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP), (lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS, condExpr: $5, isCondNegated: false, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"loopUntilStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP), (lexer_1.default.has(\"UNTIL\") ? { type: \"UNTIL\" } : UNTIL), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS, condExpr: $5, isCondNegated: true, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doLoopStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.UNCOND_LOOP, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitLoopStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_LOOP }, useLoc($1)));\n            } },\n        { \"name\": \"forStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STEP\") ? { type: \"STEP\" } : STEP), \"expr\"] },\n        { \"name\": \"forStmt$ebnf$1\", \"symbols\": [\"forStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"forStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"forStmt\", \"symbols\": [(lexer_1.default.has(\"FOR\") ? { type: \"FOR\" } : FOR), \"lhsExpr\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\", \"forStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: ast_1.StmtType.FOR, counterExpr: $2, startExpr: $4, endExpr: $6, stepExpr: $7 ? $7[1] : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"nextStmt$ebnf$1\", \"symbols\": [\"lhsExprs\"], \"postprocess\": id },\n        { \"name\": \"nextStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"nextStmt\", \"symbols\": [(lexer_1.default.has(\"NEXT\") ? { type: \"NEXT\" } : NEXT), \"nextStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.NEXT, counterExprs: $2 !== null && $2 !== void 0 ? $2 : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitForStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"FOR\") ? { type: \"FOR\" } : FOR)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_FOR }, useLoc($1)));\n            } },\n        { \"name\": \"gosubStmt\", \"symbols\": [(lexer_1.default.has(\"GOSUB\") ? { type: \"GOSUB\" } : GOSUB), \"labelRef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.GOSUB, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"returnStmt$ebnf$1\", \"symbols\": [\"labelRef\"], \"postprocess\": id },\n        { \"name\": \"returnStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"returnStmt\", \"symbols\": [(lexer_1.default.has(\"RETURN\") ? { type: \"RETURN\" } : RETURN), \"returnStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.RETURN, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"exprs\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"callStmt$ebnf$1\", \"symbols\": [\"callStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"callStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"callStmt\", \"symbols\": [(lexer_1.default.has(\"CALL\") ? { type: \"CALL\" } : CALL), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"callStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: $2.value, argExprs: $3 ? $3[1] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmt\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"exprs\"], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0], $2 = _a[1];\n                // A line like \"f: f:\" should parse as a label \"f\" followed by an invocation of the\n                // sub \"f\", so need to explicitly disambiguate here.\n                if ($1.isFirstTokenOnLine && $2.length === 0) {\n                    var nextToken = lexer_1.default.peek();\n                    if (nextToken && nextToken.type === 'COLON') {\n                        return reject;\n                    }\n                }\n                // A line like \"A(0) = 42\" should parse as an assignment rather than a CALL statement.\n                if ($2.length === 1 && $2[0].type === ast_1.ExprType.BINARY_OP && $2[0].op === ast_1.BinaryOp.EQ) {\n                    return reject;\n                }\n                return __assign({ type: ast_1.StmtType.CALL, name: $1.value, argExprs: $2 }, useLoc($1));\n            }\n        },\n        { \"name\": \"exitProcStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_PROC, procType: types_1.ProcType.FN }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitProcStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_PROC, procType: types_1.ProcType.SUB }, useLoc($1)));\n            }\n        },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"END\") ? { type: \"END\" } : END)] },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SYSTEM\") ? { type: \"SYSTEM\" } : SYSTEM)] },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STOP\") ? { type: \"STOP\" } : STOP)] },\n        { \"name\": \"endStmt\", \"symbols\": [\"endStmt$subexpression$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.StmtType.END }, useLoc(id($1))));\n            } },\n        { \"name\": \"swapStmt\", \"symbols\": [(lexer_1.default.has(\"SWAP\") ? { type: \"SWAP\" } : SWAP), \"lhsExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA), \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.SWAP, leftExpr: $2, rightExpr: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"printStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"USING\") ? { type: \"USING\" } : USING), \"expr\", (lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)] },\n        { \"name\": \"printStmt$ebnf$1\", \"symbols\": [\"printStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"printStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"printStmt\", \"symbols\": [(lexer_1.default.has(\"PRINT\") ? { type: \"PRINT\" } : PRINT), \"printStmt$ebnf$1\", \"printArgs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.PRINT, args: $3, formatExpr: $2 ? $2[1] : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"printArgs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"printArgs$ebnf$1$subexpression$1\", \"symbols\": [\"expr\"] },\n        { \"name\": \"printArgs$ebnf$1$subexpression$1\", \"symbols\": [\"printSep\"] },\n        { \"name\": \"printArgs$ebnf$1\", \"symbols\": [\"printArgs$ebnf$1\", \"printArgs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"printArgs\", \"symbols\": [\"printArgs$ebnf$1\"], \"postprocess\": function (_a, location, reject) {\n                var $1 = _a[0];\n                var args = lodash_1.default.flatten($1);\n                // Disambiguate \"fn (x)\" - prefer to parse as function call.\n                for (var i = 0; i < args.length - 1; ++i) {\n                    var arg1 = args[i], arg2 = args[i + 1];\n                    if (typeof arg1 !== 'string' && arg1.type === ast_1.ExprType.VAR_REF &&\n                        typeof arg2 !== 'string' && arg2.type === ast_1.ExprType.UNARY_OP && arg2.op === ast_1.UnaryOp.PARENS) {\n                        return reject;\n                    }\n                }\n                return args;\n            }\n        },\n        { \"name\": \"printSep\", \"symbols\": [(lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)], \"postprocess\": function () { return ast_1.PrintSep.COMMA; } },\n        { \"name\": \"printSep\", \"symbols\": [(lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)], \"postprocess\": function () { return ast_1.PrintSep.SEMICOLON; } },\n        { \"name\": \"inputStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL), \"inputStmtPromptSep\"] },\n        { \"name\": \"inputStmt$ebnf$1\", \"symbols\": [\"inputStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"inputStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"inputStmt\", \"symbols\": [(lexer_1.default.has(\"INPUT\") ? { type: \"INPUT\" } : INPUT), \"inputStmt$ebnf$1\", \"lhsExprs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.INPUT, prompt: $2 ? \"\" + $2[0].value + ($2[1] ? '? ' : '') : '? ', inputType: ast_1.InputType.TOKENIZED, targetExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"inputStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL), \"inputStmtPromptSep\"] },\n        { \"name\": \"inputStmt$ebnf$2\", \"symbols\": [\"inputStmt$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"inputStmt$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"inputStmt\", \"symbols\": [(lexer_1.default.has(\"LINE\") ? { type: \"LINE\" } : LINE), (lexer_1.default.has(\"INPUT\") ? { type: \"INPUT\" } : INPUT), \"inputStmt$ebnf$2\", \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.INPUT, prompt: $3 ? $3[0].value : '', inputType: ast_1.InputType.LINE, targetExprs: [$4] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"inputStmtPromptSep\", \"symbols\": [(lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)], \"postprocess\": function () { return false; } },\n        { \"name\": \"inputStmtPromptSep\", \"symbols\": [(lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)], \"postprocess\": function () { return true; } },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFINT\") ? { type: \"DEFINT\" } : DEFINT), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.integerSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFSNG\") ? { type: \"DEFSNG\" } : DEFSNG), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.singleSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFDBL\") ? { type: \"DEFDBL\" } : DEFDBL), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.doubleSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFLNG\") ? { type: \"DEFLNG\" } : DEFLNG), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.longSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFSTR\") ? { type: \"DEFSTR\" } : DEFSTR), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.stringSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeRanges$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"defTypeRanges$ebnf$1$subexpression$1\", \"symbols\": [\"defTypeRange\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"defTypeRanges$ebnf$1\", \"symbols\": [\"defTypeRanges$ebnf$1\", \"defTypeRanges$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"defTypeRanges\", \"symbols\": [\"defTypeRanges$ebnf$1\", \"defTypeRange\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"defTypeRange\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ minPrefix: $1.value, maxPrefix: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeRange\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ minPrefix: $1.value, maxPrefix: $3.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dataStmt$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"dataStmt$ebnf$1$subexpression$1\", \"symbols\": [\"dataItem\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"dataStmt$ebnf$1\", \"symbols\": [\"dataStmt$ebnf$1\", \"dataStmt$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"dataStmt\", \"symbols\": [(lexer_1.default.has(\"DATA\") ? { type: \"DATA\" } : DATA), \"dataStmt$ebnf$1\", \"dataItem\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.DATA, data: __spreadArray(__spreadArray([], $2 ? $2.map(function (_a) {\n                        var $2_1 = _a[0], $2_2 = _a[1];\n                        return $2_1;\n                    }) : []), [\n                        $3,\n                    ]) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dataItem\", \"symbols\": [], \"postprocess\": function () { return buildDataItem(lexer_1.default.lastToken, null); } },\n        { \"name\": \"dataItem\", \"symbols\": [\"literalExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return buildDataItem($1, $1.value);\n            } },\n        { \"name\": \"dataItem\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return buildDataItem($1, $1.value);\n            } },\n        { \"name\": \"readStmt\", \"symbols\": [(lexer_1.default.has(\"READ\") ? { type: \"READ\" } : READ), \"lhsExprs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.READ, targetExprs: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"restoreStmt$ebnf$1\", \"symbols\": [\"labelRef\"], \"postprocess\": id },\n        { \"name\": \"restoreStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"restoreStmt\", \"symbols\": [(lexer_1.default.has(\"RESTORE\") ? { type: \"RESTORE\" } : RESTORE), \"restoreStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.RESTORE, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmtWithOptParams$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LOCATE\") ? { type: \"LOCATE\" } : LOCATE)] },\n        { \"name\": \"callStmtWithOptParams$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"COLOR\") ? { type: \"COLOR\" } : COLOR)] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", \"symbols\": [\"expr\"], \"postprocess\": id },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1\", \"symbols\": [\"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1\", \"symbols\": [\"callStmtWithOptParams$ebnf$1\", \"callStmtWithOptParams$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"callStmtWithOptParams\", \"symbols\": [\"callStmtWithOptParams$subexpression$1\", \"callStmtWithOptParams$ebnf$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: $1[0].value, argExprs: __spreadArray(__spreadArray([], ($2 ? $2.map(function (_a) {\n                        var $2_1 = _a[0], $2_2 = _a[1];\n                        return $2_1 !== null && $2_1 !== void 0 ? $2_1 : __assign({ type: ast_1.ExprType.LITERAL, value: NaN }, useLoc($2_2));\n                    }) : [])), [\n                        $3,\n                    ]) }, useLoc($1[0])));\n            }\n        },\n        { \"name\": \"defSegStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"] },\n        { \"name\": \"defSegStmt$ebnf$1\", \"symbols\": [\"defSegStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"defSegStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"defSegStmt\", \"symbols\": [(lexer_1.default.has(\"DEF\") ? { type: \"DEF\" } : DEF), (lexer_1.default.has(\"SEG\") ? { type: \"SEG\" } : SEG), \"defSegStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: '__def_seg', argExprs: $3 ? [$3[1]] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"viewPrintStmt$ebnf$1$subexpression$1\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"] },\n        { \"name\": \"viewPrintStmt$ebnf$1\", \"symbols\": [\"viewPrintStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"viewPrintStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"viewPrintStmt\", \"symbols\": [(lexer_1.default.has(\"VIEW\") ? { type: \"VIEW\" } : VIEW), (lexer_1.default.has(\"PRINT\") ? { type: \"PRINT\" } : PRINT), \"viewPrintStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: '__view_print', argExprs: $3 ? [$3[0], $3[2]] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singleLineStmts$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"singleLineStmts$ebnf$1\", \"symbols\": [\"singleLineStmts$ebnf$1\", (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts$ebnf$2\", \"symbols\": [] },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [\"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1\", \"symbols\": [\"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"nonLabelStmt\"] },\n        { \"name\": \"singleLineStmts$ebnf$2\", \"symbols\": [\"singleLineStmts$ebnf$2\", \"singleLineStmts$ebnf$2$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts\", \"symbols\": [\"singleLineStmts$ebnf$1\", \"nonLabelStmt\", \"singleLineStmts$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return __spreadArray([$2], $3.map(function (_a) {\n                    var $3_1 = _a[0], $3_2 = _a[1];\n                    return $3_2;\n                }));\n            }\n        },\n        { \"name\": \"lhsExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"lhsExprs$ebnf$1$subexpression$1\", \"symbols\": [\"lhsExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"lhsExprs$ebnf$1\", \"symbols\": [\"lhsExprs$ebnf$1\", \"lhsExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"lhsExprs\", \"symbols\": [\"lhsExprs$ebnf$1\", \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"labelRef$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)] },\n        { \"name\": \"labelRef$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)] },\n        { \"name\": \"labelRef\", \"symbols\": [\"labelRef$subexpression$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return id($1).value;\n            } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"INTEGER\") ? { type: \"INTEGER\" } : INTEGER)], \"postprocess\": function () { return types_1.integerSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"LONG\") ? { type: \"LONG\" } : LONG)], \"postprocess\": function () { return types_1.longSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"SINGLE\") ? { type: \"SINGLE\" } : SINGLE)], \"postprocess\": function () { return types_1.singleSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"DOUBLE\") ? { type: \"DOUBLE\" } : DOUBLE)], \"postprocess\": function () { return types_1.doubleSpec(); } },\n        { \"name\": \"elementaryTypeSpec$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MUL\") ? { type: \"MUL\" } : MUL), \"expr2\"] },\n        { \"name\": \"elementaryTypeSpec$ebnf$1\", \"symbols\": [\"elementaryTypeSpec$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"elementaryTypeSpec$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"STRING\") ? { type: \"STRING\" } : STRING), \"elementaryTypeSpec$ebnf$1\"], \"postprocess\": function () { return types_1.stringSpec(); } },\n        { \"name\": \"singularTypeExpr\", \"symbols\": [(lexer_1.default.has(\"AS\") ? { type: \"AS\" } : AS), \"elementaryTypeSpec\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.DataTypeExprType.ELEMENTARY, typeSpec: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singularTypeExpr\", \"symbols\": [(lexer_1.default.has(\"AS\") ? { type: \"AS\" } : AS), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.DataTypeExprType.UDT, name: $2.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singularTypeExprOrDefault\", \"symbols\": [], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    type: ast_1.DataTypeExprType.ELEMENTARY,\n                    loc: { line: lexer_1.default.lastToken.line, col: lexer_1.default.lastToken.col },\n                });\n            }\n        },\n        { \"name\": \"singularTypeExprOrDefault\", \"symbols\": [\"singularTypeExpr\"], \"postprocess\": id },\n        { \"name\": \"expr\", \"symbols\": [\"expr10\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"varRefExpr\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"fnCallExpr\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"memberExpr\"], \"postprocess\": id },\n        { \"name\": \"expr10\", \"symbols\": [\"expr9\"], \"postprocess\": id },\n        { \"name\": \"expr10$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"OR\") ? { type: \"OR\" } : OR)] },\n        { \"name\": \"expr10\", \"symbols\": [\"expr10\", \"expr10$subexpression$1\", \"expr9\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr9\", \"symbols\": [\"expr8\"], \"postprocess\": id },\n        { \"name\": \"expr9$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"AND\") ? { type: \"AND\" } : AND)] },\n        { \"name\": \"expr9\", \"symbols\": [\"expr9\", \"expr9$subexpression$1\", \"expr8\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr8\", \"symbols\": [\"expr7\"], \"postprocess\": id },\n        { \"name\": \"expr8$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NOT\") ? { type: \"NOT\" } : NOT)] },\n        { \"name\": \"expr8\", \"symbols\": [\"expr8$subexpression$1\", \"expr7\"], \"postprocess\": buildUnaryOpExpr },\n        { \"name\": \"expr7\", \"symbols\": [\"expr6\"], \"postprocess\": id },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NE\") ? { type: \"NE\" } : NE)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GT\") ? { type: \"GT\" } : GT)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GTE\") ? { type: \"GTE\" } : GTE)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LT\") ? { type: \"LT\" } : LT)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LTE\") ? { type: \"LTE\" } : LTE)] },\n        { \"name\": \"expr7\", \"symbols\": [\"expr6\", \"expr7$subexpression$1\", \"expr6\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr6\", \"symbols\": [\"expr5\"], \"postprocess\": id },\n        { \"name\": \"expr6$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ADD\") ? { type: \"ADD\" } : ADD)] },\n        { \"name\": \"expr6$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"expr6\", \"symbols\": [\"expr6\", \"expr6$subexpression$1\", \"expr5\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr5\", \"symbols\": [\"expr4\"], \"postprocess\": id },\n        { \"name\": \"expr5$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MOD\") ? { type: \"MOD\" } : MOD)] },\n        { \"name\": \"expr5\", \"symbols\": [\"expr5\", \"expr5$subexpression$1\", \"expr4\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr4\", \"symbols\": [\"expr3\"], \"postprocess\": id },\n        { \"name\": \"expr4$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"INTDIV\") ? { type: \"INTDIV\" } : INTDIV)] },\n        { \"name\": \"expr4\", \"symbols\": [\"expr4\", \"expr4$subexpression$1\", \"expr3\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr3\", \"symbols\": [\"expr2\"], \"postprocess\": id },\n        { \"name\": \"expr3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MUL\") ? { type: \"MUL\" } : MUL)] },\n        { \"name\": \"expr3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"DIV\") ? { type: \"DIV\" } : DIV)] },\n        { \"name\": \"expr3\", \"symbols\": [\"expr3\", \"expr3$subexpression$1\", \"expr2\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr2\", \"symbols\": [\"expr1\"], \"postprocess\": id },\n        { \"name\": \"expr2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"expr2\", \"symbols\": [\"expr2$subexpression$1\", \"expr1\"], \"postprocess\": buildUnaryOpExpr },\n        { \"name\": \"expr1\", \"symbols\": [\"expr0\"], \"postprocess\": id },\n        { \"name\": \"expr1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EXP\") ? { type: \"EXP\" } : EXP)] },\n        { \"name\": \"expr1\", \"symbols\": [\"expr1\", \"expr1$subexpression$1\", \"expr0\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr0\", \"symbols\": [\"varRefExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"fnCallExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"literalExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"memberExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"expr\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.ExprType.UNARY_OP, op: ast_1.UnaryOp.PARENS, rightExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varRefExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.VAR_REF, name: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"fnCallExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"exprs\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.ExprType.FN_CALL, name: $1.value, argExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"literalExpr\", \"symbols\": [\"stringLiteralExpr\"], \"postprocess\": id },\n        { \"name\": \"literalExpr\", \"symbols\": [\"numericLiteralExpr\"], \"postprocess\": id },\n        { \"name\": \"stringLiteralExpr\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.LITERAL, value: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"numericLiteralExpr\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.LITERAL, value: parseFloat($1.value) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"memberExpr\", \"symbols\": [\"lhsExpr\", (lexer_1.default.has(\"DOT\") ? { type: \"DOT\" } : DOT), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.ExprType.MEMBER, udtExpr: $1, fieldName: $3.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exprs\", \"symbols\": [], \"postprocess\": function () { return []; } },\n        { \"name\": \"exprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"exprs$ebnf$1$subexpression$1\", \"symbols\": [\"expr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"exprs$ebnf$1\", \"symbols\": [\"exprs$ebnf$1\", \"exprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"exprs\", \"symbols\": [\"exprs$ebnf$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        }\n    ],\n    ParserStart: \"module\",\n};\nexports.default = grammar;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticAnalyzer = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar ast_1 = require(\"../lib/ast\");\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar builtins_1 = require(\"../runtime/builtins\");\n/** Map from variable type declaration suffix to the corresponding type spec. */\nvar TYPE_SUFFIX_MAP = Object.freeze({\n    '%': types_1.integerSpec(),\n    '&': types_1.longSpec(),\n    '!': types_1.singleSpec(),\n    '#': types_1.doubleSpec(),\n    $: types_1.stringSpec(),\n});\n/** Default array dimension spec. */\nvar DEFAULT_DIMENSION_SPEC = [0, 10];\n/** Semantic analysis pass.\n *\n * Main tasks:\n *\n * - Type analysis for symbols, expressions and statements\n * - Build symbol table and resolve references\n */\nvar SemanticAnalyzer = /** @class */ (function (_super) {\n    __extends(SemanticAnalyzer, _super);\n    function SemanticAnalyzer(module, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName;\n        var _this = _super.call(this) || this;\n        _this.module = module;\n        /** Stack of UDTs being resolved. Used to detect cycles. */\n        _this.udtStack = [];\n        /** The current proc being visited, or null if currently visiting module-level nodes. */\n        _this.currentProc = null;\n        /** Default type based on first letter of identifier. */\n        _this.defTypeMap = {};\n        _this.sourceFileName = sourceFileName;\n        return _this;\n    }\n    SemanticAnalyzer.prototype.run = function () {\n        this.visitModule(this.module);\n    };\n    SemanticAnalyzer.prototype.visitModule = function (module) {\n        this.setUpDefTypeMap();\n        // Resolve UDT types.\n        this.udtStack = [];\n        module.udts.forEach(this.visitUdt.bind(this));\n        // Resolve type signatures of procs.\n        module.procs.forEach(this.preprocessProc.bind(this));\n        this.currentProc = null;\n        module.localSymbols = [];\n        module.globalSymbols = [];\n        module.labels = this.getLabels(module.stmts);\n        this.acceptAll(module.stmts);\n        this.acceptAll(module.procs);\n    };\n    SemanticAnalyzer.prototype.preprocessProc = function (node) {\n        var _this = this;\n        node.paramSymbols = node.params.map(function (param) { return ({\n            name: param.name,\n            varType: symbol_table_1.VarType.ARG,\n            typeSpec: _this.getTypeSpecForVarDeclOrParam(param),\n            varScope: symbol_table_1.VarScope.LOCAL,\n        }); });\n        node.localSymbols = [];\n        if (ast_1.isFnProcOrDefFnProc(node)) {\n            if (!node.returnTypeSpec) {\n                node.returnTypeSpec = this.getDefaultTypeSpecFromName(node.name);\n            }\n            node.localSymbols.push({\n                name: node.name,\n                varType: symbol_table_1.VarType.VAR,\n                typeSpec: node.returnTypeSpec,\n                varScope: symbol_table_1.VarScope.LOCAL,\n            });\n        }\n        node.labels = this.getLabels(node.stmts);\n    };\n    SemanticAnalyzer.prototype.getLabels = function (stmts) {\n        var labelLocMap = {};\n        for (var _i = 0, stmts_1 = stmts; _i < stmts_1.length; _i++) {\n            var stmt = stmts_1[_i];\n            if (stmt.type !== ast_1.StmtType.LABEL) {\n                continue;\n            }\n            if (labelLocMap[stmt.label]) {\n                this.throwError(\"Label \\\"\" + stmt.label + \"\\\" already defined on line \" + labelLocMap[stmt.label].line, stmt);\n            }\n            labelLocMap[stmt.label] = stmt.loc;\n        }\n        return Object.keys(labelLocMap);\n    };\n    /** Resolve UDT type spec using depth first search. */\n    SemanticAnalyzer.prototype.visitUdt = function (udt) {\n        var _a;\n        if (udt.typeSpec) {\n            return;\n        }\n        // Check if we have a cycle.\n        var udtStackIdx = this.udtStack.indexOf(udt);\n        if (udtStackIdx >= 0) {\n            var udtsInCycle = __spreadArray(__spreadArray([], this.udtStack.slice(udtStackIdx)), [udt]);\n            this.throwError('Dependency cycle in user-defined types: ' +\n                udtsInCycle.map(function (_a) {\n                    var name = _a.name;\n                    return name;\n                }).join(' -> '), udt);\n        }\n        // Resolve typeSpec of each field.\n        this.udtStack.push(udt);\n        var typeSpec = {\n            type: types_1.DataType.UDT,\n            name: udt.name,\n            fieldSpecs: [],\n        };\n        for (var _i = 0, _b = udt.fieldSpecExprs; _i < _b.length; _i++) {\n            var _c = _b[_i], fieldName = _c.name, typeExpr = _c.typeExpr;\n            var fieldTypeSpec = void 0;\n            switch (typeExpr.type) {\n                case ast_1.DataTypeExprType.ELEMENTARY:\n                    fieldTypeSpec =\n                        (_a = typeExpr.typeSpec) !== null && _a !== void 0 ? _a : this.getDefaultTypeSpecFromName(fieldName);\n                    break;\n                case ast_1.DataTypeExprType.UDT:\n                    var fieldUdt = this.lookupUdtOrThrow(typeExpr, typeExpr.name);\n                    this.visitUdt(fieldUdt);\n                    fieldTypeSpec = fieldUdt.typeSpec;\n                    break;\n                default:\n                    this.throwError(\"Unexpected field type: \" + JSON.stringify(typeExpr), typeExpr);\n            }\n            typeSpec.fieldSpecs.push({ name: fieldName, typeSpec: fieldTypeSpec });\n        }\n        udt.typeSpec = typeSpec;\n    };\n    SemanticAnalyzer.prototype.visitProc = function (node) {\n        this.currentProc = node;\n        this.acceptAll(node.stmts);\n        this.currentProc = null;\n    };\n    SemanticAnalyzer.prototype.visitLabelStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitDimStmt = function (node) {\n        if (node.dimType === ast_1.DimType.STATIC && !this.currentProc) {\n            this.throwError('STATIC statement can only be used inside a procedure.', node);\n        }\n        for (var _i = 0, _a = node.varDecls; _i < _a.length; _i++) {\n            var varDecl = _a[_i];\n            var typeSpec = this.getTypeSpecForVarDeclOrParam(varDecl);\n            var resolvedSymbol = this.lookupSymbol(varDecl.name);\n            if (resolvedSymbol) {\n                if (resolvedSymbol.varScope === symbol_table_1.VarScope.LOCAL) {\n                    this.throwError(\"Variable already defined in local scope: \\\"\" + varDecl.name + \"\\\"\", node);\n                }\n                else if (resolvedSymbol.varScope === symbol_table_1.VarScope.GLOBAL &&\n                    node.dimType === ast_1.DimType.SHARED &&\n                    !(types_1.areMatchingSingularTypes(typeSpec, resolvedSymbol.typeSpec) ||\n                        (types_1.isArray(typeSpec) &&\n                            types_1.isArray(resolvedSymbol.typeSpec) &&\n                            types_1.areMatchingSingularTypes(typeSpec.elementTypeSpec, resolvedSymbol.typeSpec.elementTypeSpec)))) {\n                    this.throwError(\"Variable already defined in global scope: \\\"\" + varDecl.name + \"\\\"\", node);\n                }\n                varDecl.symbol = resolvedSymbol;\n            }\n            else {\n                var symbol = void 0;\n                switch (node.dimType) {\n                    case ast_1.DimType.SHARED:\n                        // If this symbol is already defined as a local var at the module level, promote it to\n                        // global.\n                        var moduleLocalSymbol = symbol_table_1.lookupSymbol(this.module.localSymbols, varDecl.name);\n                        if (moduleLocalSymbol) {\n                            symbol = moduleLocalSymbol;\n                            this.module.localSymbols.splice(this.module.localSymbols.indexOf(moduleLocalSymbol), 1);\n                            symbol.varScope = symbol_table_1.VarScope.GLOBAL;\n                        }\n                        else {\n                            symbol = {\n                                name: varDecl.name,\n                                varType: symbol_table_1.VarType.VAR,\n                                typeSpec: typeSpec,\n                                varScope: symbol_table_1.VarScope.GLOBAL,\n                            };\n                        }\n                        this.module.globalSymbols.push(symbol);\n                        break;\n                    case ast_1.DimType.LOCAL:\n                        symbol = this.createLocalVarSymbol({\n                            name: varDecl.name,\n                            typeSpec: typeSpec,\n                        });\n                        this.addLocalSymbol(symbol);\n                        break;\n                    case ast_1.DimType.STATIC:\n                        symbol = {\n                            name: varDecl.name,\n                            varType: symbol_table_1.VarType.STATIC_VAR,\n                            typeSpec: typeSpec,\n                            varScope: symbol_table_1.VarScope.LOCAL,\n                        };\n                        this.addLocalSymbol(symbol);\n                        break;\n                    default:\n                        this.throwError(\"Unknown DimType: \" + JSON.stringify(node.dimType), node);\n                }\n                varDecl.symbol = symbol;\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitAssignStmt = function (node) {\n        this.accept(node.targetExpr);\n        this.accept(node.valueExpr);\n        var targetTypeSpec = node.targetExpr.typeSpec;\n        var valueTypeSpec = node.valueExpr.typeSpec;\n        if (!types_1.areMatchingSingularTypes(targetTypeSpec, valueTypeSpec)) {\n            this.throwError(\"Cannot assign \" + types_1.typeSpecName(valueTypeSpec) + \" value \" +\n                (\"to \" + types_1.typeSpecName(targetTypeSpec) + \" variable\"), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitConstStmt = function (node) {\n        for (var _i = 0, _a = node.constDefs; _i < _a.length; _i++) {\n            var constDef = _a[_i];\n            this.accept(constDef.valueExpr);\n            var resolvedSymbol = this.lookupSymbol(constDef.name);\n            if (resolvedSymbol) {\n                if (resolvedSymbol.varScope === symbol_table_1.VarScope.LOCAL) {\n                    this.throwError(\"Constant already defined in local scope: \\\"\" + constDef.name + \"\\\"\", node);\n                }\n                else if (resolvedSymbol.varScope === symbol_table_1.VarScope.GLOBAL &&\n                    !this.currentProc) {\n                    this.throwError(\"Constant already defined in global scope: \\\"\" + constDef.name + \"\\\"\", node);\n                }\n            }\n            var symbolProps = {\n                name: constDef.name,\n                varType: symbol_table_1.VarType.CONST,\n                typeSpec: constDef.valueExpr.typeSpec,\n            };\n            if (this.currentProc) {\n                var symbol = __assign(__assign({}, symbolProps), { varScope: symbol_table_1.VarScope.LOCAL });\n                this.addLocalSymbol(symbol);\n                constDef.symbol = symbol;\n            }\n            else {\n                var symbol = __assign(__assign({}, symbolProps), { varScope: symbol_table_1.VarScope.GLOBAL });\n                this.module.globalSymbols.push(symbol);\n                constDef.symbol = symbol;\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitGotoStmt = function (node) {\n        var _a;\n        node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n    };\n    SemanticAnalyzer.prototype.requireNumericExpr = function () {\n        var exprs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            exprs[_i] = arguments[_i];\n        }\n        for (var _a = 0, exprs_1 = exprs; _a < exprs_1.length; _a++) {\n            var expr = exprs_1[_a];\n            this.accept(expr);\n            if (!types_1.isNumeric(expr.typeSpec)) {\n                this.throwError(\"Expected numeric expression (got \" + types_1.typeSpecName(expr.typeSpec) + \")\", expr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.requireElementaryTypeExpr = function () {\n        var exprs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            exprs[_i] = arguments[_i];\n        }\n        for (var _a = 0, exprs_2 = exprs; _a < exprs_2.length; _a++) {\n            var expr = exprs_2[_a];\n            this.accept(expr);\n            if (!types_1.isElementaryType(expr.typeSpec)) {\n                this.throwError(\"Expected elementary type expression instead of \" + expr.typeSpec.type, expr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitIfStmt = function (node) {\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var _b = _a[_i], condExpr = _b.condExpr, stmts = _b.stmts;\n            this.requireNumericExpr(condExpr);\n            this.acceptAll(stmts);\n        }\n        if (node.elseBranch) {\n            this.acceptAll(node.elseBranch.stmts);\n        }\n    };\n    SemanticAnalyzer.prototype.visitSelectStmt = function (node) {\n        this.accept(node.testExpr);\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var _b = _a[_i], condExprs = _b.condExprs, stmts = _b.stmts;\n            for (var _c = 0, condExprs_1 = condExprs; _c < condExprs_1.length; _c++) {\n                var condExpr = condExprs_1[_c];\n                var exprs = [];\n                switch (condExpr.type) {\n                    case ast_1.CaseExprType.VALUE:\n                        exprs.push(condExpr.valueExpr);\n                        break;\n                    case ast_1.CaseExprType.RANGE:\n                        exprs.push(condExpr.lowerBoundExpr, condExpr.upperBoundExpr);\n                        break;\n                    case ast_1.CaseExprType.COMP:\n                        exprs.push(condExpr.rightExpr);\n                        break;\n                    default:\n                        this.throwError(\"Unknown case expression type: \" + JSON.stringify(condExpr), node);\n                }\n                this.acceptAll(exprs);\n                for (var _d = 0, exprs_3 = exprs; _d < exprs_3.length; _d++) {\n                    var expr = exprs_3[_d];\n                    if (!types_1.areMatchingElementaryTypes(node.testExpr.typeSpec, expr.typeSpec)) {\n                        this.throwError('Case expression type does not match test expression: ' +\n                            (\"expected \" + types_1.typeSpecName(node.testExpr.typeSpec) + \", \") +\n                            (\"got \" + types_1.typeSpecName(expr.typeSpec)), expr);\n                    }\n                }\n            }\n            this.acceptAll(stmts);\n        }\n        if (node.elseBranch) {\n            this.acceptAll(node.elseBranch.stmts);\n        }\n    };\n    SemanticAnalyzer.prototype.visitCondLoopStmt = function (node) {\n        this.requireNumericExpr(node.condExpr);\n        this.acceptAll(node.stmts);\n    };\n    SemanticAnalyzer.prototype.visitUncondLoopStmt = function (node) {\n        this.acceptAll(node.stmts);\n    };\n    SemanticAnalyzer.prototype.visitExitLoopStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitForStmt = function (node) {\n        this.requireNumericExpr.apply(this, __spreadArray([node.counterExpr,\n            node.startExpr,\n            node.endExpr], (node.stepExpr ? [node.stepExpr] : [])));\n    };\n    SemanticAnalyzer.prototype.visitNextStmt = function (node) {\n        this.requireNumericExpr.apply(this, node.counterExprs);\n    };\n    SemanticAnalyzer.prototype.visitExitForStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitGosubStmt = function (node) {\n        var _a;\n        node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n    };\n    SemanticAnalyzer.prototype.visitReturnStmt = function (node) {\n        var _a;\n        if (node.destLabel) {\n            node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n        }\n    };\n    SemanticAnalyzer.prototype.visitCallStmt = function (node) {\n        this.acceptAll(node.argExprs);\n        var resolvedSub = this.lookupSub(node.name, node.argExprs.map(function (_a) {\n            var typeSpec = _a.typeSpec;\n            return typeSpec;\n        }));\n        if (!resolvedSub ||\n            (resolvedSub.defType === types_1.ProcDefType.MODULE &&\n                resolvedSub.proc.type !== types_1.ProcType.SUB)) {\n            this.throwError(types_1.procTypeName(types_1.ProcType.SUB) + \" not found: \\\"\" + node.name + \"\\\"\", node);\n        }\n        this.visitProcCall(resolvedSub, node);\n    };\n    SemanticAnalyzer.prototype.visitExitProcStmt = function (node) {\n        if (!this.currentProc || this.currentProc.type !== node.procType) {\n            this.throwError(\"EXIT statement must be placed inside a \" + types_1.procTypeName(node.procType), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitEndStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitSwapStmt = function (node) {\n        this.accept(node.leftExpr);\n        this.accept(node.rightExpr);\n        if (!types_1.areMatchingSingularTypes(node.leftExpr.typeSpec, node.rightExpr.typeSpec)) {\n            this.throwError(\"Cannot swap a \" + types_1.typeSpecName(node.leftExpr.typeSpec) + \" \" +\n                (\"variable with a \" + types_1.typeSpecName(node.rightExpr.typeSpec) + \" variable\"), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitPrintStmt = function (node) {\n        if (node.formatExpr) {\n            this.accept(node.formatExpr);\n            if (!types_1.isString(node.formatExpr.typeSpec)) {\n                this.throwError('Expected format expression to be a string, ' +\n                    (\"got \" + types_1.typeSpecName(node.formatExpr.typeSpec)), node.formatExpr);\n            }\n        }\n        for (var _i = 0, _a = node.args; _i < _a.length; _i++) {\n            var arg = _a[_i];\n            if (typeof arg === 'string') {\n                continue;\n            }\n            this.requireElementaryTypeExpr(arg);\n        }\n    };\n    SemanticAnalyzer.prototype.visitInputStmt = function (node) {\n        switch (node.inputType) {\n            case ast_1.InputType.TOKENIZED:\n                this.requireElementaryTypeExpr.apply(this, node.targetExprs);\n                break;\n            case ast_1.InputType.LINE:\n                if (node.targetExprs.length !== 1) {\n                    this.throwError('Expected single destination in LINE INPUT statement, ' +\n                        (\"got \" + node.targetExprs.length), node);\n                }\n                this.accept(node.targetExprs[0]);\n                if (!types_1.isString(node.targetExprs[0].typeSpec)) {\n                    this.throwError(\"Expected string destination in LINE INPUT staement, got \" + node.targetExprs[0].typeSpec.type, node.targetExprs[0]);\n                }\n                break;\n            default:\n                this.throwError(\"Unknown input type: \" + JSON.stringify(node.inputType), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitDefTypeStmt = function (node) {\n        if (this.currentProc) {\n            this.throwError(\"DEFtype statements are only allowed at module level\", node);\n        }\n        var _loop_1 = function (range) {\n            var _b = [\n                range.minPrefix.toLowerCase(),\n                range.maxPrefix.toLowerCase(),\n            ], minPrefix = _b[0], maxPrefix = _b[1];\n            if (![minPrefix, maxPrefix].every(function (p) { return p.match(/^[a-z]$/) || minPrefix > maxPrefix; })) {\n                this_1.throwError(\"Invalid DEFtype range\", range);\n            }\n            for (var c = minPrefix.charCodeAt(0); c <= maxPrefix.charCodeAt(0); ++c) {\n                this_1.defTypeMap[String.fromCharCode(c)] = node.typeSpec;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = node.ranges; _i < _a.length; _i++) {\n            var range = _a[_i];\n            _loop_1(range);\n        }\n    };\n    SemanticAnalyzer.prototype.visitDataStmt = function (node) {\n        if (this.currentProc) {\n            this.throwError(\"DATA statement must be at module level\", node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitReadStmt = function (node) {\n        if (node.targetExprs.length === 0) {\n            this.throwError('Empty READ statement', node);\n        }\n        for (var _i = 0, _a = node.targetExprs; _i < _a.length; _i++) {\n            var targetExpr = _a[_i];\n            this.accept(targetExpr);\n            if (!types_1.isElementaryType(targetExpr.typeSpec)) {\n                this.throwError('Expected elementary type variable in READ statement ' +\n                    (\"(got \" + types_1.typeSpecName(targetExpr.typeSpec) + \")\"), targetExpr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitRestoreStmt = function (node) {\n        if (node.destLabel) {\n            node.destLabel = this.lookupLabelOrThrow(node, this.module, node.destLabel);\n        }\n    };\n    SemanticAnalyzer.prototype.visitLiteralExpr = function (node) {\n        if (typeof node.value === 'string') {\n            node.typeSpec = types_1.stringSpec();\n        }\n        else if (typeof node.value === 'number') {\n            // TODO\n            node.typeSpec = types_1.singleSpec();\n        }\n        else {\n            this.throwError(\"Unknown literal expression value type: \" + typeof node.value, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitVarRefExpr = function (node) {\n        var _a;\n        var _b;\n        var symbol = this.lookupSymbol(node.name);\n        if (!symbol) {\n            // VarRef may actually be a function invocation without args.\n            var proc = this.lookupFn(node.name, []);\n            if (proc) {\n                var fnCallExpr = {\n                    type: ast_1.ExprType.FN_CALL,\n                    name: node.name,\n                    argExprs: [],\n                    loc: node.loc,\n                };\n                this.accept(fnCallExpr);\n                Object.assign(node, fnCallExpr);\n                return;\n            }\n            symbol = this.createLocalVarSymbol({\n                name: node.name,\n                // If this VarRefExpr is nested inside a SubscriptExpr, visitSubScriptExpr() will set the\n                // typeSpec for this VarRefExpr based on the index expressions. So we should respect that\n                // here.\n                typeSpec: (_b = node.typeSpec) !== null && _b !== void 0 ? _b : this.getDefaultTypeSpecFromName(node.name),\n            });\n            this.addLocalSymbol(symbol);\n        }\n        _a = [symbol.typeSpec, symbol], node.typeSpec = _a[0], node.symbol = _a[1];\n    };\n    SemanticAnalyzer.prototype.visitFnCallExpr = function (node) {\n        this.acceptAll(node.argExprs);\n        // Try resolving the name as a function.\n        var resolvedFn = this.lookupFn(node.name, node.argExprs.map(function (_a) {\n            var typeSpec = _a.typeSpec;\n            return typeSpec;\n        }));\n        if (resolvedFn) {\n            if (resolvedFn.defType === types_1.ProcDefType.MODULE &&\n                !ast_1.isFnProcOrDefFnProc(resolvedFn.proc)) {\n                this.throwError(\"A \" + types_1.procTypeName(resolvedFn.proc.type) + \" cannot be used in an expression: \\\"\" + node.name + \"\\\"\", node);\n            }\n            this.visitProcCall(resolvedFn, node);\n            node.typeSpec = resolvedFn.returnTypeSpec;\n            return;\n        }\n        // Try resolving as a subscript expression.\n        var subscriptExpr = {\n            type: ast_1.ExprType.SUBSCRIPT,\n            arrayExpr: {\n                type: ast_1.ExprType.VAR_REF,\n                name: node.name,\n                loc: node.loc,\n            },\n            indexExprs: node.argExprs,\n            loc: node.loc,\n        };\n        this.accept(subscriptExpr);\n        Object.assign(node, subscriptExpr);\n    };\n    SemanticAnalyzer.prototype.visitBinaryOpExpr = function (node) {\n        var _this = this;\n        this.accept(node.leftExpr);\n        this.accept(node.rightExpr);\n        var leftTypeSpec = node.leftExpr.typeSpec;\n        var rightTypeSpec = node.rightExpr.typeSpec;\n        var errorMessage = \"Incompatible types for \" + node.op + \" operator: \" +\n            (types_1.typeSpecName(leftTypeSpec) + \" and \" + types_1.typeSpecName(rightTypeSpec));\n        var requireNumericOperands = function () {\n            if (!(types_1.isNumeric(leftTypeSpec) && types_1.isNumeric(rightTypeSpec))) {\n                _this.throwError(errorMessage, node);\n            }\n        };\n        var useCoercedNumericType = function () {\n            node.typeSpec = _this.coerceNumericTypes(leftTypeSpec, rightTypeSpec);\n        };\n        switch (node.op) {\n            case ast_1.BinaryOp.ADD:\n                if (types_1.isString(leftTypeSpec) && types_1.isString(rightTypeSpec)) {\n                    node.typeSpec = types_1.stringSpec();\n                }\n                else {\n                    requireNumericOperands();\n                    useCoercedNumericType();\n                }\n                break;\n            case ast_1.BinaryOp.SUB:\n            case ast_1.BinaryOp.MUL:\n            case ast_1.BinaryOp.EXP:\n            case ast_1.BinaryOp.INTDIV:\n            case ast_1.BinaryOp.MOD:\n                requireNumericOperands();\n                useCoercedNumericType();\n                break;\n            case ast_1.BinaryOp.DIV:\n                requireNumericOperands();\n                node.typeSpec = this.coerceNumericTypes(leftTypeSpec, rightTypeSpec, types_1.singleSpec());\n                break;\n            case ast_1.BinaryOp.AND:\n            case ast_1.BinaryOp.OR:\n                requireNumericOperands();\n                node.typeSpec = types_1.integerSpec();\n                break;\n            case ast_1.BinaryOp.EQ:\n            case ast_1.BinaryOp.NE:\n            case ast_1.BinaryOp.GT:\n            case ast_1.BinaryOp.GTE:\n            case ast_1.BinaryOp.LT:\n            case ast_1.BinaryOp.LTE:\n                if (!types_1.areMatchingElementaryTypes(leftTypeSpec, rightTypeSpec)) {\n                    this.throwError(errorMessage, node);\n                }\n                node.typeSpec = types_1.integerSpec();\n                break;\n            default:\n                this.throwError(\"Unknown operator \" + node.op, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitUnaryOpExpr = function (node) {\n        this.accept(node.rightExpr);\n        var rightTypeSpec = node.rightExpr.typeSpec;\n        switch (node.op) {\n            case ast_1.UnaryOp.NEG:\n                this.requireNumericExpr(node.rightExpr);\n                node.typeSpec = rightTypeSpec;\n                break;\n            case ast_1.UnaryOp.NOT:\n                this.requireNumericExpr(node.rightExpr);\n                node.typeSpec = types_1.integerSpec();\n                break;\n            case ast_1.UnaryOp.PARENS:\n                node.typeSpec = rightTypeSpec;\n                break;\n            default:\n                this.throwError(\"Unknown operator \" + node.op, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitSubscriptExpr = function (node) {\n        // Hack: treat empty parens (used to pass array to procedures) as reference to the array\n        // variable itself.\n        if (node.indexExprs.length === 0) {\n            this.accept(node.arrayExpr);\n            Object.assign(node, node.arrayExpr);\n            return;\n        }\n        this.acceptAll(node.indexExprs);\n        for (var i = 0; i < node.indexExprs.length; ++i) {\n            var indexExpr = node.indexExprs[i];\n            if (!types_1.isNumeric(indexExpr.typeSpec)) {\n                this.throwError(\"Array index #\" + (i + 1) + \" should be numeric instead of \" + indexExpr.typeSpec.type, indexExpr);\n            }\n        }\n        // Add typeSpec hint for arrayExpr. This will be used to create the underlying variable symbol\n        // if not already found.\n        node.arrayExpr.typeSpec = types_1.arraySpec(this.getDefaultTypeSpecFromName(node.arrayExpr.name), node.indexExprs.map(function () { return DEFAULT_DIMENSION_SPEC; }));\n        this.accept(node.arrayExpr);\n        var arrayTypeSpec = node.arrayExpr.typeSpec;\n        if (!types_1.isArray(arrayTypeSpec)) {\n            this.throwError('Expected array variable in subscript expression, ' +\n                (\"got \" + types_1.typeSpecName(node.arrayExpr.typeSpec)), node.arrayExpr);\n        }\n        if (arrayTypeSpec.dimensionSpecs.length && // Dimension is unknown for array arguments.\n            arrayTypeSpec.dimensionSpecs.length !== node.indexExprs.length) {\n            this.throwError('Wrong number of index expressions: ' +\n                (\"expected \" + arrayTypeSpec.dimensionSpecs.length + \", \") +\n                (\"got \" + node.indexExprs.length), node);\n        }\n        node.typeSpec = node.arrayExpr.typeSpec.elementTypeSpec;\n    };\n    SemanticAnalyzer.prototype.visitMemberExpr = function (node) {\n        this.accept(node.udtExpr);\n        var udtTypeSpec = node.udtExpr.typeSpec;\n        if (!types_1.isUdt(udtTypeSpec)) {\n            this.throwError(\"Expected user-defined type in member expression, got \" + types_1.typeSpecName(udtTypeSpec), node);\n        }\n        var fieldSpec = symbol_table_1.lookupSymbol(udtTypeSpec.fieldSpecs, node.fieldName);\n        if (!fieldSpec) {\n            this.throwError(\"Field \\\"\" + node.fieldName + \"\\\" does not exist \" +\n                (\"on type \\\"\" + types_1.typeSpecName(udtTypeSpec) + \"\\\"\"), node);\n        }\n        node.fieldName = fieldSpec.name; // Normalize case\n        node.typeSpec = fieldSpec.typeSpec;\n    };\n    SemanticAnalyzer.prototype.visitProcCall = function (resolvedProc, node) {\n        node.argTypeProps = [];\n        var paramTypeSpecs;\n        switch (resolvedProc.defType) {\n            case types_1.ProcDefType.BUILTIN:\n                paramTypeSpecs = resolvedProc.builtinProc.paramTypeSpecs;\n                break;\n            case types_1.ProcDefType.MODULE:\n                paramTypeSpecs = resolvedProc.proc.paramSymbols.map(function (_a) {\n                    var typeSpec = _a.typeSpec;\n                    return typeSpec;\n                });\n                break;\n            default:\n                this.throwError(\"Unknown FnDefType: \" + JSON.stringify(resolvedProc), node);\n        }\n        node.procDefType = resolvedProc.defType;\n        if (paramTypeSpecs.length !== node.argExprs.length) {\n            this.throwError(\"Incorrect number of arguments to \\\"\" + node.name + \"\\\": \" +\n                (\"expected \" + paramTypeSpecs.length + \", got \" + node.argExprs.length), node);\n        }\n        for (var i = 0; i < node.argExprs.length; ++i) {\n            var paramTypeSpec = paramTypeSpecs[i];\n            var argExpr = node.argExprs[i];\n            var argTypeSpec = argExpr.typeSpec;\n            var shouldPassByRef = ast_1.isLhsExpr(argExpr) &&\n                // Constants cannot be allowed to be modified by the proc, so must use pass-by-value.\n                !(argExpr.type === ast_1.ExprType.VAR_REF &&\n                    argExpr.symbol.varType === symbol_table_1.VarType.CONST) &&\n                // For built-in procs, we always pass by value in order to take advantage of automatic type\n                // casting (e.g. single -> integer).\n                resolvedProc.defType !== types_1.ProcDefType.BUILTIN;\n            var isCompatible = void 0;\n            if (shouldPassByRef) {\n                // If argument is an LHS expression, the types must match exactly as it may be assigned to\n                // from inside the proc.\n                isCompatible =\n                    lodash_1.default.isEqual(paramTypeSpec, argTypeSpec) ||\n                        (types_1.isArray(paramTypeSpec) &&\n                            types_1.isArray(argTypeSpec) &&\n                            lodash_1.default.isEqual(paramTypeSpec.elementTypeSpec, argTypeSpec.elementTypeSpec));\n            }\n            else {\n                // If argument is not an LHS expression, the types just need to be generally compatible.\n                isCompatible =\n                    types_1.areMatchingSingularTypes(paramTypeSpec, argTypeSpec) ||\n                        (types_1.isArray(paramTypeSpec) &&\n                            types_1.isArray(argTypeSpec) &&\n                            (types_1.areMatchingSingularTypes(paramTypeSpec.elementTypeSpec, argTypeSpec.elementTypeSpec) ||\n                                // Allow builtins to accept arrays of any element type.\n                                resolvedProc.defType === types_1.ProcDefType.BUILTIN));\n            }\n            if (!isCompatible) {\n                this.throwError(\"Incompatible argument \" + (i + 1) + \" to function \\\"\" + node.name + \"\\\": \" +\n                    (\"expected \" + types_1.typeSpecName(paramTypeSpec) + \", \") +\n                    (\"got \" + types_1.typeSpecName(argTypeSpec)), node);\n            }\n            node.argTypeProps.push({ paramTypeSpec: paramTypeSpec, shouldPassByRef: shouldPassByRef });\n        }\n    };\n    /** Computes the output numeric type after an arithmetic operation. */\n    SemanticAnalyzer.prototype.coerceNumericTypes = function () {\n        var typeSpecs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            typeSpecs[_i] = arguments[_i];\n        }\n        var RULES = [\n            { operands: [types_1.integerSpec(), types_1.integerSpec()], result: types_1.integerSpec() },\n            { operands: [types_1.integerSpec(), types_1.longSpec()], result: types_1.longSpec() },\n            { operands: [types_1.integerSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.integerSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.longSpec(), types_1.integerSpec()], result: types_1.longSpec() },\n            { operands: [types_1.longSpec(), types_1.longSpec()], result: types_1.longSpec() },\n            { operands: [types_1.longSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.longSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.singleSpec(), types_1.integerSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.longSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.integerSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.longSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.singleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n        ];\n        if (typeSpecs.length === 0) {\n            throw new Error('Missing arguments');\n        }\n        if (!typeSpecs.every(types_1.isNumeric)) {\n            throw new Error(\"Expected numeric types: \" + JSON.stringify(typeSpecs));\n        }\n        var resultTypeSpec = typeSpecs[0];\n        var _loop_2 = function (i) {\n            var matchingRule = RULES.find(function (_a) {\n                var _b = _a.operands, typeSpec1 = _b[0], typeSpec2 = _b[1];\n                return lodash_1.default.isEqual(typeSpec1, resultTypeSpec) &&\n                    lodash_1.default.isEqual(typeSpec2, typeSpecs[i]);\n            });\n            if (matchingRule) {\n                resultTypeSpec = matchingRule.result;\n            }\n            else {\n                throw new Error('Unknown numeric type combination: ' +\n                    (types_1.typeSpecName(resultTypeSpec) + \" and \" + types_1.typeSpecName(typeSpecs[i])));\n            }\n        };\n        for (var i = 1; i < typeSpecs.length; ++i) {\n            _loop_2(i);\n        }\n        return resultTypeSpec;\n    };\n    SemanticAnalyzer.prototype.getLocalSymbols = function () {\n        // TODO: Handle multiline DEF FN procs.\n        return this.currentProc\n            ? this.currentProc.localSymbols\n            : this.module.localSymbols;\n    };\n    SemanticAnalyzer.prototype.lookupSymbol = function (name) {\n        var _a, _b;\n        var symbol = null;\n        if (this.currentProc) {\n            symbol = symbol_table_1.lookupSymbol(this.currentProc.paramSymbols, name);\n        }\n        return ((_b = (_a = symbol !== null && symbol !== void 0 ? symbol : symbol_table_1.lookupSymbol(this.getLocalSymbols(), name)) !== null && _a !== void 0 ? _a : symbol_table_1.lookupSymbol(this.module.globalSymbols, name)) !== null && _b !== void 0 ? _b : null);\n    };\n    SemanticAnalyzer.prototype.createLocalVarSymbol = function (args) {\n        return __assign(__assign({}, args), { varType: this.currentProc && this.currentProc.isDefaultStatic\n                ? symbol_table_1.VarType.STATIC_VAR\n                : symbol_table_1.VarType.VAR, varScope: symbol_table_1.VarScope.LOCAL });\n    };\n    SemanticAnalyzer.prototype.addLocalSymbol = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this.getLocalSymbols()).push.apply(_a, args);\n    };\n    SemanticAnalyzer.prototype.getTypeSpecForVarDeclOrParam = function (node) {\n        var name = node.name, typeExpr = node.typeExpr;\n        switch (typeExpr.type) {\n            case ast_1.DataTypeExprType.ELEMENTARY:\n                if (!typeExpr.typeSpec) {\n                    typeExpr.typeSpec = this.getDefaultTypeSpecFromName(name);\n                }\n                return typeExpr.typeSpec;\n            case ast_1.DataTypeExprType.ARRAY:\n                for (var _i = 0, _a = typeExpr.dimensionSpecExprs; _i < _a.length; _i++) {\n                    var _b = _a[_i], minIdxExpr = _b.minIdxExpr, maxIdxExpr = _b.maxIdxExpr;\n                    var idxExprs = __spreadArray(__spreadArray([], (minIdxExpr ? [minIdxExpr] : [])), [maxIdxExpr]);\n                    this.acceptAll(idxExprs);\n                    for (var _c = 0, idxExprs_1 = idxExprs; _c < idxExprs_1.length; _c++) {\n                        var idxExpr = idxExprs_1[_c];\n                        if (!types_1.isNumeric(idxExpr.typeSpec)) {\n                            this.throwError(\"Array dimension size must be numeric, not \" + idxExpr.typeSpec.type, idxExpr);\n                        }\n                    }\n                }\n                if (typeExpr.elementTypeExpr) {\n                    if (!ast_1.isSingularTypeExpr(typeExpr.elementTypeExpr)) {\n                        this.throwError(\"Invalid array element type: \" + JSON.stringify(typeExpr.elementTypeExpr), typeExpr.elementTypeExpr);\n                    }\n                }\n                else {\n                    typeExpr.elementTypeExpr = {\n                        type: ast_1.DataTypeExprType.ELEMENTARY,\n                        typeSpec: this.getDefaultTypeSpecFromName(name),\n                        loc: typeExpr.loc,\n                    };\n                }\n                return {\n                    type: types_1.DataType.ARRAY,\n                    elementTypeSpec: this.getTypeSpecForVarDeclOrParam(__assign(__assign({}, node), { typeExpr: typeExpr.elementTypeExpr })),\n                    dimensionSpecs: typeExpr.dimensionSpecExprs.map(function () { return [0, 0]; }),\n                };\n            case ast_1.DataTypeExprType.UDT:\n                var udt = this.lookupUdtOrThrow(typeExpr, typeExpr.name);\n                return udt.typeSpec;\n            default:\n                this.throwError(\"Unknown DataTypeExpr type: \" + JSON.stringify(typeExpr), node);\n        }\n    };\n    SemanticAnalyzer.prototype.getDefaultTypeSpecFromName = function (name) {\n        var _a;\n        return ((_a = TYPE_SUFFIX_MAP[name[name.length - 1]]) !== null && _a !== void 0 ? _a : this.defTypeMap[name[0].toLowerCase()]);\n    };\n    SemanticAnalyzer.prototype.lookupFn = function (name, argTypeSpecs) {\n        var proc = symbol_table_1.lookupSymbol(this.module.procs, name);\n        if (proc) {\n            return {\n                defType: types_1.ProcDefType.MODULE,\n                proc: proc,\n                returnTypeSpec: ast_1.isFnProcOrDefFnProc(proc) ? proc.returnTypeSpec : null,\n            };\n        }\n        var builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs, {\n            // This allows us to throw a more useful error message in visitProcCall().\n            shouldReturnIfArgTypeMismatch: true,\n        });\n        if (builtinProc) {\n            return {\n                defType: types_1.ProcDefType.BUILTIN,\n                builtinProc: builtinProc,\n                returnTypeSpec: builtinProc.returnTypeSpec,\n            };\n        }\n        return null;\n    };\n    SemanticAnalyzer.prototype.lookupSub = function (name, argTypeSpecs) {\n        var proc = symbol_table_1.lookupSymbol(this.module.procs, name);\n        if (proc) {\n            return {\n                defType: types_1.ProcDefType.MODULE,\n                proc: proc,\n            };\n        }\n        var builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs, {\n            // This allows us to throw a more useful error message in visitProcCall().\n            shouldReturnIfArgTypeMismatch: true,\n        });\n        if (builtinProc) {\n            return {\n                defType: types_1.ProcDefType.BUILTIN,\n                builtinProc: builtinProc,\n            };\n        }\n        return null;\n    };\n    SemanticAnalyzer.prototype.lookupUdtOrThrow = function (node, name) {\n        var udt = symbol_table_1.lookupSymbol(this.module.udts, name);\n        if (!udt) {\n            this.throwError(\"Type not found: \\\"\" + name + \"\\\"\", node);\n        }\n        return udt;\n    };\n    SemanticAnalyzer.prototype.setUpDefTypeMap = function () {\n        for (var c = 'a'.charCodeAt(0); c <= 'z'.charCodeAt(0); ++c) {\n            this.defTypeMap[String.fromCharCode(c)] = types_1.singleSpec();\n        }\n        this.acceptAll(lodash_1.default.filter(this.module.stmts, ['type', ast_1.StmtType.DEF_TYPE]));\n    };\n    SemanticAnalyzer.prototype.lookupLabelOrThrow = function (node, context, label) {\n        var foundLabel = context.labels.find(function (existingLabel) { return existingLabel.toLowerCase() === label.toLowerCase(); });\n        if (!foundLabel) {\n            this.throwError(\"Label not found: \\\"\" + label + \"\\\"\", node);\n        }\n        return foundLabel;\n    };\n    return SemanticAnalyzer;\n}(ast_1.AstVisitor));\nexports.SemanticAnalyzer = SemanticAnalyzer;\nfunction runSemanticAnalysis(module, opts) {\n    if (opts === void 0) { opts = {}; }\n    return new SemanticAnalyzer(module, opts).run();\n}\nexports.default = runSemanticAnalysis;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDataItem = exports.dataItemTypeName = void 0;\nvar types_1 = require(\"./types\");\nfunction dataItemTypeName(_a) {\n    var _ = _a[0], value = _a[1];\n    return value === null ? 'null' : typeof value;\n}\nexports.dataItemTypeName = dataItemTypeName;\n/** Converts a data item to the expected type. */\nfunction getDataItem(item, expectedTypeSpec) {\n    var _ = item[0], value = item[1];\n    if (types_1.isNumeric(expectedTypeSpec)) {\n        switch (typeof value) {\n            case 'number':\n                return value;\n            case 'object':\n                return 0;\n            default:\n                throwDataItemTypeError(item, expectedTypeSpec);\n        }\n    }\n    else if (types_1.isString(expectedTypeSpec)) {\n        switch (typeof value) {\n            case 'string':\n                return value;\n            case 'object':\n                return '';\n            default:\n                throwDataItemTypeError(item, expectedTypeSpec);\n        }\n    }\n    else {\n        throw new Error(\"Unknown expected type spec: \" + JSON.stringify(expectedTypeSpec));\n    }\n}\nexports.getDataItem = getDataItem;\nfunction throwDataItemTypeError(item, expectedTypeSpec) {\n    var _a = item[0], line = _a[0], col = _a[1], _ = item[1];\n    throw new Error(\"expected \" + types_1.typeSpecName(expectedTypeSpec) + \", \" +\n        (\"got \" + dataItemTypeName(item) + \" data item \") +\n        (\"(defined at \" + line + \":\" + col + \")\"));\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ansi_escapes_1 = __importDefault(require(\"ansi-escapes\"));\nvar ansi_styles_1 = __importDefault(require(\"ansi-styles\"));\nvar ansi_terminal_key_code_map_1 = __importDefault(require(\"./ansi-terminal-key-code-map\"));\nvar runtime_1 = require(\"./runtime\");\n/** RuntimePlatform implementing screen manipulation using ANSI escape codes.\n *\n * Ideally this functionality could be made into a mixin, but 1) it relies on this.print() etc and\n * so must be a class and 2) abstract classes don't support mixins yet:\n * https://github.com/microsoft/TypeScript/issues/35356\n */\nvar AnsiTerminalPlatform = /** @class */ (function (_super) {\n    __extends(AnsiTerminalPlatform, _super);\n    function AnsiTerminalPlatform() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnsiTerminalPlatform.prototype.moveCursorTo = function (x, y) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.cursorTo(x, y))];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setCursorVisibility = function (isCursorVisible) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(isCursorVisible ? ansi_escapes_1.default.cursorShow : ansi_escapes_1.default.cursorHide)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.clearScreen = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.eraseScreen)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.moveCursorTo(0, 0)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setFgColor = function (colorName) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_styles_1.default[colorName].open)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setBgColor = function (colorName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bgColorName;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        bgColorName = \"bg\" + colorName[0].toUpperCase() + colorName.substr(1);\n                        return [4 /*yield*/, this.print(ansi_styles_1.default[bgColorName].open)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.beep = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.beep)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Translates an ANSI / VT100 key code to the DOS equivalent. */\n    AnsiTerminalPlatform.prototype.translateKeyCode = function (c) {\n        var _a;\n        return (_a = ansi_terminal_key_code_map_1.default[c]) !== null && _a !== void 0 ? _a : c;\n    };\n    return AnsiTerminalPlatform;\n}(runtime_1.RuntimePlatform));\nexports.default = AnsiTerminalPlatform;\n","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Returns a VT100 escape sequence prefixed by \"ESC [\". */\nfunction ESC(c) {\n    return \"\\u001B[\" + c;\n}\n/** Returns a DOS keyboard scan code prefixed by NUL. */\nfunction NUL(n) {\n    return String.fromCharCode(0, n);\n}\n/** Map ANSI / VT100 sequences to DOS keyboard scan codes. */\nvar ANSI_TERMINAL_KEY_CODE_MAP = (_a = {},\n    _a[ESC('A')] = NUL(72),\n    _a[ESC('B')] = NUL(80),\n    _a[ESC('C')] = NUL(77),\n    _a[ESC('D')] = NUL(75),\n    _a);\nexports.default = ANSI_TERMINAL_KEY_CODE_MAP;\n","export interface ExampleSpec {\n  fileName: string;\n  title: string;\n  description: string;\n  content: string;\n}\n\nconst EXAMPLE_SPECS: Array<ExampleSpec> = [\n  {\n    fileName: 'guess.bas',\n    title: 'GUESS.BAS',\n    description: 'Simple number guessing game',\n  },\n  {\n    fileName: 'nibbles.bas',\n    title: 'NIBBLES.BAS',\n    description: 'Classic snake game',\n  },\n  {\n    fileName: 'cal.bas',\n    title: 'CAL.BAS',\n    description: 'Perpetual calendar program',\n  },\n  {\n    fileName: 'check.bas',\n    title: 'CHECK.BAS',\n    description: 'Checkbook balancing program',\n  },\n  {\n    fileName: 'strtonum.bas',\n    title: 'STRTONUM.BAS',\n    description: 'Converts a string to a number',\n  },\n].map((spec) => ({\n  ...spec,\n  content: require(`!!raw-loader!../examples/${spec.fileName}`).default,\n}));\n\nexport default EXAMPLE_SPECS;\n\nexport const DEFAULT_EXAMPLE = EXAMPLE_SPECS[0];\n","import Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport {Ace} from 'ace-builds';\nimport _ from 'lodash';\nimport {DropzoneArea} from 'material-ui-dropzone';\nimport BookshelfIcon from 'mdi-material-ui/Bookshelf';\nimport FileCodeIcon from 'mdi-material-ui/FileCode';\nimport LaptopIcon from 'mdi-material-ui/Laptop';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useRef, useState} from 'react';\nimport EXAMPLES from './examples';\n\ninterface SelectedFileSpec {\n  title: string;\n  content: string;\n}\n\nfunction ConfirmationDialog({\n  isOpen,\n  onClose,\n  title,\n  content,\n  onConfirm,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  content: string;\n  onConfirm: () => void;\n}) {\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{content}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            onClose();\n            onConfirm();\n          }, [onClose, onConfirm])}\n          color=\"primary\"\n        >\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction ExamplesTab({\n  onSelect,\n}: {\n  onSelect: (fileSpec: SelectedFileSpec) => void;\n}) {\n  const onExampleClick = useCallback(\n    (exampleIdx: number) => {\n      onSelect(EXAMPLES[exampleIdx]);\n    },\n    [onSelect]\n  );\n\n  return (\n    <List subheader={<li />}>\n      {EXAMPLES.map(({fileName, title, description}, idx) => (\n        <ListItem\n          key={fileName}\n          button={true}\n          onClick={() => onExampleClick(idx)}\n        >\n          <ListItemAvatar>\n            <Avatar>\n              <FileCodeIcon color=\"action\" />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText primary={title} secondary={description} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n\nfunction UploadTab({\n  onSelect,\n}: {\n  onSelect: (fileSpec: SelectedFileSpec) => void;\n}) {\n  const onChange = useCallback(\n    async (selectedFiles: Array<File>) => {\n      if (selectedFiles.length > 0) {\n        const selectedFile = selectedFiles[0];\n        onSelect({\n          title: selectedFile.name,\n          content: await selectedFile.text(),\n        });\n      }\n    },\n    [onSelect]\n  );\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: 1,\n        height: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <DropzoneArea\n        acceptedFiles={['.bas']}\n        filesLimit={1}\n        showPreviews={false}\n        showPreviewsInDropzone={false}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nconst OpenDialog = observer(\n  ({\n    isOpen,\n    onClose,\n    editor,\n    onChangeSourceFileName,\n  }: {\n    isOpen: boolean;\n    onClose: () => void;\n    editor: Ace.Editor | null;\n    onChangeSourceFileName: (sourceFileName: string) => void;\n  }) => {\n    const theme = useTheme();\n    const isFullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const selectedFileSpecRef = useRef<SelectedFileSpec | null>(null);\n\n    const [\n      isOverwriteConfirmationDialogOpen,\n      setIsOverwriteConfirmationDialogOpen,\n    ] = useState(false);\n\n    const openSelectedFile = useCallback(() => {\n      const selectedFileSpec = selectedFileSpecRef.current;\n      if (!editor || !selectedFileSpec) {\n        return;\n      }\n      editor.setValue(selectedFileSpec.content);\n      onChangeSourceFileName(selectedFileSpec.title);\n      selectedFileSpecRef.current = null;\n      onClose();\n    }, [editor, onClose, onChangeSourceFileName]);\n\n    const onSelect = useCallback(\n      (fileSpec: SelectedFileSpec) => {\n        if (!editor) {\n          return;\n        }\n        const trimmedSource = editor.getValue().trim();\n        const shouldConfirm =\n          !!trimmedSource &&\n          !_.some(EXAMPLES, ({content}) => trimmedSource === content.trim());\n\n        selectedFileSpecRef.current = fileSpec;\n        if (shouldConfirm) {\n          setIsOverwriteConfirmationDialogOpen(true);\n        } else {\n          openSelectedFile();\n        }\n      },\n      [editor, openSelectedFile]\n    );\n\n    const [activeTab, setActiveTab] = useState<'examples' | 'upload'>(\n      'examples'\n    );\n\n    return (\n      <>\n        <Dialog\n          fullScreen={isFullScreen}\n          open={isOpen}\n          onClose={onClose}\n          fullWidth={true}\n          maxWidth=\"sm\"\n          scroll=\"paper\"\n        >\n          <DialogTitle>Open program</DialogTitle>\n          <div\n            style={{\n              display: 'flex',\n            }}\n          >\n            <Tabs\n              orientation=\"vertical\"\n              variant=\"scrollable\"\n              value={activeTab}\n              onChange={(event, activeTab) => setActiveTab(activeTab)}\n              style={{\n                borderRight: `1px solid ${theme.palette.divider}`,\n              }}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n            >\n              <Tab\n                label=\"Examples\"\n                icon={<BookshelfIcon />}\n                value={'examples'}\n              />\n              <Tab label=\"Computer\" icon={<LaptopIcon />} value={'upload'} />\n            </Tabs>\n            <div\n              style={{\n                backgroundColor: theme.palette.background.paper,\n                // @ts-ignore\n                overflowY: 'overlay',\n                flex: 1,\n                height: 300,\n                paddingLeft: 20,\n                paddingRight: 20,\n              }}\n            >\n              {activeTab === 'examples' && <ExamplesTab onSelect={onSelect} />}\n              {activeTab === 'upload' && <UploadTab onSelect={onSelect} />}\n            </div>\n          </div>\n          <DialogActions>\n            <Button onClick={onClose} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <ConfirmationDialog\n          isOpen={isOverwriteConfirmationDialogOpen}\n          onClose={() => setIsOverwriteConfirmationDialogOpen(false)}\n          onConfirm={openSelectedFile}\n          title={`Open ${selectedFileSpecRef.current?.title}`}\n          content=\"This will overwrite the current editor contents. Are you sure?\"\n        />\n      </>\n    );\n  }\n);\n\nexport default OpenDialog;\n","import _ from 'lodash';\nimport {\n  action,\n  computed,\n  makeObservable,\n  observable,\n  reaction,\n  toJS,\n} from 'mobx';\n\nexport interface SourceFile {\n  name: string;\n  content: string;\n}\n\nexport enum ConfigKey {\n  SOURCE_FILES = 'v1/sourceFiles',\n  CURRENT_SOURCE_FILE_NAME = 'v1/currentSourceFileName',\n  EDITOR_FONT_FAMILY = 'v1/editorFontFamily',\n  EDITOR_FONT_SIZE = 'v1/editorFontSize',\n  EDITOR_THEME = 'v1/editorTheme',\n  EDITOR_KEYBINDINGS = 'v1/editorKeybindings',\n  SCREEN_FONT_FAMILY = 'v1/outputScreenFontFamily',\n  SCREEN_FONT_SIZE = 'v1/outputScreenFontSize',\n  SCREEN_LETTER_SPACING = 'v1/outputScreenLetterSpacing',\n  SCREEN_LINE_HEIGHT = 'v1/outputScreenLineHeight',\n  EXECUTION_DELAY = 'v1/executionDelayUs',\n}\n\nexport const DEFAULT_SOURCE_FILE_NAME = 'source.bas';\n\nconst DEFAULT_CONFIG = {\n  [ConfigKey.SOURCE_FILES]: [{name: DEFAULT_SOURCE_FILE_NAME, content: ''}],\n  [ConfigKey.CURRENT_SOURCE_FILE_NAME]: DEFAULT_SOURCE_FILE_NAME,\n  [ConfigKey.EDITOR_FONT_FAMILY]: 'Cascadia Mono',\n  [ConfigKey.EDITOR_FONT_SIZE]: 14,\n  [ConfigKey.EDITOR_THEME]: 'nord_dark',\n  [ConfigKey.EDITOR_KEYBINDINGS]: '',\n  [ConfigKey.SCREEN_FONT_FAMILY]: 'Cascadia Mono',\n  [ConfigKey.SCREEN_FONT_SIZE]: 14,\n  [ConfigKey.SCREEN_LETTER_SPACING]: 0,\n  [ConfigKey.SCREEN_LINE_HEIGHT]: 1.0,\n  [ConfigKey.EXECUTION_DELAY]: 0,\n};\n\nexport const EDITOR_THEME_GROUPS = [\n  {label: 'Light themes', value: 'light'},\n  {label: 'Dark themes', value: 'dark'},\n];\n\nexport const EDITOR_THEMES = [\n  {label: 'Ambiance', value: 'ambiance', group: 'dark'},\n  {label: 'Chaos', value: 'chaos', group: 'dark'},\n  {label: 'Chrome', value: 'chrome', group: 'light'},\n  {label: 'Clouds', value: 'clouds', group: 'light'},\n  {label: 'Clouds midnight', value: 'clouds_midnight', group: 'dark'},\n  {label: 'Cobalt', value: 'cobalt', group: 'dark'},\n  {label: 'Crimson Editor', value: 'crimson_editor', group: 'light'},\n  {label: 'Dawn', value: 'dawn', group: 'light'},\n  {label: 'Dracula', value: 'dracula', group: 'dark'},\n  {label: 'Dreamweaver', value: 'dreamweaver', group: 'light'},\n  {label: 'Eclipse', value: 'eclipse', group: 'light'},\n  {label: 'Github', value: 'github', group: 'light'},\n  {label: 'Gob', value: 'gob', group: 'dark'},\n  {label: 'Gruvbox', value: 'gruvbox', group: 'dark'},\n  {label: 'Idle Fingers', value: 'idle_fingers', group: 'dark'},\n  {label: 'Iplastic', value: 'iplastic', group: 'light'},\n  {label: 'Katzenmilch', value: 'katzenmilch', group: 'light'},\n  {label: 'KR Theme', value: 'kr_theme', group: 'dark'},\n  {label: 'Kuroir', value: 'kuroir', group: 'light'},\n  {label: 'Merbivore', value: 'merbivore', group: 'dark'},\n  {label: 'Merbivore Soft', value: 'merbivore_soft', group: 'dark'},\n  {label: 'Mono Industrial', value: 'mono_industrial', group: 'dark'},\n  {label: 'Monokai', value: 'monokai', group: 'dark'},\n  {label: 'Nord Dark', value: 'nord_dark', group: 'dark'},\n  {label: 'Pastel On Dark', value: 'pastel_on_dark', group: 'dark'},\n  {label: 'Solarized Dark', value: 'solarized_dark', group: 'dark'},\n  {label: 'Solarized Light', value: 'solarized_light', group: 'light'},\n  {label: 'SQL Server', value: 'sqlserver', group: 'light'},\n  {label: 'Terminal', value: 'terminal', group: 'dark'},\n  {label: 'Textmate', value: 'textmate', group: 'light'},\n  {label: 'Tomorrow', value: 'tomorrow', group: 'light'},\n  {label: 'Tomorrow Night Blue', value: 'tomorrow_night_blue', group: 'dark'},\n  {\n    label: 'Tomorrow Night Bright',\n    value: 'tomorrow_night_bright',\n    group: 'dark',\n  },\n  {\n    label: 'Tomorrow Night Eighties',\n    value: 'tomorrow_night_eighties',\n    group: 'dark',\n  },\n  {label: 'Tomorrow Night', value: 'tomorrow_night', group: 'dark'},\n  {label: 'Twilight', value: 'twilight', group: 'dark'},\n  {label: 'Vibrant Ink', value: 'vibrant_ink', group: 'dark'},\n  {label: 'Xcode', value: 'xcode', group: 'light'},\n];\n\nexport const EDITOR_KEYBINDINGS = [\n  {label: 'Default', value: ''},\n  {label: 'Vim', value: 'vim'},\n  {label: 'Emacs', value: 'emacs'},\n  {label: 'Sublime Text', value: 'sublime'},\n  {label: 'Visual Studio Code', value: 'vscode'},\n];\n\nclass ConfigManager {\n  config = DEFAULT_CONFIG;\n\n  constructor() {\n    makeObservable(this, {\n      config: observable,\n      setKey: action,\n      load: action,\n      sourceFiles: computed,\n      currentSourceFile: computed,\n      setSourceFileName: action,\n      setSourceFileContent: action,\n    });\n\n    this.load();\n\n    reaction(\n      () => toJS(this.config),\n      () => this.save()\n    );\n  }\n\n  getKey(key: ConfigKey): any {\n    return this.config[key];\n  }\n\n  setKey(key: ConfigKey, value: any) {\n    (this.config as {[key: string]: any})[key] = value;\n  }\n\n  save() {\n    for (const key of Object.values(ConfigKey)) {\n      const defaultValue = JSON.stringify(DEFAULT_CONFIG[key]);\n      const currentValue = JSON.stringify(this.config[key]);\n      if (currentValue === defaultValue) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, currentValue);\n      }\n    }\n  }\n\n  load() {\n    if (typeof localStorage === 'undefined') {\n      console.warn(`localStorage not available`);\n      return;\n    }\n    for (const key of Object.values(ConfigKey)) {\n      const rawValue = localStorage.getItem(key);\n      if (rawValue) {\n        let value: any;\n        try {\n          value = JSON.parse(rawValue);\n        } catch (e) {\n          console.warn(`Failed to parse value for key \"${key}\": \"${rawValue}\"`);\n          continue;\n        }\n        this.setKey(key, value);\n      }\n    }\n\n    // Ensure current source file is sane.\n    if (!this.currentSourceFile) {\n      this.sourceFiles.push({\n        name: this.getKey(ConfigKey.CURRENT_SOURCE_FILE_NAME),\n        content: '',\n      });\n    }\n\n    console.log(`Loaded config:`, toJS(this.config));\n  }\n\n  get sourceFiles(): Array<SourceFile> {\n    return this.getKey(ConfigKey.SOURCE_FILES);\n  }\n\n  get currentSourceFile(): SourceFile {\n    return _.find(this.sourceFiles, [\n      'name',\n      this.getKey(ConfigKey.CURRENT_SOURCE_FILE_NAME),\n    ])!;\n  }\n\n  setSourceFileName(sourceFile: SourceFile, newSourceFileName: string) {\n    sourceFile.name = newSourceFileName;\n  }\n\n  setSourceFileContent(sourceFile: SourceFile, newContent: string) {\n    sourceFile.content = newContent;\n  }\n}\n\nconst configManager = new ConfigManager();\nexport default configManager;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Radio from '@material-ui/core/Radio';\nimport Slider from '@material-ui/core/Slider';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport TextField from '@material-ui/core/TextField';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport _ from 'lodash';\nimport FileDocumentEditIcon from 'mdi-material-ui/FileDocumentEdit';\nimport HammerWrenchIcon from 'mdi-material-ui/HammerWrench';\nimport MonitorIcon from 'mdi-material-ui/Monitor';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {\n  ConfigKey,\n  EDITOR_KEYBINDINGS,\n  EDITOR_THEMES,\n  EDITOR_THEME_GROUPS,\n} from './config-manager';\n\nconst SETTING_EDITOR_INPUT_WIDTH = 400;\n\nfunction TextSettingEditorDialog({\n  configKey,\n  title,\n  isOpen,\n  onClose,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as string);\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <TextField\n          autoFocus={true}\n          required={true}\n          fullWidth={true}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          style={{width: SETTING_EDITOR_INPUT_WIDTH, maxWidth: '100%'}}\n          InputProps={{style: {fontSize: '0.9rem'}}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value.trim());\n            onClose();\n          }, [configKey, value, onClose])}\n          disabled={!value.trim()}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction SliderSettingEditorDialog({\n  isOpen,\n  onClose,\n  title,\n  configKey,\n  min,\n  max,\n  step,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n  min: number;\n  max: number;\n  step: number;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as number);\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <Slider\n          value={value}\n          onChange={(e, value) => setValue(value as number)}\n          min={min}\n          max={max}\n          step={step}\n          marks={true}\n          valueLabelDisplay=\"on\"\n          style={{\n            width: SETTING_EDITOR_INPUT_WIDTH,\n            maxWidth: '100%',\n            marginTop: 40,\n          }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value);\n            onClose();\n          }, [configKey, value, onClose])}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction SingleChoiceSettingEditorDialog({\n  isOpen,\n  onClose,\n  title,\n  configKey,\n  groups,\n  choices,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n  groups?: Array<{label: string; value: string}>;\n  choices: Array<{label: string; value: string; group?: string}>;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as string);\n  const listRef = useRef<HTMLUListElement | null>(null);\n  const selectedListItemRef = useRef<HTMLDivElement | null>(null);\n  const didScrollToSelectedListItem = useRef(false);\n\n  const scrollToSelectedListItem = useCallback(() => {\n    if (!isOpen) {\n      didScrollToSelectedListItem.current = false;\n      return;\n    }\n    if (\n      !listRef.current ||\n      !selectedListItemRef.current ||\n      didScrollToSelectedListItem.current\n    ) {\n      return;\n    }\n    selectedListItemRef.current.scrollIntoView(true);\n    // Scroll up a bit more because the sticky list subheader covers the top of the list viewport.\n    const isScrolledToBottom =\n      listRef.current.scrollHeight -\n        listRef.current.scrollTop -\n        listRef.current.clientHeight <\n      1;\n    if (!isScrolledToBottom) {\n      listRef.current.scrollTop -= 150;\n    }\n    didScrollToSelectedListItem.current = true;\n  }, [isOpen]);\n  useEffect(scrollToSelectedListItem);\n\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <List\n          subheader={<li />}\n          style={{\n            overflowX: 'hidden',\n          }}\n          ref={(node: HTMLUListElement | null) => {\n            listRef.current = node;\n            scrollToSelectedListItem();\n          }}\n        >\n          {(groups || [null]).map((group, idx) => (\n            <li key={group?.value ?? idx} style={{backgroundColor: 'inherit'}}>\n              <ul style={{padding: 0, backgroundColor: 'inherit'}}>\n                {group && (\n                  <ListSubheader color=\"primary\">{group.label}</ListSubheader>\n                )}\n                {choices.map((choice) => {\n                  if (group && group.value !== choice.group) {\n                    return null;\n                  }\n                  const isSelected = choice.value === value;\n                  const onSelect = () => setValue(choice.value);\n                  return (\n                    <ListItem\n                      key={choice.value}\n                      selected={isSelected}\n                      button={true}\n                      onClick={onSelect}\n                      style={{width: SETTING_EDITOR_INPUT_WIDTH}}\n                      ref={\n                        isSelected\n                          ? (node) => {\n                              selectedListItemRef.current = node;\n                              scrollToSelectedListItem();\n                            }\n                          : null\n                      }\n                    >\n                      <ListItemText\n                        primary={choice.label}\n                        primaryTypographyProps={{style: {fontSize: '0.9rem'}}}\n                      />\n                      <ListItemSecondaryAction>\n                        <Radio\n                          checked={isSelected}\n                          onSelect={onSelect}\n                          color=\"primary\"\n                        />\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  );\n                })}\n              </ul>\n            </li>\n          ))}\n        </List>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value);\n            onClose();\n          }, [configKey, value, onClose])}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst SettingsDialog = observer(\n  ({isOpen, onClose}: {isOpen: boolean; onClose: () => void}) => {\n    const theme = useTheme();\n    const isFullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const [activeTab, setActiveTab] = useState<\n      'editor' | 'outputScreen' | 'execution'\n    >('editor');\n\n    const [isEditorFontDialogOpen, setIsEditorFontDialogOpen] = useState(false);\n    const [isEditorFontSizeDialogOpen, setIsEditorFontSizeDialogOpen] =\n      useState(false);\n    const [isEditorThemeDialogOpen, setIsEditorThemeDialogOpen] =\n      useState(false);\n    const [isEditorKeybindingsDialogOpen, setIsEditorKeybindingsDialogOpen] =\n      useState(false);\n\n    const [isScreenFontDialogOpen, setIsScreenFontDialogOpen] = useState(false);\n    const [isScreenFontSizeDialogOpen, setIsScreenFontSizeDialogOpen] =\n      useState(false);\n    const [\n      isScreenLetterSpacingDialogOpen,\n      setIsScreenLetterSpacingDialogOpen,\n    ] = useState(false);\n    const [isScreenLineHeightDialogOpen, setIsScreenLineHeightDialogOpen] =\n      useState(false);\n\n    const [isExecutionDelayDialogOpen, setIsExecutionDelayDialogOpen] =\n      useState(false);\n\n    return (\n      <>\n        <Dialog\n          fullScreen={isFullScreen}\n          open={isOpen}\n          onClose={onClose}\n          fullWidth={true}\n          maxWidth=\"sm\"\n          scroll=\"paper\"\n        >\n          <DialogTitle>Settings</DialogTitle>\n          <DialogContent dividers={true}>\n            <div\n              style={{\n                display: 'flex',\n              }}\n            >\n              <Tabs\n                orientation=\"vertical\"\n                variant=\"scrollable\"\n                value={activeTab}\n                onChange={(event, activeTab) => setActiveTab(activeTab)}\n                style={{\n                  borderRight: `1px solid ${theme.palette.divider}`,\n                }}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n              >\n                <Tab\n                  label=\"Editor\"\n                  icon={<FileDocumentEditIcon />}\n                  value={'editor'}\n                />\n                <Tab\n                  label=\"Output\"\n                  icon={<MonitorIcon />}\n                  value={'outputScreen'}\n                />\n                <Tab\n                  label=\"Execution\"\n                  icon={<HammerWrenchIcon />}\n                  value={'execution'}\n                />\n              </Tabs>\n              <div\n                style={{\n                  backgroundColor: theme.palette.background.paper,\n                  // @ts-ignore\n                  overflowY: 'overlay',\n                  flex: 1,\n                  height: 300,\n                  paddingLeft: 20,\n                  paddingRight: 20,\n                }}\n              >\n                <List subheader={<li />}>\n                  {activeTab === 'editor' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorThemeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor theme\"\n                          secondary={\n                            _.find(EDITOR_THEMES, [\n                              'value',\n                              configManager.getKey(ConfigKey.EDITOR_THEME),\n                            ])?.label\n                          }\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorFontDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor font\"\n                          secondary={configManager.getKey(\n                            ConfigKey.EDITOR_FONT_FAMILY\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorFontSizeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor font size\"\n                          secondary={configManager.getKey(\n                            ConfigKey.EDITOR_FONT_SIZE\n                          )}\n                        />{' '}\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorKeybindingsDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor keybindings\"\n                          secondary={\n                            _.find(EDITOR_KEYBINDINGS, [\n                              'value',\n                              configManager.getKey(\n                                ConfigKey.EDITOR_KEYBINDINGS\n                              ),\n                            ])?.label\n                          }\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                  {activeTab === 'outputScreen' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenFontDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen font\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_FONT_FAMILY\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenFontSizeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen font size\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_FONT_SIZE\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenLetterSpacingDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen letter spacing\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_LETTER_SPACING\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenLineHeightDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen line height\"\n                          secondary={`${configManager.getKey(\n                            ConfigKey.SCREEN_LINE_HEIGHT\n                          )}x`}\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                  {activeTab === 'execution' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsExecutionDelayDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Statement execution delay\"\n                          secondary={`${configManager.getKey(\n                            ConfigKey.EXECUTION_DELAY\n                          )} μs`}\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                </List>\n              </div>\n            </div>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={onClose} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <TextSettingEditorDialog\n          isOpen={isEditorFontDialogOpen}\n          onClose={() => setIsEditorFontDialogOpen(false)}\n          title=\"Editor font\"\n          configKey={ConfigKey.EDITOR_FONT_FAMILY}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isEditorFontSizeDialogOpen}\n          onClose={() => setIsEditorFontSizeDialogOpen(false)}\n          title=\"Editor font size\"\n          configKey={ConfigKey.EDITOR_FONT_SIZE}\n          min={6}\n          max={24}\n          step={1}\n        />\n        <SingleChoiceSettingEditorDialog\n          isOpen={isEditorThemeDialogOpen}\n          onClose={() => setIsEditorThemeDialogOpen(false)}\n          title=\"Editor theme\"\n          configKey={ConfigKey.EDITOR_THEME}\n          groups={EDITOR_THEME_GROUPS}\n          choices={EDITOR_THEMES}\n        />\n        <SingleChoiceSettingEditorDialog\n          isOpen={isEditorKeybindingsDialogOpen}\n          onClose={() => setIsEditorKeybindingsDialogOpen(false)}\n          title=\"Editor keybindings\"\n          configKey={ConfigKey.EDITOR_KEYBINDINGS}\n          choices={EDITOR_KEYBINDINGS}\n        />\n\n        <TextSettingEditorDialog\n          isOpen={isScreenFontDialogOpen}\n          onClose={() => setIsScreenFontDialogOpen(false)}\n          title=\"Output screen font\"\n          configKey={ConfigKey.SCREEN_FONT_FAMILY}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenFontSizeDialogOpen}\n          onClose={() => setIsScreenFontSizeDialogOpen(false)}\n          title=\"Output screen font size\"\n          configKey={ConfigKey.SCREEN_FONT_SIZE}\n          min={6}\n          max={24}\n          step={1}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenLetterSpacingDialogOpen}\n          onClose={() => setIsScreenLetterSpacingDialogOpen(false)}\n          title=\"Output screen letter spacing\"\n          configKey={ConfigKey.SCREEN_LETTER_SPACING}\n          min={0}\n          max={8}\n          step={1}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenLineHeightDialogOpen}\n          onClose={() => setIsScreenLineHeightDialogOpen(false)}\n          title=\"Output screen line height\"\n          configKey={ConfigKey.SCREEN_LINE_HEIGHT}\n          min={1.0}\n          max={2.0}\n          step={0.05}\n        />\n\n        <SliderSettingEditorDialog\n          isOpen={isExecutionDelayDialogOpen}\n          onClose={() => setIsExecutionDelayDialogOpen(false)}\n          title=\"Statement execution delay\"\n          configKey={ConfigKey.EXECUTION_DELAY}\n          min={0}\n          max={10}\n          step={1}\n        />\n      </>\n    );\n  }\n);\n\nexport default SettingsDialog;\n","import AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport {Ace} from 'ace-builds';\nimport {saveAs} from 'file-saver';\nimport React, {useCallback, useState} from 'react';\nimport OpenDialog from './open-dialog';\nimport SettingsDialog from './settings-dialog';\n\nfunction AppHeader({\n  isReady,\n  editor,\n  sourceFileName,\n  onChangeSourceFileName,\n}: {\n  isReady: boolean;\n  editor: Ace.Editor | null;\n  sourceFileName: string;\n  onChangeSourceFileName: (sourceFileName: string) => void;\n}) {\n  const onSaveClick = useCallback(() => {\n    if (!isReady || !editor) {\n      return;\n    }\n    const blob = new Blob([editor.getValue()], {\n      type: 'text/plain;charset=utf-8',\n    });\n    saveAs(blob, sourceFileName);\n  }, [isReady, editor, sourceFileName]);\n\n  const theme = useTheme();\n\n  const [isSettingsDialogOpen, setIsSettingsDialogOpen] = useState(false);\n  const [isOpenDialogOpen, setIsOpenDialogOpen] = useState(false);\n\n  return (\n    <>\n      <AppBar position=\"relative\" color=\"default\">\n        <Toolbar>\n          <Typography variant=\"h6\" style={{flexGrow: 1}}>\n            qbjc playground\n          </Typography>\n          {isReady && (\n            <>\n              <Tooltip title=\"Open program\">\n                <IconButton\n                  aria-label=\"Open program\"\n                  color=\"inherit\"\n                  onClick={() => setIsOpenDialogOpen(true)}\n                >\n                  <FolderIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Save program\">\n                <IconButton\n                  aria-label=\"Save program\"\n                  color=\"inherit\"\n                  onClick={onSaveClick}\n                >\n                  <SaveIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Settings\">\n                <IconButton\n                  aria-label=\"Edit settings\"\n                  color=\"inherit\"\n                  onClick={() => setIsSettingsDialogOpen(true)}\n                >\n                  <SettingsIcon />\n                </IconButton>\n              </Tooltip>\n            </>\n          )}\n          <Tooltip\n            title={\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                View on GitHub\n                <LaunchIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    marginLeft: '0.1rem',\n                  }}\n                />\n              </div>\n            }\n          >\n            <IconButton\n              aria-label=\"View on GitHub\"\n              color=\"inherit\"\n              href=\"https://github.com/jichu4n/qbjc\"\n              target=\"_blank\"\n            >\n              <GitHubIcon />\n            </IconButton>\n          </Tooltip>\n        </Toolbar>\n      </AppBar>\n\n      <OpenDialog\n        isOpen={isOpenDialogOpen}\n        onClose={() => setIsOpenDialogOpen(false)}\n        editor={editor}\n        onChangeSourceFileName={onChangeSourceFileName}\n      />\n      <SettingsDialog\n        isOpen={isSettingsDialogOpen}\n        onClose={() => setIsSettingsDialogOpen(false)}\n      />\n    </>\n  );\n}\n\nexport default AppHeader;\n","import CircularProgress from '@material-ui/core/CircularProgress';\nimport {useTheme} from '@material-ui/core/styles';\nimport React, {useEffect, useState} from 'react';\n\nfunction AppSplashScreen({isReady}: {isReady: boolean}) {\n  enum Status {\n    VISIBLE = 'visible',\n    TRANSITIONING = 'transitioning',\n    HIDDEN = 'hidden',\n  }\n  const TRANSITION_DELAY_MS = 600;\n  const [status, setStatus] = useState<Status>(Status.VISIBLE);\n  const theme = useTheme();\n\n  useEffect(() => {\n    if (isReady && status === Status.VISIBLE) {\n      setStatus(Status.TRANSITIONING);\n      setTimeout(() => setStatus(Status.HIDDEN), TRANSITION_DELAY_MS);\n    }\n  }, [isReady, status, Status]);\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: '100%',\n        height: '100%',\n        zIndex: 200,\n        backgroundColor: theme.palette.background.paper,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        transition: `opacity ${TRANSITION_DELAY_MS}ms`,\n        ...(status === Status.VISIBLE\n          ? {\n              opacity: 1,\n            }\n          : {}),\n        ...(status === Status.TRANSITIONING\n          ? {\n              opacity: 0,\n            }\n          : {}),\n        ...(status === Status.HIDDEN\n          ? {\n              display: 'none',\n            }\n          : {}),\n      }}\n    >\n      <CircularProgress />\n    </div>\n  );\n}\n\nexport default AppSplashScreen;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ace, {Ace} from 'ace-builds';\nimport 'ace-builds/webpack-resolver';\nimport {saveAs} from 'file-saver';\nimport _ from 'lodash';\nimport CodeBracesBoxIcon from 'mdi-material-ui/CodeBracesBox';\nimport NodejsIcon from 'mdi-material-ui/Nodejs';\nimport TextBoxOutline from 'mdi-material-ui/TextBoxOutline';\nimport {autorun, IReactionDisposer} from 'mobx';\nimport {compile, CompileResult} from 'qbjc';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {ConfigKey} from './config-manager';\n\nenum CompileResultType {\n  MODULE = 'module',\n  BUNDLE = 'bundle',\n}\n\nconst COMPILE_RESULT_TYPE_SPECS = [\n  {\n    compileResultType: CompileResultType.MODULE,\n    iconClass: TextBoxOutline,\n    label: 'ES6 module',\n  },\n  {\n    compileResultType: CompileResultType.BUNDLE,\n    iconClass: NodejsIcon,\n    label: 'Standalone Node.js program',\n  },\n] as const;\n\nfunction CompileResultTypeSelect({\n  value,\n  onChange,\n  style = {},\n}: {\n  value: CompileResultType;\n  onChange: (newValue: CompileResultType) => void;\n  style?: React.CSSProperties;\n}) {\n  const [menuAnchor, setMenuAnchor] = React.useState<HTMLElement | null>(null);\n  const onButtonClick = useCallback((event: React.MouseEvent<HTMLElement>) => {\n    setMenuAnchor(event.currentTarget);\n  }, []);\n  const onMenuSelect = useCallback(\n    (newValue: CompileResultType) => {\n      setMenuAnchor(null);\n      onChange(newValue);\n    },\n    [onChange]\n  );\n  const onMenuClose = useCallback(() => {\n    setMenuAnchor(null);\n  }, []);\n\n  const {iconClass: IconClass, label} = _.find(COMPILE_RESULT_TYPE_SPECS, [\n    'compileResultType',\n    value,\n  ])!;\n  return (\n    <>\n      <Button\n        startIcon={<IconClass />}\n        endIcon={<KeyboardArrowDownIcon fontSize=\"small\" />}\n        onClick={onButtonClick}\n        style={style}\n      >\n        {label}\n      </Button>\n      <Menu\n        anchorEl={menuAnchor}\n        keepMounted={true}\n        open={!!menuAnchor}\n        onClose={onMenuClose}\n      >\n        {COMPILE_RESULT_TYPE_SPECS.map(\n          ({compileResultType, iconClass: IconClass, label}) => (\n            <MenuItem\n              key={compileResultType}\n              selected={compileResultType === value}\n              onClick={() => onMenuSelect(compileResultType)}\n            >\n              <ListItemIcon>\n                <IconClass />\n              </ListItemIcon>\n              <Typography variant=\"inherit\">{label}</Typography>\n            </MenuItem>\n          )\n        )}\n      </Menu>\n    </>\n  );\n}\n\nexport default function CompileResultDialog({\n  compileResult: moduleCompileResult,\n  isOpen,\n  onClose: _onClose,\n}: {\n  compileResult: CompileResult | null;\n  isOpen: boolean;\n  onClose: () => void;\n}) {\n  const theme = useTheme();\n\n  const [compileResultType, setCompileResultType] = useState<CompileResultType>(\n    CompileResultType.MODULE\n  );\n  const [bundleCompileResult, setBundleCompileResult] =\n    useState<CompileResult | null>(null);\n\n  const editorRef = useRef<Ace.Editor | null>(null);\n\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  const enterFullScreen = useCallback(() => {\n    setIsFullScreen(true);\n    setTimeout(() => editorRef.current?.resize(), 0);\n  }, []);\n  const exitFullScreen = useCallback(() => {\n    setIsFullScreen(false);\n    setTimeout(() => editorRef.current?.resize(), 0);\n  }, []);\n\n  const onCompileResultChange = useCallback(() => {\n    const editor = editorRef.current;\n    if (!editor) {\n      return;\n    }\n    if (!moduleCompileResult) {\n      editor.setValue('');\n      if (bundleCompileResult) {\n        setBundleCompileResult(null);\n      }\n      return;\n    }\n    if (\n      !bundleCompileResult ||\n      bundleCompileResult.source !== moduleCompileResult.source\n    ) {\n      compile({\n        source: moduleCompileResult.source,\n        sourceFileName: moduleCompileResult.sourceFileName,\n        enableBundling: true,\n      }).then(setBundleCompileResult);\n    }\n    const newValue =\n      (compileResultType === CompileResultType.MODULE\n        ? moduleCompileResult.code\n        : bundleCompileResult?.code) || '';\n    if (newValue && editor.getValue() !== newValue) {\n      editor.setValue(newValue);\n    }\n  }, [compileResultType, moduleCompileResult, bundleCompileResult]);\n\n  useEffect(() => {\n    onCompileResultChange();\n  }, [onCompileResultChange]);\n\n  const editorConfigChangeListenerDisposerRef =\n    useRef<IReactionDisposer | null>(null);\n  const init = useCallback(\n    (node: HTMLDivElement | null) => {\n      if (!node || editorRef.current || !isOpen) {\n        return;\n      }\n      const editor = ace.edit(node, {\n        useWorker: false, // Disable syntax warnings\n      });\n      editorConfigChangeListenerDisposerRef.current = autorun(() => {\n        editor.setOptions({\n          fontFamily: configManager.getKey(ConfigKey.EDITOR_FONT_FAMILY),\n          fontSize: `${configManager.getKey(ConfigKey.EDITOR_FONT_SIZE)}px`,\n        });\n        editor.setTheme(\n          `ace/theme/${configManager.getKey(ConfigKey.EDITOR_THEME)}`\n        );\n        const keybindings = configManager.getKey(ConfigKey.EDITOR_KEYBINDINGS);\n        editor.setKeyboardHandler(\n          keybindings ? `ace/keyboard/${keybindings}` : ''\n        );\n      });\n      editor.setShowPrintMargin(false);\n      editor.session.setMode('ace/mode/javascript');\n      editor.setReadOnly(true);\n\n      editor.clearSelection();\n      editor.moveCursorTo(0, 0);\n      editor.focus();\n      editorRef.current = editor;\n\n      onCompileResultChange();\n    },\n    [isOpen, onCompileResultChange]\n  );\n\n  const onClose = useCallback(() => {\n    if (editorConfigChangeListenerDisposerRef.current) {\n      editorConfigChangeListenerDisposerRef.current();\n      editorConfigChangeListenerDisposerRef.current = null;\n    }\n    if (editorRef.current) {\n      editorRef.current.destroy();\n      editorRef.current = null;\n    }\n    _onClose();\n  }, [_onClose]);\n\n  const onSaveClick = useCallback(() => {\n    const editor = editorRef.current;\n    if (!editor) {\n      return;\n    }\n    const blob = new Blob([editor.getValue()], {\n      type: 'text/plain;charset=utf-8',\n    });\n    saveAs(blob, `${moduleCompileResult?.sourceFileName}.js`);\n  }, [moduleCompileResult?.sourceFileName]);\n\n  return (\n    <Dialog\n      onClose={onClose}\n      open={isOpen}\n      fullWidth={true}\n      fullScreen={isFullScreen}\n      maxWidth=\"lg\"\n    >\n      <DialogTitle\n        disableTypography={true}\n        style={{display: 'flex', alignItems: 'center'}}\n      >\n        <CodeBracesBoxIcon style={{marginRight: '0.4rem'}} />\n        <Typography variant=\"h6\" style={{flexGrow: 1}}>\n          Compiled code\n        </Typography>\n        <CompileResultTypeSelect\n          value={compileResultType}\n          onChange={setCompileResultType}\n          style={{\n            marginRight: theme.spacing(1),\n          }}\n        />\n        <Tooltip title=\"Save compiled JavaScript program\">\n          <IconButton onClick={onSaveClick}>\n            <SaveIcon />\n          </IconButton>\n        </Tooltip>\n        {isFullScreen ? (\n          <Tooltip title=\"Exit full screen\">\n            <IconButton onClick={exitFullScreen}>\n              <FullscreenExitIcon />\n            </IconButton>\n          </Tooltip>\n        ) : (\n          <Tooltip title=\"Full screen\">\n            <IconButton onClick={enterFullScreen}>\n              <FullscreenIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n        <Tooltip title=\"Close\">\n          <IconButton\n            onClick={onClose}\n            style={{marginRight: -theme.spacing(2)}}\n          >\n            <CloseIcon />\n          </IconButton>\n        </Tooltip>\n      </DialogTitle>\n      <DialogContent\n        dividers={true}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: '80vh',\n          padding: 0,\n        }}\n      >\n        <div\n          ref={init}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n            // height in the parent but prevents it from growing beyond the parent size when changing\n            // lineHeight. ¯\\_(ツ)_/¯\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n        ></div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, {ReactNode} from 'react';\n\nfunction PaneHeader({\n  title,\n  icon,\n  children,\n}: {\n  title: ReactNode;\n  icon?: ReactNode;\n  children?: ReactNode;\n}) {\n  const theme = useTheme();\n  return (\n    <Paper\n      elevation={2}\n      square={true}\n      style={{\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: theme.palette.background.default,\n        cursor: 'pointer',\n      }}\n    >\n      <div style={{display: 'flex', padding: '0 8px 0 12px'}}>{icon}</div>\n      <Typography\n        variant=\"overline\"\n        color=\"textSecondary\"\n        style={{flexGrow: 1, paddingRight: '12px'}}\n      >\n        {title}\n      </Typography>\n      {children}\n    </Paper>\n  );\n}\n\nexport default PaneHeader;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport ace, {Ace} from 'ace-builds';\nimport 'ace-builds/webpack-resolver';\nimport {autorun} from 'mobx';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {ConfigKey} from './config-manager';\nimport {DEFAULT_EXAMPLE} from './examples';\nimport PaneHeader from './pane-header';\n\nconst SETTING_EDITOR_INPUT_WIDTH = 400;\n\nfunction TextFieldEditorDialog({\n  title,\n  value: valueProp,\n  onChange,\n  isOpen,\n  onClose,\n}: {\n  title: string;\n  value: string;\n  onChange: (newValue: string) => void;\n  isOpen: boolean;\n  onClose: () => void;\n}) {\n  const [value, setValue] = useState(valueProp);\n\n  // Set value to valueProp whenever it changes.\n  const prevValueProp = useRef(valueProp);\n  useEffect(() => {\n    if (prevValueProp.current !== valueProp && value !== valueProp) {\n      setValue(valueProp);\n    }\n    prevValueProp.current = valueProp;\n  }, [value, valueProp]);\n\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <TextField\n          autoFocus={true}\n          required={true}\n          fullWidth={true}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          style={{width: SETTING_EDITOR_INPUT_WIDTH, maxWidth: '100%'}}\n          InputProps={{style: {fontSize: '0.9rem'}}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            onClose();\n            onChange(value);\n          }, [onClose, onChange, value])}\n          disabled={!value.trim()}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst EditorPane = observer(\n  ({\n    sourceFileName,\n    onChangeSourceFileName,\n    onReady,\n    style = {},\n  }: {\n    sourceFileName: string;\n    onChangeSourceFileName: (sourceFileName: string) => void;\n    onReady: (editor: Ace.Editor) => void;\n    style?: React.CSSProperties;\n  }) => {\n    const theme = useTheme();\n\n    const editorRef = useRef<Ace.Editor | null>(null);\n\n    const containerElRef = useRef<HTMLDivElement | null>(null);\n    const [isFullScreen, setIsFullScreen] = useState(false);\n    const containerHeightBeforeFullScreenRef = useRef<string | null>(null);\n    const enterFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const editor = editorRef.current;\n      if (!containerEl || !editor) {\n        return;\n      }\n      containerHeightBeforeFullScreenRef.current = containerEl.style.height;\n      setIsFullScreen(true);\n      setTimeout(() => {\n        editor.resize(true);\n        editor.focus();\n      }, 0);\n    }, []);\n    const exitFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const editor = editorRef.current;\n      if (!containerEl || !editor) {\n        return;\n      }\n      setIsFullScreen(false);\n      setTimeout(() => {\n        const containerHeightBeforeFullScreen =\n          containerHeightBeforeFullScreenRef.current;\n        if (containerHeightBeforeFullScreen) {\n          containerEl.style.height = containerHeightBeforeFullScreen;\n          containerHeightBeforeFullScreenRef.current = null;\n        }\n        editor.resize(true);\n        editor.focus();\n      }, 0);\n    }, []);\n\n    const init = useCallback(\n      (node: HTMLDivElement | null) => {\n        if (!node || editorRef.current) {\n          return;\n        }\n        const editor = ace.edit(node);\n        autorun(() => {\n          editor.setOptions({\n            fontFamily: configManager.getKey(ConfigKey.EDITOR_FONT_FAMILY),\n            fontSize: `${configManager.getKey(ConfigKey.EDITOR_FONT_SIZE)}px`,\n          });\n          editor.setTheme(\n            `ace/theme/${configManager.getKey(ConfigKey.EDITOR_THEME)}`\n          );\n          const keybindings = configManager.getKey(\n            ConfigKey.EDITOR_KEYBINDINGS\n          );\n          editor.setKeyboardHandler(\n            keybindings ? `ace/keyboard/${keybindings}` : ''\n          );\n        });\n        editor.setShowPrintMargin(false);\n        editor.session.setMode('ace/mode/vbscript');\n\n        const initialContent = configManager.currentSourceFile.content.trim()\n          ? configManager.currentSourceFile.content\n          : DEFAULT_EXAMPLE.content;\n        editor.setValue(initialContent);\n        editor.clearSelection();\n        editor.moveCursorTo(0, 0);\n        editor.focus();\n        editor.on('change', () =>\n          configManager.setSourceFileContent(\n            configManager.currentSourceFile,\n            editor.getValue()\n          )\n        );\n        editorRef.current = editor;\n        onReady(editor);\n      },\n      [onReady]\n    );\n\n    const [\n      isSourceFileNameEditorDialogOpen,\n      setIsSourceFileNameEditorDialogOpen,\n    ] = useState(false);\n    const showSourceFileNameEditorDialog = useCallback(\n      () => setIsSourceFileNameEditorDialogOpen(true),\n      []\n    );\n    const hideSourceFileNameEditorDialog = useCallback(\n      () => setIsSourceFileNameEditorDialogOpen(false),\n      []\n    );\n\n    return (\n      <>\n        <div\n          ref={containerElRef}\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            ...style,\n            ...(isFullScreen\n              ? {\n                  position: 'fixed',\n                  top: 0,\n                  left: 0,\n                  width: '100%',\n                  height: '100%',\n                  // Must be greater than z-index of AppBar (1100) and less than\n                  // z-index of tooltip (1500).\n                  //\n                  // See https://material-ui.com/customization/z-index/\n                  zIndex: 1200,\n                }\n              : {}),\n          }}\n        >\n          <PaneHeader\n            title={\n              <Tooltip title=\"Click to rename\">\n                <span\n                  onClick={showSourceFileNameEditorDialog}\n                  style={{\n                    padding: 10,\n                    marginTop: -10,\n                    marginLeft: -10,\n                  }}\n                >\n                  {sourceFileName}\n                </span>\n              </Tooltip>\n            }\n            icon={\n              <DescriptionIcon\n                style={{\n                  fontSize: theme.typography.overline.fontSize,\n                }}\n              />\n            }\n          >\n            {isFullScreen ? (\n              <Tooltip title=\"Exit full screen\">\n                <IconButton onClick={exitFullScreen}>\n                  <FullscreenExitIcon\n                    style={{\n                      fontSize: theme.typography.overline.fontSize,\n                      color: theme.palette.text.secondary,\n                    }}\n                  />\n                </IconButton>\n              </Tooltip>\n            ) : (\n              <Tooltip title=\"Full screen\">\n                <IconButton onClick={enterFullScreen}>\n                  <FullscreenIcon\n                    style={{\n                      fontSize: theme.typography.overline.fontSize,\n                      color: theme.palette.text.secondary,\n                    }}\n                  />\n                </IconButton>\n              </Tooltip>\n            )}\n          </PaneHeader>\n          <div\n            ref={init}\n            style={{\n              // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n              // height in the parent but prevents it from growing beyond the parent size.\n              flexGrow: 1,\n              height: 0,\n              // @ts-ignore\n              overflowY: 'overlay',\n            }}\n          ></div>\n        </div>\n\n        <TextFieldEditorDialog\n          title=\"Rename source file\"\n          value={sourceFileName}\n          onChange={onChangeSourceFileName}\n          isOpen={isSourceFileNameEditorDialogOpen}\n          onClose={hideSourceFileNameEditorDialog}\n        />\n      </>\n    );\n  }\n);\n\nexport default EditorPane;\n","import {Ace} from 'ace-builds';\nimport {action, computed, makeObservable, observable, runInAction} from 'mobx';\nimport {compile, CompileResult, Loc} from 'qbjc';\nimport {BrowserExecutor} from 'qbjc/browser';\nimport {Terminal} from 'xterm';\nimport configManager, {\n  ConfigKey,\n  DEFAULT_SOURCE_FILE_NAME,\n} from './config-manager';\n\nexport enum QbjcMessageType {\n  /** General error message. */\n  ERROR = 'error',\n  /** General informational message with no special formatting. */\n  INFO = 'info',\n  /** Specialized message representing program execution. */\n  EXECUTION = 'execution',\n}\nexport interface QbjcMessage {\n  /** Parsed location in the source code. */\n  loc?: Loc;\n  /** Message type. */\n  type: QbjcMessageType;\n  /** Message text. */\n  message: string;\n  /** For EXECUTION messages - the compiled code. */\n  compileResult?: CompileResult;\n}\n\nclass QbjcManager {\n  /** Whether we're currently compiling / running code. */\n  isRunning: boolean = false;\n\n  /** Compiler errors and status messages. */\n  messages: Array<QbjcMessage> = [];\n\n  /** Ace editor. */\n  editor: Ace.Editor | null = null;\n\n  /** Current file name. */\n  sourceFileName: string = configManager.getKey(\n    ConfigKey.CURRENT_SOURCE_FILE_NAME\n  );\n\n  /** xterm.js terminal. */\n  terminal: Terminal | null = null;\n\n  /** Current executor. */\n  private executor: BrowserExecutor | null = null;\n\n  /** Connects this QbjcManager to the provided editor and terminal. */\n  init({editor, terminal}: {editor?: Ace.Editor; terminal?: Terminal}) {\n    if (editor) {\n      this.editor = editor;\n    }\n    if (terminal) {\n      this.terminal = terminal;\n    }\n  }\n\n  /** Whether the required components (editor and terminal) are connected. */\n  get isReady() {\n    return !!this.editor && !!this.terminal;\n  }\n\n  async run() {\n    if (!this.editor || !this.terminal || this.isRunning) {\n      return;\n    }\n    const source = this.editor.getValue();\n    if (!source.trim()) {\n      return;\n    }\n\n    this.isRunning = true;\n    let compileResult: CompileResult;\n    try {\n      compileResult = await compile({\n        source,\n        sourceFileName: this.sourceFileName,\n      });\n      console.log(compileResult.code);\n    } catch (e) {\n      console.error(`Compile error: ${e.message ?? JSON.stringify(e)}`);\n      runInAction(() => {\n        this.isRunning = false;\n      });\n      if (e.message) {\n        this.pushMessage({\n          loc: e.loc,\n          type: QbjcMessageType.ERROR,\n          message: e.message,\n        });\n      }\n      return;\n    }\n\n    this.pushMessage({\n      type: QbjcMessageType.EXECUTION,\n      message: 'Running...',\n      compileResult: compileResult,\n    });\n    const startTs = new Date();\n    this.terminal.focus();\n    this.executor = new BrowserExecutor(this.terminal, {\n      stmtExecutionDelayUs: configManager.getKey(ConfigKey.EXECUTION_DELAY),\n    });\n    try {\n      await this.executor.executeModule(compileResult.code);\n    } finally {\n      const endTs = new Date();\n      runInAction(() => {\n        this.isRunning = false;\n      });\n      this.pushMessage({\n        type: QbjcMessageType.INFO,\n        message:\n          'Exited in ' +\n          `${((endTs.getTime() - startTs.getTime()) / 1000).toFixed(3)}s`,\n      });\n      this.executor = null;\n      this.editor.focus();\n    }\n  }\n\n  stop() {\n    if (!this.isRunning || !this.executor) {\n      return;\n    }\n    this.executor.stopExecution();\n  }\n\n  goToMessageLocInEditor(loc: Loc) {\n    if (!this.editor || !loc) {\n      return;\n    }\n    const {line, col} = loc;\n    this.editor.moveCursorTo(line - 1, col - 1);\n    this.editor.selection.selectWordRight();\n  }\n\n  pushMessage(message: QbjcMessage) {\n    this.messages.push(message);\n  }\n\n  clearMessages() {\n    this.messages.splice(0, this.messages.length);\n  }\n\n  updateSourceFileName(sourceFileName: string) {\n    this.sourceFileName = sourceFileName.trim() || DEFAULT_SOURCE_FILE_NAME;\n    configManager.setSourceFileName(\n      configManager.currentSourceFile,\n      this.sourceFileName\n    );\n    configManager.setKey(\n      ConfigKey.CURRENT_SOURCE_FILE_NAME,\n      this.sourceFileName\n    );\n  }\n\n  constructor() {\n    makeObservable(this, {\n      isRunning: observable,\n      messages: observable,\n      editor: observable.ref,\n      sourceFileName: observable,\n      terminal: observable.ref,\n      isReady: computed,\n      init: action,\n      run: action,\n      pushMessage: action,\n      clearMessages: action,\n      updateSourceFileName: action,\n    });\n  }\n}\n\nexport default QbjcManager;\n","import Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {Theme, useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport BlockIcon from '@material-ui/icons/Block';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport PlayCircleIcon from '@material-ui/icons/PlayCircleFilled';\nimport CodeBracesBoxIcon from 'mdi-material-ui/CodeBracesBox';\nimport MessageTextIcon from 'mdi-material-ui/MessageText';\nimport {runInAction} from 'mobx';\nimport {observer} from 'mobx-react';\nimport {CompileResult, Loc} from 'qbjc';\nimport React, {useCallback, useEffect, useRef} from 'react';\nimport PaneHeader from './pane-header';\nimport {QbjcMessage, QbjcMessageType} from './qbjc-manager';\n\nfunction getMessageDisplayProps(theme: Theme, messageType: QbjcMessageType) {\n  const MESSAGE_DISPLAY_PROPS = {\n    [QbjcMessageType.ERROR]: {\n      iconClass: ErrorIcon,\n      color: theme.palette.warning.dark,\n    },\n    [QbjcMessageType.INFO]: {\n      iconClass: null,\n      color: theme.palette.text.hint,\n    },\n    [QbjcMessageType.EXECUTION]: {\n      iconClass: PlayCircleIcon,\n      color: theme.palette.text.hint,\n    },\n  };\n  return MESSAGE_DISPLAY_PROPS[messageType];\n}\n\nconst MessagesPane = observer(\n  ({\n    messages,\n    onLocClick,\n    onShowCompileResultClick,\n    style = {},\n  }: {\n    messages: Array<QbjcMessage>;\n    onLocClick: (loc: Loc) => void;\n    onShowCompileResultClick: (compileResult: CompileResult) => void;\n    style?: React.CSSProperties;\n  }) => {\n    const theme = useTheme();\n\n    const scrollContainerRef = useRef<HTMLDivElement | null>(null);\n    const isScrolledToBottomRef = useRef<boolean>(true);\n    const prevNumMessagesRef = useRef<number>(0);\n\n    useEffect(() => {\n      const {current: scrollContainerEl} = scrollContainerRef;\n      const {current: prevNumMessages} = prevNumMessagesRef;\n      const {current: isScrolledToBottom} = isScrolledToBottomRef;\n      const numMessages = messages.length;\n      if (!scrollContainerEl || numMessages === prevNumMessages) {\n        return;\n      }\n      if (isScrolledToBottom) {\n        scrollContainerEl.scrollTop = scrollContainerEl.scrollHeight;\n      }\n      prevNumMessagesRef.current = numMessages;\n    });\n\n    return (\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          ...style,\n        }}\n      >\n        <PaneHeader\n          title=\"Messages\"\n          icon={\n            <MessageTextIcon\n              style={{\n                fontSize: theme.typography.overline.fontSize,\n              }}\n            />\n          }\n        >\n          <Tooltip title=\"Clear messages\">\n            <IconButton\n              onClick={() =>\n                runInAction(() => {\n                  messages.length = 0;\n                })\n              }\n            >\n              <BlockIcon\n                style={{\n                  fontSize: theme.typography.overline.fontSize,\n                  color: theme.palette.text.secondary,\n                }}\n              />\n            </IconButton>\n          </Tooltip>\n        </PaneHeader>\n        <div\n          ref={scrollContainerRef}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the\n            // full height in the parent but prevents it from growing to accomodate the list\n            // content. ¯\\_(ツ)_/¯\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n          onScroll={useCallback(() => {\n            const {current: scrollContainerEl} = scrollContainerRef;\n            if (!scrollContainerEl) {\n              return;\n            }\n            isScrolledToBottomRef.current =\n              scrollContainerEl.scrollHeight -\n                scrollContainerEl.scrollTop -\n                scrollContainerEl.clientHeight <\n              1;\n          }, [])}\n        >\n          <List dense={true} disablePadding={true}>\n            {messages.map(({loc, message, type, compileResult}, idx) => {\n              const {iconClass: Icon, color} = getMessageDisplayProps(\n                theme,\n                type\n              );\n              let iconElement: React.ReactNode = null;\n              if (Icon) {\n                iconElement = (\n                  <Icon\n                    htmlColor={color}\n                    style={{fontSize: theme.typography.body2.fontSize}}\n                  />\n                );\n              }\n              return (\n                <ListItem\n                  key={idx}\n                  button={true}\n                  divider={true}\n                  style={{paddingTop: 0, paddingBottom: 0}}\n                  onClick={() => (loc ? onLocClick(loc) : null)}\n                >\n                  {iconElement && <ListItemIcon>{iconElement}</ListItemIcon>}\n                  <ListItemText\n                    primary={message}\n                    primaryTypographyProps={{\n                      variant: 'caption',\n                      style: {fontSize: '0.7rem'},\n                    }}\n                    inset={!iconElement}\n                    style={{\n                      color,\n                      marginTop: 3,\n                      marginBottom: 3,\n                      marginLeft: -28,\n                    }}\n                  />\n                  {compileResult && (\n                    <ListItemSecondaryAction style={{marginRight: -6}}>\n                      <Tooltip title=\"View compiled JavaScript code\">\n                        <Button\n                          startIcon={\n                            <CodeBracesBoxIcon\n                              style={{\n                                fontSize: theme.typography.overline.fontSize,\n                                color: theme.palette.text.secondary,\n                                marginRight: -2,\n                              }}\n                            />\n                          }\n                          onClick={() =>\n                            onShowCompileResultClick(compileResult)\n                          }\n                          style={{\n                            marginRight: -2,\n                            fontSize: '0.6rem',\n                            color,\n                          }}\n                        >\n                          Compiled code\n                        </Button>\n                      </Tooltip>\n                    </ListItemSecondaryAction>\n                  )}\n                </ListItem>\n              );\n            })}\n          </List>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default MessagesPane;\n","import CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport BlockIcon from '@material-ui/icons/Block';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport _ from 'lodash';\nimport MonitorIcon from 'mdi-material-ui/Monitor';\nimport {autorun} from 'mobx';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport {Terminal} from 'xterm';\nimport {FitAddon} from 'xterm-addon-fit';\nimport * as XtermWebfont from 'xterm-webfont';\nimport 'xterm/css/xterm.css';\nimport configManager, {ConfigKey} from './config-manager';\nimport PaneHeader from './pane-header';\n\nconst OutputScreenPane = observer(\n  ({\n    isRunning,\n    onReady = () => {},\n    style = {},\n    dimensions = null,\n  }: {\n    isRunning: boolean;\n    onReady?: (terminal: Terminal) => void;\n    style?: React.CSSProperties;\n    dimensions?: any;\n  }) => {\n    const theme = useTheme();\n\n    const terminalRef = useRef<Terminal | null>(null);\n    const fitAddOnRef = useRef<FitAddon | null>(null);\n\n    const containerElRef = useRef<HTMLDivElement | null>(null);\n    const [isFullScreen, setIsFullScreen] = useState(false);\n    const containerHeightBeforeFullScreenRef = useRef<string | null>(null);\n    const enterFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const terminal = terminalRef.current;\n      const fitAddOn = fitAddOnRef.current;\n      if (!containerEl || !terminal || !fitAddOn) {\n        return;\n      }\n      containerHeightBeforeFullScreenRef.current = containerEl.style.height;\n      console.log(\n        `Saving height: ${containerHeightBeforeFullScreenRef.current}`\n      );\n      setIsFullScreen(true);\n      setTimeout(() => {\n        fitAddOn.fit();\n        terminal.focus();\n      }, 0);\n    }, []);\n    const exitFullScreen = useCallback(() => {\n      const containerEl = containerElRef.current;\n      const terminal = terminalRef.current;\n      const fitAddOn = fitAddOnRef.current;\n      if (!containerEl || !terminal || !fitAddOn) {\n        return;\n      }\n      setIsFullScreen(false);\n      setTimeout(() => {\n        const containerHeightBeforeFullScreen =\n          containerHeightBeforeFullScreenRef.current;\n        if (containerHeightBeforeFullScreen) {\n          console.log(\n            `Restoring height: ${containerHeightBeforeFullScreenRef.current}`\n          );\n          containerEl.style.height = containerHeightBeforeFullScreen;\n          containerHeightBeforeFullScreenRef.current = null;\n        }\n        fitAddOn.fit();\n        terminal.focus();\n      }, 0);\n    }, []);\n\n    const init = useCallback(\n      async (node: HTMLDivElement | null) => {\n        if (!node || terminalRef.current) {\n          return;\n        }\n        const terminal = new Terminal({\n          // Output from compiled program will only specify \\n for new lines, which need to be\n          // translated to \\r\\n.\n          convertEol: true,\n          // Must set initial font family to allow xterm-webfont to wait for this\n          // font to load.\n          fontFamily: configManager.getKey(ConfigKey.SCREEN_FONT_FAMILY),\n        });\n        terminalRef.current = terminal;\n        const fitAddon = new FitAddon();\n        terminal.loadAddon(fitAddon);\n        terminal.loadAddon(new XtermWebfont());\n        // @ts-ignore: method added by xterm-webfont addon\n        await terminal.loadWebfontAndOpen(node);\n        autorun(() => {\n          terminal.setOption(\n            'fontFamily',\n            configManager.getKey(ConfigKey.SCREEN_FONT_FAMILY)\n          );\n          terminal.setOption(\n            'fontSize',\n            configManager.getKey(ConfigKey.SCREEN_FONT_SIZE)\n          );\n          terminal.setOption(\n            'letterSpacing',\n            configManager.getKey(ConfigKey.SCREEN_LETTER_SPACING)\n          );\n          terminal.setOption(\n            'lineHeight',\n            configManager.getKey(ConfigKey.SCREEN_LINE_HEIGHT)\n          );\n          fitAddon.fit();\n        });\n        window.addEventListener(\n          'resize',\n          _.debounce(() => fitAddon.fit(), 200)\n        );\n        terminal.onResize(({rows, cols}) =>\n          console.log(`Resized terminal to ${cols}x${rows}`)\n        );\n        fitAddOnRef.current = fitAddon;\n        onReady(terminal);\n      },\n      [onReady]\n    );\n    const prevDimensionsJson = useRef('');\n    const dimensionsJson = JSON.stringify(dimensions);\n    useEffect(() => {\n      if (\n        prevDimensionsJson.current === dimensionsJson ||\n        !terminalRef.current ||\n        !fitAddOnRef.current\n      ) {\n        return;\n      }\n      fitAddOnRef.current.fit();\n      prevDimensionsJson.current = dimensionsJson;\n    }, [dimensionsJson]);\n\n    return (\n      <div\n        ref={containerElRef}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          backgroundColor: theme.palette.background.paper,\n          ...style,\n          ...(isFullScreen\n            ? {\n                position: 'fixed',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%',\n                // Must be greater than z-index of AppBar (1100) and less than\n                // z-index of tooltip (1500).\n                //\n                // See https://material-ui.com/customization/z-index/\n                zIndex: 1200,\n              }\n            : {}),\n        }}\n      >\n        <PaneHeader\n          title=\"Output\"\n          icon={\n            <MonitorIcon\n              style={{\n                fontSize: theme.typography.overline.fontSize,\n              }}\n            />\n          }\n        >\n          {isRunning ? (\n            <div style={{marginRight: 12, paddingTop: 8, paddingBottom: 8}}>\n              <Tooltip title=\"Running program...\">\n                <CircularProgress color=\"inherit\" size={10} />\n              </Tooltip>\n            </div>\n          ) : (\n            <Tooltip title=\"Clear output\">\n              <IconButton onClick={() => terminalRef.current?.reset()}>\n                <BlockIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </IconButton>\n            </Tooltip>\n          )}\n          {isFullScreen ? (\n            <Tooltip title=\"Exit full screen\">\n              <IconButton onClick={exitFullScreen}>\n                <FullscreenExitIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </IconButton>\n            </Tooltip>\n          ) : (\n            <Tooltip title=\"Full screen\">\n              <IconButton onClick={enterFullScreen}>\n                <FullscreenIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </IconButton>\n            </Tooltip>\n          )}\n        </PaneHeader>\n        <div\n          ref={init}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n            // height in the parent but prevents it from growing beyond the parent size when changing\n            // lineHeight. ¯\\_(ツ)_/¯\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n        ></div>\n      </div>\n    );\n  }\n);\n\nexport default OutputScreenPane;\n","import Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport {observer} from 'mobx-react';\nimport React, {useCallback} from 'react';\nimport QbjcManager from './qbjc-manager';\n\nconst RunFab = observer(({qbjcManager}: {qbjcManager: QbjcManager}) => {\n  const isRunning = qbjcManager.isRunning;\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        right: '2rem',\n        bottom: '2rem',\n      }}\n    >\n      <div style={{position: 'relative'}}>\n        <Tooltip title={isRunning ? 'Stop program' : 'Run program'}>\n          <Fab\n            onClick={useCallback(async () => {\n              if (isRunning) {\n                qbjcManager.stop();\n              } else {\n                await qbjcManager.run();\n              }\n            }, [qbjcManager, isRunning])}\n            color={isRunning ? 'secondary' : 'primary'}\n            style={{\n              zIndex: 10,\n            }}\n          >\n            {isRunning ? <StopIcon /> : <PlayArrowIcon />}\n          </Fab>\n        </Tooltip>\n        {/*\n        isRunning && (\n          <CircularProgress\n            size={68}\n            style={{position: 'absolute', top: -6, left: -6, zIndex: 1}}\n          />\n        )\n        */}\n      </div>\n    </div>\n  );\n});\n\nexport default RunFab;\n","import '@fontsource/cascadia-mono';\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\nimport blue from '@material-ui/core/colors/blue';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {createTheme, ThemeProvider} from '@material-ui/core/styles';\nimport {observer} from 'mobx-react';\nimport {CompileResult} from 'qbjc';\nimport React, {useCallback, useRef, useState} from 'react';\nimport {Helmet} from 'react-helmet';\nimport Split from 'react-split';\nimport AppHeader from './app-header';\nimport AppSplashScreen from './app-splash-screen';\nimport './app.css';\nimport CompileResultDialog from './compile-result-dialog';\nimport EditorPane from './editor-pane';\nimport MessagesPane from './messages-pane';\nimport OutputScreenPane from './output-screen-pane';\nimport QbjcManager from './qbjc-manager';\nimport RunFab from './run-fab';\nimport './split.css';\n\nconst darkTheme = createTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      light: blue[300],\n      main: blue[400],\n      dark: blue[700],\n      contrastText: 'white',\n    },\n  },\n});\n\nconst SPLIT_GUTTER_SIZE = 6;\n\nconst App = observer(() => {\n  const qbjcManagerRef = useRef<QbjcManager>(new QbjcManager());\n  const qbjcManager = qbjcManagerRef.current;\n\n  const [dimensions, setDimensions] = useState<{\n    horizontalSplit?: Array<number>;\n    rightVerticalSplit?: Array<number>;\n  } | null>({});\n\n  const [isCompileResultDialogOpen, setIsCompileResultDialogOpen] =\n    useState(false);\n  const [displayedCompileResult, setDisplayedCompileResult] =\n    useState<CompileResult | null>(null);\n  const showCompileResultDialog = useCallback(\n    (compileResult: CompileResult) => {\n      setDisplayedCompileResult(compileResult);\n      setIsCompileResultDialogOpen(true);\n    },\n    []\n  );\n  const hideCompileResultDialog = useCallback(() => {\n    setIsCompileResultDialogOpen(false);\n    setDisplayedCompileResult(null);\n  }, []);\n\n  const onChangeSourceFileName = useCallback(\n    (sourceFileName: string) =>\n      qbjcManager.updateSourceFileName(sourceFileName),\n    [qbjcManager]\n  );\n\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <CssBaseline />\n      <AppSplashScreen isReady={qbjcManager.isReady} />\n      <Helmet>\n        <title>\n          qbjc playground{qbjcManager.isRunning ? ' - Running...' : ''}\n        </title>\n      </Helmet>\n\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: '100%',\n          width: '100%',\n          backgroundColor: darkTheme.palette.background.default,\n        }}\n      >\n        <AppHeader\n          isReady={qbjcManager.isReady}\n          editor={qbjcManager.editor}\n          sourceFileName={qbjcManager.sourceFileName}\n          onChangeSourceFileName={onChangeSourceFileName}\n        />\n\n        <Split\n          minSize={300}\n          sizes={[50, 50]}\n          onDragEnd={(sizes: Array<number>) => {\n            setDimensions({\n              ...dimensions,\n              horizontalSplit: sizes,\n            });\n          }}\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            flexGrow: 1,\n            marginTop: 5,\n          }}\n          gutterSize={SPLIT_GUTTER_SIZE}\n        >\n          <div style={{position: 'relative'}}>\n            <EditorPane\n              sourceFileName={qbjcManager.sourceFileName}\n              onChangeSourceFileName={onChangeSourceFileName}\n              onReady={(editor) => qbjcManager.init({editor})}\n              style={{\n                width: '100%',\n                height: '100%',\n                // @ts-ignore\n                overflow: 'overlay',\n              }}\n            />\n            <RunFab qbjcManager={qbjcManager} />\n          </div>\n\n          <Split\n            direction=\"vertical\"\n            sizes={[80, 20]}\n            minSize={100}\n            expandToMin={true}\n            onDragEnd={(sizes: Array<number>) => {\n              setDimensions({\n                ...dimensions,\n                rightVerticalSplit: sizes,\n              });\n            }}\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n            }}\n            gutterSize={SPLIT_GUTTER_SIZE}\n          >\n            <OutputScreenPane\n              onReady={(terminal) => qbjcManager.init({terminal})}\n              dimensions={dimensions}\n              isRunning={qbjcManager.isRunning}\n            />\n            <MessagesPane\n              messages={qbjcManager.messages}\n              onLocClick={useCallback(\n                (loc) => qbjcManager.goToMessageLocInEditor(loc),\n                [qbjcManager]\n              )}\n              onShowCompileResultClick={showCompileResultDialog}\n            />\n          </Split>\n        </Split>\n      </div>\n\n      <CompileResultDialog\n        compileResult={displayedCompileResult}\n        isOpen={isCompileResultDialogOpen}\n        onClose={hideCompileResultDialog}\n      />\n    </ThemeProvider>\n  );\n});\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** An error with source file and location info. */\nvar ErrorWithLoc = /** @class */ (function (_super) {\n    __extends(ErrorWithLoc, _super);\n    function ErrorWithLoc(message, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, loc = _b.loc;\n        var _this = _super.call(this, message) || this;\n        if (loc) {\n            var sourceFileNamePrefix = sourceFileName ? sourceFileName + \":\" : '';\n            var locPrefix = loc.line + \":\" + loc.col;\n            _this.message = \"\" + sourceFileNamePrefix + locPrefix + \" - \" + _this.message;\n            _this.loc = loc;\n        }\n        return _this;\n    }\n    return ErrorWithLoc;\n}(Error));\nexports.default = ErrorWithLoc;\n"],"sourceRoot":""}