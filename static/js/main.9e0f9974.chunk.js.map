{"version":3,"sources":["../../qbjc/dist/index.js","../../qbjc/dist/lib/ast.js","../../qbjc/dist/runtime/init-value.js","../../qbjc/dist/runtime/runtime.js","../../qbjc/dist/parser/lexer.js","../../qbjc/dist/runtime/builtins.js","../../qbjc/dist/lib/round-half-to-even.js","../../qbjc/dist/runtime/executor.js","../../qbjc/dist/runtime/qb-array.js","../../qbjc/dist/runtime/qb-udt.js","../../qbjc/dist/runtime/browser-platform.js","../ /^/.//.*$","../examples/cal.bas","../examples/check.bas","../examples/guess.bas","../examples/nibbles.bas","../examples/strtonum.bas","../../qbjc/dist/lib/types.js","../../qbjc/dist/compile.js","../../qbjc/dist/codegen/codegen.js","../../qbjc/dist/runtime/node-runtime-bundle.js","../../qbjc/dist/parser/parser.js","../../qbjc/dist/parser/grammar.js","../../qbjc/dist/semantic-analysis/semantic-analysis.js","../../qbjc/dist/lib/data-item.js","../../qbjc/dist/runtime/ansi-terminal-platform.js","../../qbjc/dist/runtime/ansi-terminal-key-code-map.js","examples.ts","open-dialog.tsx","config-manager.ts","settings-dialog.tsx","app-header.tsx","app-splash-screen.tsx","compile-result-dialog.tsx","editor.tsx","pane-header.tsx","qbjc-manager.ts","messages-pane.tsx","output-screen-pane.tsx","run-fab.tsx","app.tsx","index.tsx","../../qbjc/dist/lib/error-with-loc.js","../../qbjc/dist/lib/symbol-table.js","../../qbjc/dist/runtime/compiled-code.js"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","prototype","hasOwnProperty","call","__importDefault","mod","__esModule","value","QbUdt","QbArray","RuntimePlatform","Executor","ExecutionError","compile","compile_1","require","default","executor_1","runtime_1","qb_array_1","qb_udt_1","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","TypeError","String","__","constructor","AstVisitor","AstVisitorError","UnaryOp","BinaryOp","ExprType","isLhsExpr","InputType","PrintSep","CondLoopStructure","CaseExprType","isSingularTypeExpr","DataTypeExprType","DimType","StmtType","isFnProcOrDefFnProc","error_with_loc_1","types_1","proc","isFnOrDefFn","type","typeExpr","ARRAY","expr","VAR_REF","SUBSCRIPT","MEMBER","includes","_super","message","_a","_b","sourceFileName","node","loc","accept","ProcType","SUB","FN","DEF_FN","visitProc","LABEL","visitLabelStmt","DIM","visitDimStmt","ASSIGN","visitAssignStmt","CONST","visitConstStmt","GOTO","visitGotoStmt","IF","visitIfStmt","SELECT","visitSelectStmt","COND_LOOP","visitCondLoopStmt","UNCOND_LOOP","visitUncondLoopStmt","EXIT_LOOP","visitExitLoopStmt","FOR","visitForStmt","NEXT","visitNextStmt","EXIT_FOR","visitExitForStmt","GOSUB","visitGosubStmt","RETURN","visitReturnStmt","CALL","visitCallStmt","EXIT_PROC","visitExitProcStmt","END","visitEndStmt","SWAP","visitSwapStmt","PRINT","visitPrintStmt","INPUT","visitInputStmt","DEF_TYPE","visitDefTypeStmt","DATA","visitDataStmt","READ","visitReadStmt","RESTORE","visitRestoreStmt","LITERAL","visitLiteralExpr","visitVarRefExpr","FN_CALL","visitFnCallExpr","BINARY_OP","visitBinaryOpExpr","UNARY_OP","visitUnaryOpExpr","visitSubscriptExpr","visitMemberExpr","Error","JSON","stringify","acceptAll","nodes","_this","map","throwError","ELEMENTARY_TYPE_INIT_VALUES","DataType","INTEGER","LONG","SINGLE","DOUBLE","STRING","typeSpec","dataType","isElementaryType","UDT","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","pop","length","push","__spreadArray","to","from","i","il","j","SCREEN_MODE_CONFIGS","moo_1","builtins_1","compiled_code_1","round_half_to_even_1","shouldStopExecution","mode","textModeDimensions","rows","cols","colorMap","Runtime","platform","roundHalfToEven","printFormatStringLexer","NUMBER","DOLLAR_SIGNS","match","lineBreaks","inputLexer","WHITESPACE","QUOTED_STRING","text","substr","COMMA","currentScreenMode","executeBuiltinProc","name","argTypeSpecs","args","_i","arguments","builtinProc","runContext","lookupBuiltin","BUILTIN_FNS","BUILTIN_SUBS","runtime","run","ptr","print","formatString","line","printWithFormatString","printWithDefaultFormat","PrintArgType","VALUE","pieces","argIdx","reset","nextArg","token","split","integralFormat","fractionFormat","integralFormatLength","replace","formattedValue","Math","floor","padStart","toFixed","indexOf","join","args_1","arg","SEMICOLON","numPaddingChars","repeat","inputLine","prompt","setCursorVisibility","input","resultTypes","results","tokens","tokenIdx","errorMessage","resultIdx","resultType","errorMessagePrefix","tokenValue","numericValue","lexInput","isString","isNumeric","parseFloat","isNaN","trim","setScreenMode","find","configurable","Keywords","mooLexer","states","main","COMMENT","IDENTIFIER","keywordsTransformFn","keywords","toLowerCase","caseInsensitiveKeywords","STRING_LITERAL","NUMERIC_LITERAL","HEX_LITERAL","parseInt","OCT_LITERAL","COLON","DOT","LPAREN","RPAREN","ADD","MUL","EXP","DIV","INTDIV","EQ","NE","GTE","LTE","GT","LT","comment","NEWLINE","TOKEN_TYPES_TO_DISCARD","lexer","Lexer","lastToken","isNextTokenFirstOnLine","tokenQueue","isFirstTokenOnLine","pushState","peek","save","chunk","state","formatError","has","tokenType","__assign","assign","s","singlebyte_1","symbol_table_1","overload","paramTypeSpecsList","paramTypeSpecs","doubleSpec","returnTypeSpec","abs","stringSpec","longSpec","strToBuf","atan","bufToStr","Buffer","cos","singleSpec","getCursorPosition","now","Date","getMonth","getDate","getFullYear","toString","exp","sign","toUpperCase","c","getChar","haystack","needle","integerSpec","start","arraySpec","array","dimensionSpecs","dimensionIdx","log","trimStart","startIdx","x","max","random","trimEnd","sin","sqrt","col","_c","getScreenSize","moveCursorTo","tan","getHours","getMinutes","getSeconds","midnight","setHours","getTime","beep","clearScreen","getColorName","fg","bg","currentScreenModeConfig","Number","isFinite","setFgColor","setBgColor","row","cursor","origPos","newX","newY","numSeconds","startTimeMs","nowMs","procs","shouldReturnIfArgTypeMismatch","builtinFnsMatchingName","lookupSymbols","builtinFn","every","paramTypeSpec","areMatchingElementaryTypes","isArray","round","data_item_1","init_value_1","module","stmt","EndDirective","isEndDirective","stmtExecutionDelayUs","currentModule","localStaticVarsMap","moduleLabelIndexMap","procLabelIndexMap","dataCursor","stmtIdx","itemIdx","defaultStmtExecutionDelayUs","executeModule","moduleOrCode","ctx","e_1","loadCompiledModule","buildLabelIndexMaps","restore","executeProc","bind","read","localVars","initVars","localSymbols","VarType","VAR","localStaticVars","globalVars","globalSymbols","tempVars","executeStmts","stmts","stopExecution","prevCtx","argPtrs","lookupSymbol","paramSymbols","procTypeName","STATIC_VAR","varSymbolTable","includeVarTypes","container","varSymbolTable_1","symbol","varType","labelIndexMap","gosubStates","_loop_1","this_1","errorArgs","directive","e_2","gotoLabel","gosubState","delay","ExecutionDirectiveType","nextStmtIdx","destLabel","dataItem","getNextDataItem","getDataItem","data","buildLabelIndexMap","name_1","forEach","idx","arrayTypeSpec","_values","init","elementTypeSpec","_typeSpec","currentDimensionArrays","minIdx","numElements","nextDimensionArrays","currentDimensionArrays_1","dimensionArray","nextDimensionArray","getIdx","qbIdx","maxIdx","udtTypeSpec","fieldSpecs","fieldSpec","clone","newQbUdt","isUdt","BrowserExecutor","BrowserPlatform","ansi_escapes_1","ansi_terminal_platform_1","terminal","code","moduleObj","Function","fn","delayInUs","t0","window","performance","setTimeout","write","cursorIdx","initialX","disposeFns","removeOnDataListenerFn","onData","splice","cursorBackward","cursorSavePosition","eraseEndLine","slice","cursorRestorePosition","cursorForward","console","charCodeAt","dispose","checkShouldStopExecutionIntervalId","setInterval","clearInterval","translateKeyCode","cursorGetPosition","opts","webpackContext","req","id","webpackContextResolve","__webpack_require__","keys","getType","typeSpec1","typeSpec2","ProcDefType","typeSpecName","areMatchingSingularTypes","isSingularType","isIntegral","procType","terser_1","codegen_1","parser_1","semantic_analysis_1","source","enableBundling","enableMinify","astModule","sourceMap","sourceMapContent","_d","minifiedCode","minifiedSourceMap","_e","minify","filename","content","CodeGenerator","lodash_1","source_map_1","ast_1","nodeRuntimeBundleCode","BINARY_OP_MAP","MOD","AND","OR","openForStmtStates","openLoopStmtStates","indent","nextGeneratedLabelIdx","indentWidth","compiledModuleSourceNode","visitModule","bundle","toStringWithSourceMap","sourceNode","SourceNode","add","chunks","lines","visitStmts","flattenDeep","generateLoc","createSourceNode","origOpenForStmtStatesLength","sourceNodes","forStmt","generateLabelStmt","varDecls","varDecl","dimType","SHARED","dimensionSpecExprs","generateVarRefCode","minIdxExpr","maxIdxExpr","createStmtSourceNode","targetExpr","generateAssignableValueCode","valueExpr","flatMap","constDefs","constDef","generateGotoCode","visitCondStmt","generateLabel","ifBranch","condExpr","labelPrefix","testValue","generateTempVarRef","testExpr","caseBranch","condExprs","RANGE","lowerBoundExpr","upperBoundExpr","COMP","rightExpr","generateCondExprCode","branchLabels","ifBranches","elseBranch","endIfLabel","nextBranchLabelIdx","nextBranchNode","nextBranchLabel","loopStartLabel","loopEndLabel","cond","isCondNegated","condStmt","loopStmt","endLabel","structure","COND_EXPR_BEFORE_STMTS","COND_EXPR_AFTER_STMTS","startLabel","stepValue","endValue","counterExpr","startExpr","stepExpr","endExpr","numForStmtStatesToClose","counterExprs","nextCounterExprString","_loop_2","this_2","visitProcCall","tempVarName","leftExpr","formatExpr","inputType","TOKENIZED","targetExprs","LINE","generateRunCode","valueString","OP_MAP","NEG","NOT","PARENS","arrayExpr","indexExprs","indexExpr","generateSubscriptCode","dimension","udtExpr","fieldName","tempVarPrefix","tempVarIdx","argExprs","argExpr","argTypeProps","shouldPassByRef","ARG","generateVarContainerCode","containerCode","lastIndexExprCode","executeProcCodePrefixMap","BUILTIN","MODULE","procDefType","values","outputLines","values_1","indentStr","varContainer","varScope","VarScope","LOCAL","GLOBAL","targetTypeSpec","valueTypeSpec","valueCode","createParser","nearley_1","grammar_1","lexer_1","Parser","Grammar","fromCompiled","parser","feed","tree","discard","useLoc","tokenOrAstNode","buildBinaryOpExpr","$1","$2","$3","buildUnaryOpExpr","buildDataItem","grammar","ParserRules","concat","reduce","a","udts","STATIC","FUNCTION","$4","$5","params","isDefaultStatic","DEF","position","startsWith","DECLARE","$1_1","elementTypeExpr","TYPE","fieldSpecExprs","$2_1","TO","LET","ELSE","THEN","ELSEIF","$6","$7","$6_1","$6_2","$6_5","CASE","$5_1","$5_2","$5_3","IS","WHILE","WEND","DO","LOOP","UNTIL","EXIT","STEP","nextToken","SYSTEM","STOP","USING","location","flatten","arg1","arg2","DEFINT","ranges","DEFSNG","DEFDBL","DEFLNG","DEFSTR","minPrefix","maxPrefix","LOCATE","COLOR","$2_2","NaN","SEG","VIEW","AS","ELEMENTARY","ParserStart","SemanticAnalyzer","TYPE_SUFFIX_MAP","freeze","$","DEFAULT_DIMENSION_SPEC","udtStack","currentProc","defTypeMap","setUpDefTypeMap","visitUdt","preprocessProc","labels","getLabels","param","getTypeSpecForVarDeclOrParam","getDefaultTypeSpecFromName","labelLocMap","stmts_1","udt","udtStackIdx","udtsInCycle","fieldTypeSpec","fieldUdt","lookupUdtOrThrow","resolvedSymbol","moduleLocalSymbol","createLocalVarSymbol","addLocalSymbol","symbolProps","lookupLabelOrThrow","requireNumericExpr","exprs","exprs_1","requireElementaryTypeExpr","exprs_2","condExprs_1","exprs_3","resolvedSub","lookupSub","defType","range","fromCharCode","lookupFn","fnCallExpr","resolvedFn","subscriptExpr","leftTypeSpec","rightTypeSpec","requireNumericOperands","useCoercedNumericType","coerceNumericTypes","resolvedProc","argTypeSpec","isEqual","typeSpecs","RULES","operands","resultTypeSpec","matchingRule","getLocalSymbols","idxExprs","idxExprs_1","idxExpr","filter","context","foundLabel","existingLabel","dataItemTypeName","throwDataItemTypeError","item","expectedTypeSpec","ansi_styles_1","ansi_terminal_key_code_map_1","AnsiTerminalPlatform","cursorTo","isCursorVisible","cursorShow","cursorHide","eraseScreen","colorName","open","bgColorName","ESC","NUL","ANSI_TERMINAL_KEY_CODE_MAP","EXAMPLE_SPECS","fileName","title","description","spec","DEFAULT_EXAMPLE","ConfirmationDialog","isOpen","onClose","onConfirm","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","onClick","color","useCallback","ExamplesTab","onSelect","onExampleClick","exampleIdx","EXAMPLES","List","subheader","ListItem","button","ListItemAvatar","Avatar","ListItemText","primary","secondary","UploadTab","onChange","selectedFiles","selectedFile","style","display","flex","height","alignItems","justifyContent","acceptedFiles","filesLimit","showPreviews","showPreviewsInDropzone","ConfigKey","OpenDialog","observer","editor","theme","useTheme","isFullScreen","useMediaQuery","breakpoints","down","selectedFileSpec","useRef","useState","isOverwriteConfirmationDialogOpen","setIsOverwriteConfirmationDialogOpen","openSelectedFile","current","setValue","fileSpec","trimmedSource","getValue","shouldConfirm","some","activeTab","setActiveTab","fullScreen","fullWidth","maxWidth","scroll","Tabs","orientation","variant","event","borderRight","palette","divider","indicatorColor","textColor","Tab","icon","backgroundColor","background","paper","overflowY","paddingLeft","paddingRight","DEFAULT_CONFIG","SOURCE_FILES","CURRENT_SOURCE_FILE_NAME","EDITOR_FONT_FAMILY","EDITOR_FONT_SIZE","EDITOR_THEME","EDITOR_KEYBINDINGS","SCREEN_FONT_FAMILY","SCREEN_FONT_SIZE","SCREEN_LETTER_SPACING","SCREEN_LINE_HEIGHT","EXECUTION_DELAY","EDITOR_THEME_GROUPS","EDITOR_THEMES","group","configManager","config","makeObservable","observable","setKey","action","load","sourceFiles","computed","currentSourceFile","setContent","reaction","toJS","key","defaultValue","currentValue","localStorage","removeItem","setItem","rawValue","getItem","parse","warn","getKey","sourceFile","newContent","TextSettingEditorDialog","configKey","dividers","TextField","autoFocus","required","target","width","InputProps","fontSize","disabled","SliderSettingEditorDialog","min","Slider","marks","valueLabelDisplay","marginTop","SingleChoiceSettingEditorDialog","groups","choices","listRef","selectedListItemRef","didScrollToSelectedListItem","scrollToSelectedListItem","scrollIntoView","scrollHeight","scrollTop","clientHeight","useEffect","overflowX","ref","padding","ListSubheader","choice","isSelected","selected","primaryTypographyProps","ListItemSecondaryAction","Radio","checked","SettingsDialog","isEditorFontDialogOpen","setIsEditorFontDialogOpen","isEditorFontSizeDialogOpen","setIsEditorFontSizeDialogOpen","isEditorThemeDialogOpen","setIsEditorThemeDialogOpen","isEditorKeybindingsDialogOpen","setIsEditorKeybindingsDialogOpen","isScreenFontDialogOpen","setIsScreenFontDialogOpen","isScreenFontSizeDialogOpen","setIsScreenFontSizeDialogOpen","isScreenLetterSpacingDialogOpen","setIsScreenLetterSpacingDialogOpen","isScreenLineHeightDialogOpen","setIsScreenLineHeightDialogOpen","isExecutionDelayDialogOpen","setIsExecutionDelayDialogOpen","AppHeader","isReady","onSaveClick","blob","Blob","saveAs","isSettingsDialogOpen","setIsSettingsDialogOpen","isOpenDialogOpen","setIsOpenDialogOpen","AppBar","Toolbar","Typography","flexGrow","Tooltip","IconButton","typography","overline","marginLeft","href","AppSplashScreen","CompileResultType","Status","VISIBLE","status","setStatus","TRANSITIONING","HIDDEN","left","top","zIndex","transition","opacity","CircularProgress","COMPILE_RESULT_TYPE_SPECS","compileResultType","iconClass","TextBoxOutline","BUNDLE","NodejsIcon","CompileResultTypeSelect","React","menuAnchor","setMenuAnchor","onButtonClick","currentTarget","onMenuSelect","newValue","onMenuClose","IconClass","startIcon","endIcon","Menu","anchorEl","keepMounted","MenuItem","ListItemIcon","CompileResultDialog","moduleCompileResult","compileResult","_onClose","setCompileResultType","bundleCompileResult","setBundleCompileResult","editorRef","setIsFullScreen","enterFullScreen","resize","exitFullScreen","onCompileResultChange","editorConfigChangeListenerDisposerRef","ace","edit","useWorker","autorun","setOptions","fontFamily","setTheme","keybindings","setKeyboardHandler","setShowPrintMargin","session","setMode","setReadOnly","clearSelection","focus","destroy","disableTypography","marginRight","spacing","flexDirection","Editor","onReady","initialContent","on","PaneHeader","QbjcMessageType","children","Paper","elevation","square","QbjcManager","isRunning","messages","executor","pushMessage","clearMessages","error","runInAction","ERROR","EXECUTION","startTs","endTs","INFO","selection","selectWordRight","MessagesPane","onLocClick","onShowCompileResultClick","scrollContainerRef","isScrolledToBottomRef","prevNumMessagesRef","scrollContainerEl","prevNumMessages","isScrolledToBottom","numMessages","onScroll","dense","disablePadding","messageType","ErrorIcon","warning","dark","hint","PlayCircleIcon","getMessageDisplayProps","Icon","iconElement","htmlColor","body2","paddingTop","paddingBottom","inset","marginBottom","OutputScreenPane","dimensions","terminalRef","fitAddOnRef","Terminal","convertEol","fitAddon","FitAddon","loadAddon","XtermWebfont","loadWebfontAndOpen","setOption","fit","addEventListener","debounce","onResize","prevDimensionsJson","dimensionsJson","size","RunFab","qbjcManager","right","bottom","Fab","stop","darkTheme","createTheme","light","blue","contrastText","App","setDimensions","isCompileResultDialogOpen","setIsCompileResultDialogOpen","displayedCompileResult","setDisplayedCompileResult","showCompileResultDialog","hideCompileResultDialog","ThemeProvider","CssBaseline","Helmet","minSize","sizes","onDragEnd","horizontalSplit","gutterSize","overflow","direction","expandToMin","rightVerticalSplit","goToMessageLocInEditor","ReactDOM","render","StrictMode","document","getElementById","ErrorWithLoc","sourceFileNamePrefix","locPrefix","symbolTable"],"mappings":"0HACA,IAAIA,EAAmBC,MAAQA,KAAKD,kBAAqBE,OAAOC,OAAU,SAASC,EAAGC,EAAGC,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BJ,OAAOO,eAAeL,EAAGG,EAAI,CAAEG,YAAY,EAAMC,IAAK,WAAa,OAAON,EAAEC,OAC1E,SAASF,EAAGC,EAAGC,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BF,EAAEG,GAAMF,EAAEC,KAEVM,EAAgBX,MAAQA,KAAKW,cAAiB,SAASP,EAAGQ,GAC1D,IAAK,IAAIC,KAAKT,EAAa,YAANS,GAAoBZ,OAAOa,UAAUC,eAAeC,KAAKJ,EAASC,IAAId,EAAgBa,EAASR,EAAGS,IAEvHI,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQS,MAAQT,EAAQU,QAAUV,EAAQW,gBAAkBX,EAAQY,SAAWZ,EAAQa,eAAiBb,EAAQc,aAAU,EAC1H,IAAIC,EAAYC,EAAQ,KACxB3B,OAAOO,eAAeI,EAAS,UAAW,CAAEH,YAAY,EAAMC,IAAK,WAAc,OAAOO,EAAgBU,GAAWE,WACnHlB,EAAaiB,EAAQ,IAAyBhB,GAC9CD,EAAaiB,EAAQ,IAAgBhB,GACrC,IAAIkB,EAAaF,EAAQ,KACzB3B,OAAOO,eAAeI,EAAS,iBAAkB,CAAEH,YAAY,EAAMC,IAAK,WAAc,OAAOoB,EAAWL,kBAC1GxB,OAAOO,eAAeI,EAAS,WAAY,CAAEH,YAAY,EAAMC,IAAK,WAAc,OAAOO,EAAgBa,GAAYD,WACrH,IAAIE,EAAYH,EAAQ,KACxB3B,OAAOO,eAAeI,EAAS,kBAAmB,CAAEH,YAAY,EAAMC,IAAK,WAAc,OAAOqB,EAAUR,mBAC1G,IAAIS,EAAaJ,EAAQ,KACzB3B,OAAOO,eAAeI,EAAS,UAAW,CAAEH,YAAY,EAAMC,IAAK,WAAc,OAAOO,EAAgBe,GAAYH,WACpH,IAAII,EAAWL,EAAQ,KACvB3B,OAAOO,eAAeI,EAAS,QAAS,CAAEH,YAAY,EAAMC,IAAK,WAAc,OAAOO,EAAgBgB,GAAUJ,WAChHlB,EAAaiB,EAAQ,IAA4BhB,I,iCC5BjD,IAAIsB,EAAalC,MAAQA,KAAKkC,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBlC,OAAOqC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIxB,KAAKwB,EAAOpC,OAAOa,UAAUC,eAAeC,KAAKqB,EAAGxB,KAAIuB,EAAEvB,GAAKwB,EAAExB,MAC3EuB,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAO3C,KAAK4C,YAAcR,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEtB,UAAkB,OAANuB,EAAapC,OAAOC,OAAOmC,IAAMM,EAAG7B,UAAYuB,EAAEvB,UAAW,IAAI6B,IAZ1C,GAezC1B,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQiC,WAAajC,EAAQkC,gBAAkBlC,EAAQmC,QAAUnC,EAAQoC,SAAWpC,EAAQqC,SAAWrC,EAAQsC,UAAYtC,EAAQuC,UAAYvC,EAAQwC,SAAWxC,EAAQyC,kBAAoBzC,EAAQ0C,aAAe1C,EAAQ2C,mBAAqB3C,EAAQ4C,iBAAmB5C,EAAQ6C,QAAU7C,EAAQ8C,SAAW9C,EAAQ+C,yBAAsB,EAChV,IAMID,EAkCAF,EAyCAP,EAjFAW,EAAmB3C,EAAgBW,EAAQ,KAC3CiC,EAAUjC,EAAQ,IAItBhB,EAAQ+C,oBAHR,SAA6BG,GACzB,OAAOD,EAAQE,YAAYD,EAAKE,OAIpC,SAAWN,GACPA,EAAQ,MAAY,QACpBA,EAAQ,IAAU,MAClBA,EAAQ,OAAa,SACrBA,EAAQ,MAAY,QACpBA,EAAQ,KAAW,OACnBA,EAAQ,GAAS,KACjBA,EAAQ,OAAa,SACrBA,EAAQ,UAAgB,WACxBA,EAAQ,YAAkB,aAC1BA,EAAQ,UAAgB,WACxBA,EAAQ,IAAU,MAClBA,EAAQ,KAAW,OACnBA,EAAQ,SAAe,UACvBA,EAAQ,MAAY,QACpBA,EAAQ,OAAa,SACrBA,EAAQ,KAAW,OACnBA,EAAQ,UAAgB,WACxBA,EAAQ,IAAU,MAClBA,EAAQ,KAAW,OACnBA,EAAQ,MAAY,QACpBA,EAAQ,MAAY,QACpBA,EAAQ,SAAe,UACvBA,EAAQ,KAAW,OACnBA,EAAQ,KAAW,OACnBA,EAAQ,QAAc,UAzB1B,CA0BGA,EAAW9C,EAAQ8C,WAAa9C,EAAQ8C,SAAW,KAEtD,SAAWD,GACPA,EAAO,MAAY,QACnBA,EAAO,OAAa,SACpBA,EAAO,OAAa,SAHxB,CAIa7C,EAAQ6C,UAAY7C,EAAQ6C,QAAU,KAEnD,SAAWD,GACPA,EAAgB,WAAiB,aACjCA,EAAgB,MAAY,QAC5BA,EAAgB,IAAU,MAH9B,CAIGA,EAAmB5C,EAAQ4C,mBAAqB5C,EAAQ4C,iBAAmB,KAI9E5C,EAAQ2C,mBAHR,SAA4BU,GACxB,OAAOA,EAASD,OAASR,EAAiBU,OAI9C,SAAWZ,GAEPA,EAAY,MAAY,QAExBA,EAAY,MAAY,QAExBA,EAAY,KAAW,OAN3B,CAOkB1C,EAAQ0C,eAAiB1C,EAAQ0C,aAAe,KAElE,SAAWD,GACPA,EAAiB,uBAA6B,sBAC9CA,EAAiB,sBAA4B,qBAFjD,CAGuBzC,EAAQyC,oBAAsBzC,EAAQyC,kBAAoB,KAGjF,SAAWD,GACPA,EAAQ,MAAY,QACpBA,EAAQ,UAAgB,YAF5B,CAGcxC,EAAQwC,WAAaxC,EAAQwC,SAAW,KAEtD,SAAWD,GAEPA,EAAS,UAAgB,YAEzBA,EAAS,KAAW,OAJxB,CAKevC,EAAQuC,YAAcvC,EAAQuC,UAAY,KAIzDvC,EAAQsC,UAHR,SAAmBiB,GACf,MAAO,CAAClB,EAASmB,QAASnB,EAASoB,UAAWpB,EAASqB,QAAQC,SAASJ,EAAKH,OAIjF,SAAWf,GACPA,EAAQ,QAAc,UACtBA,EAAQ,QAAc,SACtBA,EAAQ,QAAc,SACtBA,EAAQ,UAAgB,WACxBA,EAAQ,SAAe,UACvBA,EAAQ,UAAgB,YACxBA,EAAQ,OAAa,SAPzB,CAQGA,EAAWrC,EAAQqC,WAAarC,EAAQqC,SAAW,KAEtD,SAAWD,GACPA,EAAQ,IAAU,MAClBA,EAAQ,IAAU,MAClBA,EAAQ,IAAU,MAClBA,EAAQ,IAAU,MAClBA,EAAQ,OAAa,SACrBA,EAAQ,IAAU,MAClBA,EAAQ,IAAU,MAClBA,EAAQ,IAAU,MAClBA,EAAQ,GAAS,KACjBA,EAAQ,GAAS,KACjBA,EAAQ,GAAS,KACjBA,EAAQ,GAAS,KACjBA,EAAQ,IAAU,MAClBA,EAAQ,GAAS,KACjBA,EAAQ,IAAU,MAftB,CAgBcpC,EAAQoC,WAAapC,EAAQoC,SAAW,KAEtD,SAAWD,GACPA,EAAO,IAAU,MACjBA,EAAO,IAAU,MACjBA,EAAO,OAAa,SAHxB,CAIanC,EAAQmC,UAAYnC,EAAQmC,QAAU,KAEnD,IAAID,EAAiC,SAAU0B,GAE3C,SAAS1B,EAAgB2B,EAASC,GAC9B,IAAIC,OAAY,IAAPD,EAAgB,GAAKA,EAAIE,EAAiBD,EAAGC,eAAgBC,EAAOF,EAAGE,KAChF,OAAOL,EAAOxD,KAAKhB,KAAMyE,EAAS,CAAEG,eAAgBA,EAAgBE,IAAc,OAATD,QAA0B,IAATA,OAAkB,EAASA,EAAKC,OAAU9E,KAExI,OALAkC,EAAUY,EAAiB0B,GAKpB1B,EAN0B,CAOnCc,EAAiB/B,SACnBjB,EAAQkC,gBAAkBA,EAE1B,IAAID,EAA4B,WAC5B,SAASA,KAyFT,OAtFAA,EAAW/B,UAAUiE,OAAS,SAAUF,GACpC,OAAQA,EAAKb,MACT,KAAKH,EAAQmB,SAASC,IACtB,KAAKpB,EAAQmB,SAASE,GACtB,KAAKrB,EAAQmB,SAASG,OAClB,OAAOnF,KAAKoF,UAAUP,GAC1B,KAAKnB,EAAS2B,MACV,OAAOrF,KAAKsF,eAAeT,GAC/B,KAAKnB,EAAS6B,IACV,OAAOvF,KAAKwF,aAAaX,GAC7B,KAAKnB,EAAS+B,OACV,OAAOzF,KAAK0F,gBAAgBb,GAChC,KAAKnB,EAASiC,MACV,OAAO3F,KAAK4F,eAAef,GAC/B,KAAKnB,EAASmC,KACV,OAAO7F,KAAK8F,cAAcjB,GAC9B,KAAKnB,EAASqC,GACV,OAAO/F,KAAKgG,YAAYnB,GAC5B,KAAKnB,EAASuC,OACV,OAAOjG,KAAKkG,gBAAgBrB,GAChC,KAAKnB,EAASyC,UACV,OAAOnG,KAAKoG,kBAAkBvB,GAClC,KAAKnB,EAAS2C,YACV,OAAOrG,KAAKsG,oBAAoBzB,GACpC,KAAKnB,EAAS6C,UACV,OAAOvG,KAAKwG,kBAAkB3B,GAClC,KAAKnB,EAAS+C,IACV,OAAOzG,KAAK0G,aAAa7B,GAC7B,KAAKnB,EAASiD,KACV,OAAO3G,KAAK4G,cAAc/B,GAC9B,KAAKnB,EAASmD,SACV,OAAO7G,KAAK8G,iBAAiBjC,GACjC,KAAKnB,EAASqD,MACV,OAAO/G,KAAKgH,eAAenC,GAC/B,KAAKnB,EAASuD,OACV,OAAOjH,KAAKkH,gBAAgBrC,GAChC,KAAKnB,EAASyD,KACV,OAAOnH,KAAKoH,cAAcvC,GAC9B,KAAKnB,EAAS2D,UACV,OAAOrH,KAAKsH,kBAAkBzC,GAClC,KAAKnB,EAAS6D,IACV,OAAOvH,KAAKwH,aAAa3C,GAC7B,KAAKnB,EAAS+D,KACV,OAAOzH,KAAK0H,cAAc7C,GAC9B,KAAKnB,EAASiE,MACV,OAAO3H,KAAK4H,eAAe/C,GAC/B,KAAKnB,EAASmE,MACV,OAAO7H,KAAK8H,eAAejD,GAC/B,KAAKnB,EAASqE,SACV,OAAO/H,KAAKgI,iBAAiBnD,GACjC,KAAKnB,EAASuE,KACV,OAAOjI,KAAKkI,cAAcrD,GAC9B,KAAKnB,EAASyE,KACV,OAAOnI,KAAKoI,cAAcvD,GAC9B,KAAKnB,EAAS2E,QACV,OAAOrI,KAAKsI,iBAAiBzD,GACjC,KAAK5B,EAASsF,QACV,OAAOvI,KAAKwI,iBAAiB3D,GACjC,KAAK5B,EAASmB,QACV,OAAOpE,KAAKyI,gBAAgB5D,GAChC,KAAK5B,EAASyF,QACV,OAAO1I,KAAK2I,gBAAgB9D,GAChC,KAAK5B,EAAS2F,UACV,OAAO5I,KAAK6I,kBAAkBhE,GAClC,KAAK5B,EAAS6F,SACV,OAAO9I,KAAK+I,iBAAiBlE,GACjC,KAAK5B,EAASoB,UACV,OAAOrE,KAAKgJ,mBAAmBnE,GACnC,KAAK5B,EAASqB,OACV,OAAOtE,KAAKiJ,gBAAgBpE,GAChC,QACI,MAAM,IAAIqE,MAAM,sBAAwBC,KAAKC,UAAUvE,MAInEhC,EAAW/B,UAAUuI,UAAY,SAAUC,GACvC,IAAIC,EAAQvJ,KACZ,OAAOsJ,EAAME,KAAI,SAAU3E,GAAQ,OAAO0E,EAAMxE,OAAOF,OAG3DhC,EAAW/B,UAAU2I,WAAa,SAAUhF,EAASI,GACjD,MAAM,IAAI/B,EAAgB2B,EAAS,CAC/BG,eAAgB5E,KAAK4E,eACrBC,KAAMA,KAGPhC,EA1FqB,GA4FhCjC,EAAQiC,WAAaA,G,iCC9OrB,IAGI6B,EAHAzD,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAGxDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtD,IAAIyC,EAAUjC,EAAQ,IAClBI,EAAaf,EAAgBW,EAAQ,MACrCK,EAAWhB,EAAgBW,EAAQ,MAEnC8H,IAA+BhF,EAAK,IACjCb,EAAQ8F,SAASC,SAAW,EAC/BlF,EAAGb,EAAQ8F,SAASE,MAAQ,EAC5BnF,EAAGb,EAAQ8F,SAASG,QAAU,EAC9BpF,EAAGb,EAAQ8F,SAASI,QAAU,EAC9BrF,EAAGb,EAAQ8F,SAASK,QAAU,GAC9BtF,GAeJ9D,EAAQiB,QAdR,SAAmBoI,GACf,IAAIC,EAAWD,EAASjG,KACxB,GAAIH,EAAQsG,iBAAiBD,GACzB,OAAOR,EAA4BQ,GAEvC,OAAQD,EAASjG,MACb,KAAKH,EAAQ8F,SAASzF,MAClB,OAAO,IAAIlC,EAAWH,QAAQoI,GAClC,KAAKpG,EAAQ8F,SAASS,IAClB,OAAO,IAAInI,EAASJ,QAAQoI,GAChC,QACI,MAAM,IAAIf,MAAM,iBAAmBC,KAAKC,UAAUa,O,iCC3B9D,IAAII,EAAarK,MAAQA,KAAKqK,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUzJ,GAAS,IAAM0J,EAAKL,EAAUM,KAAK3J,IAAW,MAAO4J,GAAKJ,EAAOI,IACpF,SAASC,EAAS7J,GAAS,IAAM0J,EAAKL,EAAS,MAAUrJ,IAAW,MAAO4J,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAe9J,EAIa8J,EAAOC,KAAOR,EAAQO,EAAO9J,QAJ1CA,EAIyD8J,EAAO9J,MAJhDA,aAAiBoJ,EAAIpJ,EAAQ,IAAIoJ,GAAE,SAAUG,GAAWA,EAAQvJ,OAITgK,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAetL,MAAQA,KAAKsL,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOnM,OAAU2L,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAI/I,UAAU,mCAC3B,KAAOmJ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAE1K,KAAKyK,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAE1K,KAAKyK,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEtK,QACzBkL,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAEzK,MAAOkL,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,KAAkBb,GAAZA,EAAIE,EAAEG,MAAYS,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVF,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIS,KAAKH,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBD,EAAKf,EAAKvK,KAAKsJ,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElL,MAAOkL,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwBzDK,EAAiB1M,MAAQA,KAAK0M,eAAkB,SAAUC,EAAIC,GAC9D,IAAK,IAAIC,EAAI,EAAGC,EAAKF,EAAKJ,OAAQO,EAAIJ,EAAGH,OAAQK,EAAIC,EAAID,IAAKE,IAC1DJ,EAAGI,GAAKH,EAAKC,GACjB,OAAOF,GAEP1L,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQoM,oBAAsBpM,EAAQW,qBAAkB,EACxD,IAAI0L,EAAQhM,EAAgBW,EAAQ,MAChCiC,EAAUjC,EAAQ,IAClBsL,EAAatL,EAAQ,KACrBuL,EAAkBvL,EAAQ,IAC1BwL,EAAuBnM,EAAgBW,EAAQ,MAE/CL,EACA,WAKIvB,KAAKqN,qBAAsB,GAInCzM,EAAQW,gBAAkBA,EAC1BX,EAAQoM,oBAAsB,CAC1B,CACIM,KAAM,EACNC,mBAAoB,CAAC,CAAEC,KAAM,GAAIC,KAAM,KACvCC,SAAU,CACN,QACA,OACA,QACA,OACA,MACA,UACA,SACA,QACA,OACA,aACA,cACA,aACA,YACA,gBACA,eACA,iBASZ,IAAIC,EAAyB,WACzB,SAASA,EAAQC,GACb5N,KAAK4N,SAAWA,EAChB5N,KAAK6N,gBAAkBT,EAAqBvL,QAC5C7B,KAAK8N,uBAAyBb,EAAMpL,QAAQH,QAAQ,CAChDqM,OAAQ,sBACR/D,OAAQ,IACRgE,aAAc,MACdzF,QAAS,CACL0F,MAAO,YACPC,YAAY,KAIpBlO,KAAKmO,WAAalB,EAAMpL,QAAQH,QAAQ,CACpC0M,WAAY,CAAEH,MAAO,MAAOC,YAAY,GACxCG,cAAe,CACXJ,MAAO,UACP7M,MAAO,SAAUkN,GAAQ,OAAOA,EAAKC,OAAO,EAAGD,EAAK9B,OAAS,IAC7DxI,KAAM,WAAc,MAAO,WAE/BwK,MAAO,IACPxE,OAAQ,YAEZhK,KAAKyO,kBAAoB,EA4S7B,OA1SAd,EAAQ7M,UAAU4N,mBAAqB,SAAUC,EAAMC,GAEnD,IADA,IAAIC,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIgP,EAAaC,EACjB,OAAO3D,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAGD,KAFAmD,EAAc9B,EAAWgC,cAAchC,EAAWiC,YAAaR,EAAMC,IACjE1B,EAAWgC,cAAchC,EAAWkC,aAAcT,EAAMC,IAExD,MAAM,IAAI1F,MAAM,0CAA6CyF,EAAO,KAExE,GAAIC,EAAapC,SAAWqC,EAAKrC,OAC7B,MAAM,IAAItD,MAAM,oDACG0F,EAAapC,OAAS,mBAAqBqC,EAAKrC,QAQvE,OANAyC,EAAa,CACTI,QAASrP,KACT4N,SAAU5N,KAAK4N,SACfgB,aAAcA,EACdC,KAAMA,GAEH,CAAC,EAAaG,EAAYM,IAAIjE,MAAM2D,EAAatC,EAAcA,EAAc,GAAImC,EAAKrF,KAAI,SAAU+F,GAAO,OAAOA,EAAI,GAAGA,EAAI,QAAU,CAACN,MACnJ,KAAK,EAAG,MAAO,CAAC,EAAcvK,EAAGoH,gBAKjD6B,EAAQ7M,UAAU0O,MAAQ,SAAUC,GAEhC,IADA,IAAIZ,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI0P,EACJ,OAAOpE,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAQD,OAPA6D,EAAOD,EACDzP,KAAK2P,sBAAsBF,EAAcZ,GACzC7O,KAAK4P,uBAAuBf,GACd,IAAhBA,EAAKrC,QACLqC,EAAKA,EAAKrC,OAAS,GAAGxI,OAASmJ,EAAgB0C,aAAaC,QAC5DJ,GAAQ,MAEL,CAAC,EAAa1P,KAAK4N,SAAS4B,MAAME,IAC7C,KAAK,EAED,OADAhL,EAAGoH,OACI,CAAC,WAY5B6B,EAAQ7M,UAAU6O,sBAAwB,SAAUF,EAAcZ,GAC9D,IAAIkB,EAAS,GACTC,EAAS,EAEb,IADAhQ,KAAK8N,uBAAuBmC,MAAMR,KACzB,CACL,KAAOO,EAASnB,EAAKrC,QAAUqC,EAAKmB,GAAQhM,OAASmJ,EAAgB0C,aAAaC,SAC5EE,EAEN,IAAIE,EAAUF,EAASnB,EAAKrC,OAASqC,EAAKmB,GAAU,KAChDG,EAAQnQ,KAAK8N,uBAAuB/C,OACxC,IAAKoF,EACD,MAEJ,OAAQA,EAAMnM,MACV,IAAK,SACD,IAAKkM,GAAoC,kBAAlBA,EAAQ9O,MAC3B,MAAM,IAAI8H,MAAM,mDACQ8G,EAAS,GAAK,gBAA+B,OAAZE,QAAgC,IAAZA,OAAqB,EAASA,EAAQ9O,QAEvH,IAAIsD,EAAKyL,EAAM/O,MAAMgP,MAAM,KAAMC,EAAiB3L,EAAG,GAAI4L,EAAiB5L,EAAG,GAEzE6L,EAAuBF,EAAeG,QAAQ,IAAK,IAAIhE,OAC3D,GAAI8D,EAAgB,CAChB,IAAIG,GAAkB,GAAKC,KAAKC,MAAMT,EAAQ9O,QAAQwP,SAASL,GAC3D,IACAL,EAAQ9O,MAAMyP,QAAQP,EAAe9D,QAAQ4D,MAAM,KAAK,GAC5DL,EAAOtD,KAAKgE,OAEX,CACGA,EAAiBP,EAAQ9O,MAAMyP,QAAQ,GAAGD,SAASL,IAClDJ,EAAM/O,MAAM0P,QAAQ,MAAQ,EAAI,IAAM,IAC3Cf,EAAOtD,KAAKgE,KAEdT,EACF,MACJ,IAAK,SACD,IAAKE,GAAoC,kBAAlBA,EAAQ9O,MAC3B,MAAM,IAAI8H,MAAM,mDAAqD8G,EAAS,IAElFD,EAAOtD,KAAKyD,EAAQ9O,SAClB4O,EACF,MACJ,IAAK,eACD,IAAI5O,OAAQ,EAERA,EADA+O,EAAM/O,MAAMoL,QAAU,EACd2D,EAAM/O,MAEc,IAAvB+O,EAAM/O,MAAMoL,OACT,KAGA,KAEZuD,EAAOtD,KAAKrL,GACZ,MAEJ,IAAK,UACD2O,EAAOtD,KAAK0D,EAAM/O,OAClB,MACJ,QACI,MAAM,IAAI8H,MAAM,0BAA4BC,KAAKC,UAAU+G,KAGvE,OAAOJ,EAAOgB,KAAK,KAEvBpD,EAAQ7M,UAAU8O,uBAAyB,SAAUf,GAGjD,IAFA,IACIa,EAAO,GACFZ,EAAK,EAAGkC,EAASnC,EAAMC,EAAKkC,EAAOxE,OAAQsC,IAAM,CACtD,IAAImC,EAAMD,EAAOlC,GACjB,OAAQmC,EAAIjN,MACR,KAAKmJ,EAAgB0C,aAAaqB,UAC9B,MACJ,KAAK/D,EAAgB0C,aAAarB,MAC9B,IAAI2C,EARQ,GAQ+BzB,EAAKlD,OARpC,GASZkD,GAAQ,IAAI0B,OAAOD,GACnB,MACJ,KAAKhE,EAAgB0C,aAAaC,MAC9B,GAAyB,kBAAdmB,EAAI7P,MAAoB,CAC/BsO,GAAQ,GAAKuB,EAAI7P,MACjB,MAEC,GAAyB,kBAAd6P,EAAI7P,MAAoB,CACpCsO,IAAcuB,EAAI7P,OAAS,EAAI,IAAM,IAAM6P,EAAI7P,MAAQ,IACvD,MAKR,QACI,MAAM,IAAI8H,MAAM,uBAAyBC,KAAKC,UAAU6H,GAAO,MAG3E,OAAOvB,GAEX/B,EAAQ7M,UAAUuQ,UAAY,SAAUC,GACpC,OAAOjH,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI0P,EACJ,OAAOpE,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EACD,OAAKyF,EACE,CAAC,EAAatR,KAAK4N,SAAS4B,MAAM8B,IADrB,CAAC,EAAa,GAEtC,KAAK,EACD5M,EAAGoH,OACHpH,EAAGmH,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAa7L,KAAK4N,SAAS2D,qBAAoB,IAC/D,KAAK,EAED,OADA7M,EAAGoH,OACI,CAAC,EAAa9L,KAAK4N,SAASyD,aACvC,KAAK,EAED,OADA3B,EAAOhL,EAAGoH,OACH,CAAC,EAAa9L,KAAK4N,SAAS2D,qBAAoB,IAC3D,KAAK,EAED,OADA7M,EAAGoH,OACI,CAAC,EAAc4D,WAK1C/B,EAAQ7M,UAAU0Q,MAAQ,SAAUF,GAEhC,IADA,IAAIG,EAAc,GACT3C,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpC2C,EAAY3C,EAAK,GAAKC,UAAUD,GAEpC,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI0R,EAAShC,EAAMiC,EAAQC,EAAUC,EAAcC,EAAWC,EAAYC,EAAoBC,EAAYC,EAC1G,OAAO5G,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAED,OADA6F,EAAU,GACH,CAAC,EAAa1R,KAAK4N,SAAS4B,MAAM8B,IAC7C,KAAK,EAED,OADA5M,EAAGoH,OACI,CAAC,EAAa9L,KAAKqR,UAAU,KACxC,KAAK,EAED,GADA3B,EAAOhL,EAAGoH,OACN9L,KAAK4N,SAASP,oBACd,MAAO,CAAC,EAAcqE,GAK1B,IAHAC,EAAS3R,KAAKmS,SAASzC,GACvBkC,EAAW,EACXC,EAAe,KACVC,EAAY,EAAGA,EAAYL,EAAYjF,SAAUsF,EAAW,CAI7D,GAHAC,EAAaN,EAAYK,GACzBE,EAAqB,wBAA0BF,EAAY,GAAK,KAE5DA,EAAY,EAAG,CACf,KAAIF,EAAWD,EAAOnF,QAAoC,UAA1BmF,EAAOC,GAAU5N,MAG5C,CACD6N,EAAeG,EAAqB,iBACpC,QAJEJ,EAQV,KAAIA,EAAWD,EAAOnF,QAAoC,WAA1BmF,EAAOC,GAAU5N,MAoB5C,CACD6N,EAAeG,EAAqB,oBACpC,MApBA,GADAC,EAAaN,EAAOC,GAAUxQ,MAC1ByC,EAAQuO,SAASL,GACjBL,EAAQjF,KAAKwF,OAEZ,KAAIpO,EAAQwO,UAAUN,GAWvB,MAAM,IAAI7I,MAAM,0BAA4B6I,EAAW/N,MATvD,GADAkO,EAAeI,WAAWL,GACtBM,MAAML,GAAe,CACrBL,EAAeG,EAAqB,0BAA6BC,EAAa,IAC9E,MAGAP,EAAQjF,KAAKyF,KAMnBN,EAOV,OAAMF,EAAQlF,SAAWiF,EAAYjF,OAAgB,CAAC,EAAa,GAC5D,CAAC,EAAckF,GAC1B,KAAK,EACD,OAAMA,EAAQlF,OAASiF,EAAYjF,OAC5B,CAAC,EAAaxM,KAAK4N,SAAS4B,MAAM,MAAQqC,EAAeA,EAAe,KAAO,IAAM,sBADzC,CAAC,EAAa,GAErE,KAAK,EAED,OADAnN,EAAGoH,OACI,CAAC,EAAa,GACzB,KAAK,EAGL,MAAM,IAAI5C,MAAM,8BAAgCuI,EAAYjF,OAAS,SAAWkF,EAAQlF,QACxF,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EAAG,MAAO,CAAC,WAKhCmB,EAAQ7M,UAAUqR,SAAW,SAAUzC,GACnC1P,KAAKmO,WAAW8B,MAAMP,EAAK8C,QAE3B,IADA,IAAIb,EAAS,KACJ,CACL,IAAIxB,EAAQnQ,KAAKmO,WAAWpD,OAC5B,IAAKoF,EACD,MAEe,eAAfA,EAAMnM,MACN2N,EAAOlF,KAAK0D,GAGpB,OAAOwB,GAEXhE,EAAQ7M,UAAU2R,cAAgB,SAAUrG,GAKxC,IAJiBxL,EAAQoM,oBAAoB0F,MAAK,SAAUhO,GAExD,OADWA,EAAG4I,OACElB,KAGhB,MAAM,IAAIlD,MAAM,4BAA8BkD,GAElDpM,KAAKyO,kBAAoBrC,GAE7BnM,OAAOO,eAAemN,EAAQ7M,UAAW,0BAA2B,CAChEJ,IAAK,WACD,IAAI6I,EAAQvJ,KACZ,OAAOY,EAAQoM,oBAAoB0F,MAAK,SAAUhO,GAE9C,OADWA,EAAG4I,OACE/D,EAAMkF,sBAG9BhO,YAAY,EACZkS,cAAc,IAEXhF,EApUkB,GAsU7B/M,EAAQiB,QAAU8L,G,iCClalB,IAAI1M,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQgS,cAAW,EACnB,IAKIA,EALA3F,EAAQhM,EAAgBW,EAAQ,OAMpC,SAAWgR,GACPA,EAAQ,IAAU,MAClBA,EAAQ,GAAS,KACjBA,EAAQ,KAAW,OACnBA,EAAQ,KAAW,OACnBA,EAAQ,MAAY,QACpBA,EAAQ,MAAY,QACpBA,EAAQ,KAAW,OACnBA,EAAQ,QAAc,UACtBA,EAAQ,IAAU,MAClBA,EAAQ,OAAa,SACrBA,EAAQ,OAAa,SACrBA,EAAQ,OAAa,SACrBA,EAAQ,OAAa,SACrBA,EAAQ,OAAa,SACrBA,EAAQ,IAAU,MAClBA,EAAQ,GAAS,KACjBA,EAAQ,OAAa,SACrBA,EAAQ,KAAW,OACnBA,EAAQ,OAAa,SACrBA,EAAQ,IAAU,MAClBA,EAAQ,KAAW,OACnBA,EAAQ,SAAe,WACvBA,EAAQ,IAAU,MAClBA,EAAQ,MAAY,QACpBA,EAAQ,KAAW,OACnBA,EAAQ,GAAS,KACjBA,EAAQ,GAAS,KACjBA,EAAQ,MAAY,QACpBA,EAAQ,QAAc,UACtBA,EAAQ,IAAU,MAClBA,EAAQ,KAAW,OACnBA,EAAQ,OAAa,SACrBA,EAAQ,KAAW,OACnBA,EAAQ,KAAW,OACnBA,EAAQ,IAAU,MAClBA,EAAQ,KAAW,OACnBA,EAAQ,IAAU,MAClBA,EAAQ,GAAS,KACjBA,EAAQ,MAAY,QACpBA,EAAQ,KAAW,OACnBA,EAAQ,IAAU,MAClBA,EAAQ,QAAc,UACtBA,EAAQ,OAAa,SACrBA,EAAQ,IAAU,MAClBA,EAAQ,OAAa,SACrBA,EAAQ,OAAa,SACrBA,EAAQ,OAAa,SACrBA,EAAQ,OAAa,SACrBA,EAAQ,KAAW,OACnBA,EAAQ,KAAW,OACnBA,EAAQ,OAAa,SACrBA,EAAQ,IAAU,MAClBA,EAAQ,OAAa,SACrBA,EAAQ,KAAW,OACnBA,EAAQ,KAAW,OACnBA,EAAQ,GAAS,KACjBA,EAAQ,KAAW,OACnBA,EAAQ,MAAY,QACpBA,EAAQ,MAAY,QACpBA,EAAQ,KAAW,OACnBA,EAAQ,KAAW,OACnBA,EAAQ,MAAY,QA9DxB,CA+DGA,EAAWhS,EAAQgS,WAAahS,EAAQgS,SAAW,KAEtD,IAAIC,EAAW5F,EAAMpL,QAAQiR,OAAO,CAChCC,KAAM,CACF3E,WAAY,CACRH,MAAO,MACPjK,KAAM,SAAUsK,GAAQ,OAAQA,EAAK/J,SAAS,MAAQ,UAAY,IAClE2J,YAAY,GAEhB8E,QAAS,CACL/E,MAAO,IACPxB,KAAM,WAEVwG,WAAY,CACRhF,MAAO,wCACPjK,KAmHZ,SAAiCwF,GAC7B,IAAI0J,EAAsBjG,EAAMpL,QAAQsR,SAAS3J,GACjD,OAAO,SAAU8E,GAAQ,OAAO4E,EAAoB5E,EAAK8E,gBArH3CC,CAAwBT,IAElCU,eAAgB,CACZrF,MAAO,UACP7M,MAAO,SAAUkN,GAAQ,OAAOA,EAAKC,OAAO,EAAGD,EAAK9B,OAAS,KAEjE+G,gBAAiB,mBACjBC,YAAa,CACTvF,MAAO,qBACPjK,KAAM,WAAc,MAAO,mBAC3B5C,MAAO,SAAUkN,GAAQ,MAAO,GAAKmF,SAASnF,EAAKC,OAAO,GAAI,MAElEmF,YAAa,CACTzF,MAAO,iBACPjK,KAAM,WAAc,MAAO,mBAC3B5C,MAAO,SAAUkN,GAAQ,MAAO,GAAKmF,SAASnF,EAAKL,MAAM,UAAU,GAAI,KAE3E0F,MAAO,IACPzC,UAAW,IACX1C,MAAO,IACPoF,IAAK,IACLC,OAAQ,IACRC,OAAQ,IACRC,IAAK,IACL9O,IAAK,IACL+O,IAAK,IACLC,IAAK,IACLC,IAAK,IACLC,OAAQ,KAERC,GAAI,IACJC,GAAI,KACJC,IAAK,KACLC,IAAK,KACLC,GAAI,IACJC,GAAI,KAERC,QAAS,CACL1B,QAAS,CACL/E,MAAO,SACP1B,IAAK,GAEToI,QAAS,CACL1G,MAAO,KACP1B,IAAK,EACL2B,YAAY,KAGrB,QACC0G,EAAyB,CAAC,aAAc,UAAW,OAsEvD,IAAIC,EAAQ,IA5De,WACvB,SAASC,EAAMjC,GACX7S,KAAK6S,SAAWA,EAChB7S,KAAK+U,eAAYxU,EACjBP,KAAKgV,wBAAyB,EAC9BhV,KAAKiV,WAAa,GAgDtB,OA9CAH,EAAMhU,UAAUiK,KAAO,WACnB,GAAI/K,KAAKiV,WAAWzI,OAAS,EACzB,OAAOxM,KAAKiV,WAAW1I,MAE3B,IAAI4D,EACJ,IACIA,EAAQnQ,KAAK6S,SAAS9H,UAElB/K,KAAK+U,UAAY5E,EACjBA,EAAM+E,mBAAqBlV,KAAKgV,uBACb,YAAf7E,EAAMnM,KACNhE,KAAKgV,wBAAyB,EAG9BhV,KAAKgV,wBAAyB,EAEf,QAAf7E,EAAMnM,MACNhE,KAAK6S,SAASsC,UAAU,kBAG3BhF,GACLA,EAAMnM,MACN4Q,EAAuBrQ,SAAS4L,EAAMnM,OAC1C,OAAOmM,GAEX2E,EAAMhU,UAAUsU,KAAO,WACnB,IAAIjF,EAAQnQ,KAAK+K,OAEjB,OADA/K,KAAKiV,WAAWxI,KAAK0D,GACdA,GAEX2E,EAAMhU,UAAUuU,KAAO,WACnB,OAAOrV,KAAK6S,SAASwC,QAEzBP,EAAMhU,UAAUmP,MAAQ,SAAUqF,EAAOC,GAKrC,OAJAvV,KAAK6S,SAAS5C,MAAMqF,EAAOC,GAC3BvV,KAAKgV,wBAAyB,EAC9BhV,KAAK+U,eAAYxU,EACjBP,KAAKiV,WAAa,GACXjV,MAEX8U,EAAMhU,UAAU0U,YAAc,SAAUrF,EAAO1L,GAC3C,OAAOzE,KAAK6S,SAAS2C,YAAYrF,EAAO1L,IAE5CqQ,EAAMhU,UAAU2U,IAAM,SAAUC,GAC5B,OAAO1V,KAAK6S,SAAS4C,IAAIC,IAEtBZ,EArDgB,GA4Df,CAAUjC,GACtBjS,EAAQiB,QAAUgT,G,kCClNlB,YACA,IAAIc,EAAY3V,MAAQA,KAAK2V,UAAa,WAStC,OARAA,EAAW1V,OAAO2V,QAAU,SAASlK,GACjC,IAAK,IAAImK,EAAGhJ,EAAI,EAAGT,EAAI2C,UAAUvC,OAAQK,EAAIT,EAAGS,IAE5C,IAAK,IAAIhM,KADTgV,EAAI9G,UAAUlC,GACO5M,OAAOa,UAAUC,eAAeC,KAAK6U,EAAGhV,KACzD6K,EAAE7K,GAAKgV,EAAEhV,IAEjB,OAAO6K,IAEKL,MAAMrL,KAAM+O,YAE5B1E,EAAarK,MAAQA,KAAKqK,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUzJ,GAAS,IAAM0J,EAAKL,EAAUM,KAAK3J,IAAW,MAAO4J,GAAKJ,EAAOI,IACpF,SAASC,EAAS7J,GAAS,IAAM0J,EAAKL,EAAS,MAAUrJ,IAAW,MAAO4J,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAe9J,EAIa8J,EAAOC,KAAOR,EAAQO,EAAO9J,QAJ1CA,EAIyD8J,EAAO9J,MAJhDA,aAAiBoJ,EAAIpJ,EAAQ,IAAIoJ,GAAE,SAAUG,GAAWA,EAAQvJ,OAITgK,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAetL,MAAQA,KAAKsL,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOnM,OAAU2L,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAI/I,UAAU,mCAC3B,KAAOmJ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAE1K,KAAKyK,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAE1K,KAAKyK,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEtK,QACzBkL,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAEzK,MAAOkL,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,KAAkBb,GAAZA,EAAIE,EAAEG,MAAYS,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVF,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIS,KAAKH,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBD,EAAKf,EAAKvK,KAAKsJ,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElL,MAAOkL,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwBzDK,EAAiB1M,MAAQA,KAAK0M,eAAkB,SAAUC,EAAIC,GAC9D,IAAK,IAAIC,EAAI,EAAGC,EAAKF,EAAKJ,OAAQO,EAAIJ,EAAGH,OAAQK,EAAIC,EAAID,IAAKE,IAC1DJ,EAAGI,GAAKH,EAAKC,GACjB,OAAOF,GAEP1L,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQsO,cAAgBtO,EAAQwO,aAAexO,EAAQuO,iBAAc,EACrE,IAAI2G,EAAe7U,EAAgBW,EAAQ,MACvCwL,EAAuBnM,EAAgBW,EAAQ,MAC/CmU,EAAiBnU,EAAQ,IACzBiC,EAAUjC,EAAQ,IAi5BtB,SAASoU,EAASlS,EAAMmS,GACpB,OAAOA,EAAmBzM,KAAI,SAAU0M,GACpC,OAAQP,EAASA,EAAS,GAAI7R,GAAO,CAAEoS,eAAgBA,OAj5B/DtV,EAAQuO,YAAczC,EAAcA,EAAc,CAC9C,CACIiC,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAK2F,IAAIjK,YAK/C,CACIuC,KAAM,MACNuH,eAAgB,CAACrS,EAAQyS,cACzBF,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUuG,GACX,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,GAAiB,IAAbmR,EAAErJ,OACF,MAAM,IAAItD,MAAM,sCAIpB,MAAO,CAAC,EAAc4M,EAAajU,QAAQ2U,SAASX,EAAE,GAAI,SAAS,YAKnF,CACIlH,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAK+F,KAAKrK,YAKhD,CACIuC,KAAM,OACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAG/B,MAAO,CAAC,EAAcoR,EAAajU,QAAQ6U,SAASC,EAAO/J,KAAK,CAACR,IAAK,kBAKtF,CACIuC,KAAM,OACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc0H,WAKtC,CACIuC,KAAM,OACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc0I,EAAqBvL,QAAQuK,YAKnE,CACIuC,KAAM,OACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc0I,EAAqBvL,QAAQuK,YAKnE,CACIuC,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAKkG,IAAIxK,YAK/C,CACIuC,KAAM,OACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQgT,aACxBvH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc0H,WAKtC,CACIuC,KAAM,SACNuH,eAAgB,GAChBE,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAU5K,GACX,IAAIkJ,EAAWlJ,EAAGkJ,SAClB,OAAOvD,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU2E,GAC/B,OAAQA,EAAGkH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa+B,EAASkJ,qBACtC,KAAK,EAAG,MAAO,CAAC,EAAenS,EAAGmH,OAAQL,EAAI,YAMlE,CACIkD,KAAM,QACNuH,eAAgB,GAChBE,eAAgBvS,EAAQyS,aACxBhH,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI+W,EACJ,OAAOzL,EAAYtL,MAAM,SAAU0E,GAE/B,MAAO,CAAC,EAAc,EADtBqS,EAAM,IAAIC,MACiBC,WAAa,EAAGF,EAAIG,UAAWH,EAAII,eACrD3N,KAAI,SAAU3I,GAAK,OAAOA,EAAEuW,WAAWxG,SAAS,EAAG,QACnDG,KAAK,cAK9B,CACIpC,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAK2G,IAAIjL,YAK/C,CACIuC,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAK4G,KAAKlL,GAAKsE,KAAKC,MAAMD,KAAK2F,IAAIjK,aAKzE,CACIuC,KAAM,OACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc0H,EAAEgL,SAAS,IAAIG,uBAKrD,CACI5I,KAAM,SACNuH,eAAgB,GAChBE,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAU5K,GACX,IAAIkJ,EAAWlJ,EAAGkJ,SAClB,OAAOvD,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIwX,EACJ,OAAOlM,EAAYtL,MAAM,SAAU2E,GAC/B,OAAQA,EAAGkH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa+B,EAAS6J,WACtC,KAAK,EAED,MAAO,CAAC,EAAoB,QAD5BD,EAAI7S,EAAGmH,cACmC,IAAN0L,EAAeA,EAAI,aAM/E,CACI7I,KAAM,SACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlD,EAAG1H,GACd,IAAIkJ,EAAWlJ,EAAGkJ,SAClB,OAAOvD,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIkL,EAAQsM,EACZ,OAAOlM,EAAYtL,MAAM,SAAU2E,GAC/B,OAAQA,EAAGkH,OACP,KAAK,EACDX,EAAS,GACTvG,EAAGkH,MAAQ,EACf,KAAK,EACD,OAAMX,EAAOsB,OAASJ,IAAMwB,EAASP,oBAC9B,CAAC,EAAaO,EAAS6J,WADoC,CAAC,EAAa,GAEpF,KAAK,EAKD,OAJAD,EAAI7S,EAAGmH,SAEHZ,EAAOuB,KAAK+K,GAET,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAActM,EAAO6F,KAAK,cAM9D,CACIpC,KAAM,QACNuH,eAAgB,CAACrS,EAAQyS,aAAczS,EAAQyS,cAC/CF,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUoI,EAAUC,GACrB,OAAOtN,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgT,EAAS5G,QAAQ6G,GAAU,WAKjE,CACIhJ,KAAM,QACNuH,eAAgB,CAACrS,EAAQ0S,WAAY1S,EAAQyS,aAAczS,EAAQyS,cACnEF,eAAgBvS,EAAQ+T,cACxBtI,IAAK,SAAUuI,EAAOH,EAAUC,GAC5B,OAAOtN,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgT,EAAS5G,QAAQ6G,EAAQE,EAAQ,GAAK,WAK5E,CACIlJ,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAKC,MAAMvE,YAKjD,CACIuC,KAAM,SACNuH,eAAgB,CAACrS,EAAQiU,UAAUjU,EAAQsS,aAAc,KACzDC,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUyI,GACX,OAAO1N,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcqT,EAAM9N,SAAS+N,eAAe,GAAG,YAKvE,CACIrJ,KAAM,SACNuH,eAAgB,CAACrS,EAAQiU,UAAUjU,EAAQsS,aAAc,IAAKtS,EAAQ0S,YACtEH,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUyI,EAAOE,GAClB,OAAO5N,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,GAAIuT,EAAe,GACfA,EAAeF,EAAM9N,SAAS+N,eAAexL,OAC7C,MAAM,IAAItD,MAAM,4BAA8B+O,GAElD,MAAO,CAAC,EAAcF,EAAM9N,SAAS+N,eAAeC,EAAe,GAAG,YAKtF,CACItJ,KAAM,SACNuH,eAAgB,CAACrS,EAAQyS,cACzBF,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUuG,GACX,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcmR,EAAEzC,uBAKxC,CACIzE,KAAM,QACNuH,eAAgB,CAACrS,EAAQyS,aAAczS,EAAQ0S,YAC/CH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUuG,EAAGzJ,GACd,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcmR,EAAEtH,OAAO,EAAGnC,YAKlD,CACIuC,KAAM,MACNuH,eAAgB,CAACrS,EAAQyS,cACzBF,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUuG,GACX,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcmR,EAAErJ,gBAKxC,CACImC,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAKwH,IAAI9L,YAK/C,CACIuC,KAAM,SACNuH,eAAgB,CAACrS,EAAQyS,cACzBF,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUuG,GACX,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcmR,EAAEsC,qBAKxC,CACIxJ,KAAM,OACNuH,eAAgB,CAACrS,EAAQyS,aAAczS,EAAQ0S,WAAY1S,EAAQ0S,YACnEH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUuG,EAAGuC,EAAU5L,GACxB,OAAOnC,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcmR,EAAEtH,OAAO6J,EAAW,EAAG5L,YAK7D,CACImC,KAAM,OACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc0H,EAAEgL,SAAS,YAKjD,CACIzI,KAAM,OACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQ0S,WACxBjH,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAE/B,MAAO,CAAC,EAAc,WAKtC,CACIiK,KAAM,MACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAU1D,EAAGlH,GACd,IAAIkJ,EAAWlJ,EAAGkJ,SAClB,OAAOvD,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU2E,GAC/B,OAAQA,EAAGkH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa+B,EAASkJ,qBACtC,KAAK,EAAG,MAAO,CAAC,EAAenS,EAAGmH,OAAQuM,EAAI,YAMlE,CACI1J,KAAM,SACNuH,eAAgB,CAACrS,EAAQyS,aAAczS,EAAQ0S,YAC/CH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUuG,EAAGzJ,GACd,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcmR,EAAEtH,OAAOmC,KAAK4H,IAAI,EAAGzC,EAAErJ,OAASJ,cAKvE4J,EAAS,CACRrH,KAAM,MACNyH,eAAgBvS,EAAQsS,aACxB7G,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAK6H,kBAIxC,CAAC,GAAI,CAAC1U,EAAQ0S,eAAgB,CAC7B,CACI5H,KAAM,SACNuH,eAAgB,CAACrS,EAAQyS,cACzBF,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUuG,EAAGnR,GACHA,EAAGmK,KACd,OAAOxE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU2E,GAC/B,MAAO,CAAC,EAAckR,EAAE2C,mBAKxC,CACI7J,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAK4G,KAAKlL,YAKhD,CACIuC,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAK+H,IAAIrM,YAK/C,CACIuC,KAAM,MACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc,IAAI0M,OAAOhF,YAKjD,CACIuC,KAAM,SACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc,IAAI0M,OAAOhF,YAKjD,CACIuC,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAKgI,KAAKtM,YAKhD,CACIuC,KAAM,OACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,GAAoB0H,GAAK,EAAI,IAAM,IAAMA,WAKjE,CACIuC,KAAM,UACNuH,eAAgB,CAACrS,EAAQ0S,WAAY1S,EAAQ0S,YAC7CH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlP,EAAGgM,GACd,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcoR,EAAajU,QAAQ6U,SAASC,EAAO/J,KAAK,CAACR,IAAK,SAASgF,OAAOhR,YAKtG,CACIuO,KAAM,UACNuH,eAAgB,CAACrS,EAAQ0S,WAAY1S,EAAQyS,cAC7CF,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUlP,EAAGyV,GACd,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,GAAiB,IAAbmR,EAAErJ,OACF,MAAM,IAAItD,MAAM,oCAEpB,MAAO,CAAC,EAAc2M,EAAE,GAAGzE,OAAOhR,YAKlD,CACIuO,KAAM,MACNuH,eAAgB,CAACrS,EAAQ0S,YACzBH,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUqJ,EAAKjU,GAChB,IAAIkJ,EAAWlJ,EAAGkJ,SAClB,OAAOvD,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI2E,EAAI0T,EAAG5M,EAAGgC,EACd,OAAOnC,EAAYtL,MAAM,SAAU4Y,GAC/B,OAAQA,EAAG/M,OACP,KAAK,EAAG,MAAO,CAAC,EAAa+B,EAASkJ,qBACtC,KAAK,EAED,OADAnS,EAAKiU,EAAG9M,OAAQuM,EAAI1T,EAAG0T,EAAG5M,EAAI9G,EAAG8G,EAC1B,CAAC,EAAamC,EAASiL,iBAClC,KAAK,EAGD,OAFApL,EAAQmL,EAAG9M,OAAQ2B,KACnBkL,GAAOjI,KAAK4H,IAAI,EAAGK,GAAO,GAAKlL,EACxB,CAAC,EAAaG,EAASkL,aAAaH,EAAKN,GAAKM,EAAMlN,EAAIA,EAAI,IACvE,KAAK,EAED,OADAmN,EAAG9M,OACI,CAAC,EAAc,aAM9C,CACI6C,KAAM,MACNuH,eAAgB,CAACrS,EAAQsS,cACzBC,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUlD,GACX,OAAO/B,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcgM,KAAKqI,IAAI3M,YAK/C,CACIuC,KAAM,QACNuH,eAAgB,GAChBE,eAAgBvS,EAAQyS,aACxBhH,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI+W,EACJ,OAAOzL,EAAYtL,MAAM,SAAU0E,GAE/B,MAAO,CAAC,EAAc,EADtBqS,EAAM,IAAIC,MACiBgC,WAAYjC,EAAIkC,aAAclC,EAAImC,cACpD1P,KAAI,SAAU3I,GAAK,OAAOA,EAAEuW,WAAWxG,SAAS,EAAG,QACnDG,KAAK,cAK9B,CACIpC,KAAM,QACNuH,eAAgB,GAChBE,eAAgBvS,EAAQ0S,WACxBjH,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI+W,EAAKoC,EACT,OAAO7N,EAAYtL,MAAM,SAAU0E,GAK/B,OAJAqS,EAAM,IAAIC,MACVmC,EAAW,IAAInC,KAAKD,IACXqC,SAAS,EAAG,EAAG,EAAG,GAEpB,CAAC,GADErC,EAAIsC,UAAYF,EAASE,WAAa,aAMhE,CACI1K,KAAM,SACNuH,eAAgB,CAACrS,EAAQiU,UAAUjU,EAAQsS,aAAc,KACzDC,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUyI,GACX,OAAO1N,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcqT,EAAM9N,SAAS+N,eAAe,GAAG,YAKvE,CACIrJ,KAAM,SACNuH,eAAgB,CAACrS,EAAQiU,UAAUjU,EAAQsS,aAAc,IAAKtS,EAAQ0S,YACtEH,eAAgBvS,EAAQ0S,WACxBjH,IAAK,SAAUyI,EAAOE,GAClB,OAAO5N,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,GAAIuT,EAAe,GACfA,EAAeF,EAAM9N,SAAS+N,eAAexL,OAC7C,MAAM,IAAItD,MAAM,4BAA8B+O,GAElD,MAAO,CAAC,EAAcF,EAAM9N,SAAS+N,eAAeC,EAAe,GAAG,YAKtF,CACItJ,KAAM,SACNuH,eAAgB,CAACrS,EAAQyS,cACzBF,eAAgBvS,EAAQyS,aACxBhH,IAAK,SAAUuG,GACX,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAcmR,EAAE0B,uBAKxC,CACI5I,KAAM,MACNuH,eAAgB,CAACrS,EAAQyS,cACzBF,eAAgBvS,EAAQsS,aACxB7G,IAAK,SAAUuG,GACX,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIqM,EACJ,OAAOf,EAAYtL,MAAM,SAAU0E,GAE/B,OADA2H,EAAIiG,WAAWuD,GACR,CAAC,EAActD,MAAMlG,GAAK,EAAIA,aAOzDzL,EAAQwO,aAAe1C,EAAcA,EAAcA,EAAcA,EAAcA,EAAcA,EAAcA,EAAcA,EAAcA,EAAcA,EAAc,CAC/J,CACIiC,KAAM,OACNuH,eAAgB,GAChB5G,IAAK,WAED,IADA,IAAIT,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,GAAMC,UAAUD,GAEzB,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WAEnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAED,MAAO,CAAC,EADGgD,EAAKtC,MAAMqB,SACQ0L,QAClC,KAAK,EAED,OADA5U,EAAGoH,OACI,CAAC,aAMjCkK,EAAS,CACRrH,KAAM,MACNW,IAAK,WAED,IADA,IAAIT,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,GAAMC,UAAUD,GAEzB,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WAEnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAED,MAAO,CAAC,EADGgD,EAAKtC,MAAMqB,SACQ2L,eAClC,KAAK,EAED,OADA7U,EAAGoH,OACI,CAAC,YAK7B,CAAC,GAAI,CAACjI,EAAQ0S,eAAgBP,EAAS,CACtCrH,KAAM,QACNW,IAAK,WAED,IADA,IAAIT,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,GAAMC,UAAUD,GAEzB,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI0E,EAAIkJ,EAAUyB,EAASmK,EAAcC,EAAIC,EAC7C,OAAOpO,EAAYtL,MAAM,SAAU2E,GAe/B,OAdAD,EAAKmK,EAAKtC,MAAOqB,EAAWlJ,EAAGkJ,SAAUyB,EAAU3K,EAAG2K,QACtDmK,EAAe,SAAUpN,GACrB,GAAIA,EAAI,GAAKA,GAAKiD,EAAQsK,wBAAwBjM,SAASlB,OACvD,MAAM,IAAItD,MAAM,kBAAoBkD,GAExC,OAAOiD,EAAQsK,wBAAwBjM,SAAStB,IAEpDqN,EAAK5K,EAAK,GAAI6K,EAAK7K,EAAK,GACpB+K,OAAOC,SAASJ,IAChB7L,EAASkM,WAAWN,EAAaC,IAEjCG,OAAOC,SAASH,IAChB9L,EAASmM,WAAWP,EAAaE,IAE9B,CAAC,WAIrB,CACC,CAAC7V,EAAQ0S,YACT,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,YAC7B,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,eAChDP,EAAS,CACVrH,KAAM,YACNW,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,WAIrB,CAAC,GAAI,CAACb,EAAQ0S,eAAgBP,EAAS,CACtCrH,KAAM,SACNW,IAAK,WAED,IADA,IAAIT,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,GAAMC,UAAUD,GAEzB,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI4N,EAAUoM,EAAKrB,EAAKsB,EAAQC,EAASC,EAAMC,EAC/C,OAAO9O,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAGD,OAFA+B,EAAWiB,EAAKtC,MAAMqB,SACtBoM,EAAMnL,EAAK,GAAI8J,EAAM9J,EAAK,GAAIoL,EAASpL,EAAK,GACtC+K,OAAOC,SAASG,IAAQJ,OAAOC,SAASlB,GACvC,CAAC,EAAa/K,EAASkL,aAAaH,EAAM,EAAGqB,EAAM,IADE,CAAC,EAAa,GAE9E,KAAK,EAED,OADAtV,EAAGoH,OACI,CAAC,EAAa,GACzB,KAAK,EACD,OAAM8N,OAAOC,SAASG,IAAQJ,OAAOC,SAASlB,GACvC,CAAC,EAAa/K,EAASkJ,qBAD8B,CAAC,EAAa,GAE9E,KAAK,EAID,OAHAoD,EAAUxV,EAAGoH,OACbqO,EAAOP,OAAOC,SAASlB,GAAOA,EAAM,EAAIuB,EAAQ7B,EAChD+B,EAAOR,OAAOC,SAASG,GAAOA,EAAM,EAAIE,EAAQzO,EAC1C0O,IAASD,EAAQ7B,GAAK+B,IAASF,EAAQzO,EAAW,CAAC,EAAa,GAC/D,CAAC,EAAamC,EAASkL,aAAaqB,EAAMC,IACrD,KAAK,EACD1V,EAAGoH,OACHpH,EAAGmH,MAAQ,EACf,KAAK,EACD,OAAK+N,OAAOC,SAASI,GACd,CAAC,EAAarM,EAAS2D,sBAAsB0I,IADf,CAAC,EAAa,GAEvD,KAAK,EACDvV,EAAGoH,OACHpH,EAAGmH,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,YAKjC,CACC,CAAChI,EAAQ0S,YACT,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,YAC7B,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,YACjD,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,YACrE,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,eACxF,CACD,CACI5H,KAAM,OACNuH,eAAgB,CAACrS,EAAQyS,cACzBhH,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,WAKxB,CACIiK,KAAM,OACNuH,eAAgB,CAACrS,EAAQ0S,WAAY1S,EAAQ0S,YAC7CjH,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,aAKxBsR,EAAS,CACTrH,KAAM,YACNW,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,WAIrB,CAAC,GAAI,CAACb,EAAQ0S,eAAgBP,EAAS,CACtCrH,KAAM,SACNW,IAAK,SAAUhC,GAEX,IADA,IAAIuB,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAE7B,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WAEnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAG/B,OAFUmK,EAAKtC,MAAM8C,QACboD,cAAcnF,GACf,CAAC,WAIrB,CACC,CAACzJ,EAAQ0S,YACT,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,YAC7B,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,YACjD,CAAC1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,WAAY1S,EAAQ0S,eACpEP,EAAS,CACVrH,KAAM,QACNW,IAAK,WAED,IADA,IAAIT,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,GAAMC,UAAUD,GAEzB,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI4N,EAAUyM,EAAYC,EAAaC,EAAO/C,EAC9C,OAAOlM,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EACD+B,EAAWiB,EAAKtC,MAAMqB,SACtByM,EAAaxL,EAAKrC,OAAS,EAAIqC,EAAK,GAAK,EACzCyL,GAAc,IAAItD,MAAOqC,UACzB3U,EAAGmH,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAa+B,EAAS6J,WACtC,KAAK,EACDD,EAAI9S,EAAGoH,OACPyO,GAAQ,IAAIvD,MAAOqC,UACnB3U,EAAGmH,MAAQ,EACf,KAAK,EACD,GAAU,OAAN2L,IACC6C,GAAc,GAAKE,EAAQD,EAA2B,IAAbD,KACzCzM,EAASP,oBAAqB,MAAO,CAAC,EAAa,GACxD3I,EAAGmH,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,YAKjC,CAAC,GAAI,CAAChI,EAAQ0S,eAAgBP,EAAS,CACtCrH,KAAM,eACNW,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,WAIrB,CAAC,GAAI,CAACb,EAAQ0S,WAAY1S,EAAQ0S,eAAgB,CACjD,CACI5H,KAAM,QACNuH,eAAgB,CAACrS,EAAQ0S,WAAY1S,EAAQ0S,YAC7CjH,IAAK,WACD,OAAOjF,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,aA2B5B9D,EAAQsO,cAfR,SAAuBsL,EAAO7L,EAAMC,EAAclK,GAC9C,IAAkC+V,QAAlB,IAAP/V,EAAgB,GAAKA,GAAuC+V,8BACjEC,EAAyB3E,EAAe4E,cAAcH,EAAO7L,GAC7DiM,EAAYF,EAAuBhI,MAAK,SAAUhO,GAClD,IAAIwR,EAAiBxR,EAAGwR,eACxB,OAAOA,EAAe1J,SAAWoC,EAAapC,QAC1C0J,EAAe2E,OAAM,SAAUC,EAAejO,GAC1C,OAAOhJ,EAAQkX,2BAA2BD,EAAelM,EAAa/B,KACjEhJ,EAAQmX,QAAQF,IAAkBjX,EAAQmX,QAAQpM,EAAa/B,UAGhF,OAAsB,OAAd+N,QAAoC,IAAdA,EAAuBA,EAAaH,GAAiCC,EAAuBlO,OAAS,EAC7HkO,EAAuB,GACvB,Q,2DC/9BVza,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IAUtDR,EAAQiB,QARR,SAAyBuK,GACrB,OAAIA,EAAIsE,KAAKC,MAAMvE,KAAO,GACK,EAApBsE,KAAKuK,MAAM7O,EAAI,GAGfsE,KAAKuK,MAAM7O,K,iCCP1B,IAAIlK,EAAalC,MAAQA,KAAKkC,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBlC,OAAOqC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIxB,KAAKwB,EAAOpC,OAAOa,UAAUC,eAAeC,KAAKqB,EAAGxB,KAAIuB,EAAEvB,GAAKwB,EAAExB,MAC3EuB,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAO3C,KAAK4C,YAAcR,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEtB,UAAkB,OAANuB,EAAapC,OAAOC,OAAOmC,IAAMM,EAAG7B,UAAYuB,EAAEvB,UAAW,IAAI6B,IAZ1C,GAezCgT,EAAY3V,MAAQA,KAAK2V,UAAa,WAStC,OARAA,EAAW1V,OAAO2V,QAAU,SAASlK,GACjC,IAAK,IAAImK,EAAGhJ,EAAI,EAAGT,EAAI2C,UAAUvC,OAAQK,EAAIT,EAAGS,IAE5C,IAAK,IAAIhM,KADTgV,EAAI9G,UAAUlC,GACO5M,OAAOa,UAAUC,eAAeC,KAAK6U,EAAGhV,KACzD6K,EAAE7K,GAAKgV,EAAEhV,IAEjB,OAAO6K,IAEKL,MAAMrL,KAAM+O,YAE5B1E,EAAarK,MAAQA,KAAKqK,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUzJ,GAAS,IAAM0J,EAAKL,EAAUM,KAAK3J,IAAW,MAAO4J,GAAKJ,EAAOI,IACpF,SAASC,EAAS7J,GAAS,IAAM0J,EAAKL,EAAS,MAAUrJ,IAAW,MAAO4J,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAe9J,EAIa8J,EAAOC,KAAOR,EAAQO,EAAO9J,QAJ1CA,EAIyD8J,EAAO9J,MAJhDA,aAAiBoJ,EAAIpJ,EAAQ,IAAIoJ,GAAE,SAAUG,GAAWA,EAAQvJ,OAITgK,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAetL,MAAQA,KAAKsL,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOnM,OAAU2L,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAI/I,UAAU,mCAC3B,KAAOmJ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAE1K,KAAKyK,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAE1K,KAAKyK,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEtK,QACzBkL,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAEzK,MAAOkL,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,KAAkBb,GAAZA,EAAIE,EAAEG,MAAYS,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVF,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIS,KAAKH,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBD,EAAKf,EAAKvK,KAAKsJ,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElL,MAAOkL,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwBzDpL,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQa,oBAAiB,EACzB,IAAIyZ,EAActZ,EAAQ,KACtBgC,EAAmB3C,EAAgBW,EAAQ,KAC3CmU,EAAiBnU,EAAQ,IACzBiC,EAAUjC,EAAQ,IAClBuL,EAAkBvL,EAAQ,IAC1BuZ,EAAela,EAAgBW,EAAQ,MACvCG,EAAYd,EAAgBW,EAAQ,MACpCH,EAAgC,SAAU+C,GAE1C,SAAS/C,EAAegD,EAASC,GAC7B,IAAIC,OAAY,IAAPD,EAAgB,GAAKA,EAAI0W,EAASzW,EAAGyW,OAAQC,EAAO1W,EAAG0W,KAChE,OAAO7W,EAAOxD,KAAKhB,KAAMyE,EAAS,CAC9BG,eAA2B,OAAXwW,QAA8B,IAAXA,OAAoB,EAASA,EAAOxW,eACvEE,KAAe,OAATuW,QAA0B,IAATA,OAAkB,EAASA,EAAKvW,KAAO,CAAE4K,KAAM2L,EAAKvW,IAAI,GAAI6T,IAAK0C,EAAKvW,IAAI,SAAOvE,KACtGP,KAEV,OARAkC,EAAUT,EAAgB+C,GAQnB/C,EATyB,CAUlCmC,EAAiB/B,SACnBjB,EAAQa,eAAiBA,EAEzB,IAAI6Z,EAA8B,SAAU9W,GAExC,SAAS8W,IACL,IAAI/R,EAAmB,OAAX/E,GAAmBA,EAAO6G,MAAMrL,KAAM+O,YAAc/O,KAEhE,OADAuJ,EAAMgS,gBAAiB,EAChBhS,EAEX,OANArH,EAAUoZ,EAAc9W,GAMjB8W,EAPuB,CAQhCpS,OAEE1H,EAA0B,WAC1B,SAASA,EAASoM,EAAUlJ,GACxB,IAAkC8W,QAAlB,IAAP9W,EAAgB,GAAKA,GAA8B8W,qBAC5Dxb,KAAK4N,SAAWA,EAEhB5N,KAAKyb,cAAgB,KAErBzb,KAAK0b,mBAAqB,GAE1B1b,KAAK2b,oBAAsB,GAE3B3b,KAAK4b,kBAAoB,GAEzB5b,KAAK6b,WAAa,CACdC,QAAS,EACTC,QAAS,GAEb/b,KAAKwb,qBACwB,OAAzBA,QAA0D,IAAzBA,EAAkCA,EAAuB5N,EAASoO,4BAqU3G,OAlUAxa,EAASV,UAAUmb,cAAgB,SAAUC,GACzC,OAAO7R,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIob,EAAQ1W,EAAIyX,EAAKC,EACrB,OAAO9Q,EAAYtL,MAAM,SAAU2E,GAC/B,OAAQA,EAAGkH,OACP,KAAK,EACD,MAA8B,kBAAjBqQ,EAAmC,CAAC,EAAa,GACvD,CAAC,EAAalc,KAAK4N,SAASyO,mBAAmBH,IAC1D,KAAK,EAED,OADAxX,EAAKC,EAAGmH,OACD,CAAC,EAAa,GACzB,KAAK,EACDpH,EAAKwX,EACLvX,EAAGkH,MAAQ,EACf,KAAK,EAOD,OANAuP,EAAS1W,EACT1E,KAAKyb,cAAgBL,EACrBpb,KAAKsc,sBACLtc,KAAK0b,mBAAqB,GAC1B1b,KAAKuc,UACLvc,KAAK4N,SAASP,qBAAsB,EAC7B,CAAC,EAAarN,KAAK4N,SAAS2D,qBAAoB,IAC3D,KAAK,EACD5M,EAAGmH,OACHqQ,EAAM,CACF9M,QAAS,IAAItN,EAAUF,QAAQ7B,KAAK4N,UACpC4O,YAAaxc,KAAKwc,YAAYC,KAAKzc,MACnC0c,KAAM1c,KAAK0c,KAAKD,KAAKzc,MACrBuc,QAASvc,KAAKuc,QAAQE,KAAKzc,MAC3B6O,KAAM,GACN8N,UAAW3c,KAAK4c,SAASxB,EAAOyB,aAAc,CAC1C9G,EAAe+G,QAAQC,IACvBhH,EAAe+G,QAAQnX,QAE3BqX,gBAAiB,GACjBC,WAAYjd,KAAK4c,SAASxB,EAAO8B,cAAe,CAC5CnH,EAAe+G,QAAQC,IACvBhH,EAAe+G,QAAQnX,QAE3BwX,SAAU,IAEdxY,EAAGkH,MAAQ,EACf,KAAK,EAED,OADAlH,EAAGoH,KAAKU,KAAK,CAAC,EAAG,EAAG,EAAG,KAChB,CAAC,EAAazM,KAAKod,aAAajB,EAAKf,EAAOiC,MAAOrd,KAAK2b,sBACnE,KAAK,EAED,OADAhX,EAAGmH,OACI,CAAC,EAAa,IACzB,KAAK,EAED,KADAsQ,EAAMzX,EAAGmH,QACDyP,eAIJ,MAAMa,EAEV,MAAO,CAAC,EAAa,IACzB,KAAK,EAOD,OANApc,KAAKyb,cAAgB,KACrBzb,KAAK2b,oBAAsB,GAC3B3b,KAAK4b,kBAAoB,GACzB5b,KAAK0b,mBAAqB,GAC1B1b,KAAKuc,UACLvc,KAAK4N,SAASP,qBAAsB,EAC7B,CAAC,EAAarN,KAAK4N,SAAS2D,qBAAoB,IAC3D,KAAK,EAED,OADA5M,EAAGmH,OACI,CAAC,GACZ,KAAK,GAAI,MAAO,CAAC,WAMjCtK,EAASV,UAAUwc,cAAgB,WAC/Btd,KAAK4N,SAASP,qBAAsB,GAExC7L,EAASV,UAAU0b,YAAc,SAAUe,EAAS5O,GAEhD,IADA,IAAI6O,EAAU,GACL1O,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpC0O,EAAQ1O,EAAK,GAAKC,UAAUD,GAEhC,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI8D,EAAM+K,EAAMhC,EAAGsP,EACnB,OAAO7Q,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAED,KADA/H,EAAOiS,EAAe0H,aAAazd,KAAKyb,cAAcjB,MAAO7L,IAEzD,MAAM,IAAIzF,MAAM,yBAA4ByF,EAAO,KAGvD,GAAI6O,EAAQhR,SAAW1I,EAAK4Z,aAAalR,OACrC,MAAM,IAAItD,MAAM,oCACXrF,EAAQ8Z,aAAa7Z,EAAKE,MAAQ,KAAQF,EAAK6K,KADpC,eAEG7K,EAAK4Z,aAAalR,OAAS,SAAWgR,EAAQhR,QAGrE,IADAqC,EAAO,GACFhC,EAAI,EAAGA,EAAI2Q,EAAQhR,SAAUK,EAC9BgC,EAAK/K,EAAK4Z,aAAa7Q,GAAG8B,MAAQ6O,EAAQ3Q,GAS9C,GANK7M,KAAK0b,mBAAmB5X,EAAK6K,QAC9B3O,KAAK0b,mBAAmB5X,EAAK6K,MAAQ3O,KAAK4c,SAAS9Y,EAAK+Y,aAAc,CAClE9G,EAAe+G,QAAQc,cAG/BzB,EAAMxG,EAASA,EAAS,GAAI4H,GAAU,CAAE1O,KAAMA,EAAM8N,UAAW3c,KAAK4c,SAAS9Y,EAAK+Y,aAAc,CAAC9G,EAAe+G,QAAQC,IAAKhH,EAAe+G,QAAQnX,QAASqX,gBAAiBhd,KAAK0b,mBAAmB5X,EAAK6K,MAAOwO,SAAU,MACvNnd,KAAK4b,kBAAkB9X,EAAK6K,MAC7B,MAAM,IAAIzF,MAAM,kCAAqCpF,EAAK6K,KAAO,KAErE,MAAO,CAAC,EAAa3O,KAAKod,aAAajB,EAAKrY,EAAKuZ,MAAOrd,KAAK4b,kBAAkB9X,EAAK6K,QACxF,KAAK,EAGD,OAFAjK,EAAGoH,OAECjI,EAAQE,YAAYD,EAAKE,MAClB,CAAC,EAAcmY,EAAIQ,UAAU7Y,EAAK6K,OAEtC,CAAC,WAK5BnN,EAASV,UAAU8b,SAAW,SAAUiB,EAAgBC,GAEpD,IADA,IAAIC,EAAY,GACPjP,EAAK,EAAGkP,EAAmBH,EAAgB/O,EAAKkP,EAAiBxR,OAAQsC,IAAM,CACpF,IAAImP,EAASD,EAAiBlP,GACzBgP,EAAgBvZ,SAAS0Z,EAAOC,WAGrCH,EAAUE,EAAOtP,MAAQwM,EAAatZ,QAAQoc,EAAOhU,WAEzD,OAAO8T,GAEXvc,EAASV,UAAUsc,aAAe,SAAUjB,EAAKkB,EAAOc,GACpD,OAAO9T,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIoe,EAAatC,EAASuC,EAASC,EACnC,OAAOhT,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EACDuS,EAAc,GACdtC,EAAU,EACVuC,EAAU,WACN,IAAIhD,EAAMkD,EAAWC,EAAWC,EAAKC,EAAWC,EAChD,OAAOrT,EAAYtL,MAAM,SAAU2E,GAC/B,OAAQA,EAAGkH,OACP,KAAK,EACD,GAAIyS,EAAO1Q,SAASP,oBAEhB,MADAiR,EAAO1Q,SAASP,qBAAsB,EAChC,IAAIiO,EAId,OAFAD,EAAOgC,EAAMvB,GACbyC,EAAY,CAAEnD,OAAQkD,EAAO7C,cAAeJ,KAAMA,GAC5CiD,EAAO9C,qBAAuB,EAC7B,CAAC,EAAa8C,EAAO1Q,SAASgR,MAAMN,EAAO9C,uBADH,CAAC,EAAa,GAEjE,KAAK,EACD7W,EAAGmH,OACHnH,EAAGkH,MAAQ,EACf,KAAK,EAED,GADA2S,OAAY,IACN,QAASnD,GAAO,MAAO,CAAC,EAAa,GAC3C1W,EAAGkH,MAAQ,EACf,KAAK,EAED,OADAlH,EAAGoH,KAAKU,KAAK,CAAC,EAAG,EAAJ,CAAS,IACf,CAAC,EAAa4O,EAAK/L,IAAI6M,IAClC,KAAK,EAED,OADAqC,EAAY7Z,EAAGmH,OACR,CAAC,EAAa,GACzB,KAAK,EAED,MADA2S,EAAM9Z,EAAGmH,QACDyP,eACEkD,EAGA,IAAIhd,EAAegd,EAAIha,QAAS8Z,GAG9C,KAAK,EACD,IAAKC,EAED,QADE1C,EACK,CAAC,EAAc,YAQ1B,OANA4C,EAAY,SAAU7S,GAElB,QAAgBtL,KADhBub,EAAUqC,EAActS,IAEpB,MAAM,IAAIpK,EAAe,qBAAwBoK,EAAQ,IAAM0S,IAG/DC,EAAUxa,MACd,KAAKmJ,EAAgB0R,uBAAuB9X,MACxCqX,EAAY3R,KAAK,CACbqS,YAAahD,EAAU,IAE3B4C,EAAUF,EAAUO,WACpB,MACJ,KAAK5R,EAAgB0R,uBAAuBhZ,KACxC6Y,EAAUF,EAAUO,WACpB,MACJ,KAAK5R,EAAgB0R,uBAAuB5X,OACxC,GAA2B,IAAvBmX,EAAY5R,OACZ,MAAM,IAAI/K,EAAe,6BAA8B8c,GAE3DI,EAAaP,EAAY7R,MACrBiS,EAAUO,UACVL,EAAUF,EAAUO,WAGpBjD,EAAU6C,EAAWG,YAEzB,MACJ,KAAK3R,EAAgB0R,uBAAuBtX,IACxC,MAAM,IAAI+T,EACd,KAAKnO,EAAgB0R,uBAAuBxX,UACxCyU,EAAUuB,EAAM7Q,OAChB,MACJ,QACI,MAAM,IAAI/K,EAAe,qCAAuC0H,KAAKC,UAAUoV,GAAYD,GAEnG,MAAO,CAAC,QAIxBD,EAASte,KACT0E,EAAGmH,MAAQ,EACf,KAAK,EACD,OAAMiQ,EAAUuB,EAAM7Q,OACf,CAAC,EAAc6R,KADgB,CAAC,EAAa,GAExD,KAAK,EAED,OADA3Z,EAAGoH,OACI,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,WAKhCtK,EAASV,UAAU4b,KAAO,WAEtB,IADA,IAAIjL,EAAc,GACT3C,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpC2C,EAAY3C,GAAMC,UAAUD,GAEhC,OAAOzE,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI0R,EAAS7E,EAAGmS,EAChB,OAAO1T,EAAYtL,MAAM,SAAU0E,GAE/B,IADAgN,EAAU,GACL7E,EAAI,EAAGA,EAAI4E,EAAYjF,SAAUK,EAAG,CAErC,KADAmS,EAAWhf,KAAKif,mBAEZ,MAAM,IAAI/V,MAAM,2BAA6B2D,EAAI,IAErD,IACI6E,EAAQjF,KAAKyO,EAAYgE,YAAYF,EAAUvN,EAAY5E,KAE/D,MAAO7B,GAEH,MADAA,EAAEvG,QAAU,uBAAyBoI,EAAI,GAAK,KAAO7B,EAAEvG,QACjDuG,GAGd,MAAO,CAAC,EAAc0G,UAIlClQ,EAASV,UAAUme,gBAAkB,WAEjC,IADA,IAAI5B,EAAQrd,KAAKyb,cAAc4B,QACtB,CACL,GAAIrd,KAAK6b,WAAWC,SAAWuB,EAAM7Q,OACjC,OAAO,KAEX,IAAI6O,EAAOgC,EAAMrd,KAAK6b,WAAWC,SACjC,GAAM,SAAUT,EAAhB,CAIA,KAAIrb,KAAK6b,WAAWE,SAAWV,EAAK8D,KAAK3S,QAKzC,OAAO6O,EAAK8D,KAAKnf,KAAK6b,WAAWE,aAJ3B/b,KAAK6b,WAAWC,QAClB9b,KAAK6b,WAAWE,QAAU,QALxB/b,KAAK6b,WAAWC,UAW9Bta,EAASV,UAAUyb,QAAU,SAAUwC,GACnC,OAAO1U,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAI8b,EACApX,EAAIC,EACR,OAAO2G,EAAYtL,MAAM,SAAU4Y,GAC/B,GAAImG,EAAW,CAEX,QAAgBxe,KADhBub,EAAU9b,KAAK2b,oBAAoBoD,IAE/B,MAAM,IAAI7V,MAAM,qBAAwB6V,EAAY,KAExDra,EAAK,CAACoX,EAAS,GAAI9b,KAAK6b,WAAWC,QAAUpX,EAAG,GAAI1E,KAAK6b,WAAWE,QAAUrX,EAAG,QAGjFC,EAAK,CAAC,EAAG,GAAI3E,KAAK6b,WAAWC,QAAUnX,EAAG,GAAI3E,KAAK6b,WAAWE,QAAUpX,EAAG,GAE/E,MAAO,CAAC,UAIpBnD,EAASV,UAAUwb,oBAAsB,WACrCtc,KAAK2b,oBAAsB3b,KAAKof,mBAAmBpf,KAAKyb,cAAc4B,OACtE,IAAK,IAAIvO,EAAK,EAAGpK,EAAK1E,KAAKyb,cAAcjB,MAAO1L,EAAKpK,EAAG8H,OAAQsC,IAAM,CAClE,IAAInK,EAAKD,EAAGoK,GAAKuQ,EAAS1a,EAAGgK,KAAM0O,EAAQ1Y,EAAG0Y,MAC9Crd,KAAK4b,kBAAkByD,GAAUrf,KAAKof,mBAAmB/B,KAGjE7b,EAASV,UAAUse,mBAAqB,SAAU/B,GAC9C,IAAI9T,EAAQvJ,KACRme,EAAgB,GAYpB,OAXAd,EAAMiC,SAAQ,SAAUjE,EAAMkE,GAC1B,GAAI,UAAWlE,EAAM,CACjB,GAAIA,EAAKxP,SAASsS,EACd,MAAM,IAAI1c,EAAe,oBAAuB4Z,EAAKxP,MAAQ,IAAM,CAC/DuP,OAAQ7R,EAAMkS,cACdJ,KAAMA,IAGd8C,EAAc9C,EAAKxP,OAAS0T,MAG7BpB,GAEJ3c,EAvVmB,GAyV9BZ,EAAQiB,QAAUL,G,iCC1blB,IAAIP,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtD,IAAIyC,EAAUjC,EAAQ,IAClBuZ,EAAela,EAAgBW,EAAQ,MAEvCN,EAAyB,WACzB,SAASA,EAAQke,GAEbxf,KAAKyf,QAAU,GACfzf,KAAK0f,KAAKF,EAAcG,gBAAiBH,EAAcxH,gBAgE3D,OA7DA1W,EAAQR,UAAU4e,KAAO,SAAUC,EAAiB3H,GAChD,GAA8B,IAA1BA,EAAexL,OACf,MAAM,IAAItD,MAAM,+BAEpBlJ,KAAK4f,UAAY/b,EAAQiU,UAAU6H,EAAiB3H,GACpDhY,KAAKyf,QAAQjT,OAAS,EAEtB,IADA,IAAIqT,EAAyB,CAAC7f,KAAKyf,SAC1B5S,EAAI,EAAGA,EAAImL,EAAexL,SAAUK,EAAG,CAI5C,IAHA,IAAInI,EAAKsT,EAAenL,GAAIiT,EAASpb,EAAG,GACpCqb,EADiDrb,EAAG,GAC7Bob,EAAS,EAChCE,EAAsB,GACjBlR,EAAK,EAAGmR,EAA2BJ,EAAwB/Q,EAAKmR,EAAyBzT,OAAQsC,IAAM,CAC5G,IAAIoR,EAAiBD,EAAyBnR,GAC9C,GAAIjC,IAAMmL,EAAexL,OAAS,EAC9B,IAAK,IAAIO,EAAI,EAAGA,EAAIgT,IAAehT,EAC/BmT,EAAezT,KAAK0O,EAAatZ,QAAQ8d,SAI7C,IAAS5S,EAAI,EAAGA,EAAIgT,IAAehT,EAAG,CAClC,IAAIoT,EAAqB,IAAI3d,MAC7Bwd,EAAoBvT,KAAK0T,GACzBD,EAAezT,KAAK0T,IAIhCN,EAAyBG,IAIjC1e,EAAQR,UAAUsf,OAAS,SAAUnI,EAAcoI,GAC/C,IAAIrI,EAAiBhY,KAAK4f,UAAU5H,eACpC,IAAK4B,OAAOC,SAAS5B,IACjBA,EAAe,GACfA,GAAgBD,EAAexL,OAC/B,MAAM,IAAItD,MAAM,iEACyB8O,EAAexL,OAAS,GADjD,SAEFyL,GAElB,IAAIvT,EAAKsT,EAAeC,GAAe6H,EAASpb,EAAG,GAAI4b,EAAS5b,EAAG,GACnE,IAAKkV,OAAOC,SAASwG,IAAUA,EAAQP,GAAUO,EAAQC,EACrD,MAAM,IAAIpX,MAAM,qCAAuC+O,EAAe,GAAtD,6BACkB6H,EAAS,QAAUQ,EADrC,SAEFD,GAElB,OAAOA,EAAQP,GAEnB7f,OAAOO,eAAec,EAAQR,UAAW,SAAU,CAC/CJ,IAAK,WACD,OAAOV,KAAKyf,SAEhBhf,YAAY,EACZkS,cAAc,IAElB1S,OAAOO,eAAec,EAAQR,UAAW,WAAY,CACjDJ,IAAK,WACD,OAAOV,KAAK4f,WAEhBnf,YAAY,EACZkS,cAAc,IAEXrR,EApEkB,GAsE7BV,EAAQiB,QAAUP,G,iCC7ElB,IAAIqU,EAAY3V,MAAQA,KAAK2V,UAAa,WAStC,OARAA,EAAW1V,OAAO2V,QAAU,SAASlK,GACjC,IAAK,IAAImK,EAAGhJ,EAAI,EAAGT,EAAI2C,UAAUvC,OAAQK,EAAIT,EAAGS,IAE5C,IAAK,IAAIhM,KADTgV,EAAI9G,UAAUlC,GACO5M,OAAOa,UAAUC,eAAeC,KAAK6U,EAAGhV,KACzD6K,EAAE7K,GAAKgV,EAAEhV,IAEjB,OAAO6K,IAEKL,MAAMrL,KAAM+O,YAE5B9N,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtD,IAAIyC,EAAUjC,EAAQ,IAClBuZ,EAAela,EAAgBW,EAAQ,MAEvCP,EAAuB,WACvB,SAASA,EAAMkf,GAEXvgB,KAAKyf,QAAU,GACfzf,KAAK4f,UAAYjK,EAAS,GAAI4K,GAC9BvgB,KAAK0f,OAiCT,OA/BAre,EAAMP,UAAU4e,KAAO,WACnB,IAAK,IAAI5Q,EAAK,EAAGpK,EAAK1E,KAAK4f,UAAUY,WAAY1R,EAAKpK,EAAG8H,OAAQsC,IAAM,CACnE,IAAI2R,EAAY/b,EAAGoK,GACnB9O,KAAKyf,QAAQgB,EAAU9R,MAAQwM,EAAatZ,QAAQ4e,EAAUxW,YAGtE5I,EAAMP,UAAU4f,MAAQ,WAEpB,IADA,IAAIC,EAAW,IAAItf,EAAMrB,KAAK4f,WACrB9Q,EAAK,EAAGpK,EAAK1E,KAAK4f,UAAUY,WAAY1R,EAAKpK,EAAG8H,OAAQsC,IAAM,CACnE,IAAI2R,EAAY/b,EAAGoK,GACf1N,EAAQpB,KAAKyf,QAAQgB,EAAU9R,MACnCgS,EAASlB,QAAQgB,EAAU9R,MAAQ9K,EAAQ+c,MAAMH,EAAUxW,UACrD7I,EAAMsf,QACNtf,EAEV,OAAOuf,GAEX1gB,OAAOO,eAAea,EAAMP,UAAW,SAAU,CAC7CJ,IAAK,WACD,OAAOV,KAAKyf,SAEhBhf,YAAY,EACZkS,cAAc,IAElB1S,OAAOO,eAAea,EAAMP,UAAW,WAAY,CAC/CJ,IAAK,WACD,OAAOV,KAAK4f,WAEhBnf,YAAY,EACZkS,cAAc,IAEXtR,EAtCgB,GAwC3BT,EAAQiB,QAAUR,G,iCC1DlB,IAAIa,EAAalC,MAAQA,KAAKkC,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBlC,OAAOqC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIxB,KAAKwB,EAAOpC,OAAOa,UAAUC,eAAeC,KAAKqB,EAAGxB,KAAIuB,EAAEvB,GAAKwB,EAAExB,MAC3EuB,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAO3C,KAAK4C,YAAcR,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEtB,UAAkB,OAANuB,EAAapC,OAAOC,OAAOmC,IAAMM,EAAG7B,UAAYuB,EAAEvB,UAAW,IAAI6B,IAZ1C,GAezC0H,EAAarK,MAAQA,KAAKqK,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUzJ,GAAS,IAAM0J,EAAKL,EAAUM,KAAK3J,IAAW,MAAO4J,GAAKJ,EAAOI,IACpF,SAASC,EAAS7J,GAAS,IAAM0J,EAAKL,EAAS,MAAUrJ,IAAW,MAAO4J,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAe9J,EAIa8J,EAAOC,KAAOR,EAAQO,EAAO9J,QAJ1CA,EAIyD8J,EAAO9J,MAJhDA,aAAiBoJ,EAAIpJ,EAAQ,IAAIoJ,GAAE,SAAUG,GAAWA,EAAQvJ,OAITgK,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAetL,MAAQA,KAAKsL,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOnM,OAAU2L,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAI/I,UAAU,mCAC3B,KAAOmJ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAE1K,KAAKyK,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAE1K,KAAKyK,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEtK,QACzBkL,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAEzK,MAAOkL,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,KAAkBb,GAAZA,EAAIE,EAAEG,MAAYS,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVF,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIS,KAAKH,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBD,EAAKf,EAAKvK,KAAKsJ,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElL,MAAOkL,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwBzDpL,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQigB,gBAAkBjgB,EAAQkgB,qBAAkB,EACpD,IAAIC,EAAiB9f,EAAgBW,EAAQ,MACzCof,EAA2B/f,EAAgBW,EAAQ,MACnDE,EAAab,EAAgBW,EAAQ,MAErCkf,EAAiC,SAAUtc,GAE3C,SAASsc,EAAgBG,GACrB,IAAI1X,EAAQ/E,EAAOxD,KAAKhB,OAASA,KAKjC,OAJAuJ,EAAM0X,SAAWA,EAGjB1X,EAAMyS,4BAA8B,EAC7BzS,EA+MX,OAtNArH,EAAU4e,EAAiBtc,GAS3Bsc,EAAgBhgB,UAAUub,mBAAqB,SAAU6E,GACrD,OAAO7W,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIiO,EAAWkT,EACf,OAAO7V,EAAYtL,MAAM,SAAU0E,GAE/B,KADAuJ,EAAQiT,EAAKjT,MAAM,+BAEf,MAAM,IAAI/E,MAAM,qBAKpB,OAHK,IAAIkY,SAAS,SAAUnT,EAAM,GAElCoT,CADAF,EAAY,CAAEvgB,QAAS,KAEhB,CAAC,EAAcugB,EAAUvgB,gBAI5CkgB,EAAgBhgB,UAAU8d,MAAQ,SAAU0C,GACxC,OAAOjX,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIuhB,EACJ,OAAOjW,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EACD,MAAwB,qBAAX2V,QACqB,qBAAvBA,OAAOC,YAAqC,CAAC,EAAa,GAC9D,CAAC,EAAa,IAAI/W,SAAQ,SAAUC,GACnC,OAAO+W,WAAW/W,EAAS+F,KAAKuK,MAAMqG,EAAY,UAE9D,KAAK,EAED,OADA5c,EAAGoH,OACI,CAAC,EAAa,GACzB,KAAK,EAED,IADAyV,EAAKE,YAAY1K,MACiB,KAA1B0K,YAAY1K,MAAQwK,GAAaD,IACzC5c,EAAGmH,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,WAKhCiV,EAAgBhgB,UAAU0O,MAAQ,SAAUqG,GACxC,OAAOxL,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAE/B,OADA1E,KAAKihB,SAASU,MAAM9L,GACb,CAAC,UAIpBiL,EAAgBhgB,UAAUuQ,UAAY,WAClC,OAAOhH,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIsO,EAAMsT,EAAWC,EAAUpU,EAAMqU,EACjCvY,EAAQvJ,KACZ,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAGD,OAFAyC,EAAO,GACPsT,EAAY,EACL,CAAC,EAAa5hB,KAAK8W,qBAC9B,KAAK,EAED,OADA+K,EAAYnd,EAAGoH,OAAQuM,EAChB,CAAC,EAAarY,KAAK6Y,iBAC9B,KAAK,EAGD,OAFApL,EAAQ/I,EAAGoH,OAAQ2B,KACnBqU,EAAa,GACN,CAAC,EAAa,IAAIpX,SAAQ,SAAUC,GACnC,IAAIoX,EAAyBxY,EAAM0X,SAASe,QAAO,SAAU1M,GAAS,OAAOjL,EAAUd,OAAO,OAAQ,GAAQ,WAC1G,OAAO+B,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQ4Q,GACJ,IAAK,KACDtV,KAAKwP,MAAM,MACX7E,IACA,MACJ,IAAK,OACG2D,EAAK9B,OAAS,GAAKoV,EAAY,IAC/BtT,EAAK2T,SAASL,EAAW,GACzB5hB,KAAKwP,MAAMuR,EAAelf,QAAQqgB,kBAClCliB,KAAKwP,MAAMuR,EAAelf,QAAQsgB,oBAClCniB,KAAKwP,MAAMuR,EAAelf,QAAQugB,cAClCpiB,KAAKwP,MAAMlB,EAAK+T,MAAMT,GAAW7Q,KAAK,KACtC/Q,KAAKwP,MAAMuR,EAAelf,QAAQygB,wBAEtC,MACJ,IAAK,UACGV,EAAYtT,EAAK9B,SACjB8B,EAAK2T,OAAOL,EAAW,GACvB5hB,KAAKwP,MAAMuR,EAAelf,QAAQsgB,oBAClCniB,KAAKwP,MAAMuR,EAAelf,QAAQugB,cAClCpiB,KAAKwP,MAAMlB,EAAK+T,MAAMT,GAAW7Q,KAAK,KACtC/Q,KAAKwP,MAAMuR,EAAelf,QAAQygB,wBAEtC,MACJ,IAAK,SACGV,EAAYtT,EAAK9B,WACfoV,EACF5hB,KAAKwP,MAAM8F,IAEf,MACJ,IAAK,SACGsM,EAAY,MACVA,EACF5hB,KAAKwP,MAAM8F,IAEf,MACJ,IAAK,SACGsM,EAAYtT,EAAK9B,SACjBxM,KAAKwP,MAAMuR,EAAelf,QAAQ0gB,cAAcjU,EAAK9B,OAASoV,IAC9DA,EAAYtT,EAAK9B,QAErB,MACJ,IAAK,SACGoV,EAAY,IACZ5hB,KAAKwP,MAAMuR,EAAelf,QAAQqgB,eAAeN,IACjDA,EAAY,GAEhB,MACJ,QAEQtM,EAAMrH,MAAM,kBACZ4T,EAAWvT,EAAK9B,OAASiB,EAAO,GAEhCa,EAAK2T,OAAOL,IAAa,EAAGtM,GAC5BtV,KAAKwP,MAAM8F,GACXtV,KAAKwP,MAAMuR,EAAelf,QAAQsgB,oBAClCniB,KAAKwP,MAAMlB,EAAK+T,MAAMT,GAAW7Q,KAAK,KACtC/Q,KAAKwP,MAAMuR,EAAelf,QAAQygB,wBAGlCE,QAAQtK,IAAI5C,EACPlF,MAAM,IACN5G,KAAI,SAAUgO,GAAK,OAAOA,EAAEiL,WAAW,MACvC1R,KAAK,OAItB,MAAO,CAAC,YAET2R,QACPZ,EAAWrV,KAAKsV,GAChB,IAAIY,EAAqCC,aAAY,WAC7CrZ,EAAM8D,qBACN1C,MAEL,IACHmX,EAAWrV,MAAK,WAAc,OAAOoW,cAAcF,UAE/D,KAAK,EAGD,OAFAje,EAAGoH,OACHgW,EAAWxC,SAAQ,SAAU+B,GAAM,OAAOA,OACnC,CAAC,EAAc/S,EAAKyC,KAAK,aAKpD+P,EAAgBhgB,UAAU2W,QAAU,WAChC,OAAOpN,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIkL,EAAQwX,EACRnZ,EAAQvJ,KACZ,OAAOsL,EAAYtL,MAAM,SAAU0E,GAK/B,OAJAwG,EAAS,KACTwX,EAAU1iB,KAAKihB,SAASe,QAAO,SAAU1M,GACrCpK,EAAS3B,EAAMuZ,iBAAiBxN,EAAM8B,eACvCsL,QACI,CAAC,EAAc,IAAIhY,SAAQ,SAAUC,GACpC+W,YAAW,WACPgB,IACA/X,EAAQO,KACT,eAKvB4V,EAAgBhgB,UAAUgW,kBAAoB,WAC1C,OAAOzM,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIuJ,EAAQvJ,KACZ,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc,IAAIgG,SAAQ,SAAUC,EAASC,GAC7C,IAAI8X,EAAUnZ,EAAM0X,SAASe,QAAO,SAAU1M,GAC1CoN,IACA,IAAIzU,EAAQqH,EAAM8B,WAAWnJ,MAAM,mBACnC,GAAIA,EAAO,CACP,IAAIvJ,EAAK,CAACuJ,EAAM,GAAIA,EAAM,IAAK+L,EAAMtV,EAAG,GACpCwG,EAAS,CAETmN,EAAG5E,SAH2C/O,EAAG,IAG9B,EACnB+G,EAAGgI,SAASuG,GAAO,GAEvBrP,EAAQO,QAGRN,OAEL8X,QACHnZ,EAAMiG,MAAMuR,EAAelf,QAAQkhB,8BAKvDjC,EAAgBhgB,UAAU+X,cAAgB,WACtC,OAAOxO,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,MAAO,CAAC,EAAc,CACd8I,KAAMxN,KAAKihB,SAASzT,KACpBC,KAAMzN,KAAKihB,SAASxT,cAKjCqT,EAvN0B,CAwNnCE,EAAyBnf,SAC3BjB,EAAQkgB,gBAAkBA,EAC1B,IAAID,EAAiC,SAAUrc,GAE3C,SAASqc,EAAgBI,EAAU+B,GAE/B,YADa,IAATA,IAAmBA,EAAO,IACvBxe,EAAOxD,KAAKhB,KAAM,IAAI8gB,EAAgBG,GAAW+B,IAAShjB,KAErE,OALAkC,EAAU2e,EAAiBrc,GAKpBqc,EAN0B,CAOnC/e,EAAWD,SACbjB,EAAQigB,gBAAkBA,G,oBC/R1B,IAAIrX,EAAM,CACT,YAAa,IACb,cAAe,IACf,cAAe,IACf,gBAAiB,IACjB,iBAAkB,KAInB,SAASyZ,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBljB,EAAEqJ,EAAK0Z,GAAM,CACpC,IAAIlY,EAAI,IAAI9B,MAAM,uBAAyBga,EAAM,KAEjD,MADAlY,EAAEkW,KAAO,mBACHlW,EAEP,OAAOxB,EAAI0Z,GAEZD,EAAeK,KAAO,WACrB,OAAOrjB,OAAOqjB,KAAK9Z,IAEpByZ,EAAetY,QAAUyY,EACzBhI,EAAOxa,QAAUqiB,EACjBA,EAAeE,GAAK,K,iCC1BpB,OAAe,k0L,iCCAf,OAAe,svD,iCCAf,OAAe,uqD,iCCAf,OAAe,u/wB,iCCAf,OAAe,6tC,sDCIf,IAAIxZ,EAqGA3E,EA1DJ,SAASqN,EAAU3G,GACf,MAAO,CACH/B,EAASC,QACTD,EAASE,KACTF,EAASG,OACTH,EAASI,QACXxF,SAASgf,EAAQ7X,IAOvB,SAAS0G,EAAS1G,GACd,OAAO6X,EAAQ7X,KAAO/B,EAASK,OAOnC,SAASG,EAAiBuB,GACtB,OAAO2G,EAAU3G,IAAM0G,EAAS1G,GAGpC,SAASkV,EAAMlV,GACX,OAAO6X,EAAQ7X,KAAO/B,EAASS,IAOnC,SAAS2Q,EAA2ByI,EAAWC,GAC3C,OAASpR,EAAUmR,IAAcnR,EAAUoR,IACtCrR,EAASoR,IAAcpR,EAASqR,GAmBzC,SAASF,EAAQ7X,GACb,MAAoB,kBAANA,EAAiBA,EAAE1H,KAAO0H,EArG5CzL,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQ8iB,YAAc9iB,EAAQ+c,aAAe/c,EAAQmD,YAAcnD,EAAQoE,SAAWpE,EAAQ+iB,aAAe/iB,EAAQgjB,yBAA2BhjB,EAAQma,2BAA6Bna,EAAQijB,eAAiBjjB,EAAQggB,MAAQhgB,EAAQuJ,iBAAmBvJ,EAAQoa,QAAUpa,EAAQwR,SAAWxR,EAAQkjB,WAAaljB,EAAQyR,UAAYzR,EAAQkX,UAAYlX,EAAQ0V,WAAa1V,EAAQuV,WAAavV,EAAQiW,WAAajW,EAAQ2V,SAAW3V,EAAQgX,YAAchX,EAAQ+I,cAAW,EAGtd,SAAWA,GAEPA,EAAQ,QAAc,UAEtBA,EAAQ,KAAW,OAEnBA,EAAQ,OAAa,SAErBA,EAAQ,OAAa,SAErBA,EAAQ,OAAa,SAErBA,EAAQ,MAAY,QAEpBA,EAAQ,IAAU,MAdtB,CAeGA,EAAW/I,EAAQ+I,WAAa/I,EAAQ+I,SAAW,KAKtD/I,EAAQgX,YAHR,WACI,MAAO,CAAE5T,KAAM2F,EAASC,UAM5BhJ,EAAQ2V,SAHR,WACI,MAAO,CAAEvS,KAAM2F,EAASE,OAM5BjJ,EAAQiW,WAHR,WACI,MAAO,CAAE7S,KAAM2F,EAASG,SAM5BlJ,EAAQuV,WAHR,WACI,MAAO,CAAEnS,KAAM2F,EAASI,SAM5BnJ,EAAQ0V,WAHR,WACI,MAAO,CAAEtS,KAAM2F,EAASK,SAM5BpJ,EAAQkX,UAHR,SAAmB6H,EAAiB3H,GAChC,MAAO,CAAEhU,KAAM2F,EAASzF,MAAOyb,gBAAiBA,EAAiB3H,eAAgBA,IAYrFpX,EAAQyR,UAAYA,EAIpBzR,EAAQkjB,WAHR,SAAoBpY,GAChB,MAAO,CAAC/B,EAASC,QAASD,EAASE,MAAMtF,SAASgf,EAAQ7X,KAM9D9K,EAAQwR,SAAWA,EAInBxR,EAAQoa,QAHR,SAAiBtP,GACb,OAAO6X,EAAQ7X,KAAO/B,EAASzF,OAMnCtD,EAAQuJ,iBAAmBA,EAI3BvJ,EAAQggB,MAAQA,EAIhBhgB,EAAQijB,eAHR,SAAwBnY,GACpB,OAAOvB,EAAiBuB,IAAMkV,EAAMlV,IAOxC9K,EAAQma,2BAA6BA,EAKrCna,EAAQgjB,yBAJR,SAAkCJ,EAAWC,GACzC,OAAQ1I,EAA2ByI,EAAWC,IACzC7C,EAAM4C,IAAc5C,EAAM6C,IAAcD,EAAU7U,OAAS8U,EAAU9U,MAa9E/N,EAAQ+iB,aAVR,SAASA,EAAajY,GAClB,OAAQA,EAAE1H,MACN,KAAK2F,EAASzF,MACV,OAAOyf,EAAajY,EAAEiU,iBAAmB,SAC7C,KAAKhW,EAASS,IACV,MAAO,IAAOsB,EAAEiD,KAAO,IAC3B,QACI,OAAOjD,EAAE1H,OASrB,SAAWgB,GAEPA,EAAQ,IAAU,MAElBA,EAAQ,GAAS,KAEjBA,EAAQ,OAAa,QANzB,CAOGA,EAAWpE,EAAQoE,WAAapE,EAAQoE,SAAW,KAItDpE,EAAQmD,YAHR,SAAqBggB,GACjB,OAAOA,IAAa/e,EAASE,IAAM6e,IAAa/e,EAASG,QAa7DvE,EAAQ+c,aATR,SAAsBoG,GAClB,IAAIrf,EAMJ,QALaA,EAAK,IACXM,EAASC,KAAO,gBACnBP,EAAGM,EAASE,IAAM,qBAClBR,EAAGM,EAASG,QAAU,mBACtBT,GACSqf,IAKjB,SAAWL,GAEPA,EAAW,QAAc,UAEzBA,EAAW,OAAa,SAJ5B,CAKiB9iB,EAAQ8iB,cAAgB9iB,EAAQ8iB,YAAc,M,iCCvI/D,IAAIrZ,EAAarK,MAAQA,KAAKqK,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUzJ,GAAS,IAAM0J,EAAKL,EAAUM,KAAK3J,IAAW,MAAO4J,GAAKJ,EAAOI,IACpF,SAASC,EAAS7J,GAAS,IAAM0J,EAAKL,EAAS,MAAUrJ,IAAW,MAAO4J,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAe9J,EAIa8J,EAAOC,KAAOR,EAAQO,EAAO9J,QAJ1CA,EAIyD8J,EAAO9J,MAJhDA,aAAiBoJ,EAAIpJ,EAAQ,IAAIoJ,GAAE,SAAUG,GAAWA,EAAQvJ,OAITgK,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAetL,MAAQA,KAAKsL,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOnM,OAAU2L,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAI/I,UAAU,mCAC3B,KAAOmJ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAE1K,KAAKyK,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAE1K,KAAKyK,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEtK,QACzBkL,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAEzK,MAAOkL,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,KAAkBb,GAAZA,EAAIE,EAAEG,MAAYS,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVF,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIS,KAAKH,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBD,EAAKf,EAAKvK,KAAKsJ,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElL,MAAOkL,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwBzDpL,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtD,IAAI4iB,EAAWpiB,EAAQ,IACnBqiB,EAAYhjB,EAAgBW,EAAQ,MACpCsiB,EAAWjjB,EAAgBW,EAAQ,MACnCuiB,EAAsBljB,EAAgBW,EAAQ,MAgDlDhB,EAAQiB,QA1CR,SAAiB6C,GACb,IAAI0f,EAAS1f,EAAG0f,OAAQzf,EAAKD,EAAGE,eAAgBA,OAAwB,IAAPD,EANtC,aAMiFA,EAAI0f,EAAiB3f,EAAG2f,eAAgBC,EAAe5f,EAAG4f,aACtK,OAAOja,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIukB,EAAW3L,EAAIsI,EAAMsD,EAAWC,EAAkBC,EAAIC,EAAcC,EACxE,OAAOtZ,EAAYtL,MAAM,SAAU6kB,GAC/B,OAAQA,EAAGhZ,OACP,KAAK,EAED,KADA0Y,EAAYL,EAASriB,QAAQuiB,EAAQ,CAAExf,eAAgBA,KAEnD,MAAM,IAAIsE,MAAM,sBASpB,OANAib,EAAoBtiB,QAAQ0iB,EAAW,CAAE3f,eAAgBA,IACzDgU,EAAKqL,EAAUpiB,QAAQ0iB,EAAW,CAC9B3f,eAAgBA,EAChByf,eAAgBA,IAChBnD,EAAOtI,EAAGsI,KAAMsD,EAAY5L,EAAGpP,IACnCib,EAAmBD,EAAUpN,WACxBkN,EACE,CAAC,EAAaN,EAASc,OAAO5D,EAAM,CACnCsD,UAAW,CACPO,SAAUngB,EACVogB,QAASP,MAJK,CAAC,EAAa,GAO5C,KAAK,EACDC,EAAKG,EAAG/Y,OAAQ6Y,EAAeD,EAAGxD,KAAM0D,EAAoBF,EAAGlb,IAC3Dmb,GAAgBC,IAChB1D,EAAOyD,EACPF,EAAmBG,GAEvBC,EAAGhZ,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAc,CACtBuY,OAAQA,EACRlD,KAAMA,EACN1X,IAAKib,EACLF,UAAWA,a,iCCrFnC,IAkCI7f,EAlCAxC,EAAalC,MAAQA,KAAKkC,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBlC,OAAOqC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIxB,KAAKwB,EAAOpC,OAAOa,UAAUC,eAAeC,KAAKqB,EAAGxB,KAAIuB,EAAEvB,GAAKwB,EAAExB,MAC3EuB,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAO3C,KAAK4C,YAAcR,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEtB,UAAkB,OAANuB,EAAapC,OAAOC,OAAOmC,IAAMM,EAAG7B,UAAYuB,EAAEvB,UAAW,IAAI6B,IAZ1C,GAezCgT,EAAY3V,MAAQA,KAAK2V,UAAa,WAStC,OARAA,EAAW1V,OAAO2V,QAAU,SAASlK,GACjC,IAAK,IAAImK,EAAGhJ,EAAI,EAAGT,EAAI2C,UAAUvC,OAAQK,EAAIT,EAAGS,IAE5C,IAAK,IAAIhM,KADTgV,EAAI9G,UAAUlC,GACO5M,OAAOa,UAAUC,eAAeC,KAAK6U,EAAGhV,KACzD6K,EAAE7K,GAAKgV,EAAEhV,IAEjB,OAAO6K,IAEKL,MAAMrL,KAAM+O,YAE5BrC,EAAiB1M,MAAQA,KAAK0M,eAAkB,SAAUC,EAAIC,GAC9D,IAAK,IAAIC,EAAI,EAAGC,EAAKF,EAAKJ,OAAQO,EAAIJ,EAAGH,OAAQK,EAAIC,EAAID,IAAKE,IAC1DJ,EAAGI,GAAKH,EAAKC,GACjB,OAAOF,GAEP1L,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAGxDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQqkB,mBAAgB,EACxB,IAAIC,EAAWjkB,EAAgBW,EAAQ,KACnCujB,EAAevjB,EAAQ,KACvBwjB,EAAQxjB,EAAQ,KAChBmU,EAAiBnU,EAAQ,IACzBiC,EAAUjC,EAAQ,IAClBuL,EAAkBvL,EAAQ,IAE1ByjB,EAAwBzjB,EAAQ,KAC/BC,QAGDyjB,IAAiB5gB,EAAK,IACnB0gB,EAAMpiB,SAAS+Q,KAAO,IACzBrP,EAAG0gB,EAAMpiB,SAASiC,KAAO,IACzBP,EAAG0gB,EAAMpiB,SAASgR,KAAO,IACzBtP,EAAG0gB,EAAMpiB,SAASkR,KAAO,IACzBxP,EAAG0gB,EAAMpiB,SAASuiB,KAAO,IACzB7gB,EAAG0gB,EAAMpiB,SAASwiB,KAAO,KACzB9gB,EAAG0gB,EAAMpiB,SAASyiB,IAAM,KACxB/gB,EAAG0gB,EAAMpiB,SAASoR,IAAM,MACxB1P,EAAG0gB,EAAMpiB,SAASqR,IAAM,KACxB3P,EAAG0gB,EAAMpiB,SAASwR,IAAM,IACxB9P,EAAG0gB,EAAMpiB,SAASsR,KAAO,KACzB5P,EAAG0gB,EAAMpiB,SAASyR,IAAM,IACxB/P,EAAG0gB,EAAMpiB,SAASuR,KAAO,KACzB7P,GAKAugB,EAA+B,SAAUzgB,GAEzC,SAASygB,EAAc7J,EAAQ4H,QACd,IAATA,IAAmBA,EAAO,IAC9B,IAAIzZ,EAAQ/E,EAAOxD,KAAKhB,OAASA,KAYjC,OAXAuJ,EAAM6R,OAASA,EAEf7R,EAAMmc,kBAAoB,GAE1Bnc,EAAMoc,mBAAqB,GAE3Bpc,EAAMqc,OAAS,EAEfrc,EAAMsc,sBAAwB,EAC9Btc,EAAMyZ,KAAOrN,EAAS,CAAE/Q,eAAgB,GAAIkhB,YAlCzB,EAkC4DzB,gBAAgB,GAASrB,GACxGzZ,EAAM3E,eAAiB2E,EAAMyZ,KAAKpe,eAC3B2E,EA6pBX,OA5qBArH,EAAU+iB,EAAezgB,GAiBzBygB,EAAcnkB,UAAUwO,IAAM,WAC1B,IAAIyW,EAA2B/lB,KAAKgmB,YAAYhmB,KAAKob,QACrD,OAAOpb,KAAKimB,OAAOF,GAA0BG,yBAEjDjB,EAAcnkB,UAAUmlB,OAAS,SAAUF,GACvC,IAAII,EAAa,IAAIhB,EAAaiB,WAUlC,OATIpmB,KAAKgjB,KAAKqB,gBACV8B,EAAWE,IAAI,2BACfF,EAAWE,IAAIN,GACfI,EAAWE,IAAIhB,KAGfc,EAAWE,IAAIN,GACfI,EAAWE,IAAI,uCAEZF,GAEXlB,EAAcnkB,UAAUklB,YAAc,SAAU5K,GAC5Cpb,KAAK4lB,OAAS,EACd,IAAIU,EAAS,GAKb,OAJAA,EAAO7Z,KAAKzM,KAAKumB,MAAM,2BAA4B,EAAI,mBAAqBpd,KAAKC,UAAUpJ,KAAKgjB,KAAKpe,gBAAkB,IAAK,iBAAmBuE,KAAKC,UAAUgS,EAAOyB,cAAgB,IAAK,kBAAoB1T,KAAKC,UAAUgS,EAAO8B,eAAiB,IAAK,KAC1PoJ,EAAO7Z,KAAKzM,KAAKumB,MAAM,WAAY,GAAI,GAAKvmB,KAAKwmB,WAAWpL,EAAOiC,OAAQrd,KAAKumB,OAAO,EAAG,KAAM,KAChGD,EAAO7Z,KAAKzM,KAAKumB,MAAM,WAAY,GAAI,GAAKvmB,KAAKqJ,UAAU+R,EAAOZ,OAAQxa,KAAKumB,OAAO,EAAG,KAAM,KAC/FD,EAAO7Z,KAAKzM,KAAKumB,OAAO,EAAG,KAAM,KAC1B,IAAIpB,EAAaiB,WAAW,KAAM,KAAMpmB,KAAKgjB,KAAKpe,eAAgBsgB,EAASrjB,QAAQ4kB,YAAYH,KAE1GrB,EAAcnkB,UAAUsE,UAAY,SAAUP,GAC1C,IAAIyhB,EAAS,GAEb,OADAA,EAAO7Z,KAAKzM,KAAKumB,MAAM,IAAK,EAAIvmB,KAAK0mB,YAAY7hB,GAAO,UAAYA,EAAKb,KAAO,KAAM,UAAYa,EAAK8J,KAAO,KAAM,iBAAmBxF,KAAKC,UAAUvE,EAAKgY,cAAgB,IAAK,iBAAmB1T,KAAKC,UAAUvE,EAAK6Y,cAAgB,IAAK,WAAY,GAAI,GAAK1d,KAAKwmB,WAAW3hB,EAAKwY,OAAQrd,KAAKumB,OAAO,EAAG,MAAO,EAAG,KAAM,KACtTvmB,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,GAAOyhB,KAEnErB,EAAcnkB,UAAU0lB,WAAa,SAAUnJ,GAC3C,IAAIuJ,EAA8B5mB,KAAK0lB,kBAAkBlZ,OACrDqa,EAAc7mB,KAAKqJ,UAAUgU,GAIjC,OAHIrd,KAAK0lB,kBAAkBlZ,OAASoa,GAChC5mB,KAAKyJ,WAAW,qDAAsDzJ,KAAK0lB,kBAAkB1lB,KAAK0lB,kBAAkBlZ,OAAS,GAAGsa,SAE7HD,GAEX5B,EAAcnkB,UAAUwE,eAAiB,SAAUT,GAC/C,OAAO7E,KAAK2mB,iBAAiB9hB,EAAM7E,KAAK+mB,kBAAkBliB,EAAMA,EAAKgH,SAEzEoZ,EAAcnkB,UAAU0E,aAAe,SAAUX,GAG7C,IAFA,IAAI0E,EAAQvJ,KACRsmB,EAAS,GACJxX,EAAK,EAAGpK,EAAKG,EAAKmiB,SAAUlY,EAAKpK,EAAG8H,OAAQsC,IAAM,CACvD,IAAImY,EAAUviB,EAAGoK,GACb7K,EAAWgjB,EAAQhjB,SACnBgG,EAAWgd,EAAQhJ,OAAOhU,SAC9B,OAAQhG,EAASD,MACb,KAAKohB,EAAM5hB,iBAAiBU,MAIxB,GAHKL,EAAQmX,QAAQ/Q,IACjBjK,KAAKyJ,WAAW,uCAAyCQ,EAASjG,KAAMijB,GAExEpiB,EAAKqiB,UAAY9B,EAAM3hB,QAAQ0jB,QACQ,IAAvCljB,EAASmjB,mBAAmB5a,OAE5B,SAEJ8Z,EAAO7Z,KAAKpB,MAAMib,EAAQ5Z,EAAcA,EAAc,CAAC1M,KAAKqnB,mBAAmBJ,EAASA,EAAQhJ,QAC5F,SACA9U,KAAKC,UAAUa,EAAS0V,iBACxB,OAAQ1b,EAASmjB,mBAAmB5d,KAAI,SAAU9E,GAClD,IAAI4iB,EAAa5iB,EAAG4iB,WAAYC,EAAa7iB,EAAG6iB,WAChD,MAAO,CACH,IACAD,EAAa/d,EAAMxE,OAAOuiB,GAAc,IACxC,KACA/d,EAAMxE,OAAOwiB,GACb,UAEH,CAAC,WAMlB,OAAIjB,EAAO9Z,OAAS,EACTxM,KAAKwnB,qBAAqB3iB,GAAM,WAAc,OAAOyhB,KAGrD,IAAInB,EAAaiB,YAGhCnB,EAAcnkB,UAAU4E,gBAAkB,SAAUb,GAChD,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKwnB,qBAAqB3iB,GAAM,WACnC,MAAO,CACH0E,EAAMxE,OAAOF,EAAK4iB,YAClB,MACAle,EAAMme,4BAA4B7iB,EAAK8iB,UAAW9iB,EAAK4iB,WAAWxd,UAClE,SAIZgb,EAAcnkB,UAAU8E,eAAiB,SAAUf,GAC/C,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKwnB,qBAAqB3iB,GAAM,WAAc,OAAO6H,EAAc,GAAIwY,EAASrjB,QAAQ+lB,QAAQ/iB,EAAKgjB,WAAW,SAAUC,GAAY,MAAO,CAChJve,EAAM8d,mBAAmBS,EAAUA,EAAS7J,QAAU,MACtD1U,EAAMxE,OAAO+iB,EAASH,WACtB,cAGR1C,EAAcnkB,UAAUgF,cAAgB,SAAUjB,GAC9C,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKwnB,qBAAqB3iB,GAAM,WACnC,OAAO0E,EAAMwe,iBAAiBljB,EAAKka,eAG3CkG,EAAcnkB,UAAUkF,YAAc,SAAUnB,GAC5C,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKgoB,cAAcnjB,EAAM7E,KAAKioB,iBAAiB,SAAUC,GAAY,OAAO3e,EAAMxE,OAAOmjB,EAASC,cAE7GlD,EAAcnkB,UAAUoF,gBAAkB,SAAUrB,GAChD,IAAI0E,EAAQvJ,KACRooB,EAAcpoB,KAAKioB,gBACnBI,EAAYroB,KAAKsoB,mBAAmBF,EAAc,SACtD,OAAOpoB,KAAK2mB,iBAAiB9hB,EAAM7E,KAAKwnB,qBAAqB3iB,GAAM,WAAc,MAAO,CACpFwjB,EAAY,MACZ9e,EAAMxE,OAAOF,EAAK0jB,UAClB,QACGvoB,KAAKgoB,cAAcnjB,EAAMujB,GAAa,SAAUI,GAEnD,IADA,IAAIlC,EAAS,GACJzZ,EAAI,EAAGA,EAAI2b,EAAWC,UAAUjc,SAAUK,EAAG,CAClD,IAAIsb,EAAWK,EAAWC,UAAU5b,GAIpC,OAHIA,EAAI,GACJyZ,EAAO7Z,KAAK,QAER0b,EAASnkB,MACb,KAAKohB,EAAM9hB,aAAawM,MACpBwW,EAAO7Z,KAAK4b,EAAY,QAAS9e,EAAMxE,OAAOojB,EAASR,YACvD,MACJ,KAAKvC,EAAM9hB,aAAaolB,MACpBpC,EAAO7Z,KAAK,IAAM4b,EAAY,OAAQ9e,EAAMxE,OAAOojB,EAASQ,gBAAiB,OAASN,EAAY,OAAQ9e,EAAMxE,OAAOojB,EAASS,gBAAiB,KACjJ,MACJ,KAAKxD,EAAM9hB,aAAaulB,KACpBvC,EAAO7Z,KAAK4b,EAAY,IAAM/C,EAAc6C,EAAS7b,IAAM,IAAK/C,EAAMxE,OAAOojB,EAASW,YACtF,MACJ,QACIvf,EAAME,WAAW,iCAAmCN,KAAKC,UAAU+e,GAAWtjB,IAG1F,OAAOyhB,KACPtmB,KAAKwnB,qBAAqB3iB,GAAM,WAAc,MAAO,UAAYwjB,EAAY,SAErFpD,EAAcnkB,UAAUknB,cAAgB,SAAUnjB,EAAMujB,EAAaW,GAIjE,IAHA,IAAIxf,EAAQvJ,KAERgpB,EAAe,GACVnc,EAAI,EAAGA,EAAIhI,EAAKokB,WAAWzc,SAAUK,EAC1Cmc,EAAavc,KAAK,CACd5H,KAAMA,EAAKokB,WAAWpc,GACtBhB,MAAOuc,EAAc,QAAUvb,IAGnChI,EAAKqkB,YAAcrkB,EAAKqkB,WAAW7L,MAAM7Q,OAAS,GAClDwc,EAAavc,KAAK,CACd5H,KAAMA,EAAKqkB,WACXrd,MAAOuc,EAAc,UAG7B,IAAIe,EAAaf,EAAc,SAC/BY,EAAavc,KAAK,CAAE5H,KAAM,KAAMgH,MAAOsd,IAyBvC,IAxBA,IAAI7C,EAAS,GACT8C,EAAqB,EACrB/K,EAAU,SAAU6J,GACpB,IAAIvjB,EAAKqkB,EAAaI,GAAqBC,EAAiB1kB,EAAGE,KAAMykB,EAAkB3kB,EAAGkH,MAC1Fya,EAAO7Z,KAAK6R,EAAOkJ,qBAAqBU,GAAU,WAC9C,OAAOhD,EAASrjB,QAAQ4kB,YAAY,CAChC,SACAsC,EAAqBb,GACrB,QAAU3e,EAAMwe,iBAAiBuB,GAAmB,aAG1DhL,EAAOsH,OACTU,EAAO7Z,KAAK6R,EAAOkI,WAAW0B,EAAS7K,QACnC+L,EAAqBJ,EAAaxc,OAAS,GAC3C8Z,EAAO7Z,KAAK6R,EAAOkJ,qBAAqBU,GAAU,WAC9C,OAAO3e,EAAMwe,iBAAiBoB,SAGpC7K,EAAOsH,OACTU,EAAO7Z,KAAK6R,EAAOyI,kBAAkBsC,EAAgBC,MACnDF,GAEF9K,EAASte,KAEJ8O,EAAK,EAAGpK,EAAKG,EAAKokB,WAAYna,EAAKpK,EAAG8H,OAAQsC,IAAM,CAEzDuP,EADe3Z,EAAGoK,IAUtB,OANIjK,EAAKqkB,YAAcrkB,EAAKqkB,WAAW7L,MAAM7Q,OAAS,MAChDxM,KAAK4lB,OACPU,EAAO7Z,KAAKzM,KAAKwmB,WAAW3hB,EAAKqkB,WAAW7L,UAC1Crd,KAAK4lB,OACPU,EAAO7Z,KAAKzM,KAAK+mB,kBAAkB,KAAMoC,KAEtCnpB,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,GAAOyhB,KAEnErB,EAAcnkB,UAAUsF,kBAAoB,SAAUvB,GAClD,IAAI0E,EAAQvJ,KACRooB,EAAcpoB,KAAKioB,gBACnBsB,EAAiBnB,EAAc,aAC/BoB,EAAepB,EAAc,WAC7BqB,EAAO5kB,EAAK6kB,cACV,CAAC1pB,KAAK+E,OAAOF,EAAKsjB,WAClB,CAAC,KAAMnoB,KAAK+E,OAAOF,EAAKsjB,UAAW,KACrCwB,EAAW3pB,KAAKwnB,qBAAqB3iB,GAAM,WAAc,OAAO6H,EAAcA,EAAc,CAC5F,QACD+c,GAAO,CACN,OAASlgB,EAAMwe,iBAAiByB,GAAgB,YAElDxpB,KAAK4lB,OACP5lB,KAAK2lB,mBAAmBlZ,KAAK,CACzBmd,SAAU/kB,EACVglB,SAAUL,IAEd,IAAInM,EAAQrd,KAAKwmB,WAAW3hB,EAAKwY,OACjCrd,KAAK2lB,mBAAmBpZ,QACtBvM,KAAK4lB,OACP,IAAIU,EAAS,GAEb,OADAA,EAAO7Z,KAAKzM,KAAK+mB,kBAAkBliB,EAAM0kB,IACjC1kB,EAAKilB,WACT,KAAK1E,EAAM/hB,kBAAkB0mB,uBACzBzD,EAAO7Z,KAAKkd,EAAUtM,GACtB,MACJ,KAAK+H,EAAM/hB,kBAAkB2mB,sBACzB1D,EAAO7Z,KAAK4Q,EAAOsM,GACnB,MACJ,QACI3pB,KAAKyJ,WAAW,8BAAgCN,KAAKC,UAAUvE,GAAOA,GAK9E,OAHAyhB,EAAO7Z,KAAKzM,KAAKwnB,qBAAqB3iB,GAAM,WACxC,OAAO0E,EAAMwe,iBAAiBwB,MAC9BvpB,KAAK+mB,kBAAkBliB,EAAM2kB,IAC1BxpB,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,GAAOyhB,KAEnErB,EAAcnkB,UAAUwF,oBAAsB,SAAUzB,GACpD,IAAI0E,EAAQvJ,KACRooB,EAAcpoB,KAAKioB,gBACnBsB,EAAiBnB,EAAc,aAC/BoB,EAAepB,EAAc,WAC7B9B,EAAS,GAab,OAZAA,EAAO7Z,KAAKzM,KAAK+mB,kBAAkBliB,EAAM0kB,MACvCvpB,KAAK4lB,OACP5lB,KAAK2lB,mBAAmBlZ,KAAK,CACzBmd,SAAU/kB,EACVglB,SAAUL,IAEdlD,EAAO7Z,KAAKzM,KAAKwmB,WAAW3hB,EAAKwY,QACjCrd,KAAK2lB,mBAAmBpZ,QACtBvM,KAAK4lB,OACPU,EAAO7Z,KAAKzM,KAAKwnB,qBAAqB3iB,GAAM,WACxC,OAAO0E,EAAMwe,iBAAiBwB,MAC9BvpB,KAAK+mB,kBAAkBliB,EAAM2kB,IAC1BxpB,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,GAAOyhB,KAEnErB,EAAcnkB,UAAU0F,kBAAoB,SAAU3B,GAClD,IAAI0E,EAAQvJ,KAIZ,OAHuC,IAAnCA,KAAK2lB,mBAAmBnZ,QACxBxM,KAAKyJ,WAAW,oCAAqC5E,GAElD7E,KAAKwnB,qBAAqB3iB,GAAM,WACnC,OAAO0E,EAAMwe,iBAAiBxe,EAAMoc,mBAAmBpc,EAAMoc,mBAAmBnZ,OAAS,GAAGqd,cAGpG5E,EAAcnkB,UAAU4F,aAAe,SAAU7B,GAC7C,IAAI0E,EAAQvJ,KACRooB,EAAcpoB,KAAKioB,gBACnBgC,EAAa7B,EAAc,aAC3ByB,EAAWzB,EAAc,WACzB8B,EAAYlqB,KAAKsoB,mBAAmBF,EAAc,SAClD+B,EAAWnqB,KAAKsoB,mBAAmBF,EAAc,QACrDpoB,KAAK0lB,kBAAkBjZ,KAAK,CACxBqa,QAASjiB,EACTolB,WAAYA,EACZJ,SAAUA,EACVK,UAAWA,EACXC,SAAUA,IAEd,IAAI7D,EAAS,GAkBb,OAjBAA,EAAO7Z,KAAKzM,KAAKwnB,qBAAqB3iB,GAAM,WAAc,OAAO6H,EAAcA,EAAcA,EAAc,GAAI,CAC3GnD,EAAMxE,OAAOF,EAAKulB,aAClB,MACA7gB,EAAMxE,OAAOF,EAAKwlB,WAClB,OACA,CACAH,EAAY,MACZrlB,EAAKylB,SAAW/gB,EAAMxE,OAAOF,EAAKylB,UAAY,IAC9C,OACA,CAACH,EAAW,MAAO5gB,EAAMxE,OAAOF,EAAK0lB,SAAU,SAAWvqB,KAAK+mB,kBAAkBliB,EAAMolB,MACzFjqB,KAAK4lB,OACPU,EAAO7Z,KAAKzM,KAAKwnB,qBAAqB3iB,GAAM,WAAc,OAAO6H,EAAcA,EAAc,GAAI,CAAC,wBAAyBnD,EAAMxE,OAAOF,EAAKulB,aAAc,OAAQ,CAC/J,OACA,IAAMF,EAAY,2BAA6BC,EAAW,QAC1D,IAAMD,EAAY,0BAA4BC,EAAW,IACzD,OAAS5gB,EAAMwe,iBAAiB8B,GAAY,WAEzC7pB,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,GAAOyhB,KAEnErB,EAAcnkB,UAAU8F,cAAgB,SAAU/B,GAC9C,IAAI0E,EAAQvJ,KAERwqB,EAA0B3lB,EAAK4lB,aAAaje,QAAU,EACtDge,EAA0BxqB,KAAK0lB,kBAAkBlZ,QACjDxM,KAAKyJ,WAAW,qDAAsD5E,GAG1E,IAAK,IAAIgI,EAAI,EAAGA,EAAIhI,EAAK4lB,aAAaje,SAAUK,EAAG,CAC/C,IAAI6d,EAAwB1qB,KAAK+E,OAAOF,EAAK4lB,aAAa5d,IAAIuK,WAC1D0P,EAAU9mB,KAAK0lB,kBAAkB1lB,KAAK0lB,kBAAkBlZ,OAAS,EAAIK,GAAGia,QAExE4D,IAD2B1qB,KAAK+E,OAAO+hB,EAAQsD,aAAahT,YAE5DpX,KAAKyJ,WAAW,aAAeoD,EAAI,GAAK,8CAA+ChI,GAI/F,IAAIyhB,EAAS,GACTqE,EAAU,SAAU9d,GACpB,IAAInI,EAAKkmB,EAAOlF,kBAAkBnZ,MAAOua,EAAUpiB,EAAGoiB,QAASmD,EAAavlB,EAAGulB,WAAYJ,EAAWnlB,EAAGmlB,SAAUK,EAAYxlB,EAAGwlB,UAAWC,EAAWzlB,EAAGylB,SAC3J7D,EAAO7Z,KAAKme,EAAOpD,qBAAqB3iB,GAAM,WAAc,MAAO,CAC/D0E,EAAMxE,OAAO+hB,EAAQsD,aACrB,OAASF,EAAY,KACrB3gB,EAAMwe,iBAAiBkC,UAEzBW,EAAOhF,OACTU,EAAO7Z,KAAKme,EAAO7D,kBAAkBD,EAAS+C,IAC9CvD,EAAO7Z,KAAKme,EAAOpD,qBAAqBV,GAAS,WAAc,MAAO,UAAYoD,EAAY,YAAcC,EAAW,SAEvHS,EAAS5qB,KACb,IAAS6M,EAAI,EAAGA,EAAI2d,IAA2B3d,EAC3C8d,IAEJ,OAAO3qB,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,GAAOyhB,KAEnErB,EAAcnkB,UAAUgG,iBAAmB,SAAUjC,GACjD,IAAI0E,EAAQvJ,KAIZ,OAHsC,IAAlCA,KAAK0lB,kBAAkBlZ,QACvBxM,KAAKyJ,WAAW,sCAAuC5E,GAEpD7E,KAAKwnB,qBAAqB3iB,GAAM,WACnC,OAAO0E,EAAMwe,iBAAiBxe,EAAMmc,kBAAkBnc,EAAMmc,kBAAkBlZ,OAAS,GAAGqd,cAGlG5E,EAAcnkB,UAAUkG,eAAiB,SAAUnC,GAC/C,OAAO7E,KAAKwnB,qBAAqB3iB,GAAM,WACnC,MAAO,mBAAqBsI,EAAgB0R,uBAAuB9X,MAAQ,kBAAoBlC,EAAKka,UAAY,WAGxHkG,EAAcnkB,UAAUoG,gBAAkB,SAAUrC,GAChD,OAAO7E,KAAKwnB,qBAAqB3iB,GAAM,WACnC,MAAO,mBAAqBsI,EAAgB0R,uBAAuB5X,OAAS,KAAOpC,EAAKka,UAAY,iBAAmBla,EAAKka,UAAY,IAAM,IAAM,UAG5JkG,EAAcnkB,UAAUsG,cAAgB,SAAUvC,GAC9C,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKwnB,qBAAqB3iB,GAAM,WAAc,MAAO,CACxD0E,EAAMshB,cAAchmB,GACpB,SAGRogB,EAAcnkB,UAAUwG,kBAAoB,SAAUzC,GAClD,OAAO7E,KAAKwnB,qBAAqB3iB,GAAM,WAAc,MAAO,mBAAqBsI,EAAgB0R,uBAAuBxX,UAAY,WAExI4d,EAAcnkB,UAAU0G,aAAe,SAAU3C,GAC7C,OAAO7E,KAAKwnB,qBAAqB3iB,GAAM,WAAc,MAAO,mBAAqBsI,EAAgB0R,uBAAuBtX,IAAM,WAElI0d,EAAcnkB,UAAU4G,cAAgB,SAAU7C,GAC9C,IAAI0E,EAAQvJ,KACR8qB,EAAc9qB,KAAKioB,gBAAkB,QACzC,OAAOjoB,KAAKwnB,qBAAqB3iB,GAAM,WAAc,MAAO,CACxD0E,EAAM+e,mBAAmBwC,GACzB,MACAvhB,EAAMxE,OAAOF,EAAKkmB,UAClB,KACAxhB,EAAMxE,OAAOF,EAAKkmB,UAClB,MACAxhB,EAAMxE,OAAOF,EAAKikB,WAClB,KACAvf,EAAMxE,OAAOF,EAAKikB,WAClB,MACAvf,EAAM+e,mBAAmBwC,GACzB,KACA,UACAvhB,EAAM+e,mBAAmBwC,GACzB,SAGR7F,EAAcnkB,UAAU8G,eAAiB,SAAU/C,GAC/C,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKwnB,qBAAqB3iB,GAAM,WAAc,OAAO6H,EAAcA,EAAc,CACpF,2BACA7H,EAAKmmB,WAAazhB,EAAMxE,OAAOF,EAAKmmB,YAAc,OAClD,MACDnmB,EAAKgK,KAAKrF,KAAI,SAAUyH,GACvB,MAAsB,kBAARA,EACR,YAAcA,EAAM,QACpB1H,EAAMod,iBAAiB1V,EAAK,YAAc9D,EAAgB0C,aAAaC,MAAQ,aAAcvG,EAAMxE,OAAOkM,GAAM,YACrH,CACD,WAGRgU,EAAcnkB,UAAUgH,eAAiB,SAAUjD,GAC/C,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKwnB,qBAAqB3iB,GAAM,WACnC,OAAQA,EAAKomB,WACT,KAAK7F,EAAMjiB,UAAU+nB,UACjB,OAAOxe,EAAc,CACjB,2CACAvD,KAAKC,UAAUvE,EAAKyM,QAAU,KAC9BzM,EAAKsmB,YACA3hB,KAAI,SAAUrF,GAAQ,OAAOgF,KAAKC,UAAUjF,EAAK8F,aACjD8G,KAAK,MACV,OACDlM,EAAKsmB,YAAY3hB,KAAI,SAAUrF,EAAM0I,GACpC,OAAOtD,EAAMod,iBAAiBxiB,EAAMoF,EAAMxE,OAAOZ,GAAO,cAAgB0I,EAAI,WAEpF,KAAKuY,EAAMjiB,UAAUioB,KACjB,OAAO7hB,EAAMod,iBAAiB9hB,EAAKsmB,YAAY,GAAI5hB,EAAMxE,OAAOF,EAAKsmB,YAAY,IAAK,kCAAoChiB,KAAKC,UAAUvE,EAAKyM,QAAU,MAC5J,QACI/H,EAAME,WAAW,uBAAyBN,KAAKC,UAAUvE,EAAKomB,WAAYpmB,QAI1FogB,EAAcnkB,UAAUkH,iBAAmB,SAAUnD,GACjD,OAAO,IAAIsgB,EAAaiB,YAE5BnB,EAAcnkB,UAAUoH,cAAgB,SAAUrD,GAC9C,OAAO7E,KAAK2mB,iBAAiB9hB,EAAM7E,KAAKumB,MAAM,IAAK,EAAIvmB,KAAK0mB,YAAY7hB,GAAO,SAAWsE,KAAKC,UAAUvE,EAAKsa,MAAQ,KAAM,EAAG,KAAM,MAEzI8F,EAAcnkB,UAAUsH,cAAgB,SAAUvD,GAC9C,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAKwnB,qBAAqB3iB,GAAM,WAAc,OAAO6H,EAAc,CACtE,kCACA7H,EAAKsmB,YAAY3hB,KAAI,SAAUrF,GAAQ,OAAOgF,KAAKC,UAAUjF,EAAK8F,aAAc8G,KAAK,MACrF,OACDlM,EAAKsmB,YAAY3hB,KAAI,SAAUrF,EAAM0I,GACpC,OAAOtD,EAAMod,iBAAiBxiB,EAAMoF,EAAMxE,OAAOZ,GAAO,cAAgB0I,EAAI,eAGpFoY,EAAcnkB,UAAUwH,iBAAmB,SAAUzD,GACjD,OAAO7E,KAAKwnB,qBAAqB3iB,GAAM,WAAc,MAAO,gBAAkBA,EAAKka,UAAY,IAAMla,EAAKka,UAAY,IAAM,IAAM,SAEtIkG,EAAcnkB,UAAU0mB,qBAAuB,SAAU3iB,EAAMwmB,GAC3D,OAAOrrB,KAAK2mB,iBAAiB9hB,EAAM7E,KAAKumB,MAAM,IAAK,EAAI,IAAKvmB,KAAKumB,MAAMvmB,KAAK0mB,YAAY7hB,GAAO,IAAK7E,KAAKumB,MAAM,qBAAsB8E,IAAmB,QAASrrB,KAAKumB,OAAO,EAAG,KAAM,MAE1LtB,EAAcnkB,UAAU0H,iBAAmB,SAAU3D,GACjD,IAAIymB,EAUJ,MAT0B,kBAAfzmB,EAAKzD,MACZkqB,EAAcniB,KAAKC,UAAUvE,EAAKzD,OAEP,kBAAfyD,EAAKzD,MACjBkqB,EAAc,GAAKzmB,EAAKzD,MAGxBpB,KAAKyJ,WAAW,+BAAiCN,KAAKC,UAAUvE,EAAKzD,OAAQyD,GAE1E7E,KAAK2mB,iBAAiB9hB,EAAMymB,IAEvCrG,EAAcnkB,UAAU2H,gBAAkB,SAAU5D,GAChD,OAAO7E,KAAK2mB,iBAAiB9hB,EAAM7E,KAAKqnB,mBAAmBxiB,EAAMA,EAAKoZ,UAE1EgH,EAAcnkB,UAAU6H,gBAAkB,SAAU9D,GAChD,OAAO7E,KAAK6qB,cAAchmB,IAE9BogB,EAAcnkB,UAAU+H,kBAAoB,SAAUhE,GAClD,IAAIyhB,EAAS,GACb,OAAQzhB,EAAKyH,IACT,KAAK8Y,EAAMpiB,SAASiR,IAChBqS,EAAO7Z,KAAK,YAAazM,KAAK+E,OAAOF,EAAKkmB,UAAW,KAAM/qB,KAAK+E,OAAOF,EAAKikB,WAAY,KACxF,MACJ,KAAK1D,EAAMpiB,SAASmR,OAChBmS,EAAO7Z,KAAK,cAAezM,KAAK+E,OAAOF,EAAKkmB,UAAW,MAAO/qB,KAAK+E,OAAOF,EAAKikB,WAAY,KAC3F,MACJ,QACIxC,EAAO7Z,KAAK,IAAKzM,KAAK+E,OAAOF,EAAKkmB,UAAW,IAAMzF,EAAczgB,EAAKyH,IAAM,IAAKtM,KAAK+E,OAAOF,EAAKikB,WAAY,KAGtH,OAAO9oB,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,GAAOyhB,KAEnErB,EAAcnkB,UAAUiI,iBAAmB,SAAUlE,GACjD,IAAIH,EACA6mB,IAAU7mB,EAAK,IACZ0gB,EAAMriB,QAAQyoB,KAAO,IACxB9mB,EAAG0gB,EAAMriB,QAAQ0oB,KAAO,IACxB/mB,EAAG0gB,EAAMriB,QAAQ2oB,QAAU,GAC3BhnB,GACJ,OAAO1E,KAAK2mB,iBAAiB9hB,EAAM,IAAK0mB,EAAO1mB,EAAKyH,IAAKtM,KAAK+E,OAAOF,EAAKikB,WAAY,MAE1F7D,EAAcnkB,UAAUkI,mBAAqB,SAAUnE,GACnD,IAAI0E,EAAQvJ,KACZ,OAAOA,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAc,CAAC7H,EACpD7E,KAAK+E,OAAOF,EAAK8mB,WACjB,WAAY9mB,EAAK+mB,WAAWpiB,KAAI,SAAUqiB,EAAWhf,GAAK,MAAO,CACjE,IACAtD,EAAMuiB,sBAAsBjnB,EAAK8mB,UAAW9e,EAAGgf,GAC/C,WAGR5G,EAAcnkB,UAAUgrB,sBAAwB,SAAUH,EAAWI,EAAWF,GAC5E,MAAO,CACH7rB,KAAK+E,OAAO4mB,GACZ,WAAaI,EAAY,KACzB/rB,KAAK+E,OAAO8mB,GACZ,MAGR5G,EAAcnkB,UAAUmI,gBAAkB,SAAUpE,GAChD,OAAO7E,KAAK2mB,iBAAiB9hB,EAAM7E,KAAK+E,OAAOF,EAAKmnB,SAAU,YAAcnnB,EAAKonB,UAAY,OAEjGhH,EAAcnkB,UAAU+pB,cAAgB,SAAUhmB,GAO9C,IANA,IAAIH,EACA6E,EAAQvJ,KACRwd,EAAU,GACVL,EAAW,GACX+O,EAAgB,KAChBC,EAAa,EACRtf,EAAI,EAAGA,EAAIhI,EAAKunB,SAAS5f,SAAUK,EAAG,CAC3C,IAAIwf,EAAUxnB,EAAKunB,SAASvf,GACxBlI,EAAKE,EAAKynB,aAAazf,GAAIiO,EAAgBnW,EAAGmW,cAClD,GADmFnW,EAAG4nB,gBAElF,OAAQF,EAAQroB,MACZ,KAAKohB,EAAMniB,SAASmB,QAChBoZ,EAAQ/Q,KAAKzM,KAAK2mB,iBAAiB0F,EAASA,EAAQpO,OAAOC,UAAYnI,EAAe+G,QAAQ0P,IACxF,aAAeH,EAAQpO,OAAOtP,KAAO,KACrC,IAAM3O,KAAKysB,yBAAyBJ,EAASA,EAAQpO,QAAU,MAAQoO,EAAQpO,OAAOtP,KAAO,OACnG,MACJ,KAAKyW,EAAMniB,SAASoB,UAChB,IAAIqoB,EAAgB1sB,KAAK+E,OAAO4Q,EAASA,EAAS,GAAI0W,GAAU,CAAET,WAAYS,EAAQT,WAAWvJ,MAAM,EAAGgK,EAAQT,WAAWpf,OAAS,MAClImgB,EAAoB3sB,KAAK8rB,sBAAsBO,EAAQV,UAAWU,EAAQT,WAAWpf,OAAS,EAAG6f,EAAQT,WAAWS,EAAQT,WAAWpf,OAAS,IACpJgR,EAAQ/Q,KAAKzM,KAAK2mB,iBAAiB0F,EAAS,IAAKK,EAAe,KAAMC,EAAmB,MACzF,MACJ,KAAKvH,EAAMniB,SAASqB,OAChBkZ,EAAQ/Q,KAAKzM,KAAK2mB,iBAAiB0F,EAAS,IAAKrsB,KAAK+E,OAAOsnB,EAAQL,SAAU,YAAa,IAAMK,EAAQJ,UAAY,OACtH,MACJ,QACIjsB,KAAKyJ,WAAW,8CAAgDN,KAAKC,UAAUijB,GAAUA,OAGhG,CACIH,IACDA,EAAgBlsB,KAAKioB,iBAEzB,IAAI6C,EAAcoB,EAAgB,IAAMC,IACxChP,EAAS1Q,KAAK,CACVkC,KAAMmc,EACNuB,QAASA,EACTvR,cAAeA,IAEnB0C,EAAQ/Q,KAAK,mBAAqBqe,EAAc,OAGxD,IAAI8B,IAA4BloB,EAAK,IAC9Bb,EAAQ6f,YAAYmJ,SAAW,mCACvBhoB,EAAK8J,KAAO,MAAQxF,KAAKC,UAAUvE,EAAKunB,SAAS5iB,KAAI,SAAU9E,GAElE,OADeA,EAAGuF,aAG1BvF,EAAGb,EAAQ6f,YAAYoJ,QAAU,yBAA2BjoB,EAAK8J,KAAO,IACxEjK,GACJ,OAAO1E,KAAK2mB,iBAAiBtb,MAAMrL,KAAM0M,EAAcA,EAAc,CAAC7H,EAClE,0BACA7E,KAAKumB,MAAM,IAAMpJ,EAAS3T,KAAI,SAAU9E,GACxC,IAAIiK,EAAOjK,EAAGiK,KAAM0d,EAAU3nB,EAAG2nB,QAASvR,EAAgBpW,EAAGoW,cAC7D,MAAO,CACHvR,EAAMgd,MAAMhd,EAAM+e,mBAAmB3Z,GAAQ,OAC7CpF,EAAMme,4BAA4B2E,EAASvR,GAC3C,WAEH,CAAC9a,KAAKumB,MAAMlb,MAAMrL,KAAM0M,EAAcA,EAAc,CAAC,wBAA0BkgB,EAAyB/nB,EAAKkoB,aAAe,KAAOvP,EAAQzM,KAAK,MAAQ,MAAOoM,EAAS3T,KAAI,SAAU9E,GACnL,IAAIiK,EAAOjK,EAAGiK,KACd,MAAO,UAAYpF,EAAM+e,mBAAmB3Z,GAAQ,QACnD,CAAC,kBACD,EACD,eAEZsW,EAAcnkB,UAAU6lB,iBAAmB,SAAU9hB,GAEjD,IADA,IAAIyhB,EAAS,GACJxX,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCwX,EAAOxX,EAAK,GAAKC,UAAUD,GAE/B,OAAO,IAAIqW,EAAaiB,WAAWvhB,EAAKC,IAAI4K,KAAM7K,EAAKC,IAAI6T,IAAK3Y,KAAKgjB,KAAKpe,eAAgBsgB,EAASrjB,QAAQ4kB,YAAYH,KAE3HrB,EAAcnkB,UAAUylB,MAAQ,WAE5B,IADA,IAAIyG,EAAS,GACJle,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCke,EAAOle,GAAMC,UAAUD,GAG3B,IADA,IAAIme,EAAc,GACTvoB,EAAK,EAAGwoB,EAAWF,EAAQtoB,EAAKwoB,EAAS1gB,OAAQ9H,IAAM,CAC5D,IAAItD,EAAQ8rB,EAASxoB,GACrB,GAAqB,kBAAVtD,EAAoB,CAC3B,IAAI+rB,EAAY/rB,EACV,IAAIgQ,OAAOpR,KAAKgjB,KAAK8C,YAAc9lB,KAAK4lB,QACxC,GACNqH,EAAYxgB,KAAK0gB,EAAY/rB,OAE5B,IAAqB,kBAAVA,EAIZ,MAAM,IAAI8H,MAAM,0BAA4BC,KAAKC,UAAUhI,IAH3DpB,KAAK4lB,QAAUxkB,GAMvB,OAAO6rB,EAAYlc,KAAK,OAE5BkU,EAAcnkB,UAAUmnB,cAAgB,WACpC,MAAO,IAAMjoB,KAAK6lB,yBAEtBZ,EAAcnkB,UAAU4lB,YAAc,SAAU7hB,GAC5C,OAAOA,EAAKC,IAAM,SAAWD,EAAKC,IAAI4K,KAAO,KAAO7K,EAAKC,IAAI6T,IAAM,KAAO,IAE9EsM,EAAcnkB,UAAUimB,kBAAoB,SAAUliB,EAAMgH,GACxD,OAAO7L,KAAKumB,MAAMlb,MAAMrL,KAAM0M,EAAcA,EAAc,CAAC,IACvD,GAAM7H,EAAO,CAAC7E,KAAK0mB,YAAY7hB,IAAS,IAAM,CAAC,WAAagH,EAAQ,MAAO,EAAG,KAAM,OAE5FoZ,EAAcnkB,UAAUumB,mBAAqB,SAAUxiB,EAAMoZ,GACzD,IAAImP,EAAeptB,KAAKysB,yBAAyB5nB,EAAMoZ,GACvD,OAAIA,EAAOC,UAAYnI,EAAe+G,QAAQ0P,IACnCY,EAAe,KAAOnP,EAAOtP,KAAO,SAAWye,EAAe,KAAOnP,EAAOtP,KAAO,SAGnFye,EAAe,KAAOnP,EAAOtP,KAAO,MAGnDsW,EAAcnkB,UAAU2rB,yBAA2B,SAAU5nB,EAAMoZ,GAC/D,GAAIA,EAAOC,UAAYnI,EAAe+G,QAAQ0P,IAC1C,MAAO,WAEN,GAAIvO,EAAOoP,WAAatX,EAAeuX,SAASC,MACjD,OAAQtP,EAAOC,SACX,KAAKnI,EAAe+G,QAAQc,WACxB,MAAO,sBACX,KAAK7H,EAAe+G,QAAQC,IAC5B,KAAKhH,EAAe+G,QAAQnX,MACxB,MAAO,gBACX,QACI3F,KAAKyJ,WAAW,8BAAgCN,KAAKC,UAAU6U,EAAOC,SAAUrZ,OAGvF,IAAIoZ,EAAOoP,WAAatX,EAAeuX,SAASE,OACjD,MAAO,iBAGPxtB,KAAKyJ,WAAW,mCAAqCN,KAAKC,UAAU6U,GAASpZ,KAGrFogB,EAAcnkB,UAAU4mB,4BAA8B,SAAUC,EAAW8F,GACvE,IAAIC,EAAgB/F,EAAU1d,SAC1B0jB,EAAY3tB,KAAK+E,OAAO4iB,GAC5B,OAAI9jB,EAAQigB,WAAW2J,KAAoB5pB,EAAQigB,WAAW4J,GACnD,CAAC,+BAAgCC,EAAW,KAE9C9pB,EAAQ+c,MAAM6M,GACZ,CAACE,EAAW,YAGZA,GAGf1I,EAAcnkB,UAAUinB,iBAAmB,SAAUhJ,GACjD,MAAO,mBAAqB5R,EAAgB0R,uBAAuBhZ,KAAO,kBAAoBkZ,EAAY,QAE9GkG,EAAcnkB,UAAUwnB,mBAAqB,SAAUzc,GACnD,MAAO,iBAAmBA,EAAQ,MAE/BoZ,EA7qBwB,CA8qBjCG,EAAMviB,YACRjC,EAAQqkB,cAAgBA,EAKxBrkB,EAAQiB,QAJR,SAAiBuZ,EAAQ4H,GAErB,YADa,IAATA,IAAmBA,EAAO,IACvB,IAAIiC,EAAc7J,EAAQ4H,GAAM1T,Q,kBCtvB3C8L,EAAOxa,QAAU,CAAEiB,QAAS,2v3K,iCCC5B,IAAIZ,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQgtB,kBAAe,EACvB,IAAIC,EAAYjsB,EAAQ,KACpBksB,EAAY7sB,EAAgBW,EAAQ,MACpCmsB,EAAU9sB,EAAgBW,EAAQ,MAClCgC,EAAmB3C,EAAgBW,EAAQ,KAC/C,SAASgsB,EAAa5K,GAClB,OAAO,IAAI6K,EAAUG,OAAOH,EAAUI,QAAQC,aAAaJ,EAAUjsB,SAAUmhB,GAEnFpiB,EAAQgtB,aAAeA,EAyCvBhtB,EAAQiB,QAvCR,SAAe2P,EAAOwR,GAClB,IAAImL,EAASP,EAAa5K,GAC1B,IACImL,EAAOC,KAAK5c,GAEZ2c,EAAOC,KAAK,MAEhB,MAAOpjB,GACH,KAAI,UAAWA,EACL,IAAIpH,EAAiB/B,QAE3BmJ,EAAEvG,QAAQ+L,QAAQ,mEAAoE,IAAK,CACvF5L,eAAyB,OAAToe,QAA0B,IAATA,OAAkB,EAASA,EAAKpe,eACjEE,IAAKkG,EAAEmF,QAILnF,EAGd,GAA8B,IAA1BmjB,EAAOzc,QAAQlF,OACf,MAAM,IAAI5I,EAAiB/B,QAAQ,0BAA2B,CAC1D+C,eAAyB,OAAToe,QAA0B,IAATA,OAAkB,EAASA,EAAKpe,eACjEE,IAAKipB,EAAQlsB,QAAQkT,YAGxB,GAA8B,IAA1BoZ,EAAOzc,QAAQlF,OACpB,MAAM,IAAI5I,EAAiB/B,QAAQssB,EAAOzc,QAAQlF,OAAS,oBACvD2hB,EAAOzc,QACFlI,KAAI,SAAU6kB,EAAM9O,GACrB,MAAO,gBAAkBA,EAAM,GAAK,MAAQpW,KAAKC,UAAUilB,EAAM,KAAM,MAEtEtd,KAAK,QAAS,CACnBnM,eAAyB,OAAToe,QAA0B,IAATA,OAAkB,EAASA,EAAKpe,eACjEE,IAAKipB,EAAQlsB,QAAQkT,YAG7B,OAAOoZ,EAAOzc,QAAQ,K,iCCnD1B,IAAIiE,EAAY3V,MAAQA,KAAK2V,UAAa,WAStC,OARAA,EAAW1V,OAAO2V,QAAU,SAASlK,GACjC,IAAK,IAAImK,EAAGhJ,EAAI,EAAGT,EAAI2C,UAAUvC,OAAQK,EAAIT,EAAGS,IAE5C,IAAK,IAAIhM,KADTgV,EAAI9G,UAAUlC,GACO5M,OAAOa,UAAUC,eAAeC,KAAK6U,EAAGhV,KACzD6K,EAAE7K,GAAKgV,EAAEhV,IAEjB,OAAO6K,IAEKL,MAAMrL,KAAM+O,YAE5BrC,EAAiB1M,MAAQA,KAAK0M,eAAkB,SAAUC,EAAIC,GAC9D,IAAK,IAAIC,EAAI,EAAGC,EAAKF,EAAKJ,OAAQO,EAAIJ,EAAGH,OAAQK,EAAIC,EAAID,IAAKE,IAC1DJ,EAAGI,GAAKH,EAAKC,GACjB,OAAOF,GAEP1L,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAOxD,SAASiiB,EAAG/gB,GAAK,OAAOA,EAAE,GAL1BnC,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IAMtD,IAAI8jB,EAAWjkB,EAAgBW,EAAQ,KACnCmsB,EAAU9sB,EAAgBW,EAAQ,MAClCwjB,EAAQxjB,EAAQ,KAChBiC,EAAUjC,EAAQ,IAItB,SAAS0sB,IAAY,OAAO,KAC5B,SAASC,EAAOC,GACZ,GAAI,QAASA,EACT,MAAO,CAAE1pB,IAAK0pB,EAAe1pB,KAE5B,GAAK,SAAU0pB,GAAoB,QAASA,EAC7C,MAAO,CAAE1pB,IAAK,CAAE4K,KAAM8e,EAAe9e,KAAMiJ,IAAK6V,EAAe7V,MAG/D,MAAM,IAAIzP,MAAM,2BAA6BC,KAAKC,UAAUolB,IAGpE,SAASC,EAAkB/pB,GACvB,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAOiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAAS2F,UAAW0D,GAAI6W,EAAGwL,GAAI3qB,KAAKoP,cAAe2X,SAAU2D,EAAI5F,UAAW8F,GAAML,EAAOG,IAE3H,SAASG,EAAiBnqB,GACtB,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAAS6F,SAAUwD,GAAI6W,EAAGuL,GAAI1qB,KAAKoP,cAAe0V,UAAW6F,GAAMJ,EAAOpL,EAAGuL,KAE/G,SAASI,EAAcN,EAAgBptB,GACnC,IAAIsD,EAAK6pB,EAAOC,GAAgB1pB,IAChC,MAAO,CAAC,CADoCJ,EAAGgL,KAAYhL,EAAGiU,KACzCvX,GAMzB,IAAI2tB,EAAU,CACVja,MAAOiZ,EAAQlsB,QACfmtB,YAAa,CACT,CAAE,KAAQ,gBAAiB,QAAW,CAAC,WAAY,YAAe7L,GAClE,CAAE,KAAQ,gBAAiB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC9E,CAAE,KAAQ,gBAAiB,QAAW,CAAC,2BACvC,CAAE,KAAQ,gBAAiB,QAAW,CAAC,gBAAiB,0BAA2B,YAAe,SAAU/gB,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACvI,CAAE,KAAQ,SAAU,QAAW,CAAC,gBAAiB,iBAAkB,YAAe,SAAUsC,GAC3EA,EAAG,GACZ,OADqBA,EAAG,GACdwqB,QAAO,SAAUC,EAAG9sB,GAAK,MAAQ,CACvCgb,MAAO3Q,EAAcA,EAAc,GAAIyiB,EAAE9R,OAAQhb,EAAEgb,OACnD7C,MAAO9N,EAAcA,EAAc,GAAIyiB,EAAE3U,OAAQnY,EAAEmY,OACnD4U,KAAM1iB,EAAcA,EAAc,GAAIyiB,EAAEC,MAAO/sB,EAAE+sB,YAI7D,CAAE,KAAQ,yBAA0B,QAAW,CAAC,eAAgB,YAAe,SAAU1qB,GAEjF,MAAQ,CACJ2Y,MAAO,CAFF3Y,EAAG,IAGR8V,MAAO,GACP4U,KAAM,MAIlB,CAAE,KAAQ,yBAA0B,QAAW,CAAC,OAAQ,WAAY,YAAe,SAAU1qB,GACrF,IAAIgqB,EAAKhqB,EAAG,GAASA,EAAG,GACxB,MAAQ,CACJ2Y,MAAO,GACP7C,MAAOkU,EAAK,CAACA,GAAM,GACnBU,KAAM,MAIlB,CAAE,KAAQ,yBAA0B,QAAW,CAAC,MAAO,WAAY,YAAe,SAAU1qB,GACpF,IAAIgqB,EAAKhqB,EAAG,GAASA,EAAG,GACxB,MAAQ,CACJ2Y,MAAO,GACP7C,MAAO,GACP4U,KAAMV,EAAK,CAACA,GAAM,MAI9B,CAAE,KAAQ,OAAQ,QAAW,CAAC,UAAW,YAAevL,GACxD,CAAE,KAAQ,OAAQ,QAAW,CAAC,WAAY,YAAeA,GACzD,CAAE,KAAQ,OAAQ,QAAW,CAAC,iBAAkB,YAAeA,GAC/D,CAAE,KAAQ,OAAQ,QAAW,CAAC,YAAa,YAAemL,GAC1D,CAAE,KAAQ,gCAAiC,QAAW,CAAEP,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,SAAWka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,SACtL,CAAE,KAAQ,gBAAiB,QAAW,CAAC,iCAAkC,YAAeqP,GACxF,CAAE,KAAQ,gBAAiB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC9E,CAAE,KAAQ,gBAAiB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaqrB,QAAU,YAAelM,GACtH,CAAE,KAAQ,gBAAiB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC9E,CAAE,KAAQ,SAAU,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,YAAc,CAAEzR,KAAM,YAAesrB,SAAYvB,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,gBAAiB,gBAAiB,QAAU8a,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuD,IAAOwmB,EAAQlsB,QAAQ4T,IAAI,YAAc,CAAEzR,KAAM,YAAesrB,UAAY,YAAe,SAAU5qB,GACxW,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GAAI6qB,EAAK7qB,EAAG,GAAI8qB,EAAK9qB,EAAG,GAASA,EAAG,GAASA,EAAG,GACpF,OAAQiR,EAAS,CAAE3R,KAAMH,EAAQmB,SAASE,GAAIyJ,KAAMggB,EAAGvtB,MAAOquB,OAAQb,EAAKA,EAAG,GAAK,GAAIvR,MAAOmS,EAAIE,kBAAmBH,GAAMhB,EAAOG,MAG1I,CAAE,KAAQ,iCAAkC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,SAAWka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,SACvL,CAAE,KAAQ,iBAAkB,QAAW,CAAC,kCAAmC,YAAeqP,GAC1F,CAAE,KAAQ,iBAAkB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC/E,CAAE,KAAQ,iBAAkB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaqrB,QAAU,YAAelM,GACvH,CAAE,KAAQ,iBAAkB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC/E,CAAE,KAAQ,UAAW,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiB,IAAO8oB,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,iBAAkB,iBAAkB,QAAU8a,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuD,IAAOwmB,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiB,KAAO,YAAe,SAAUP,GAC7U,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GAAI6qB,EAAK7qB,EAAG,GAAI8qB,EAAK9qB,EAAG,GAASA,EAAG,GAASA,EAAG,GACpF,OAAQiR,EAAS,CAAE3R,KAAMH,EAAQmB,SAASC,IAAK0J,KAAMggB,EAAGvtB,MAAOquB,OAAQb,EAAKA,EAAG,GAAK,GAAIvR,MAAOmS,EAAIE,kBAAmBH,GAAMhB,EAAOG,MAG3I,CAAE,KAAQ,uCAAwC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,SAAWka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,SAC7L,CAAE,KAAQ,uBAAwB,QAAW,CAAC,wCAAyC,YAAeqP,GACtG,CAAE,KAAQ,uBAAwB,QAAW,GAAI,YAAe,WAAc,OAAO,OACrF,CAAE,KAAQ,gBAAiB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAU2rB,IAAO5B,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,uBAAyB8a,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASoQ,GAAK,QAAS,YAAe,SAAU1P,EAAIkrB,EAAUhlB,GAC3R,IAAI8jB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GAAI6qB,EAAK7qB,EAAG,GAAI8qB,EAAK9qB,EAAG,GAC5D,OAAKiqB,EAAGvtB,MAAMgS,cAAcyc,WAAW,MAGhCla,EAAS,CAAE3R,KAAMH,EAAQmB,SAASG,OAAQwJ,KAAMggB,EAAGvtB,MAAOquB,OAAQb,EAAKA,EAAG,GAAK,GAAIvR,MAAO,CACzF1H,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS+B,OAAQgiB,WAAY9R,EAAS,CAAE3R,KAAMohB,EAAMniB,SAASmB,QAASuK,KAAMggB,EAAGvtB,OAASmtB,EAAOgB,IAAM5H,UAAW6H,GAAMjB,EAAOgB,KACrJG,iBAAiB,GAASnB,EAAOG,IAJ7B9jB,IAOnB,CAAE,KAAQ,2BAA4B,QAAW,CAAEmjB,EAAQlsB,QAAQ4T,IAAI,YAAc,CAAEzR,KAAM,YAAesrB,WAC5G,CAAE,KAAQ,2BAA4B,QAAW,CAAEvB,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiB,MAClG,CAAE,KAAQ,kCAAmC,QAAW,CAAE8oB,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,SAAWka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,SACxL,CAAE,KAAQ,kBAAmB,QAAW,CAAC,mCAAoC,YAAeqP,GAC5F,CAAE,KAAQ,kBAAmB,QAAW,GAAI,YAAe,WAAc,OAAO,OAChF,CAAE,KAAQ,WAAY,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAc8rB,QAAU,2BAA6B/B,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,mBAAoB,YAAeqb,GAC9O,CAAE,KAAQ,SAAU,QAAW,GAAI,YAAe,WAAc,MAAO,KACvE,CAAE,KAAQ,gBAAiB,QAAW,IACtC,CAAE,KAAQ,gCAAiC,QAAW,CAAC,QAAUP,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QACpH,CAAE,KAAQ,gBAAiB,QAAW,CAAC,gBAAiB,iCAAkC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC9I,CAAE,KAAQ,SAAU,QAAW,CAAC,gBAAiB,SAAU,YAAe,SAAUsC,GAC5E,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CAACpB,MAGpB,CAAE,KAAQ,QAAS,QAAW,CAAEZ,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,6BAA8B,YAAe,SAAUvO,GACzJ,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAEhH,KAAM+f,EAAGttB,MAAO6C,SAAU0qB,GAAMJ,EAAOG,MAGlE,CAAE,KAAQ,QAAS,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAc8a,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAUka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,OAAS,6BAA8B,YAAe,SAAUpP,GACvR,IAAIgqB,EAAKhqB,EAAG,GAA4B6qB,GAAnB7qB,EAAG,GAASA,EAAG,GAASA,EAAG,IAChD,OAAQiR,EAAS,CAAEhH,KAAM+f,EAAGttB,MAAO6C,SAAU0R,EAAS,CAAE3R,KAAMohB,EAAM5hB,iBAAiBU,MAAO8rB,gBAAiBT,EAAInI,mBAAoB,IAAMmH,EAAOG,KAAQH,EAAOG,MAGzK,CAAE,KAAQ,MAAO,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWisB,KAAQlC,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,aAAe8a,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuD,IAAOwmB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWisB,MAAQ,YAAe,SAAUvrB,GAChT,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GAASA,EAAG,GAASA,EAAG,GAC5D,OAAQiR,EAAS,CAAEhH,KAAMggB,EAAGvtB,MAAO8uB,eAAgBtB,GAAML,EAAOG,MAGxE,CAAE,KAAQ,oBAAqB,QAAW,CAAC,WAAY,YAAevL,GACtE,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,aAAc,QAAW,CAAC,qBAAsB,YAAe,WAAc,MAAO,KAC9F,CAAE,KAAQ,oBAAqB,QAAW,CAAC,WAAY,YAAeA,GACtE,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,oBAAqB,QAAW,IAC1C,CAAE,KAAQ,oCAAqC,QAAW,CAAC,YAAa,YACxE,CAAE,KAAQ,oBAAqB,QAAW,CAAC,oBAAqB,qCAAsC,YAAe,SAAU/gB,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC1J,CAAE,KAAQ,oBAAqB,QAAW,CAAC,WAAY,YAAe+gB,GACtE,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,aAAc,QAAW,CAAC,oBAAqB,oBAAqB,YAAa,qBAAsB,YAAe,SAAUze,GACzHA,EAAG,GAAZ,IAAgBiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GAASA,EAAG,GAChD,OAAOgI,EAAcA,EAAc,GAAKiiB,EAAKA,EAAGnlB,KAAI,SAAU9E,GAC1D,IAAIyrB,EAAOzrB,EAAG,GAAWA,EAAG,GAC5B,OAAOyrB,KACN,IAAM,CACPvB,MAIZ,CAAE,KAAQ,YAAa,QAAW,CAAEb,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,oBAAqB,YAAe,SAAUvO,GACpJ,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAEhH,KAAM+f,EAAGttB,MAAO6C,SAAU0qB,GAAMJ,EAAOG,MAGlE,CAAE,KAAQ,eAAgB,QAAW,CAAC,WAAY,YAAevL,GACjE,CAAE,KAAQ,eAAgB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC7E,CAAE,KAAQ,eAAgB,QAAW,IACrC,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,eAAgB,YAAe,SAAU/gB,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC1H,CAAE,KAAQ,QAAS,QAAW,CAAC,eAAgB,gBAAiB,YAAe,SAAUsC,GACxEA,EAAG,GACZ,OADqBA,EAAG,KAGhC,CAAE,KAAQ,iCAAkC,QAAW,CAAEqpB,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2P,QAC5G,CAAE,KAAQ,iCAAkC,QAAW,CAAEoa,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAc2Q,UAChH,CAAE,KAAQ,iBAAkB,QAAW,CAAC,mCACxC,CAAE,KAAQ,iCAAkC,QAAW,CAAEoZ,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2P,QAC5G,CAAE,KAAQ,iCAAkC,QAAW,CAAEoa,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAc2Q,UAChH,CAAE,KAAQ,iBAAkB,QAAW,CAAC,iBAAkB,kCAAmC,YAAe,SAAUvS,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACjJ,CAAE,KAAQ,UAAW,QAAW,CAAC,kBAAmB,YAAeksB,GACnE,CAAE,KAAQ,qBAAsB,QAAW,CAAC,WAAY,YAAenL,GACvE,CAAE,KAAQ,qBAAsB,QAAW,GAAI,YAAe,WAAc,OAAO,OACnF,CAAE,KAAQ,cAAe,QAAW,CAAC,YAAa,sBAAuB,YAAeA,GACxF,CAAE,KAAQ,cAAe,QAAW,CAAC,eAAgB,WAAY,YAAeA,GAChF,CAAE,KAAQ,qBAAsB,QAAW,CAAC,WAAY,YAAeA,GACvE,CAAE,KAAQ,qBAAsB,QAAW,GAAI,YAAe,WAAc,OAAO,OACnF,CAAE,KAAQ,cAAe,QAAW,CAAC,mBAAoB,sBAAuB,YAAeA,GAC/F,CAAE,KAAQ,eAAgB,QAAW,CAAC,WAAY,YAAeA,GACjE,CAAE,KAAQ,eAAgB,QAAW,CAAC,cAAe,YAAeA,GACpE,CAAE,KAAQ,eAAgB,QAAW,CAAC,aAAc,YAAeA,GACnE,CAAE,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAeA,GAClE,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,YAAeA,GACrE,CAAE,KAAQ,eAAgB,QAAW,CAAC,cAAe,YAAeA,GACpE,CAAE,KAAQ,eAAgB,QAAW,CAAC,aAAc,YAAeA,GACnE,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,YAAeA,GACrE,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,YAAeA,GACrE,CAAE,KAAQ,eAAgB,QAAW,CAAC,iBAAkB,YAAeA,GACvE,CAAE,KAAQ,eAAgB,QAAW,CAAC,iBAAkB,YAAeA,GACvE,CAAE,KAAQ,eAAgB,QAAW,CAAC,cAAe,YAAeA,GACpE,CAAE,KAAQ,eAAgB,QAAW,CAAC,gBAAiB,YAAeA,GACtE,CAAE,KAAQ,eAAgB,QAAW,CAAC,WAAY,YAAeA,GACjE,CAAE,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAeA,GAClE,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,YAAeA,GACrE,CAAE,KAAQ,eAAgB,QAAW,CAAC,aAAc,YAAeA,GACnE,CAAE,KAAQ,eAAgB,QAAW,CAAC,cAAe,YAAeA,GACpE,CAAE,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAeA,GAClE,CAAE,KAAQ,eAAgB,QAAW,CAAC,gBAAiB,YAAeA,GACtE,CAAE,KAAQ,eAAgB,QAAW,CAAC,WAAY,YAAeA,GACjE,CAAE,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAeA,GAClE,CAAE,KAAQ,eAAgB,QAAW,CAAC,aAAc,YAAeA,GACnE,CAAE,KAAQ,eAAgB,QAAW,CAAC,aAAc,YAAeA,GACnE,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,YAAeA,GACrE,CAAE,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAeA,GAClE,CAAE,KAAQ,eAAgB,QAAW,CAAC,YAAa,YAAeA,GAClE,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,YAAeA,GACrE,CAAE,KAAQ,eAAgB,QAAW,CAAC,yBAA0B,YAAeA,GAC/E,CAAE,KAAQ,eAAgB,QAAW,CAAC,cAAe,YAAeA,GACpE,CAAE,KAAQ,eAAgB,QAAW,CAAC,iBAAkB,YAAeA,GACvE,CAAE,KAAQ,YAAa,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,mBAAqB,CAAEzR,KAAM,mBAAsBuP,iBAAmB,YAAe,SAAU7O,EAAIkH,EAAGhB,GACtJ,IAAI8jB,EAAKhqB,EAAG,GACZ,OAAOgqB,EAAGxZ,mBAAqBS,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS2B,MAAOwG,MAAO6iB,EAAGttB,OAASmtB,EAAOG,IAAO9jB,IAG/G,CAAE,KAAQ,YAAa,QAAW,CAAEmjB,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAc8a,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2P,OAAS,YAAe,SAAUjP,EAAIkH,EAAGhB,GACnM,IAAI8jB,EAAKhqB,EAAG,GAASA,EAAG,GAGxB,OAAOgqB,EAAGxZ,mBAAqBS,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS2B,MAAOwG,MAAO6iB,EAAGttB,OAASmtB,EAAOG,IAAO9jB,IAG/G,CAAE,KAAQ,iBAAkB,QAAW,CAAEmjB,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAamjB,QAAU,YAAehE,GACvH,CAAE,KAAQ,iBAAkB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC/E,CAAE,KAAQ,UAAW,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuB,IAAM,iBAAkB,YAAa,YAAe,SAAUb,GACvI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS6B,IAAK2hB,QAASyH,EAAKvJ,EAAM3hB,QAAQ0jB,OAAS/B,EAAM3hB,QAAQ8pB,MAAOvG,SAAU4H,GAAML,EAAOG,MAGtI,CAAE,KAAQ,UAAW,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaqrB,OAAS,YAAa,YAAe,SAAU3qB,GAC9H,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS6B,IAAK2hB,QAAS9B,EAAM3hB,QAAQ4rB,OAAQrI,SAAU2H,GAAMJ,EAAOG,MAG3G,CAAE,KAAQ,UAAW,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAamjB,OAAS,YAAa,YAAe,SAAUziB,GAC9H,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS6B,IAAK2hB,QAAS9B,EAAM3hB,QAAQ0jB,OAAQH,SAAU2H,GAAMJ,EAAOG,MAG3G,CAAE,KAAQ,kBAAmB,QAAW,IACxC,CAAE,KAAQ,kCAAmC,QAAW,CAAC,UAAYX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QACxH,CAAE,KAAQ,kBAAmB,QAAW,CAAC,kBAAmB,mCAAoC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACpJ,CAAE,KAAQ,WAAY,QAAW,CAAC,kBAAmB,WAAY,YAAe,SAAUsC,GAClF,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CACPpB,MAIZ,CAAE,KAAQ,UAAW,QAAW,CAAEZ,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,6BAA8B,YAAe,SAAUvO,GAC3J,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAEhH,KAAM+f,EAAGttB,MAAO6C,SAAU0qB,GAAMJ,EAAOG,MAGlE,CAAE,KAAQ,iBAAkB,QAAW,CAAC,sBAAuB,YAAevL,GAC9E,CAAE,KAAQ,iBAAkB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC/E,CAAE,KAAQ,UAAW,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAc8a,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,iBAAmBka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,OAAS,6BAA8B,YAAe,SAAUpP,GAC3S,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IAAgB8qB,GAAP9qB,EAAG,GAASA,EAAG,IAC5D,OAAQiR,EAAS,CAAEhH,KAAM+f,EAAGttB,MAAO6C,SAAU0R,EAAS,CAAE3R,KAAMohB,EAAM5hB,iBAAiBU,MAAO8rB,gBAAiBR,EAAIpI,mBAA2B,OAAPwH,QAAsB,IAAPA,EAAgBA,EAAK,IAAML,EAAOG,KAAQH,EAAOG,MAG7M,CAAE,KAAQ,4BAA6B,QAAW,IAClD,CAAE,KAAQ,4CAA6C,QAAW,CAAC,oBAAsBX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QAC5I,CAAE,KAAQ,4BAA6B,QAAW,CAAC,4BAA6B,6CAA8C,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAClL,CAAE,KAAQ,qBAAsB,QAAW,CAAC,4BAA6B,qBAAsB,YAAe,SAAUsC,GAChH,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CACPpB,MAIZ,CAAE,KAAQ,oBAAqB,QAAW,CAAC,QAAS,YAAe,SAAUjqB,GACrE,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAQiR,EAAS,CAAE4R,WAAYmH,GAAMH,EAAOG,MAEpD,CAAE,KAAQ,oBAAqB,QAAW,CAAC,OAASX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASosB,GAAK,QAAS,YAAe,SAAU1rB,GAChI,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IACpC,OAAQiR,EAAS,CAAE2R,WAAYoH,EAAInH,WAAYqH,GAAML,EAAOG,MAGpE,CAAE,KAAQ,oBAAqB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUqsB,KAAO,YAAelN,GACjH,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,aAAc,QAAW,CAAC,oBAAqB,UAAY4K,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASoQ,GAAK,QAAS,YAAe,SAAU1P,GACjJ,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAgB6qB,GAAP7qB,EAAG,GAASA,EAAG,IAChD,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS+B,OAAQgiB,WAAYkH,EAAIhH,UAAW4H,GAAMhB,EAAOG,GAAMC,MAGtG,CAAE,KAAQ,YAAa,QAAW,CAAEZ,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2B,MAAQ,aAAc,YAAe,SAAUjB,GAC9H,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASiC,MAAOkiB,UAAW8G,GAAMJ,EAAOG,MAG/E,CAAE,KAAQ,mBAAoB,QAAW,IACzC,CAAE,KAAQ,mCAAoC,QAAW,CAAC,WAAaX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QAC1H,CAAE,KAAQ,mBAAoB,QAAW,CAAC,mBAAoB,oCAAqC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACvJ,CAAE,KAAQ,YAAa,QAAW,CAAC,mBAAoB,YAAa,YAAe,SAAUsC,GACrF,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CACPpB,MAIZ,CAAE,KAAQ,WAAY,QAAW,CAAEZ,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAc8a,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASoQ,GAAK,QAAS,YAAe,SAAU1P,GAC1L,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IACpC,OAAQiR,EAAS,CAAEhH,KAAM+f,EAAGttB,MAAOumB,UAAWiH,GAAML,EAAOG,MAGnE,CAAE,KAAQ,WAAY,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW6B,KAAO,YAAa,YAAe,SAAUnB,GACzH,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASmC,KAAMkZ,UAAW4P,GAAMJ,EAAOG,MAG9E,CAAE,KAAQ,0CAA2C,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWssB,KAAO,oBAC1H,CAAE,KAAQ,0BAA2B,QAAW,CAAC,2CAA4C,YAAenN,GAC5G,CAAE,KAAQ,0BAA2B,QAAW,GAAI,YAAe,WAAc,OAAO,OACxF,CAAE,KAAQ,mBAAoB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAAS+B,GAAK,OAASgoB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWusB,KAAO,kBAAmB,0BAA4BxC,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAc2Q,SAAW,YAAe,SAAUjQ,GAChS,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAgB6qB,GAAP7qB,EAAG,GAASA,EAAG,IAAI8qB,EAAK9qB,EAAG,GAASA,EAAG,GAASA,EAAG,GACpF,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqC,GAAIkjB,WAAY,CAACtT,EAAS,CAAEwS,SAAUwG,EAAItR,MAAOkS,GAAMhB,EAAOG,KAAOxF,WAAYsG,EAAK7Z,EAAS,CAAE0H,MAAOmS,EAAG,IAAMjB,EAAOiB,EAAG,KAAO,MAAQjB,EAAOG,MAGjM,CAAE,KAAQ,qBAAsB,QAAW,IAC3C,CAAE,KAAQ,qCAAsC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAawsB,OAAS,OAASzC,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWusB,KAAQxC,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAc2Q,QAAU,UAC9P,CAAE,KAAQ,qBAAsB,QAAW,CAAC,qBAAsB,sCAAuC,YAAe,SAAUvS,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC7J,CAAE,KAAQ,qCAAsC,QAAW,CAAE2rB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWssB,KAAO,UACrH,CAAE,KAAQ,qBAAsB,QAAW,CAAC,sCAAuC,YAAenN,GAClG,CAAE,KAAQ,qBAAsB,QAAW,GAAI,YAAe,WAAc,OAAO,OACnF,CAAE,KAAQ,cAAe,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAAS+B,GAAK,OAASgoB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWusB,KAAQxC,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAc2Q,QAAU,QAAS,qBAAsB,qBAAuBoZ,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuD,IAAOwmB,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAAS+B,IAAM,YAAe,SAAUrB,GAC3Y,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAA4B8qB,GAAnB9qB,EAAG,GAASA,EAAG,GAASA,EAAG,IAAI+rB,EAAK/rB,EAAG,GAAIgsB,EAAKhsB,EAAG,GAASA,EAAG,GAASA,EAAG,GAC5G,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqC,GAAIkjB,WAAYvc,EAAc,CAC9DiJ,EAAS,CAAEwS,SAAUwG,EAAItR,MAAOmS,GAAMjB,EAAOG,KAC9C+B,EAAGjnB,KAAI,SAAU9E,GAChB,IAAIisB,EAAOjsB,EAAG,GAAIksB,EAAOlsB,EAAG,GAAgCmsB,GAArBnsB,EAAG,GAAWA,EAAG,GAAWA,EAAG,IACtE,OAAQiR,EAAS,CAAEwS,SAAUyI,EAAMvT,MAAOwT,GAAQtC,EAAOoC,QACxDzH,WAAYwH,EAAK/a,EAAS,CAAE0H,MAAOqT,EAAG,IAAMnC,EAAOmC,EAAG,KAAO,MAAQnC,EAAOG,MAG7F,CAAE,KAAQ,oBAAqB,QAAW,CAAC,WAAY,YAAevL,GACtE,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,oCAAqC,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW8sB,KAAO,YAAa,UACjI,CAAE,KAAQ,oBAAqB,QAAW,CAAC,sCAC3C,CAAE,KAAQ,oCAAqC,QAAW,CAAE/C,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW8sB,KAAO,YAAa,UACjI,CAAE,KAAQ,oBAAqB,QAAW,CAAC,oBAAqB,qCAAsC,YAAe,SAAU1uB,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC1J,CAAE,KAAQ,oCAAqC,QAAW,CAAE2rB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW8sB,KAAQ/C,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWssB,KAAO,UAC7K,CAAE,KAAQ,oBAAqB,QAAW,CAAC,qCAAsC,YAAenN,GAChG,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,aAAc,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaiC,OAAU8nB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW8sB,KAAO,OAAQ,oBAAqB,oBAAqB,oBAAsB/C,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuD,IAAOwmB,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaiC,QAAU,YAAe,SAAUvB,GAC1W,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IAAgB8qB,GAAP9qB,EAAG,GAASA,EAAG,IAAI+rB,EAAK/rB,EAAG,GAASA,EAAG,GAASA,EAAG,GAChG,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASuC,OAAQsiB,SAAUqG,EAAI3F,WAAYuG,EAAGhmB,KAAI,SAAU9E,GACnF,IAAIqsB,EAAOrsB,EAAG,GAAIssB,EAAOtsB,EAAG,GAAIusB,EAAOvsB,EAAG,GAC1C,OAAQiR,EAAS,CAAE8S,UAAWuI,EAAM3T,MAAO4T,GAAQ1C,EAAOwC,OAC1D7H,WAAYuH,EAAK9a,EAAS,CAAE0H,MAAOoT,EAAG,IAAMlC,EAAOkC,EAAG,KAAO,MAAQlC,EAAOG,MAG5F,CAAE,KAAQ,mBAAoB,QAAW,IACzC,CAAE,KAAQ,mCAAoC,QAAW,CAAC,WAAaX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QAC1H,CAAE,KAAQ,mBAAoB,QAAW,CAAC,mBAAoB,oCAAqC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACvJ,CAAE,KAAQ,YAAa,QAAW,CAAC,mBAAoB,YAAa,YAAe,SAAUsC,GACrF,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CAACpB,MAGpB,CAAE,KAAQ,WAAY,QAAW,CAAC,QAAS,YAAe,SAAUjqB,GAC5D,IAAIgqB,EAAKhqB,EAAG,GACZ,MAAQ,CACJV,KAAMohB,EAAM9hB,aAAawM,MACzB6X,UAAW+G,KAIvB,CAAE,KAAQ,WAAY,QAAW,CAAC,OAASX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASosB,GAAK,QAAS,YAAe,SAAU1rB,GACvH,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IACpC,MAAQ,CACJV,KAAMohB,EAAM9hB,aAAaolB,MACzBC,eAAgB+F,EAChB9F,eAAgBgG,KAI5B,CAAE,KAAQ,2BAA4B,QAAW,CAAEb,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASoQ,KAChG,CAAE,KAAQ,2BAA4B,QAAW,CAAE2Z,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqQ,KAChG,CAAE,KAAQ,2BAA4B,QAAW,CAAE0Z,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASwQ,KAChG,CAAE,KAAQ,2BAA4B,QAAW,CAAEuZ,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUsQ,MAClG,CAAE,KAAQ,2BAA4B,QAAW,CAAEyZ,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASyQ,KAChG,CAAE,KAAQ,2BAA4B,QAAW,CAAEsZ,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuQ,MAClG,CAAE,KAAQ,WAAY,QAAW,CAAEwZ,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASktB,GAAK,2BAA4B,QAAS,YAAe,SAAUxsB,GAClIA,EAAG,GAAZ,IAAgBiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,MAAQ,CACJV,KAAMohB,EAAM9hB,aAAaulB,KACzBvc,GAAI6W,EAAGwL,GAAI3qB,KAAKoP,cAChB0V,UAAW8F,KAIvB,CAAE,KAAQ,YAAa,QAAW,CAAEb,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYmtB,MAAQ,OAAQ,QAAUpD,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWotB,MAAQ,YAAe,SAAU1sB,GAC3L,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GAASA,EAAG,GAChD,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyC,UAAW2jB,UAAW1E,EAAM/hB,kBAAkB0mB,uBAAwB5B,SAAUwG,EAAIjF,eAAe,EAAOrM,MAAOuR,GAAML,EAAOG,MAG9K,CAAE,KAAQ,cAAe,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqtB,GAAMtD,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYmtB,MAAQ,OAAQ,QAAUpD,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWstB,MAAQ,YAAe,SAAU5sB,GAChP,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IAAI6qB,EAAK7qB,EAAG,GAASA,EAAG,GAC5D,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyC,UAAW2jB,UAAW1E,EAAM/hB,kBAAkB0mB,uBAAwB5B,SAAUyG,EAAIlF,eAAe,EAAOrM,MAAOkS,GAAMhB,EAAOG,MAG9K,CAAE,KAAQ,cAAe,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqtB,GAAMtD,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYutB,MAAQ,OAAQ,QAAUxD,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWstB,MAAQ,YAAe,SAAU5sB,GAChP,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IAAI6qB,EAAK7qB,EAAG,GAASA,EAAG,GAC5D,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyC,UAAW2jB,UAAW1E,EAAM/hB,kBAAkB0mB,uBAAwB5B,SAAUyG,EAAIlF,eAAe,EAAMrM,MAAOkS,GAAMhB,EAAOG,MAG7K,CAAE,KAAQ,gBAAiB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqtB,GAAK,QAAUtD,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWstB,KAAQvD,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYmtB,MAAQ,QAAS,YAAe,SAAUzsB,GAClP,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAA4B8qB,GAAnB9qB,EAAG,GAASA,EAAG,GAASA,EAAG,IAC5D,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyC,UAAW2jB,UAAW1E,EAAM/hB,kBAAkB2mB,sBAAuB7B,SAAUqH,EAAI9F,eAAe,EAAOrM,MAAOsR,GAAMJ,EAAOG,MAG7K,CAAE,KAAQ,gBAAiB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqtB,GAAK,QAAUtD,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWstB,KAAQvD,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYutB,MAAQ,QAAS,YAAe,SAAU7sB,GAClP,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAA4B8qB,GAAnB9qB,EAAG,GAASA,EAAG,GAASA,EAAG,IAC5D,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyC,UAAW2jB,UAAW1E,EAAM/hB,kBAAkB2mB,sBAAuB7B,SAAUqH,EAAI9F,eAAe,EAAMrM,MAAOsR,GAAMJ,EAAOG,MAG5K,CAAE,KAAQ,aAAc,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqtB,GAAK,QAAUtD,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWstB,MAAQ,YAAe,SAAU5sB,GAC3K,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAASA,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS2C,YAAagX,MAAOsR,GAAMJ,EAAOG,MAGjF,CAAE,KAAQ,eAAgB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWwtB,KAAQzD,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqtB,IAAM,YAAe,SAAU3sB,GACpK,IAAIgqB,EAAKhqB,EAAG,GAASA,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS6C,WAAagoB,EAAOG,MAEpE,CAAE,KAAQ,iCAAkC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWytB,KAAO,SACjH,CAAE,KAAQ,iBAAkB,QAAW,CAAC,kCAAmC,YAAetO,GAC1F,CAAE,KAAQ,iBAAkB,QAAW,GAAI,YAAe,WAAc,OAAO,OAC/E,CAAE,KAAQ,UAAW,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUyC,IAAM,UAAYsnB,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASoQ,GAAK,OAAS2Z,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASosB,GAAK,OAAQ,kBAAmB,YAAe,SAAU1rB,GAC5P,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAgB6qB,GAAP7qB,EAAG,GAASA,EAAG,IAAgB+rB,GAAP/rB,EAAG,GAASA,EAAG,IAAIgsB,EAAKhsB,EAAG,GACpF,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS+C,IAAK2jB,YAAauE,EAAItE,UAAWkF,EAAIhF,QAASkG,EAAInG,SAAUoG,EAAKA,EAAG,GAAK,MAAQnC,EAAOG,MAGxI,CAAE,KAAQ,kBAAmB,QAAW,CAAC,YAAa,YAAevL,GACrE,CAAE,KAAQ,kBAAmB,QAAW,GAAI,YAAe,WAAc,OAAO,OAChF,CAAE,KAAQ,WAAY,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW2C,KAAO,mBAAoB,YAAe,SAAUjC,GAChI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASiD,KAAM8jB,aAAqB,OAAPkE,QAAsB,IAAPA,EAAgBA,EAAK,IAAMJ,EAAOG,MAGrH,CAAE,KAAQ,cAAe,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWwtB,KAAQzD,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUyC,KAAO,YAAe,SAAU/B,GACtK,IAAIgqB,EAAKhqB,EAAG,GAASA,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASmD,UAAY0nB,EAAOG,MAEnE,CAAE,KAAQ,YAAa,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY+C,MAAQ,YAAa,YAAe,SAAUrC,GAC7H,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqD,MAAOgY,UAAW4P,GAAMJ,EAAOG,MAG/E,CAAE,KAAQ,oBAAqB,QAAW,CAAC,YAAa,YAAevL,GACvE,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,aAAc,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaiD,OAAS,qBAAsB,YAAe,SAAUvC,GAC1I,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASuD,OAAQ8X,UAAW4P,GAAMJ,EAAOG,MAGhF,CAAE,KAAQ,kCAAmC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,QAAUka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,SACvL,CAAE,KAAQ,kBAAmB,QAAW,CAAC,mCAAoC,YAAeqP,GAC5F,CAAE,KAAQ,kBAAmB,QAAW,GAAI,YAAe,WAAc,OAAO,OAChF,CAAE,KAAQ,WAAY,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWmD,KAAQ4mB,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,mBAAoB,YAAe,SAAUvO,GAC3M,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyD,KAAMwH,KAAMggB,EAAGvtB,MAAOgrB,SAAUwC,EAAKA,EAAG,GAAK,IAAML,EAAOG,MAG1G,CAAE,KAAQ,WAAY,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAa,SAAU,YAAe,SAAUvO,EAAIkH,EAAGhB,GAC/I,IAAI8jB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAGxB,GAAIgqB,EAAGxZ,oBAAoC,IAAdyZ,EAAGniB,OAAc,CAC1C,IAAIklB,EAAY3D,EAAQlsB,QAAQuT,OAChC,GAAIsc,GAAgC,UAAnBA,EAAU1tB,KACvB,OAAO4G,EAIf,OAAkB,IAAd+jB,EAAGniB,QAAgBmiB,EAAG,GAAG3qB,OAASohB,EAAMniB,SAAS2F,WAAa+lB,EAAG,GAAGriB,KAAO8Y,EAAMpiB,SAASoR,GACnFxJ,EAEJ+K,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyD,KAAMwH,KAAM+f,EAAGttB,MAAOgrB,SAAUuC,GAAMJ,EAAOG,MAG5F,CAAE,KAAQ,eAAgB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWwtB,KAAQzD,EAAQlsB,QAAQ4T,IAAI,YAAc,CAAEzR,KAAM,YAAesrB,UAAY,YAAe,SAAU5qB,GACtL,IAAIgqB,EAAKhqB,EAAG,GAASA,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS2D,UAAW0c,SAAUlgB,EAAQmB,SAASE,IAAMqpB,EAAOG,MAGnG,CAAE,KAAQ,eAAgB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWwtB,KAAQzD,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiB,KAAO,YAAe,SAAUP,GACvK,IAAIgqB,EAAKhqB,EAAG,GAASA,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS2D,UAAW0c,SAAUlgB,EAAQmB,SAASC,KAAOspB,EAAOG,MAGpG,CAAE,KAAQ,0BAA2B,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuD,MACjG,CAAE,KAAQ,0BAA2B,QAAW,CAAEwmB,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa2tB,SACvG,CAAE,KAAQ,0BAA2B,QAAW,CAAE5D,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW4tB,OACnG,CAAE,KAAQ,UAAW,QAAW,CAAC,2BAA4B,YAAe,SAAUltB,GAC9E,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS6D,KAAOgnB,EAAOpL,EAAGuL,OAEjE,CAAE,KAAQ,WAAY,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWyD,KAAO,UAAYsmB,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,MAAQ,WAAY,YAAe,SAAU9J,GAC/L,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAgB6qB,GAAP7qB,EAAG,GAASA,EAAG,IAChD,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS+D,KAAMsjB,SAAU4D,EAAI7F,UAAWyG,GAAMhB,EAAOG,MAG5F,CAAE,KAAQ,mCAAoC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY6tB,MAAQ,OAAS9D,EAAQlsB,QAAQ4T,IAAI,aAAe,CAAEzR,KAAM,aAAgBkN,YAC1L,CAAE,KAAQ,mBAAoB,QAAW,CAAC,oCAAqC,YAAeiS,GAC9F,CAAE,KAAQ,mBAAoB,QAAW,GAAI,YAAe,WAAc,OAAO,OACjF,CAAE,KAAQ,YAAa,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2D,MAAQ,mBAAoB,aAAc,YAAe,SAAUjD,GAClJ,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASiE,MAAOkH,KAAM+f,EAAI5D,WAAY2D,EAAKA,EAAG,GAAK,MAAQJ,EAAOG,MAGzG,CAAE,KAAQ,mBAAoB,QAAW,IACzC,CAAE,KAAQ,mCAAoC,QAAW,CAAC,SAC1D,CAAE,KAAQ,mCAAoC,QAAW,CAAC,aAC1D,CAAE,KAAQ,mBAAoB,QAAW,CAAC,mBAAoB,oCAAqC,YAAe,SAAUtsB,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACvJ,CAAE,KAAQ,YAAa,QAAW,CAAC,oBAAqB,YAAe,SAAUsC,EAAIotB,EAAUlnB,GAIvF,IAHA,IAAI8jB,EAAKhqB,EAAG,GACRmK,EAAOqW,EAASrjB,QAAQkwB,QAAQrD,GAE3B7hB,EAAI,EAAGA,EAAIgC,EAAKrC,OAAS,IAAKK,EAAG,CACtC,IAAImlB,EAAOnjB,EAAKhC,GAAIolB,EAAOpjB,EAAKhC,EAAI,GACpC,GAAoB,kBAATmlB,GAAqBA,EAAKhuB,OAASohB,EAAMniB,SAASmB,SACzC,kBAAT6tB,GAAqBA,EAAKjuB,OAASohB,EAAMniB,SAAS6F,UAAYmpB,EAAK3lB,KAAO8Y,EAAMriB,QAAQ2oB,OAC/F,OAAO9gB,EAGf,OAAOiE,IAGf,CAAE,KAAQ,WAAY,QAAW,CAAEkf,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,OAAS,YAAe,WAAc,OAAO4W,EAAMhiB,SAASoL,QAClJ,CAAE,KAAQ,WAAY,QAAW,CAAEuf,EAAQlsB,QAAQ4T,IAAI,aAAe,CAAEzR,KAAM,aAAgBkN,WAAa,YAAe,WAAc,OAAOkU,EAAMhiB,SAAS8N,YAC9J,CAAE,KAAQ,mCAAoC,QAAW,CAAE6c,EAAQlsB,QAAQ4T,IAAI,kBAAoB,CAAEzR,KAAM,kBAAqBsP,eAAiB,uBACjJ,CAAE,KAAQ,mBAAoB,QAAW,CAAC,oCAAqC,YAAe6P,GAC9F,CAAE,KAAQ,mBAAoB,QAAW,GAAI,YAAe,WAAc,OAAO,OACjF,CAAE,KAAQ,YAAa,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY6D,MAAQ,mBAAoB,YAAa,YAAe,SAAUnD,GACjJ,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASmE,MAAOyJ,OAAQqd,EAAUA,EAAG,GAAGvtB,OAASutB,EAAG,GAAK,KAAO,IAAM,KAAM1D,UAAW7F,EAAMjiB,UAAU+nB,UAAWC,YAAayD,GAAML,EAAOG,MAGnL,CAAE,KAAQ,mCAAoC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,kBAAoB,CAAEzR,KAAM,kBAAqBsP,eAAiB,uBACjJ,CAAE,KAAQ,mBAAoB,QAAW,CAAC,oCAAqC,YAAe6P,GAC9F,CAAE,KAAQ,mBAAoB,QAAW,GAAI,YAAe,WAAc,OAAO,OACjF,CAAE,KAAQ,YAAa,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWonB,KAAQ2C,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY6D,MAAQ,mBAAoB,WAAY,YAAe,SAAUnD,GACzM,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IAAI6qB,EAAK7qB,EAAG,GAChD,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASmE,MAAOyJ,OAAQsd,EAAKA,EAAG,GAAGxtB,MAAQ,GAAI6pB,UAAW7F,EAAMjiB,UAAUioB,KAAMD,YAAa,CAACoE,IAAOhB,EAAOG,MAGnJ,CAAE,KAAQ,qBAAsB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,OAAS,YAAe,WAAc,OAAO,IAC7I,CAAE,KAAQ,qBAAsB,QAAW,CAAEuf,EAAQlsB,QAAQ4T,IAAI,aAAe,CAAEzR,KAAM,aAAgBkN,WAAa,YAAe,WAAc,OAAO,IACzJ,CAAE,KAAQ,cAAe,QAAW,CAAE6c,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAakuB,OAAS,iBAAkB,YAAe,SAAUxtB,GACvI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqE,SAAUkC,SAAUpG,EAAQ+T,cAAeua,OAAQxD,GAAMJ,EAAOG,MAGhH,CAAE,KAAQ,cAAe,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaouB,OAAS,iBAAkB,YAAe,SAAU1tB,GACvI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqE,SAAUkC,SAAUpG,EAAQgT,aAAcsb,OAAQxD,GAAMJ,EAAOG,MAG/G,CAAE,KAAQ,cAAe,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAaquB,OAAS,iBAAkB,YAAe,SAAU3tB,GACvI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqE,SAAUkC,SAAUpG,EAAQsS,aAAcgc,OAAQxD,GAAMJ,EAAOG,MAG/G,CAAE,KAAQ,cAAe,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAasuB,OAAS,iBAAkB,YAAe,SAAU5tB,GACvI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqE,SAAUkC,SAAUpG,EAAQ0S,WAAY4b,OAAQxD,GAAMJ,EAAOG,MAG7G,CAAE,KAAQ,cAAe,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAauuB,OAAS,iBAAkB,YAAe,SAAU7tB,GACvI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASqE,SAAUkC,SAAUpG,EAAQyS,aAAc6b,OAAQxD,GAAMJ,EAAOG,MAG/G,CAAE,KAAQ,uBAAwB,QAAW,IAC7C,CAAE,KAAQ,uCAAwC,QAAW,CAAC,eAAiBX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QAClI,CAAE,KAAQ,uBAAwB,QAAW,CAAC,uBAAwB,wCAAyC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACnK,CAAE,KAAQ,gBAAiB,QAAW,CAAC,uBAAwB,gBAAiB,YAAe,SAAUsC,GACjG,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CAACpB,MAGpB,CAAE,KAAQ,eAAgB,QAAW,CAAEZ,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,YAAc,YAAe,SAAUvO,GACnI,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAQiR,EAAS,CAAE6c,UAAW9D,EAAGttB,MAAOqxB,UAAW/D,EAAGttB,OAASmtB,EAAOG,MAG9E,CAAE,KAAQ,eAAgB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAc8a,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiB,IAAO8oB,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,YAAc,YAAe,SAAUvO,GACpQ,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IACpC,OAAQiR,EAAS,CAAE6c,UAAW9D,EAAGttB,MAAOqxB,UAAW7D,EAAGxtB,OAASmtB,EAAOG,MAG9E,CAAE,KAAQ,kBAAmB,QAAW,IACxC,CAAE,KAAQ,kCAAmC,QAAW,CAAC,WAAaX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QACzH,CAAE,KAAQ,kBAAmB,QAAW,CAAC,kBAAmB,mCAAoC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACpJ,CAAE,KAAQ,WAAY,QAAW,CAAE2rB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWiE,KAAO,kBAAmB,YAAa,YAAe,SAAUvD,GAC5I,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASuE,KAAMkX,KAAMzS,EAAcA,EAAc,GAAIiiB,EAAKA,EAAGnlB,KAAI,SAAU9E,GAClG,IAAIyrB,EAAOzrB,EAAG,GAAWA,EAAG,GAC5B,OAAOyrB,KACN,IAAK,CACNvB,KACEL,EAAOG,MAGzB,CAAE,KAAQ,WAAY,QAAW,GAAI,YAAe,WAAc,OAAOI,EAAcf,EAAQlsB,QAAQkT,UAAW,QAClH,CAAE,KAAQ,WAAY,QAAW,CAAC,eAAgB,YAAe,SAAUrQ,GACnE,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAOoqB,EAAcJ,EAAIA,EAAGttB,SAEpC,CAAE,KAAQ,WAAY,QAAW,CAAE2sB,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,YAAc,YAAe,SAAUvO,GAC/H,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAOoqB,EAAcJ,EAAIA,EAAGttB,SAEpC,CAAE,KAAQ,WAAY,QAAW,CAAE2sB,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAWmE,KAAO,YAAa,YAAe,SAAUzD,GACzH,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyE,KAAMgjB,YAAawD,GAAMJ,EAAOG,MAGhF,CAAE,KAAQ,qBAAsB,QAAW,CAAC,YAAa,YAAevL,GACxE,CAAE,KAAQ,qBAAsB,QAAW,GAAI,YAAe,WAAc,OAAO,OACnF,CAAE,KAAQ,cAAe,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAcqE,QAAU,sBAAuB,YAAe,SAAU3D,GAC/I,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAAS2E,QAAS0W,UAAW4P,GAAMJ,EAAOG,MAGjF,CAAE,KAAQ,wCAAyC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa0uB,SACrH,CAAE,KAAQ,wCAAyC,QAAW,CAAE3E,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2uB,QACnH,CAAE,KAAQ,+BAAgC,QAAW,IACrD,CAAE,KAAQ,sDAAuD,QAAW,CAAC,QAAS,YAAexP,GACrG,CAAE,KAAQ,sDAAuD,QAAW,GAAI,YAAe,WAAc,OAAO,OACpH,CAAE,KAAQ,+CAAgD,QAAW,CAAC,sDAAwD4K,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QACjL,CAAE,KAAQ,+BAAgC,QAAW,CAAC,+BAAgC,gDAAiD,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC3L,CAAE,KAAQ,wBAAyB,QAAW,CAAC,wCAAyC,+BAAgC,QAAS,YAAe,SAAUsC,GAClJ,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyD,KAAMwH,KAAM+f,EAAG,GAAGttB,MAAOgrB,SAAU1f,EAAcA,EAAc,GAAKiiB,EAAKA,EAAGnlB,KAAI,SAAU9E,GAC1H,IAAIyrB,EAAOzrB,EAAG,GAAIkuB,EAAOluB,EAAG,GAC5B,OAAgB,OAATyrB,QAA0B,IAATA,EAAkBA,EAAOxa,EAAS,CAAE3R,KAAMohB,EAAMniB,SAASsF,QAASnH,MAAOyxB,KAAOtE,EAAOqE,OAC9G,IAAM,CACPhE,KACEL,EAAOG,EAAG,OAG5B,CAAE,KAAQ,oCAAqC,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASoQ,GAAK,SAC9G,CAAE,KAAQ,oBAAqB,QAAW,CAAC,qCAAsC,YAAe+O,GAChG,CAAE,KAAQ,oBAAqB,QAAW,GAAI,YAAe,WAAc,OAAO,OAClF,CAAE,KAAQ,aAAc,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAU2rB,IAAO5B,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAU8uB,IAAM,qBAAsB,YAAe,SAAUpuB,GACvL,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyD,KAAMwH,KAAM,YAAayd,SAAUwC,EAAK,CAACA,EAAG,IAAM,IAAML,EAAOG,MAG/G,CAAE,KAAQ,uCAAwC,QAAW,CAAC,OAASX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASosB,GAAK,SACzH,CAAE,KAAQ,uBAAwB,QAAW,CAAC,wCAAyC,YAAejN,GACtG,CAAE,KAAQ,uBAAwB,QAAW,GAAI,YAAe,WAAc,OAAO,OACrF,CAAE,KAAQ,gBAAiB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW+uB,KAAQhF,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2D,MAAQ,wBAAyB,YAAe,SAAUjD,GACtM,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM1hB,SAASyD,KAAMwH,KAAM,eAAgByd,SAAUwC,EAAK,CAACA,EAAG,GAAIA,EAAG,IAAM,IAAML,EAAOG,MAGzH,CAAE,KAAQ,yBAA0B,QAAW,IAC/C,CAAE,KAAQ,yBAA0B,QAAW,CAAC,yBAA2BX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2P,OAAS,YAAe,SAAUvR,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC3L,CAAE,KAAQ,yBAA0B,QAAW,IAC/C,CAAE,KAAQ,gDAAiD,QAAW,CAAE2rB,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2P,QAC3H,CAAE,KAAQ,gDAAiD,QAAW,CAAC,gDAAkDoa,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAY2P,OAAS,YAAe,SAAUvR,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACzO,CAAE,KAAQ,yCAA0C,QAAW,CAAC,gDAAiD,iBACjH,CAAE,KAAQ,yBAA0B,QAAW,CAAC,yBAA0B,0CAA2C,YAAe,SAAUA,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACzK,CAAE,KAAQ,kBAAmB,QAAW,CAAC,yBAA0B,eAAgB,0BAA2B,YAAe,SAAUsC,GACtHA,EAAG,GAAZ,IAAgBiqB,EAAKjqB,EAAG,GAAIkqB,EAAKlqB,EAAG,GACpC,OAAOgI,EAAc,CAACiiB,GAAKC,EAAGplB,KAAI,SAAU9E,GAC7BA,EAAG,GACd,OADyBA,EAAG,SAKxC,CAAE,KAAQ,kBAAmB,QAAW,IACxC,CAAE,KAAQ,kCAAmC,QAAW,CAAC,UAAYqpB,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QACxH,CAAE,KAAQ,kBAAmB,QAAW,CAAC,kBAAmB,mCAAoC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OACpJ,CAAE,KAAQ,WAAY,QAAW,CAAC,kBAAmB,WAAY,YAAe,SAAUsC,GAClF,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CAACpB,MAGpB,CAAE,KAAQ,2BAA4B,QAAW,CAAEZ,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,aAChH,CAAE,KAAQ,2BAA4B,QAAW,CAAE8a,EAAQlsB,QAAQ4T,IAAI,mBAAqB,CAAEzR,KAAM,mBAAsBuP,kBAC1H,CAAE,KAAQ,WAAY,QAAW,CAAC,4BAA6B,YAAe,SAAU7O,GAEhF,OAAOye,EADEze,EAAG,IACEtD,QAEtB,CAAE,KAAQ,qBAAsB,QAAW,CAAE2sB,EAAQlsB,QAAQ4T,IAAI,WAAa,CAAEzR,KAAM,WAAc4F,SAAW,YAAe,WAAc,OAAO/F,EAAQ+T,gBAC3J,CAAE,KAAQ,qBAAsB,QAAW,CAAEmW,EAAQlsB,QAAQ4T,IAAI,QAAU,CAAEzR,KAAM,QAAW6F,MAAQ,YAAe,WAAc,OAAOhG,EAAQ0S,aAClJ,CAAE,KAAQ,qBAAsB,QAAW,CAAEwX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8F,QAAU,YAAe,WAAc,OAAOjG,EAAQgT,eACxJ,CAAE,KAAQ,qBAAsB,QAAW,CAAEkX,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa+F,QAAU,YAAe,WAAc,OAAOlG,EAAQsS,eACxJ,CAAE,KAAQ,4CAA6C,QAAW,CAAE4X,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUgQ,IAAM,UACzH,CAAE,KAAQ,4BAA6B,QAAW,CAAC,6CAA8C,YAAemP,GAChH,CAAE,KAAQ,4BAA6B,QAAW,GAAI,YAAe,WAAc,OAAO,OAC1F,CAAE,KAAQ,qBAAsB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAagG,OAAS,6BAA8B,YAAe,WAAc,OAAOnG,EAAQyS,eACrL,CAAE,KAAQ,mBAAoB,QAAW,CAAEyX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASgvB,GAAK,sBAAuB,YAAe,SAAUtuB,GACrI,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM5hB,iBAAiByvB,WAAYhpB,SAAU0kB,GAAMJ,EAAOG,MAG3F,CAAE,KAAQ,mBAAoB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASgvB,GAAMjF,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,YAAc,YAAe,SAAUvO,GAC1L,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAM5hB,iBAAiB4G,IAAKuE,KAAMggB,EAAGvtB,OAASmtB,EAAOG,MAGtF,CAAE,KAAQ,4BAA6B,QAAW,GAAI,YAAe,SAAUhqB,GAC9DA,EAAG,GACZ,MAAQ,CACJV,KAAMohB,EAAM5hB,iBAAiByvB,WAC7BnuB,IAAK,CAAE4K,KAAMqe,EAAQlsB,QAAQkT,UAAUrF,KAAMiJ,IAAKoV,EAAQlsB,QAAQkT,UAAU4D,QAIxF,CAAE,KAAQ,4BAA6B,QAAW,CAAC,oBAAqB,YAAewK,GACvF,CAAE,KAAQ,OAAQ,QAAW,CAAC,UAAW,YAAeA,GACxD,CAAE,KAAQ,UAAW,QAAW,CAAC,cAAe,YAAeA,GAC/D,CAAE,KAAQ,UAAW,QAAW,CAAC,cAAe,YAAeA,GAC/D,CAAE,KAAQ,UAAW,QAAW,CAAC,cAAe,YAAeA,GAC/D,CAAE,KAAQ,SAAU,QAAW,CAAC,SAAU,YAAeA,GACzD,CAAE,KAAQ,yBAA0B,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASyhB,KAC9F,CAAE,KAAQ,SAAU,QAAW,CAAC,SAAU,yBAA0B,SAAU,YAAegJ,GAC7F,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAetL,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUwhB,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,QAAS,wBAAyB,SAAU,YAAeiJ,GAC1F,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAetL,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUynB,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,wBAAyB,SAAU,YAAeoD,GACjF,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAe1L,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASoQ,KAC7F,CAAE,KAAQ,wBAAyB,QAAW,CAAE2Z,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASqQ,KAC7F,CAAE,KAAQ,wBAAyB,QAAW,CAAE0Z,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASwQ,KAC7F,CAAE,KAAQ,wBAAyB,QAAW,CAAEuZ,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUsQ,MAC/F,CAAE,KAAQ,wBAAyB,QAAW,CAAEyZ,EAAQlsB,QAAQ4T,IAAI,MAAQ,CAAEzR,KAAM,MAASyQ,KAC7F,CAAE,KAAQ,wBAAyB,QAAW,CAAEsZ,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuQ,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,QAAS,wBAAyB,SAAU,YAAeka,GAC1F,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAetL,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAU+P,MAC/F,CAAE,KAAQ,wBAAyB,QAAW,CAAEga,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiB,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,QAAS,wBAAyB,SAAU,YAAewpB,GAC1F,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAetL,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUuhB,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,QAAS,wBAAyB,SAAU,YAAekJ,GAC1F,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAetL,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAamQ,SACrG,CAAE,KAAQ,QAAS,QAAW,CAAC,QAAS,wBAAyB,SAAU,YAAesa,GAC1F,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAetL,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUgQ,MAC/F,CAAE,KAAQ,wBAAyB,QAAW,CAAE+Z,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUkQ,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,QAAS,wBAAyB,SAAU,YAAeua,GAC1F,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAetL,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiB,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,wBAAyB,SAAU,YAAe4pB,GACjF,CAAE,KAAQ,QAAS,QAAW,CAAC,SAAU,YAAe1L,GACxD,CAAE,KAAQ,wBAAyB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAUiQ,MAC/F,CAAE,KAAQ,QAAS,QAAW,CAAC,QAAS,wBAAyB,SAAU,YAAewa,GAC1F,CAAE,KAAQ,QAAS,QAAW,CAAC,cAAe,YAAetL,GAC7D,CAAE,KAAQ,QAAS,QAAW,CAAC,cAAe,YAAeA,GAC7D,CAAE,KAAQ,QAAS,QAAW,CAAC,eAAgB,YAAeA,GAC9D,CAAE,KAAQ,QAAS,QAAW,CAAC,cAAe,YAAeA,GAC7D,CAAE,KAAQ,QAAS,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,OAASka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,QAAU,YAAe,SAAUpP,GACvL,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GAASA,EAAG,GACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAAS6F,SAAUwD,GAAI8Y,EAAMriB,QAAQ2oB,OAAQ5C,UAAW6F,GAAMJ,EAAOG,MAG5G,CAAE,KAAQ,aAAc,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,YAAc,YAAe,SAAUvO,GACjI,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAASmB,QAASuK,KAAM+f,EAAGttB,OAASmtB,EAAOG,MAGlF,CAAE,KAAQ,aAAc,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,WAAc8a,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa6P,OAAS,QAAUka,EAAQlsB,QAAQ4T,IAAI,UAAY,CAAEzR,KAAM,UAAa8P,QAAU,YAAe,SAAUpP,GACxQ,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IAASA,EAAG,GAChD,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAASyF,QAASiG,KAAM+f,EAAGttB,MAAOgrB,SAAUwC,GAAML,EAAOG,MAGhG,CAAE,KAAQ,cAAe,QAAW,CAAC,qBAAsB,YAAevL,GAC1E,CAAE,KAAQ,cAAe,QAAW,CAAC,sBAAuB,YAAeA,GAC3E,CAAE,KAAQ,oBAAqB,QAAW,CAAE4K,EAAQlsB,QAAQ4T,IAAI,kBAAoB,CAAEzR,KAAM,kBAAqBsP,gBAAkB,YAAe,SAAU5O,GACpJ,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAASsF,QAASnH,MAAOstB,EAAGttB,OAASmtB,EAAOG,MAGnF,CAAE,KAAQ,qBAAsB,QAAW,CAAEX,EAAQlsB,QAAQ4T,IAAI,mBAAqB,CAAEzR,KAAM,mBAAsBuP,iBAAmB,YAAe,SAAU7O,GACxJ,IAAIgqB,EAAKhqB,EAAG,GACZ,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAASsF,QAASnH,MAAOkR,WAAWoc,EAAGttB,QAAUmtB,EAAOG,MAG/F,CAAE,KAAQ,aAAc,QAAW,CAAC,UAAYX,EAAQlsB,QAAQ4T,IAAI,OAAS,CAAEzR,KAAM,OAAU4P,IAAOma,EAAQlsB,QAAQ4T,IAAI,cAAgB,CAAEzR,KAAM,cAAiBiP,YAAc,YAAe,SAAUvO,GAClM,IAAIgqB,EAAKhqB,EAAG,GAAgBkqB,GAAPlqB,EAAG,GAASA,EAAG,IACpC,OAAQiR,EAAS,CAAE3R,KAAMohB,EAAMniB,SAASqB,OAAQ0nB,QAAS0C,EAAIzC,UAAW2C,EAAGxtB,OAASmtB,EAAOG,MAGnG,CAAE,KAAQ,QAAS,QAAW,GAAI,YAAe,WAAc,MAAO,KACtE,CAAE,KAAQ,eAAgB,QAAW,IACrC,CAAE,KAAQ,+BAAgC,QAAW,CAAC,OAASX,EAAQlsB,QAAQ4T,IAAI,SAAW,CAAEzR,KAAM,SAAYwK,QAClH,CAAE,KAAQ,eAAgB,QAAW,CAAC,eAAgB,gCAAiC,YAAe,SAAUpM,GAAK,OAAOA,EAAE,GAAG6sB,OAAO,CAAC7sB,EAAE,OAC3I,CAAE,KAAQ,QAAS,QAAW,CAAC,eAAgB,QAAS,YAAe,SAAUsC,GACzE,IAAIgqB,EAAKhqB,EAAG,GAAIiqB,EAAKjqB,EAAG,GACxB,OAAOgI,EAAcA,EAAc,GAAKgiB,EAAKA,EAAGllB,KAAI,SAAU9E,GAC1D,IAAIqrB,EAAOrrB,EAAG,GAAWA,EAAG,GAC5B,OAAOqrB,KACN,IAAM,CAACpB,OAIxBuE,YAAa,UAEjBtyB,EAAQiB,QAAUktB,G,iCCp2BlB,IAAI7sB,EAAalC,MAAQA,KAAKkC,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBlC,OAAOqC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIxB,KAAKwB,EAAOpC,OAAOa,UAAUC,eAAeC,KAAKqB,EAAGxB,KAAIuB,EAAEvB,GAAKwB,EAAExB,MAC3EuB,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAO3C,KAAK4C,YAAcR,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEtB,UAAkB,OAANuB,EAAapC,OAAOC,OAAOmC,IAAMM,EAAG7B,UAAYuB,EAAEvB,UAAW,IAAI6B,IAZ1C,GAezCgT,EAAY3V,MAAQA,KAAK2V,UAAa,WAStC,OARAA,EAAW1V,OAAO2V,QAAU,SAASlK,GACjC,IAAK,IAAImK,EAAGhJ,EAAI,EAAGT,EAAI2C,UAAUvC,OAAQK,EAAIT,EAAGS,IAE5C,IAAK,IAAIhM,KADTgV,EAAI9G,UAAUlC,GACO5M,OAAOa,UAAUC,eAAeC,KAAK6U,EAAGhV,KACzD6K,EAAE7K,GAAKgV,EAAEhV,IAEjB,OAAO6K,IAEKL,MAAMrL,KAAM+O,YAE5BrC,EAAiB1M,MAAQA,KAAK0M,eAAkB,SAAUC,EAAIC,GAC9D,IAAK,IAAIC,EAAI,EAAGC,EAAKF,EAAKJ,OAAQO,EAAIJ,EAAGH,OAAQK,EAAIC,EAAID,IAAKE,IAC1DJ,EAAGI,GAAKH,EAAKC,GACjB,OAAOF,GAEP1L,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQuyB,sBAAmB,EAC3B,IAAIjO,EAAWjkB,EAAgBW,EAAQ,KACnCwjB,EAAQxjB,EAAQ,KAChBmU,EAAiBnU,EAAQ,IACzBiC,EAAUjC,EAAQ,IAClBsL,EAAatL,EAAQ,KAErBwxB,EAAkBnzB,OAAOozB,OAAO,CAChC,IAAKxvB,EAAQ+T,cACb,IAAK/T,EAAQ0S,WACb,IAAK1S,EAAQgT,aACb,IAAKhT,EAAQsS,aACbmd,EAAGzvB,EAAQyS,eAGXid,EAAyB,CAAC,EAAG,IAQ7BJ,EAAkC,SAAU3uB,GAE5C,SAAS2uB,EAAiB/X,EAAQ1W,GAC9B,IAAkCE,QAAlB,IAAPF,EAAgB,GAAKA,GAAwBE,eAClD2E,EAAQ/E,EAAOxD,KAAKhB,OAASA,KASjC,OARAuJ,EAAM6R,OAASA,EAEf7R,EAAMiqB,SAAW,GAEjBjqB,EAAMkqB,YAAc,KAEpBlqB,EAAMmqB,WAAa,GACnBnqB,EAAM3E,eAAiBA,EAChB2E,EA+1BX,OA32BArH,EAAUixB,EAAkB3uB,GAc5B2uB,EAAiBryB,UAAUwO,IAAM,WAC7BtP,KAAKgmB,YAAYhmB,KAAKob,SAE1B+X,EAAiBryB,UAAUklB,YAAc,SAAU5K,GAC/Cpb,KAAK2zB,kBAEL3zB,KAAKwzB,SAAW,GAChBpY,EAAOgU,KAAK9P,QAAQtf,KAAK4zB,SAASnX,KAAKzc,OAEvCob,EAAOZ,MAAM8E,QAAQtf,KAAK6zB,eAAepX,KAAKzc,OAC9CA,KAAKyzB,YAAc,KACnBrY,EAAOyB,aAAe,GACtBzB,EAAO8B,cAAgB,GACvB9B,EAAO0Y,OAAS9zB,KAAK+zB,UAAU3Y,EAAOiC,OACtCrd,KAAKqJ,UAAU+R,EAAOiC,OACtBrd,KAAKqJ,UAAU+R,EAAOZ,QAE1B2Y,EAAiBryB,UAAU+yB,eAAiB,SAAUhvB,GAClD,IAAI0E,EAAQvJ,KACZ6E,EAAK6Y,aAAe7Y,EAAK4qB,OAAOjmB,KAAI,SAAUwqB,GAAS,MAAQ,CAC3DrlB,KAAMqlB,EAAMrlB,KACZuP,QAASnI,EAAe+G,QAAQ0P,IAChCviB,SAAUV,EAAM0qB,6BAA6BD,GAC7C3G,SAAUtX,EAAeuX,SAASC,UAEtC1oB,EAAKgY,aAAe,GAChBuI,EAAMzhB,oBAAoBkB,KACrBA,EAAKuR,iBACNvR,EAAKuR,eAAiBpW,KAAKk0B,2BAA2BrvB,EAAK8J,OAE/D9J,EAAKgY,aAAapQ,KAAK,CACnBkC,KAAM9J,EAAK8J,KACXuP,QAASnI,EAAe+G,QAAQC,IAChC9S,SAAUpF,EAAKuR,eACfiX,SAAUtX,EAAeuX,SAASC,SAG1C1oB,EAAKivB,OAAS9zB,KAAK+zB,UAAUlvB,EAAKwY,QAEtC8V,EAAiBryB,UAAUizB,UAAY,SAAU1W,GAE7C,IADA,IAAI8W,EAAc,GACTrlB,EAAK,EAAGslB,EAAU/W,EAAOvO,EAAKslB,EAAQ5nB,OAAQsC,IAAM,CACzD,IAAIuM,EAAO+Y,EAAQtlB,GACfuM,EAAKrX,OAASohB,EAAM1hB,SAAS2B,QAG7B8uB,EAAY9Y,EAAKxP,QACjB7L,KAAKyJ,WAAW,UAAa4R,EAAKxP,MAAQ,6BAAgCsoB,EAAY9Y,EAAKxP,OAAO6D,KAAM2L,GAE5G8Y,EAAY9Y,EAAKxP,OAASwP,EAAKvW,KAEnC,OAAO7E,OAAOqjB,KAAK6Q,IAGvBhB,EAAiBryB,UAAU8yB,SAAW,SAAUS,GAC5C,IAAI3vB,EACJ,IAAI2vB,EAAIpqB,SAAR,CAIA,IAAIqqB,EAAct0B,KAAKwzB,SAAS1iB,QAAQujB,GACxC,GAAIC,GAAe,EAAG,CAClB,IAAIC,EAAc7nB,EAAcA,EAAc,GAAI1M,KAAKwzB,SAASnR,MAAMiS,IAAe,CAACD,IACtFr0B,KAAKyJ,WAAW,2CACZ8qB,EAAY/qB,KAAI,SAAU9E,GAEtB,OADWA,EAAGiK,QAEfoC,KAAK,QAASsjB,GAGzBr0B,KAAKwzB,SAAS/mB,KAAK4nB,GAMnB,IALA,IAAIpqB,EAAW,CACXjG,KAAMH,EAAQ8F,SAASS,IACvBuE,KAAM0lB,EAAI1lB,KACV6R,WAAY,IAEP1R,EAAK,EAAGnK,EAAK0vB,EAAInE,eAAgBphB,EAAKnK,EAAG6H,OAAQsC,IAAM,CAC5D,IAAI8J,EAAKjU,EAAGmK,GAAKmd,EAAYrT,EAAGjK,KAAM1K,EAAW2U,EAAG3U,SAChDuwB,OAAgB,EACpB,OAAQvwB,EAASD,MACb,KAAKohB,EAAM5hB,iBAAiByvB,WACxBuB,EACiC,QAA5B9vB,EAAKT,EAASgG,gBAA6B,IAAPvF,EAAgBA,EAAK1E,KAAKk0B,2BAA2BjI,GAC9F,MACJ,KAAK7G,EAAM5hB,iBAAiB4G,IACxB,IAAIqqB,EAAWz0B,KAAK00B,iBAAiBzwB,EAAUA,EAAS0K,MACxD3O,KAAK4zB,SAASa,GACdD,EAAgBC,EAASxqB,SACzB,MACJ,QACIjK,KAAKyJ,WAAW,0BAA4BN,KAAKC,UAAUnF,GAAWA,GAE9EgG,EAASuW,WAAW/T,KAAK,CAAEkC,KAAMsd,EAAWhiB,SAAUuqB,IAE1DH,EAAIpqB,SAAWA,IAEnBkpB,EAAiBryB,UAAUsE,UAAY,SAAUP,GAC7C7E,KAAKyzB,YAAc5uB,EACnB7E,KAAKqJ,UAAUxE,EAAKwY,OACpBrd,KAAKyzB,YAAc,MAEvBN,EAAiBryB,UAAUwE,eAAiB,SAAUT,KACtDsuB,EAAiBryB,UAAU0E,aAAe,SAAUX,GAC5CA,EAAKqiB,UAAY9B,EAAM3hB,QAAQ4rB,QAAWrvB,KAAKyzB,aAC/CzzB,KAAKyJ,WAAW,wDAAyD5E,GAE7E,IAAK,IAAIiK,EAAK,EAAGpK,EAAKG,EAAKmiB,SAAUlY,EAAKpK,EAAG8H,OAAQsC,IAAM,CACvD,IAAImY,EAAUviB,EAAGoK,GACb7E,EAAWjK,KAAKi0B,6BAA6BhN,GAC7C0N,EAAiB30B,KAAKyd,aAAawJ,EAAQtY,MAC/C,GAAIgmB,EACIA,EAAetH,WAAatX,EAAeuX,SAASC,MACpDvtB,KAAKyJ,WAAW,6CAAgDwd,EAAQtY,KAAO,IAAM9J,GAEhF8vB,EAAetH,WAAatX,EAAeuX,SAASE,QACzD3oB,EAAKqiB,UAAY9B,EAAM3hB,QAAQ0jB,QAC7BtjB,EAAQ+f,yBAAyB3Z,EAAU0qB,EAAe1qB,WACvDpG,EAAQmX,QAAQ/Q,IACbpG,EAAQmX,QAAQ2Z,EAAe1qB,WAC/BpG,EAAQ+f,yBAAyB3Z,EAAS0V,gBAAiBgV,EAAe1qB,SAAS0V,kBAC3F3f,KAAKyJ,WAAW,8CAAiDwd,EAAQtY,KAAO,IAAM9J,GAE1FoiB,EAAQhJ,OAAS0W,MAEhB,CACD,IAAI1W,OAAS,EACb,OAAQpZ,EAAKqiB,SACT,KAAK9B,EAAM3hB,QAAQ0jB,OAGf,IAAIyN,EAAoB7e,EAAe0H,aAAazd,KAAKob,OAAOyB,aAAcoK,EAAQtY,MAClFimB,GACA3W,EAAS2W,EACT50B,KAAKob,OAAOyB,aAAaoF,OAAOjiB,KAAKob,OAAOyB,aAAa/L,QAAQ8jB,GAAoB,GACrF3W,EAAOoP,SAAWtX,EAAeuX,SAASE,QAG1CvP,EAAS,CACLtP,KAAMsY,EAAQtY,KACduP,QAASnI,EAAe+G,QAAQC,IAChC9S,SAAUA,EACVojB,SAAUtX,EAAeuX,SAASE,QAG1CxtB,KAAKob,OAAO8B,cAAczQ,KAAKwR,GAC/B,MACJ,KAAKmH,EAAM3hB,QAAQ8pB,MACftP,EAASje,KAAK60B,qBAAqB,CAC/BlmB,KAAMsY,EAAQtY,KACd1E,SAAUA,IAEdjK,KAAK80B,eAAe7W,GACpB,MACJ,KAAKmH,EAAM3hB,QAAQ4rB,OACfpR,EAAS,CACLtP,KAAMsY,EAAQtY,KACduP,QAASnI,EAAe+G,QAAQc,WAChC3T,SAAUA,EACVojB,SAAUtX,EAAeuX,SAASC,OAEtCvtB,KAAK80B,eAAe7W,GACpB,MACJ,QACIje,KAAKyJ,WAAW,oBAAsBN,KAAKC,UAAUvE,EAAKqiB,SAAUriB,GAE5EoiB,EAAQhJ,OAASA,KAI7BkV,EAAiBryB,UAAU4E,gBAAkB,SAAUb,GACnD7E,KAAK+E,OAAOF,EAAK4iB,YACjBznB,KAAK+E,OAAOF,EAAK8iB,WACjB,IAAI8F,EAAiB5oB,EAAK4iB,WAAWxd,SACjCyjB,EAAgB7oB,EAAK8iB,UAAU1d,SAC9BpG,EAAQ+f,yBAAyB6J,EAAgBC,IAClD1tB,KAAKyJ,WAAW,iBAAmB5F,EAAQ8f,aAAa+J,GAAxC,aACH7pB,EAAQ8f,aAAa8J,GAAkB,YAAc5oB,IAG1EsuB,EAAiBryB,UAAU8E,eAAiB,SAAUf,GAClD,IAAK,IAAIiK,EAAK,EAAGpK,EAAKG,EAAKgjB,UAAW/Y,EAAKpK,EAAG8H,OAAQsC,IAAM,CACxD,IAAIgZ,EAAWpjB,EAAGoK,GAClB9O,KAAK+E,OAAO+iB,EAASH,WACrB,IAAIgN,EAAiB30B,KAAKyd,aAAaqK,EAASnZ,MAC5CgmB,IACIA,EAAetH,WAAatX,EAAeuX,SAASC,MACpDvtB,KAAKyJ,WAAW,6CAAgDqe,EAASnZ,KAAO,IAAM9J,GAEjF8vB,EAAetH,WAAatX,EAAeuX,SAASE,QACxDxtB,KAAKyzB,aACNzzB,KAAKyJ,WAAW,8CAAiDqe,EAASnZ,KAAO,IAAM9J,IAG/F,IAAIkwB,EAAc,CACdpmB,KAAMmZ,EAASnZ,KACfuP,QAASnI,EAAe+G,QAAQnX,MAChCsE,SAAU6d,EAASH,UAAU1d,UAEjC,GAAIjK,KAAKyzB,YAAa,CAClB,IAAIxV,EAAStI,EAASA,EAAS,GAAIof,GAAc,CAAE1H,SAAUtX,EAAeuX,SAASC,QACrFvtB,KAAK80B,eAAe7W,GACpB6J,EAAS7J,OAASA,MAEjB,CACGA,EAAStI,EAASA,EAAS,GAAIof,GAAc,CAAE1H,SAAUtX,EAAeuX,SAASE,SACrFxtB,KAAKob,OAAO8B,cAAczQ,KAAKwR,GAC/B6J,EAAS7J,OAASA,KAI9BkV,EAAiBryB,UAAUgF,cAAgB,SAAUjB,GACjD,IAAIH,EACJG,EAAKka,UAAY/e,KAAKg1B,mBAAmBnwB,EAAkC,QAA3BH,EAAK1E,KAAKyzB,mBAAgC,IAAP/uB,EAAgBA,EAAK1E,KAAKob,OAAQvW,EAAKka,YAE9HoU,EAAiBryB,UAAUm0B,mBAAqB,WAE5C,IADA,IAAIC,EAAQ,GACHpmB,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpComB,EAAMpmB,GAAMC,UAAUD,GAE1B,IAAK,IAAIpK,EAAK,EAAGywB,EAAUD,EAAOxwB,EAAKywB,EAAQ3oB,OAAQ9H,IAAM,CACzD,IAAIP,EAAOgxB,EAAQzwB,GACnB1E,KAAK+E,OAAOZ,GACPN,EAAQwO,UAAUlO,EAAK8F,WACxBjK,KAAKyJ,WAAW,oCAAsC5F,EAAQ8f,aAAaxf,EAAK8F,UAAY,IAAK9F,KAI7GgvB,EAAiBryB,UAAUs0B,0BAA4B,WAEnD,IADA,IAAIF,EAAQ,GACHpmB,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpComB,EAAMpmB,GAAMC,UAAUD,GAE1B,IAAK,IAAIpK,EAAK,EAAG2wB,EAAUH,EAAOxwB,EAAK2wB,EAAQ7oB,OAAQ9H,IAAM,CACzD,IAAIP,EAAOkxB,EAAQ3wB,GACnB1E,KAAK+E,OAAOZ,GACPN,EAAQsG,iBAAiBhG,EAAK8F,WAC/BjK,KAAKyJ,WAAW,kDAAoDtF,EAAK8F,SAASjG,KAAMG,KAIpGgvB,EAAiBryB,UAAUkF,YAAc,SAAUnB,GAC/C,IAAK,IAAIiK,EAAK,EAAGpK,EAAKG,EAAKokB,WAAYna,EAAKpK,EAAG8H,OAAQsC,IAAM,CACzD,IAAInK,EAAKD,EAAGoK,GAAKqZ,EAAWxjB,EAAGwjB,SAAU9K,EAAQ1Y,EAAG0Y,MACpDrd,KAAKi1B,mBAAmB9M,GACxBnoB,KAAKqJ,UAAUgU,GAEfxY,EAAKqkB,YACLlpB,KAAKqJ,UAAUxE,EAAKqkB,WAAW7L,QAGvC8V,EAAiBryB,UAAUoF,gBAAkB,SAAUrB,GACnD7E,KAAK+E,OAAOF,EAAK0jB,UACjB,IAAK,IAAIzZ,EAAK,EAAGpK,EAAKG,EAAKokB,WAAYna,EAAKpK,EAAG8H,OAAQsC,IAAM,CAEzD,IADA,IAAInK,EAAKD,EAAGoK,GAAK2Z,EAAY9jB,EAAG8jB,UAAWpL,EAAQ1Y,EAAG0Y,MAC7CzE,EAAK,EAAG0c,EAAc7M,EAAW7P,EAAK0c,EAAY9oB,OAAQoM,IAAM,CACrE,IAAIuP,EAAWmN,EAAY1c,GACvBsc,EAAQ,GACZ,OAAQ/M,EAASnkB,MACb,KAAKohB,EAAM9hB,aAAawM,MACpBolB,EAAMzoB,KAAK0b,EAASR,WACpB,MACJ,KAAKvC,EAAM9hB,aAAaolB,MACpBwM,EAAMzoB,KAAK0b,EAASQ,eAAgBR,EAASS,gBAC7C,MACJ,KAAKxD,EAAM9hB,aAAaulB,KACpBqM,EAAMzoB,KAAK0b,EAASW,WACpB,MACJ,QACI9oB,KAAKyJ,WAAW,iCAAmCN,KAAKC,UAAU+e,GAAWtjB,GAErF7E,KAAKqJ,UAAU6rB,GACf,IAAK,IAAIxQ,EAAK,EAAG6Q,EAAUL,EAAOxQ,EAAK6Q,EAAQ/oB,OAAQkY,IAAM,CACzD,IAAIvgB,EAAOoxB,EAAQ7Q,GACd7gB,EAAQkX,2BAA2BlW,EAAK0jB,SAASte,SAAU9F,EAAK8F,WACjEjK,KAAKyJ,WAAW,iEACG5F,EAAQ8f,aAAa9e,EAAK0jB,SAASte,UADtC,SAEFpG,EAAQ8f,aAAaxf,EAAK8F,UAAY9F,IAIhEnE,KAAKqJ,UAAUgU,GAEfxY,EAAKqkB,YACLlpB,KAAKqJ,UAAUxE,EAAKqkB,WAAW7L,QAGvC8V,EAAiBryB,UAAUsF,kBAAoB,SAAUvB,GACrD7E,KAAKi1B,mBAAmBpwB,EAAKsjB,UAC7BnoB,KAAKqJ,UAAUxE,EAAKwY,QAExB8V,EAAiBryB,UAAUwF,oBAAsB,SAAUzB,GACvD7E,KAAKqJ,UAAUxE,EAAKwY,QAExB8V,EAAiBryB,UAAU0F,kBAAoB,SAAU3B,KACzDsuB,EAAiBryB,UAAU4F,aAAe,SAAU7B,GAChD7E,KAAKi1B,mBAAmB5pB,MAAMrL,KAAM0M,EAAc,CAAC7H,EAAKulB,YACpDvlB,EAAKwlB,UACLxlB,EAAK0lB,SAAW1lB,EAAKylB,SAAW,CAACzlB,EAAKylB,UAAY,MAE1D6I,EAAiBryB,UAAU8F,cAAgB,SAAU/B,GACjD7E,KAAKi1B,mBAAmB5pB,MAAMrL,KAAM6E,EAAK4lB,eAE7C0I,EAAiBryB,UAAUgG,iBAAmB,SAAUjC,KACxDsuB,EAAiBryB,UAAUkG,eAAiB,SAAUnC,GAClD,IAAIH,EACJG,EAAKka,UAAY/e,KAAKg1B,mBAAmBnwB,EAAkC,QAA3BH,EAAK1E,KAAKyzB,mBAAgC,IAAP/uB,EAAgBA,EAAK1E,KAAKob,OAAQvW,EAAKka,YAE9HoU,EAAiBryB,UAAUoG,gBAAkB,SAAUrC,GACnD,IAAIH,EACAG,EAAKka,YACLla,EAAKka,UAAY/e,KAAKg1B,mBAAmBnwB,EAAkC,QAA3BH,EAAK1E,KAAKyzB,mBAAgC,IAAP/uB,EAAgBA,EAAK1E,KAAKob,OAAQvW,EAAKka,aAGlIoU,EAAiBryB,UAAUsG,cAAgB,SAAUvC,GACjD7E,KAAKqJ,UAAUxE,EAAKunB,UACpB,IAAIoJ,EAAcx1B,KAAKy1B,UAAU5wB,EAAK8J,KAAM9J,EAAKunB,SAAS5iB,KAAI,SAAU9E,GAEpE,OADeA,EAAGuF,eAGjBurB,GACAA,EAAYE,UAAY7xB,EAAQ6f,YAAYoJ,QACzC0I,EAAY1xB,KAAKE,OAASH,EAAQmB,SAASC,MAC/CjF,KAAKyJ,WAAW5F,EAAQ8Z,aAAa9Z,EAAQmB,SAASC,KAAO,gBAAmBJ,EAAK8J,KAAO,IAAM9J,GAEtG7E,KAAK6qB,cAAc2K,EAAa3wB,IAEpCsuB,EAAiBryB,UAAUwG,kBAAoB,SAAUzC,GAChD7E,KAAKyzB,aAAezzB,KAAKyzB,YAAYzvB,OAASa,EAAKkf,UACpD/jB,KAAKyJ,WAAW,0CAA4C5F,EAAQ8Z,aAAa9Y,EAAKkf,UAAWlf,IAGzGsuB,EAAiBryB,UAAU0G,aAAe,SAAU3C,KACpDsuB,EAAiBryB,UAAU4G,cAAgB,SAAU7C,GACjD7E,KAAK+E,OAAOF,EAAKkmB,UACjB/qB,KAAK+E,OAAOF,EAAKikB,WACZjlB,EAAQ+f,yBAAyB/e,EAAKkmB,SAAS9gB,SAAUpF,EAAKikB,UAAU7e,WACzEjK,KAAKyJ,WAAW,iBAAmB5F,EAAQ8f,aAAa9e,EAAKkmB,SAAS9gB,UAAtD,oBACUpG,EAAQ8f,aAAa9e,EAAKikB,UAAU7e,UAAY,YAAcpF,IAGhGsuB,EAAiBryB,UAAU8G,eAAiB,SAAU/C,GAC9CA,EAAKmmB,aACLhrB,KAAK+E,OAAOF,EAAKmmB,YACZnnB,EAAQuO,SAASvN,EAAKmmB,WAAW/gB,WAClCjK,KAAKyJ,WAAW,kDACF5F,EAAQ8f,aAAa9e,EAAKmmB,WAAW/gB,UAAYpF,EAAKmmB,aAG5E,IAAK,IAAIlc,EAAK,EAAGpK,EAAKG,EAAKgK,KAAMC,EAAKpK,EAAG8H,OAAQsC,IAAM,CACnD,IAAImC,EAAMvM,EAAGoK,GACM,kBAARmC,GAGXjR,KAAKo1B,0BAA0BnkB,KAGvCkiB,EAAiBryB,UAAUgH,eAAiB,SAAUjD,GAClD,OAAQA,EAAKomB,WACT,KAAK7F,EAAMjiB,UAAU+nB,UACjBlrB,KAAKo1B,0BAA0B/pB,MAAMrL,KAAM6E,EAAKsmB,aAChD,MACJ,KAAK/F,EAAMjiB,UAAUioB,KACe,IAA5BvmB,EAAKsmB,YAAY3e,QACjBxM,KAAKyJ,WAAW,4DACF5E,EAAKsmB,YAAY3e,OAAS3H,GAE5C7E,KAAK+E,OAAOF,EAAKsmB,YAAY,IACxBtnB,EAAQuO,SAASvN,EAAKsmB,YAAY,GAAGlhB,WACtCjK,KAAKyJ,WAAW,2DAA6D5E,EAAKsmB,YAAY,GAAGlhB,SAASjG,KAAMa,EAAKsmB,YAAY,IAErI,MACJ,QACInrB,KAAKyJ,WAAW,uBAAyBN,KAAKC,UAAUvE,EAAKomB,WAAYpmB,KAGrFsuB,EAAiBryB,UAAUkH,iBAAmB,SAAUnD,GAChD7E,KAAKyzB,aACLzzB,KAAKyJ,WAAW,sDAAuD5E,GAe3E,IAbA,IAAIwZ,EAAU,SAAUsX,GACpB,IAAIhxB,EAAK,CACLgxB,EAAMnD,UAAUpf,cAChBuiB,EAAMlD,UAAUrf,eACjBof,EAAY7tB,EAAG,GAAI8tB,EAAY9tB,EAAG,GAChC,CAAC6tB,EAAWC,GAAW5X,OAAM,SAAUha,GAAK,OAAOA,EAAEoN,MAAM,YAAcukB,EAAYC,MACtFnU,EAAO7U,WAAW,wBAAyBksB,GAE/C,IAAK,IAAIne,EAAIgb,EAAU/P,WAAW,GAAIjL,GAAKib,EAAUhQ,WAAW,KAAMjL,EAClE8G,EAAOoV,WAAWhxB,OAAOkzB,aAAape,IAAM3S,EAAKoF,UAGrDqU,EAASte,KACJ8O,EAAK,EAAGpK,EAAKG,EAAKstB,OAAQrjB,EAAKpK,EAAG8H,OAAQsC,IAAM,CAErDuP,EADY3Z,EAAGoK,MAIvBqkB,EAAiBryB,UAAUoH,cAAgB,SAAUrD,GAC7C7E,KAAKyzB,aACLzzB,KAAKyJ,WAAW,yCAA0C5E,IAGlEsuB,EAAiBryB,UAAUsH,cAAgB,SAAUvD,GACjB,IAA5BA,EAAKsmB,YAAY3e,QACjBxM,KAAKyJ,WAAW,uBAAwB5E,GAE5C,IAAK,IAAIiK,EAAK,EAAGpK,EAAKG,EAAKsmB,YAAarc,EAAKpK,EAAG8H,OAAQsC,IAAM,CAC1D,IAAI2Y,EAAa/iB,EAAGoK,GACpB9O,KAAK+E,OAAO0iB,GACP5jB,EAAQsG,iBAAiBsd,EAAWxd,WACrCjK,KAAKyJ,WAAW,4DACD5F,EAAQ8f,aAAa8D,EAAWxd,UAAY,IAAMwd,KAI7E0L,EAAiBryB,UAAUwH,iBAAmB,SAAUzD,GAChDA,EAAKka,YACLla,EAAKka,UAAY/e,KAAKg1B,mBAAmBnwB,EAAM7E,KAAKob,OAAQvW,EAAKka,aAGzEoU,EAAiBryB,UAAU0H,iBAAmB,SAAU3D,GAC1B,kBAAfA,EAAKzD,MACZyD,EAAKoF,SAAWpG,EAAQyS,aAEG,kBAAfzR,EAAKzD,MAEjByD,EAAKoF,SAAWpG,EAAQgT,aAGxB7W,KAAKyJ,WAAW,iDAAmD5E,EAAKzD,MAAOyD,IAGvFsuB,EAAiBryB,UAAU2H,gBAAkB,SAAU5D,GACnD,IAAIH,EACAC,EACAsZ,EAASje,KAAKyd,aAAa5Y,EAAK8J,MACpC,IAAKsP,EAAQ,CAGT,GADWje,KAAK61B,SAAShxB,EAAK8J,KAAM,IAC1B,CACN,IAAImnB,EAAa,CACb9xB,KAAMohB,EAAMniB,SAASyF,QACrBiG,KAAM9J,EAAK8J,KACXyd,SAAU,GACVtnB,IAAKD,EAAKC,KAId,OAFA9E,KAAK+E,OAAO+wB,QACZ71B,OAAO2V,OAAO/Q,EAAMixB,GAGxB7X,EAASje,KAAK60B,qBAAqB,CAC/BlmB,KAAM9J,EAAK8J,KAIX1E,SAAmC,QAAxBtF,EAAKE,EAAKoF,gBAA6B,IAAPtF,EAAgBA,EAAK3E,KAAKk0B,2BAA2BrvB,EAAK8J,QAEzG3O,KAAK80B,eAAe7W,GAExBvZ,EAAK,CAACuZ,EAAOhU,SAAUgU,GAASpZ,EAAKoF,SAAWvF,EAAG,GAAIG,EAAKoZ,OAASvZ,EAAG,IAE5EyuB,EAAiBryB,UAAU6H,gBAAkB,SAAU9D,GACnD7E,KAAKqJ,UAAUxE,EAAKunB,UAEpB,IAAI2J,EAAa/1B,KAAK61B,SAAShxB,EAAK8J,KAAM9J,EAAKunB,SAAS5iB,KAAI,SAAU9E,GAElE,OADeA,EAAGuF,aAGtB,GAAI8rB,EAOA,OANIA,EAAWL,UAAY7xB,EAAQ6f,YAAYoJ,QAC1C1H,EAAMzhB,oBAAoBoyB,EAAWjyB,OACtC9D,KAAKyJ,WAAW,KAAO5F,EAAQ8Z,aAAaoY,EAAWjyB,KAAKE,MAAQ,sCAAyCa,EAAK8J,KAAO,IAAM9J,GAEnI7E,KAAK6qB,cAAckL,EAAYlxB,QAC/BA,EAAKoF,SAAW8rB,EAAW3f,gBAI/B,IAAI4f,EAAgB,CAChBhyB,KAAMohB,EAAMniB,SAASoB,UACrBsnB,UAAW,CACP3nB,KAAMohB,EAAMniB,SAASmB,QACrBuK,KAAM9J,EAAK8J,KACX7J,IAAKD,EAAKC,KAEd8mB,WAAY/mB,EAAKunB,SACjBtnB,IAAKD,EAAKC,KAEd9E,KAAK+E,OAAOixB,GACZ/1B,OAAO2V,OAAO/Q,EAAMmxB,IAExB7C,EAAiBryB,UAAU+H,kBAAoB,SAAUhE,GACrD,IAAI0E,EAAQvJ,KACZA,KAAK+E,OAAOF,EAAKkmB,UACjB/qB,KAAK+E,OAAOF,EAAKikB,WACjB,IAAImN,EAAepxB,EAAKkmB,SAAS9gB,SAC7BisB,EAAgBrxB,EAAKikB,UAAU7e,SAC/B4H,EAAe,0BAA4BhN,EAAKyH,GAAK,cACpDzI,EAAQ8f,aAAasS,GAAgB,QAAUpyB,EAAQ8f,aAAauS,GACrEC,EAAyB,WACnBtyB,EAAQwO,UAAU4jB,IAAiBpyB,EAAQwO,UAAU6jB,IACvD3sB,EAAME,WAAWoI,EAAchN,IAGnCuxB,EAAwB,WACxBvxB,EAAKoF,SAAWV,EAAM8sB,mBAAmBJ,EAAcC,IAE3D,OAAQrxB,EAAKyH,IACT,KAAK8Y,EAAMpiB,SAAS+Q,IACZlQ,EAAQuO,SAAS6jB,IAAiBpyB,EAAQuO,SAAS8jB,GACnDrxB,EAAKoF,SAAWpG,EAAQyS,cAGxB6f,IACAC,KAEJ,MACJ,KAAKhR,EAAMpiB,SAASiC,IACpB,KAAKmgB,EAAMpiB,SAASgR,IACpB,KAAKoR,EAAMpiB,SAASiR,IACpB,KAAKmR,EAAMpiB,SAASmR,OACpB,KAAKiR,EAAMpiB,SAASuiB,IAChB4Q,IACAC,IACA,MACJ,KAAKhR,EAAMpiB,SAASkR,IAChBiiB,IACAtxB,EAAKoF,SAAWjK,KAAKq2B,mBAAmBJ,EAAcC,EAAeryB,EAAQgT,cAC7E,MACJ,KAAKuO,EAAMpiB,SAASwiB,IACpB,KAAKJ,EAAMpiB,SAASyiB,GAChB0Q,IACAtxB,EAAKoF,SAAWpG,EAAQ+T,cACxB,MACJ,KAAKwN,EAAMpiB,SAASoR,GACpB,KAAKgR,EAAMpiB,SAASqR,GACpB,KAAK+Q,EAAMpiB,SAASwR,GACpB,KAAK4Q,EAAMpiB,SAASsR,IACpB,KAAK8Q,EAAMpiB,SAASyR,GACpB,KAAK2Q,EAAMpiB,SAASuR,IACX1Q,EAAQkX,2BAA2Bkb,EAAcC,IAClDl2B,KAAKyJ,WAAWoI,EAAchN,GAElCA,EAAKoF,SAAWpG,EAAQ+T,cACxB,MACJ,QACI5X,KAAKyJ,WAAW,oBAAsB5E,EAAKyH,GAAIzH,KAG3DsuB,EAAiBryB,UAAUiI,iBAAmB,SAAUlE,GACpD7E,KAAK+E,OAAOF,EAAKikB,WACjB,IAAIoN,EAAgBrxB,EAAKikB,UAAU7e,SACnC,OAAQpF,EAAKyH,IACT,KAAK8Y,EAAMriB,QAAQyoB,IACfxrB,KAAKi1B,mBAAmBpwB,EAAKikB,WAC7BjkB,EAAKoF,SAAWisB,EAChB,MACJ,KAAK9Q,EAAMriB,QAAQ0oB,IACfzrB,KAAKi1B,mBAAmBpwB,EAAKikB,WAC7BjkB,EAAKoF,SAAWpG,EAAQ+T,cACxB,MACJ,KAAKwN,EAAMriB,QAAQ2oB,OACf7mB,EAAKoF,SAAWisB,EAChB,MACJ,QACIl2B,KAAKyJ,WAAW,oBAAsB5E,EAAKyH,GAAIzH,KAG3DsuB,EAAiBryB,UAAUkI,mBAAqB,SAAUnE,GAGtD,GAA+B,IAA3BA,EAAK+mB,WAAWpf,OAGhB,OAFAxM,KAAK+E,OAAOF,EAAK8mB,gBACjB1rB,OAAO2V,OAAO/Q,EAAMA,EAAK8mB,WAG7B3rB,KAAKqJ,UAAUxE,EAAK+mB,YACpB,IAAK,IAAI/e,EAAI,EAAGA,EAAIhI,EAAK+mB,WAAWpf,SAAUK,EAAG,CAC7C,IAAIgf,EAAYhnB,EAAK+mB,WAAW/e,GAC3BhJ,EAAQwO,UAAUwZ,EAAU5hB,WAC7BjK,KAAKyJ,WAAW,iBAAmBoD,EAAI,GAAK,iCAAmCgf,EAAU5hB,SAASjG,KAAM6nB,GAKhHhnB,EAAK8mB,UAAU1hB,SAAWpG,EAAQiU,UAAU9X,KAAKk0B,2BAA2BrvB,EAAK8mB,UAAUhd,MAAO9J,EAAK+mB,WAAWpiB,KAAI,WAAc,OAAO+pB,MAC3IvzB,KAAK+E,OAAOF,EAAK8mB,WACjB,IAAInM,EAAgB3a,EAAK8mB,UAAU1hB,SAC9BpG,EAAQmX,QAAQwE,IACjBxf,KAAKyJ,WAAW,wDACF5F,EAAQ8f,aAAa9e,EAAK8mB,UAAU1hB,UAAYpF,EAAK8mB,WAEnEnM,EAAcxH,eAAexL,QAC7BgT,EAAcxH,eAAexL,SAAW3H,EAAK+mB,WAAWpf,QACxDxM,KAAKyJ,WAAW,+CACG+V,EAAcxH,eAAexL,OADhC,SAEF3H,EAAK+mB,WAAWpf,OAAS3H,GAE3CA,EAAKoF,SAAWpF,EAAK8mB,UAAU1hB,SAAS0V,iBAE5CwT,EAAiBryB,UAAUmI,gBAAkB,SAAUpE,GACnD7E,KAAK+E,OAAOF,EAAKmnB,SACjB,IAAIzL,EAAc1b,EAAKmnB,QAAQ/hB,SAC1BpG,EAAQ+c,MAAML,IACfvgB,KAAKyJ,WAAW,wDAA0D5F,EAAQ8f,aAAapD,GAAc1b,GAEjH,IAAI4b,EAAY1K,EAAe0H,aAAa8C,EAAYC,WAAY3b,EAAKonB,WACpExL,GACDzgB,KAAKyJ,WAAW,UAAa5E,EAAKonB,UAAlB,6BACIpoB,EAAQ8f,aAAapD,GAAe,IAAO1b,GAEnEA,EAAKonB,UAAYxL,EAAU9R,KAC3B9J,EAAKoF,SAAWwW,EAAUxW,UAE9BkpB,EAAiBryB,UAAU+pB,cAAgB,SAAUyL,EAAczxB,GAE/D,IAAIqR,EACJ,OAFArR,EAAKynB,aAAe,GAEZgK,EAAaZ,SACjB,KAAK7xB,EAAQ6f,YAAYmJ,QACrB3W,EAAiBogB,EAAatnB,YAAYkH,eAC1C,MACJ,KAAKrS,EAAQ6f,YAAYoJ,OACrB5W,EAAiBogB,EAAaxyB,KAAK4Z,aAAalU,KAAI,SAAU9E,GAE1D,OADeA,EAAGuF,YAGtB,MACJ,QACIjK,KAAKyJ,WAAW,sBAAwBN,KAAKC,UAAUktB,GAAezxB,GAE9EA,EAAKkoB,YAAcuJ,EAAaZ,QAC5Bxf,EAAe1J,SAAW3H,EAAKunB,SAAS5f,QACxCxM,KAAKyJ,WAAW,qCAAwC5E,EAAK8J,KAA7C,eACGuH,EAAe1J,OAAS,SAAW3H,EAAKunB,SAAS5f,OAAS3H,GAEjF,IAAK,IAAIgI,EAAI,EAAGA,EAAIhI,EAAKunB,SAAS5f,SAAUK,EAAG,CAC3C,IAAIiO,EAAgB5E,EAAerJ,GAC/Bwf,EAAUxnB,EAAKunB,SAASvf,GACxB0pB,EAAclK,EAAQpiB,SACtBsiB,EAAkBnH,EAAMliB,UAAUmpB,MAEhCA,EAAQroB,OAASohB,EAAMniB,SAASmB,SAC9BioB,EAAQpO,OAAOC,UAAYnI,EAAe+G,QAAQnX,QAGtD2wB,EAAaZ,UAAY7xB,EAAQ6f,YAAYmJ,SAE7CN,EAIIrH,EAASrjB,QAAQ20B,QAAQ1b,EAAeyb,IACnC1yB,EAAQmX,QAAQF,IACbjX,EAAQmX,QAAQub,IAChBrR,EAASrjB,QAAQ20B,QAAQ1b,EAAc6E,gBAAiB4W,EAAY5W,iBAK5E9b,EAAQ+f,yBAAyB9I,EAAeyb,IAC3C1yB,EAAQmX,QAAQF,IACbjX,EAAQmX,QAAQub,KACf1yB,EAAQ+f,yBAAyB9I,EAAc6E,gBAAiB4W,EAAY5W,kBAEzE2W,EAAaZ,UAAY7xB,EAAQ6f,YAAYmJ,WAG7D7sB,KAAKyJ,WAAW,0BAA4BoD,EAAI,GAAK,iBAAoBhI,EAAK8J,KAA9D,eACG9K,EAAQ8f,aAAa7I,GADxB,SAEFjX,EAAQ8f,aAAa4S,GAAe1xB,GAEtDA,EAAKynB,aAAa7f,KAAK,CAAEqO,cAAeA,EAAeyR,gBAAiBA,MAIhF4G,EAAiBryB,UAAUu1B,mBAAqB,WAE5C,IADA,IAAII,EAAY,GACP3nB,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpC2nB,EAAU3nB,GAAMC,UAAUD,GAE9B,IAAI4nB,EAAQ,CACR,CAAEC,SAAU,CAAC9yB,EAAQ+T,cAAe/T,EAAQ+T,eAAgB1M,OAAQrH,EAAQ+T,eAC5E,CAAE+e,SAAU,CAAC9yB,EAAQ+T,cAAe/T,EAAQ0S,YAAarL,OAAQrH,EAAQ0S,YACzE,CAAEogB,SAAU,CAAC9yB,EAAQ+T,cAAe/T,EAAQgT,cAAe3L,OAAQrH,EAAQgT,cAC3E,CAAE8f,SAAU,CAAC9yB,EAAQ+T,cAAe/T,EAAQsS,cAAejL,OAAQrH,EAAQsS,cAC3E,CAAEwgB,SAAU,CAAC9yB,EAAQ0S,WAAY1S,EAAQ+T,eAAgB1M,OAAQrH,EAAQ0S,YACzE,CAAEogB,SAAU,CAAC9yB,EAAQ0S,WAAY1S,EAAQ0S,YAAarL,OAAQrH,EAAQ0S,YACtE,CAAEogB,SAAU,CAAC9yB,EAAQ0S,WAAY1S,EAAQgT,cAAe3L,OAAQrH,EAAQgT,cACxE,CAAE8f,SAAU,CAAC9yB,EAAQ0S,WAAY1S,EAAQsS,cAAejL,OAAQrH,EAAQsS,cACxE,CAAEwgB,SAAU,CAAC9yB,EAAQgT,aAAchT,EAAQ+T,eAAgB1M,OAAQrH,EAAQgT,cAC3E,CAAE8f,SAAU,CAAC9yB,EAAQgT,aAAchT,EAAQ0S,YAAarL,OAAQrH,EAAQgT,cACxE,CAAE8f,SAAU,CAAC9yB,EAAQgT,aAAchT,EAAQgT,cAAe3L,OAAQrH,EAAQgT,cAC1E,CAAE8f,SAAU,CAAC9yB,EAAQgT,aAAchT,EAAQsS,cAAejL,OAAQrH,EAAQsS,cAC1E,CAAEwgB,SAAU,CAAC9yB,EAAQsS,aAActS,EAAQ+T,eAAgB1M,OAAQrH,EAAQsS,cAC3E,CAAEwgB,SAAU,CAAC9yB,EAAQsS,aAActS,EAAQ0S,YAAarL,OAAQrH,EAAQsS,cACxE,CAAEwgB,SAAU,CAAC9yB,EAAQsS,aAActS,EAAQgT,cAAe3L,OAAQrH,EAAQsS,cAC1E,CAAEwgB,SAAU,CAAC9yB,EAAQsS,aAActS,EAAQsS,cAAejL,OAAQrH,EAAQsS,eAE9E,GAAyB,IAArBsgB,EAAUjqB,OACV,MAAM,IAAItD,MAAM,qBAEpB,IAAKutB,EAAU5b,MAAMhX,EAAQwO,WACzB,MAAM,IAAInJ,MAAM,2BAA6BC,KAAKC,UAAUqtB,IAiBhE,IAfA,IAAIG,EAAiBH,EAAU,GAC3B9L,EAAU,SAAU9d,GACpB,IAAIgqB,EAAeH,EAAMhkB,MAAK,SAAUhO,GACpC,IAAIC,EAAKD,EAAGiyB,SAAUnT,EAAY7e,EAAG,GAAI8e,EAAY9e,EAAG,GACxD,OAAOugB,EAASrjB,QAAQ20B,QAAQhT,EAAWoT,IACvC1R,EAASrjB,QAAQ20B,QAAQ/S,EAAWgT,EAAU5pB,OAEtD,IAAIgqB,EAIA,MAAM,IAAI3tB,MAAM,qCACXrF,EAAQ8f,aAAaiT,GAAkB,QAAU/yB,EAAQ8f,aAAa8S,EAAU5pB,KAJrF+pB,EAAiBC,EAAa3rB,QAO7B2B,EAAI,EAAGA,EAAI4pB,EAAUjqB,SAAUK,EACpC8d,EAAQ9d,GAEZ,OAAO+pB,GAEXzD,EAAiBryB,UAAUg2B,gBAAkB,WAEzC,OAAO92B,KAAKyzB,YACNzzB,KAAKyzB,YAAY5W,aACjB7c,KAAKob,OAAOyB,cAEtBsW,EAAiBryB,UAAU2c,aAAe,SAAU9O,GAChD,IAAIjK,EAAIC,EACJsZ,EAAS,KAIb,OAHIje,KAAKyzB,cACLxV,EAASlI,EAAe0H,aAAazd,KAAKyzB,YAAY/V,aAAc/O,IAE0J,QAAzNhK,EAA0H,QAApHD,EAAgB,OAAXuZ,QAA8B,IAAXA,EAAoBA,EAASlI,EAAe0H,aAAazd,KAAK82B,kBAAmBnoB,UAA0B,IAAPjK,EAAgBA,EAAKqR,EAAe0H,aAAazd,KAAKob,OAAO8B,cAAevO,UAA0B,IAAPhK,EAAgBA,EAAK,MAEnQwuB,EAAiBryB,UAAU+zB,qBAAuB,SAAUhmB,GACxD,OAAO8G,EAASA,EAAS,GAAI9G,GAAO,CAAEqP,QAASle,KAAKyzB,aAAezzB,KAAKyzB,YAAY/D,gBAC1E3Z,EAAe+G,QAAQc,WACvB7H,EAAe+G,QAAQC,IAAKsQ,SAAUtX,EAAeuX,SAASC,SAE5E4F,EAAiBryB,UAAUg0B,eAAiB,WAGxC,IAFA,IAAIpwB,EACAmK,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUvC,OAAQsC,IACpCD,EAAKC,GAAMC,UAAUD,GAEzB,OAAQpK,EAAK1E,KAAK82B,mBAAmBrqB,KAAKpB,MAAM3G,EAAImK,IAExDskB,EAAiBryB,UAAUmzB,6BAA+B,SAAUpvB,GAChE,IAAI8J,EAAO9J,EAAK8J,KAAM1K,EAAWY,EAAKZ,SACtC,OAAQA,EAASD,MACb,KAAKohB,EAAM5hB,iBAAiByvB,WAIxB,OAHKhvB,EAASgG,WACVhG,EAASgG,SAAWjK,KAAKk0B,2BAA2BvlB,IAEjD1K,EAASgG,SACpB,KAAKmb,EAAM5hB,iBAAiBU,MACxB,IAAK,IAAI4K,EAAK,EAAGpK,EAAKT,EAASmjB,mBAAoBtY,EAAKpK,EAAG8H,OAAQsC,IAAM,CACrE,IAAInK,EAAKD,EAAGoK,GAAKwY,EAAa3iB,EAAG2iB,WAAYC,EAAa5iB,EAAG4iB,WACzDwP,EAAWrqB,EAAcA,EAAc,GAAK4a,EAAa,CAACA,GAAc,IAAM,CAACC,IACnFvnB,KAAKqJ,UAAU0tB,GACf,IAAK,IAAIne,EAAK,EAAGoe,EAAaD,EAAUne,EAAKoe,EAAWxqB,OAAQoM,IAAM,CAClE,IAAIqe,EAAUD,EAAWpe,GACpB/U,EAAQwO,UAAU4kB,EAAQhtB,WAC3BjK,KAAKyJ,WAAW,6CAA+CwtB,EAAQhtB,SAASjG,KAAMizB,IAgBlG,OAZIhzB,EAAS+rB,gBACJ5K,EAAM7hB,mBAAmBU,EAAS+rB,kBACnChwB,KAAKyJ,WAAW,+BAAiCN,KAAKC,UAAUnF,EAAS+rB,iBAAkB/rB,EAAS+rB,iBAIxG/rB,EAAS+rB,gBAAkB,CACvBhsB,KAAMohB,EAAM5hB,iBAAiByvB,WAC7BhpB,SAAUjK,KAAKk0B,2BAA2BvlB,GAC1C7J,IAAKb,EAASa,KAGf,CACHd,KAAMH,EAAQ8F,SAASzF,MACvByb,gBAAiB3f,KAAKi0B,6BAA6Bte,EAASA,EAAS,GAAI9Q,GAAO,CAAEZ,SAAUA,EAAS+rB,mBACrGhY,eAAgB/T,EAASmjB,mBAAmB5d,KAAI,WAAc,MAAO,CAAC,EAAG,OAEjF,KAAK4b,EAAM5hB,iBAAiB4G,IAExB,OADUpK,KAAK00B,iBAAiBzwB,EAAUA,EAAS0K,MACxC1E,SACf,QACIjK,KAAKyJ,WAAW,8BAAgCN,KAAKC,UAAUnF,GAAWY,KAGtFsuB,EAAiBryB,UAAUozB,2BAA6B,SAAUvlB,GAC9D,IAAIjK,EACJ,OAA0D,QAAjDA,EAAK0uB,EAAgBzkB,EAAKA,EAAKnC,OAAS,WAAwB,IAAP9H,EAAgBA,EAAK1E,KAAK0zB,WAAW/kB,EAAK,GAAGyE,gBAEnH+f,EAAiBryB,UAAU+0B,SAAW,SAAUlnB,EAAMC,GAClD,IAAI9K,EAAOiS,EAAe0H,aAAazd,KAAKob,OAAOZ,MAAO7L,GAC1D,GAAI7K,EACA,MAAO,CACH4xB,QAAS7xB,EAAQ6f,YAAYoJ,OAC7BhpB,KAAMA,EACNsS,eAAgBgP,EAAMzhB,oBAAoBG,GAAQA,EAAKsS,eAAiB,MAGhF,IAAIpH,EAAc9B,EAAWgC,cAAchC,EAAWiC,YAAaR,EAAMC,EAAc,CAEnF6L,+BAA+B,IAEnC,OAAIzL,EACO,CACH0mB,QAAS7xB,EAAQ6f,YAAYmJ,QAC7B7d,YAAaA,EACboH,eAAgBpH,EAAYoH,gBAG7B,MAEX+c,EAAiBryB,UAAU20B,UAAY,SAAU9mB,EAAMC,GACnD,IAAI9K,EAAOiS,EAAe0H,aAAazd,KAAKob,OAAOZ,MAAO7L,GAC1D,GAAI7K,EACA,MAAO,CACH4xB,QAAS7xB,EAAQ6f,YAAYoJ,OAC7BhpB,KAAMA,GAGd,IAAIkL,EAAc9B,EAAWgC,cAAchC,EAAWkC,aAAcT,EAAMC,EAAc,CAEpF6L,+BAA+B,IAEnC,OAAIzL,EACO,CACH0mB,QAAS7xB,EAAQ6f,YAAYmJ,QAC7B7d,YAAaA,GAGd,MAEXmkB,EAAiBryB,UAAU4zB,iBAAmB,SAAU7vB,EAAM8J,GAC1D,IAAI0lB,EAAMte,EAAe0H,aAAazd,KAAKob,OAAOgU,KAAMzgB,GAIxD,OAHK0lB,GACDr0B,KAAKyJ,WAAW,oBAAuBkF,EAAO,IAAM9J,GAEjDwvB,GAEXlB,EAAiBryB,UAAU6yB,gBAAkB,WACzC,IAAK,IAAInc,EAAI,IAAIiL,WAAW,GAAIjL,GAAK,IAAIiL,WAAW,KAAMjL,EACtDxX,KAAK0zB,WAAWhxB,OAAOkzB,aAAape,IAAM3T,EAAQgT,aAEtD7W,KAAKqJ,UAAU6b,EAASrjB,QAAQq1B,OAAOl3B,KAAKob,OAAOiC,MAAO,CAAC,OAAQ+H,EAAM1hB,SAASqE,aAEtForB,EAAiBryB,UAAUk0B,mBAAqB,SAAUnwB,EAAMsyB,EAAStrB,GACrE,IAAIurB,EAAaD,EAAQrD,OAAOphB,MAAK,SAAU2kB,GAAiB,OAAOA,EAAcjkB,gBAAkBvH,EAAMuH,iBAI7G,OAHKgkB,GACDp3B,KAAKyJ,WAAW,qBAAwBoC,EAAQ,IAAMhH,GAEnDuyB,GAEJjE,EA52B2B,CA62BpC/N,EAAMviB,YACRjC,EAAQuyB,iBAAmBA,EAK3BvyB,EAAQiB,QAJR,SAA6BuZ,EAAQ4H,GAEjC,YADa,IAATA,IAAmBA,EAAO,IACvB,IAAImQ,EAAiB/X,EAAQ4H,GAAM1T,Q,iCC36B9CrP,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQse,YAActe,EAAQ02B,sBAAmB,EACjD,IAAIzzB,EAAUjC,EAAQ,IACtB,SAAS01B,EAAiB5yB,GACdA,EAAG,GAAX,IAAetD,EAAQsD,EAAG,GAC1B,OAAiB,OAAVtD,EAAiB,cAAgBA,EA+B5C,SAASm2B,EAAuBC,EAAMC,GAClC,IAAI/yB,EAAK8yB,EAAK,GAAI9nB,EAAOhL,EAAG,GAAIiU,EAAMjU,EAAG,GAAQ8yB,EAAK,GACtD,MAAM,IAAItuB,MAAM,YAAcrF,EAAQ8f,aAAa8T,GAAnC,SACFH,EAAiBE,GADf,0BAEM9nB,EAAO,IAAMiJ,EAAM,KAjC7C/X,EAAQ02B,iBAAmBA,EA4B3B12B,EAAQse,YA1BR,SAAqBsY,EAAMC,GACfD,EAAK,GAAb,IAAiBp2B,EAAQo2B,EAAK,GAC9B,GAAI3zB,EAAQwO,UAAUolB,GAClB,cAAer2B,GACX,IAAK,SACD,OAAOA,EACX,IAAK,SACD,OAAO,EACX,QACIm2B,EAAuBC,EAAMC,OAGpC,KAAI5zB,EAAQuO,SAASqlB,GAWtB,MAAM,IAAIvuB,MAAM,+BAAiCC,KAAKC,UAAUquB,IAVhE,cAAer2B,GACX,IAAK,SACD,OAAOA,EACX,IAAK,SACD,MAAO,GACX,QACIm2B,EAAuBC,EAAMC,O,iCC5B7C,IAAIv1B,EAAalC,MAAQA,KAAKkC,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBlC,OAAOqC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIxB,KAAKwB,EAAOpC,OAAOa,UAAUC,eAAeC,KAAKqB,EAAGxB,KAAIuB,EAAEvB,GAAKwB,EAAExB,MAC3EuB,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAO3C,KAAK4C,YAAcR,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEtB,UAAkB,OAANuB,EAAapC,OAAOC,OAAOmC,IAAMM,EAAG7B,UAAYuB,EAAEvB,UAAW,IAAI6B,IAZ1C,GAezC0H,EAAarK,MAAQA,KAAKqK,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUzJ,GAAS,IAAM0J,EAAKL,EAAUM,KAAK3J,IAAW,MAAO4J,GAAKJ,EAAOI,IACpF,SAASC,EAAS7J,GAAS,IAAM0J,EAAKL,EAAS,MAAUrJ,IAAW,MAAO4J,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAJlB,IAAe9J,EAIa8J,EAAOC,KAAOR,EAAQO,EAAO9J,QAJ1CA,EAIyD8J,EAAO9J,MAJhDA,aAAiBoJ,EAAIpJ,EAAQ,IAAIoJ,GAAE,SAAUG,GAAWA,EAAQvJ,OAITgK,KAAKP,EAAWI,GAClGH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAAetL,MAAQA,KAAKsL,aAAgB,SAAUhB,EAASiB,GAC/D,IAAsGC,EAAGC,EAAGC,EAAGC,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAOK,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEZ,KAAMkB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOnM,OAAU2L,EACvJ,SAASM,EAAKG,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAId,EAAG,MAAM,IAAI/I,UAAU,mCAC3B,KAAOmJ,GAAG,IACN,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARY,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAeC,EAAID,EAAC,SAAeC,EAAE1K,KAAKyK,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAE1K,KAAKyK,EAAGa,EAAG,KAAKnB,KAAM,OAAOO,EAE3J,OADID,EAAI,EAAGC,IAAGY,EAAK,CAAS,EAARA,EAAG,GAAQZ,EAAEtK,QACzBkL,EAAG,IACP,KAAK,EAAG,KAAK,EAAGZ,EAAIY,EAAI,MACxB,KAAK,EAAc,OAAXV,EAAEC,QAAgB,CAAEzK,MAAOkL,EAAG,GAAInB,MAAM,GAChD,KAAK,EAAGS,EAAEC,QAASJ,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKV,EAAEI,IAAIO,MAAOX,EAAEG,KAAKQ,MAAO,SACxC,QACI,KAAkBb,GAAZA,EAAIE,EAAEG,MAAYS,OAAS,GAAKd,EAAEA,EAAEc,OAAS,MAAkB,IAAVF,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEV,EAAI,EAAG,SACjG,GAAc,IAAVU,EAAG,MAAcZ,GAAMY,EAAG,GAAKZ,EAAE,IAAMY,EAAG,GAAKZ,EAAE,IAAM,CAAEE,EAAEC,MAAQS,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYV,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIA,EAAIY,EAAI,MAC7D,GAAIZ,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CAAEE,EAAEC,MAAQH,EAAE,GAAIE,EAAEI,IAAIS,KAAKH,GAAK,MACvDZ,EAAE,IAAIE,EAAEI,IAAIO,MAChBX,EAAEG,KAAKQ,MAAO,SAEtBD,EAAKf,EAAKvK,KAAKsJ,EAASsB,GAC1B,MAAOZ,GAAKsB,EAAK,CAAC,EAAGtB,GAAIS,EAAI,EAjBrB,QAiBoCD,EAAIE,EAAI,EACtD,GAAY,EAARY,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElL,MAAOkL,EAAG,GAAKA,EAAG,QAAK,EAAQnB,MAAM,GArB9BL,CAAK,CAACsB,EAAGC,OAwBzDpL,EAAmBjB,MAAQA,KAAKiB,iBAAoB,SAAUC,GAC9D,OAAQA,GAAOA,EAAIC,WAAcD,EAAM,CAAE,QAAWA,IAExDjB,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtD,IAAI2f,EAAiB9f,EAAgBW,EAAQ,MACzC81B,EAAgBz2B,EAAgBW,EAAQ,MACxC+1B,EAA+B12B,EAAgBW,EAAQ,MAQvDg2B,EAAsC,SAAUpzB,GAEhD,SAASozB,IACL,OAAkB,OAAXpzB,GAAmBA,EAAO6G,MAAMrL,KAAM+O,YAAc/O,KAqF/D,OAvFAkC,EAAU01B,EAAsBpzB,GAIhCozB,EAAqB92B,UAAUgY,aAAe,SAAUT,EAAG5M,GACvD,OAAOpB,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa7L,KAAKwP,MAAMuR,EAAelf,QAAQg2B,SAASxf,EAAG5M,KAC3E,KAAK,EAED,OADA/G,EAAGoH,OACI,CAAC,WAK5B8rB,EAAqB92B,UAAUyQ,oBAAsB,SAAUumB,GAC3D,OAAOztB,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa7L,KAAKwP,MAAMsoB,EAAkB/W,EAAelf,QAAQk2B,WAAahX,EAAelf,QAAQm2B,aACrH,KAAK,EAED,OADAtzB,EAAGoH,OACI,CAAC,WAK5B8rB,EAAqB92B,UAAUyY,YAAc,WACzC,OAAOlP,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa7L,KAAKwP,MAAMuR,EAAelf,QAAQo2B,cAC/D,KAAK,EAED,OADAvzB,EAAGoH,OACI,CAAC,EAAa9L,KAAK8Y,aAAa,EAAG,IAC9C,KAAK,EAED,OADApU,EAAGoH,OACI,CAAC,WAK5B8rB,EAAqB92B,UAAUgZ,WAAa,SAAUoe,GAClD,OAAO7tB,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa7L,KAAKwP,MAAMkoB,EAAc71B,QAAQq2B,GAAWC,OACzE,KAAK,EAED,OADAzzB,EAAGoH,OACI,CAAC,WAK5B8rB,EAAqB92B,UAAUiZ,WAAa,SAAUme,GAClD,OAAO7tB,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,IAAIo4B,EACJ,OAAO9sB,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAED,OADAusB,EAAc,KAAOF,EAAU,GAAG3gB,cAAgB2gB,EAAU3pB,OAAO,GAC5D,CAAC,EAAavO,KAAKwP,MAAMkoB,EAAc71B,QAAQu2B,GAAaD,OACvE,KAAK,EAED,OADAzzB,EAAGoH,OACI,CAAC,WAK5B8rB,EAAqB92B,UAAUwY,KAAO,WAClC,OAAOjP,EAAUrK,UAAM,OAAQ,GAAQ,WACnC,OAAOsL,EAAYtL,MAAM,SAAU0E,GAC/B,OAAQA,EAAGmH,OACP,KAAK,EAAG,MAAO,CAAC,EAAa7L,KAAKwP,MAAMuR,EAAelf,QAAQyX,OAC/D,KAAK,EAED,OADA5U,EAAGoH,OACI,CAAC,WAM5B8rB,EAAqB92B,UAAUgiB,iBAAmB,SAAUtL,GACxD,IAAI9S,EACJ,OAA0D,QAAlDA,EAAKizB,EAA6B91B,QAAQ2V,UAAuB,IAAP9S,EAAgBA,EAAK8S,GAEpFogB,EAxF+B,CAP1Bh2B,EAAQ,KAgGZL,iBACZX,EAAQiB,QAAU+1B,G,iCC3JlB,IAAIlzB,EAGJ,SAAS2zB,EAAI7gB,GACT,MAAO,QAAYA,EAGvB,SAAS8gB,EAAIlsB,GACT,OAAO1J,OAAOkzB,aAAa,EAAGxpB,GAPlCnM,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IAUtD,IAAIm3B,IAA8B7zB,EAAK,IAChC2zB,EAAI,MAAQC,EAAI,IACnB5zB,EAAG2zB,EAAI,MAAQC,EAAI,IACnB5zB,EAAG2zB,EAAI,MAAQC,EAAI,IACnB5zB,EAAG2zB,EAAI,MAAQC,EAAI,IACnB5zB,GACJ9D,EAAQiB,QAAU02B,G,qmBCXZC,GAAoC,CACxC,CACEC,SAAU,YACVC,MAAO,YACPC,YAAa,+BAEf,CACEF,SAAU,cACVC,MAAO,cACPC,YAAa,sBAEf,CACEF,SAAU,UACVC,MAAO,UACPC,YAAa,8BAEf,CACEF,SAAU,YACVC,MAAO,YACPC,YAAa,+BAEf,CACEF,SAAU,eACVC,MAAO,eACPC,YAAa,kCAEfnvB,KAAI,SAACovB,GAAD,mBAAC,eACFA,GADC,IAEJ5T,QAASpjB,OAAQ,YAA4Bg3B,EAAKH,WAAY52B,aAGjD22B,MAEFK,GAAkBL,GAAc,G,QCV7C,SAASM,GAAT,GAYI,IAXFC,EAWC,EAXDA,OACAC,EAUC,EAVDA,QACAN,EASC,EATDA,MACA1T,EAQC,EARDA,QACAiU,EAOC,EAPDA,UAQA,OACE,gBAACC,EAAA,EAAD,CAAQf,KAAMY,EAAQC,QAASA,EAA/B,UACE,eAACG,EAAA,EAAD,UAAcT,IACd,eAACU,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,UAAoBrU,MAEtB,gBAACsU,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAQC,QAASR,EAASS,MAAM,UAAhC,oBAGA,eAACF,EAAA,EAAD,CACEC,QAASE,uBAAY,WACnBV,IACAC,MACC,CAACD,EAASC,IACbQ,MAAM,UALR,sBAcR,SAASE,GAAT,GAII,IAHFC,EAGC,EAHDA,SAIMC,EAAiBH,uBACrB,SAACI,GACCF,EAASG,GAASD,MAEpB,CAACF,IAGH,OACE,eAACI,EAAA,EAAD,CAAMC,UAAW,wBAAjB,SACGF,GAASvwB,KAAI,WAAiC+V,GAAjC,IAAEkZ,EAAF,EAAEA,SAAUC,EAAZ,EAAYA,MAAOC,EAAnB,EAAmBA,YAAnB,OACZ,gBAACuB,EAAA,EAAD,CAEEC,QAAQ,EACRX,QAAS,kBAAMK,EAAeta,IAHhC,UAKE,eAAC6a,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,UACE,eAAC,KAAD,CAAcZ,MAAM,eAGxB,eAACa,EAAA,EAAD,CAAcC,QAAS7B,EAAO8B,UAAW7B,MATpCF,QAgBf,SAASgC,GAAT,GAII,IAHFb,EAGC,EAHDA,SAIMc,EAAWhB,sBAAW,uCAC1B,WAAOiB,GAAP,eAAAxL,EAAA,2DACMwL,EAAcnuB,OAAS,GAD7B,uBAEUouB,EAAeD,EAAc,GAFvC,KAGIf,EAHJ,KAIagB,EAAajsB,KAJ1B,SAKqBisB,EAAatsB,OALlC,yBAIMoqB,MAJN,KAKM1T,QALN,gEAD0B,sDAU1B,CAAC4U,IAGH,OACE,sBACEiB,MAAO,CACLC,QAAS,OACTC,KAAM,EACNC,OAAQ,OACRC,WAAY,SACZC,eAAgB,UANpB,SASE,eAAC,IAAD,CACEC,cAAe,CAAC,QAChBC,WAAY,EACZC,cAAc,EACdC,wBAAwB,EACxBZ,SAAUA,MAMlB,I,GC3HYa,GDoPGC,GAzHIC,aACjB,YAQO,IAAD,EAPJ1C,EAOI,EAPJA,OACAC,EAMI,EANJA,QACA0C,EAKI,EALJA,OAMMC,EAAQC,cACRC,EAAeC,YAAcH,EAAMI,YAAYC,KAAK,OAEpDC,EAAmBC,iBAAgC,MAEzD,EAGIC,oBAAS,GAHb,mBACEC,EADF,KAEEC,EAFF,KAKMC,EAAmB5C,uBAAY,WAC9BgC,GAAWO,EAAiBM,UAGjCb,EAAOc,SAASP,EAAiBM,QAAQvX,SACzCiX,EAAiBM,QAAU,KAC3BvD,OACC,CAAC0C,EAAQ1C,IAENY,EAAWF,uBACf,SAAC+C,GACC,GAAKf,EAAL,CAGA,IAAMgB,EAAgBhB,EAAOiB,WAAWnqB,OAClCoqB,IACFF,IACD9wB,IAAEixB,KAAK9C,IAAU,gBAAE/U,EAAF,EAAEA,QAAF,OAAe0X,IAAkB1X,EAAQxS,UAE7DypB,EAAiBM,QAAUE,EACvBG,EACFP,GAAqC,GAErCC,OAGJ,CAACZ,EAAQY,IAGX,EAAkCH,mBAChC,YADF,mBAAOW,EAAP,KAAkBC,EAAlB,KAIA,OACE,uCACE,gBAAC7D,EAAA,EAAD,CACE8D,WAAYnB,EACZ1D,KAAMY,EACNC,QAASA,EACTiE,WAAW,EACXC,SAAS,KACTC,OAAO,QANT,UAQE,eAAChE,EAAA,EAAD,2BACA,uBACE0B,MAAO,CACLC,QAAS,QAFb,UAKE,gBAACsC,EAAA,EAAD,CACEC,YAAY,WACZC,QAAQ,aACRl8B,MAAO07B,EACPpC,SAAU,SAAC6C,EAAOT,GAAR,OAAsBC,EAAaD,IAC7CjC,MAAO,CACL2C,YAAY,aAAD,OAAe7B,EAAM8B,QAAQC,UAE1CC,eAAe,UACfC,UAAU,UATZ,UAWE,eAACC,EAAA,EAAD,CACEhyB,MAAM,WACNiyB,KAAM,eAAC,KAAD,IACN18B,MAAO,aAET,eAACy8B,EAAA,EAAD,CAAKhyB,MAAM,WAAWiyB,KAAM,eAAC,KAAD,IAAgB18B,MAAO,cAErD,uBACEy5B,MAAO,CACLkD,gBAAiBpC,EAAM8B,QAAQO,WAAWC,MAE1CC,UAAW,UACXnD,KAAM,EACNC,OAAQ,IACRmD,YAAa,GACbC,aAAc,IARlB,UAWiB,aAAdtB,GAA4B,eAACnD,GAAD,CAAaC,SAAUA,IACrC,WAAdkD,GAA0B,eAACrC,GAAD,CAAWb,SAAUA,UAGpD,eAACN,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAAQC,QAASR,EAASS,MAAM,UAAhC,wBAMJ,eAACX,GAAD,CACEC,OAAQqD,EACRpD,QAAS,kBAAMqD,GAAqC,IACpDpD,UAAWqD,EACX5D,MAAK,yBAAUuD,EAAiBM,eAA3B,aAAU,EAA0B7D,OACzC1T,QAAQ,yE,8JC7ONuW,K,8BAAAA,E,oDAAAA,E,yCAAAA,E,qCAAAA,E,8BAAAA,E,0CAAAA,E,+CAAAA,E,2CAAAA,E,qDAAAA,E,+CAAAA,E,uCAAAA,Q,KAcZ,IAAM8C,IAAc,sBACjB9C,GAAU+C,aAAe,CAAC,CAAC3vB,KAAM,UAAWqW,QAAS,MADpC,gBAEjBuW,GAAUgD,yBAA2B,WAFpB,gBAGjBhD,GAAUiD,mBAAqB,iBAHd,gBAIjBjD,GAAUkD,iBAAmB,IAJZ,gBAKjBlD,GAAUmD,aAAe,aALR,gBAMjBnD,GAAUoD,mBAAqB,IANd,gBAOjBpD,GAAUqD,mBAAqB,iBAPd,gBAQjBrD,GAAUsD,iBAAmB,IARZ,gBASjBtD,GAAUuD,sBAAwB,GATjB,gBAUjBvD,GAAUwD,mBAAqB,GAVd,gBAWjBxD,GAAUyD,gBAAkB,GAXX,IAcPC,GAAsB,CACjC,CAACpzB,MAAO,eAAgBzK,MAAO,SAC/B,CAACyK,MAAO,cAAezK,MAAO,SAGnB89B,GAAgB,CAC3B,CAACrzB,MAAO,WAAYzK,MAAO,WAAY+9B,MAAO,QAC9C,CAACtzB,MAAO,QAASzK,MAAO,QAAS+9B,MAAO,QACxC,CAACtzB,MAAO,SAAUzK,MAAO,SAAU+9B,MAAO,SAC1C,CAACtzB,MAAO,SAAUzK,MAAO,SAAU+9B,MAAO,SAC1C,CAACtzB,MAAO,kBAAmBzK,MAAO,kBAAmB+9B,MAAO,QAC5D,CAACtzB,MAAO,SAAUzK,MAAO,SAAU+9B,MAAO,QAC1C,CAACtzB,MAAO,iBAAkBzK,MAAO,iBAAkB+9B,MAAO,SAC1D,CAACtzB,MAAO,OAAQzK,MAAO,OAAQ+9B,MAAO,SACtC,CAACtzB,MAAO,UAAWzK,MAAO,UAAW+9B,MAAO,QAC5C,CAACtzB,MAAO,cAAezK,MAAO,cAAe+9B,MAAO,SACpD,CAACtzB,MAAO,UAAWzK,MAAO,UAAW+9B,MAAO,SAC5C,CAACtzB,MAAO,SAAUzK,MAAO,SAAU+9B,MAAO,SAC1C,CAACtzB,MAAO,MAAOzK,MAAO,MAAO+9B,MAAO,QACpC,CAACtzB,MAAO,UAAWzK,MAAO,UAAW+9B,MAAO,QAC5C,CAACtzB,MAAO,eAAgBzK,MAAO,eAAgB+9B,MAAO,QACtD,CAACtzB,MAAO,WAAYzK,MAAO,WAAY+9B,MAAO,SAC9C,CAACtzB,MAAO,cAAezK,MAAO,cAAe+9B,MAAO,SACpD,CAACtzB,MAAO,WAAYzK,MAAO,WAAY+9B,MAAO,QAC9C,CAACtzB,MAAO,SAAUzK,MAAO,SAAU+9B,MAAO,SAC1C,CAACtzB,MAAO,YAAazK,MAAO,YAAa+9B,MAAO,QAChD,CAACtzB,MAAO,iBAAkBzK,MAAO,iBAAkB+9B,MAAO,QAC1D,CAACtzB,MAAO,kBAAmBzK,MAAO,kBAAmB+9B,MAAO,QAC5D,CAACtzB,MAAO,UAAWzK,MAAO,UAAW+9B,MAAO,QAC5C,CAACtzB,MAAO,YAAazK,MAAO,YAAa+9B,MAAO,QAChD,CAACtzB,MAAO,iBAAkBzK,MAAO,iBAAkB+9B,MAAO,QAC1D,CAACtzB,MAAO,iBAAkBzK,MAAO,iBAAkB+9B,MAAO,QAC1D,CAACtzB,MAAO,kBAAmBzK,MAAO,kBAAmB+9B,MAAO,SAC5D,CAACtzB,MAAO,aAAczK,MAAO,YAAa+9B,MAAO,SACjD,CAACtzB,MAAO,WAAYzK,MAAO,WAAY+9B,MAAO,QAC9C,CAACtzB,MAAO,WAAYzK,MAAO,WAAY+9B,MAAO,SAC9C,CAACtzB,MAAO,WAAYzK,MAAO,WAAY+9B,MAAO,SAC9C,CAACtzB,MAAO,sBAAuBzK,MAAO,sBAAuB+9B,MAAO,QACpE,CACEtzB,MAAO,wBACPzK,MAAO,wBACP+9B,MAAO,QAET,CACEtzB,MAAO,0BACPzK,MAAO,0BACP+9B,MAAO,QAET,CAACtzB,MAAO,iBAAkBzK,MAAO,iBAAkB+9B,MAAO,QAC1D,CAACtzB,MAAO,WAAYzK,MAAO,WAAY+9B,MAAO,QAC9C,CAACtzB,MAAO,cAAezK,MAAO,cAAe+9B,MAAO,QACpD,CAACtzB,MAAO,QAASzK,MAAO,QAAS+9B,MAAO,UAG7BR,GAAqB,CAChC,CAAC9yB,MAAO,UAAWzK,MAAO,IAC1B,CAACyK,MAAO,MAAOzK,MAAO,OACtB,CAACyK,MAAO,QAASzK,MAAO,SACxB,CAACyK,MAAO,eAAgBzK,MAAO,WAC/B,CAACyK,MAAO,qBAAsBzK,MAAO,WA2FxBg+B,GADO,I,WApFpB,aAAe,IAAD,iCAFdC,OAAShB,GAGPiB,aAAet/B,KAAM,CACnBq/B,OAAQE,KACRC,OAAQC,KACRC,KAAMD,KACNE,YAAaC,KACbC,kBAAmBD,KACnBE,WAAYL,OAGdz/B,KAAK0/B,OAELK,cACE,kBAAMC,aAAK,EAAKX,WAChB,kBAAM,EAAKhqB,U,2CAIf,SAAO4qB,GACL,OAAOjgC,KAAKq/B,OAAOY,K,oBAGrB,SAAOA,EAAgB7+B,GACpBpB,KAAKq/B,OAAgCY,GAAO7+B,I,kBAG/C,WACE,cAAkBnB,OAAO+sB,OAAOuO,IAAhC,eAA4C,CAAvC,IAAM0E,EAAG,KACNC,EAAe/2B,KAAKC,UAAUi1B,GAAe4B,IAC7CE,EAAeh3B,KAAKC,UAAUpJ,KAAKq/B,OAAOY,IAC5CE,IAAiBD,EACnBE,aAAaC,WAAWJ,GAExBG,aAAaE,QAAQL,EAAKE,M,kBAKhC,WACE,GAA4B,qBAAjBC,aAAX,CAIA,cAAkBngC,OAAO+sB,OAAOuO,IAAhC,eAA4C,CAAvC,IAAM0E,EAAG,KACNM,EAAWH,aAAaI,QAAQP,GACtC,GAAIM,EAAU,CACZ,IAAIn/B,OAAU,EACd,IACEA,EAAQ+H,KAAKs3B,MAAMF,GACnB,MAAOv1B,GACPwX,QAAQke,KAAR,yCAA+CT,EAA/C,eAAyDM,EAAzD,MACA,SAEFvgC,KAAKw/B,OAAOS,EAAK7+B,IAKhBpB,KAAK6/B,mBACR7/B,KAAK2/B,YAAYlzB,KAAK,CACpBkC,KAAM3O,KAAK2gC,OAAOpF,GAAUgD,0BAC5BvZ,QAAS,KAIbxC,QAAQtK,IAAR,iBAA8B8nB,aAAKhgC,KAAKq/B,cAzBtC7c,QAAQke,KAAR,gC,uBA4BJ,WACE,OAAO1gC,KAAK2gC,OAAOpF,GAAU+C,gB,6BAG/B,WACE,OAAO1yB,IAAE8G,KAAK1S,KAAK2/B,YAAa,CAC9B,OACA3/B,KAAK2gC,OAAOpF,GAAUgD,8B,wBAI1B,SAAWqC,EAAwBC,GACjCD,EAAW5b,QAAU6b,M,MC5JzB,SAASC,GAAT,GAUI,IATFC,EASC,EATDA,UACArI,EAQC,EARDA,MACAK,EAOC,EAPDA,OACAC,EAMC,EANDA,QAOA,EAA0BmD,mBAASiD,GAAcuB,OAAOI,IAAxD,mBAAO3/B,EAAP,KAAco7B,EAAd,KACA,OACE,gBAACtD,EAAA,EAAD,CAAQf,KAAMY,EAAQC,QAASA,EAA/B,UACE,eAACG,EAAA,EAAD,UAAcT,IACd,eAACU,EAAA,EAAD,CAAe4H,UAAU,EAAzB,SACE,eAACC,GAAA,EAAD,CACEC,WAAW,EACXC,UAAU,EACVlE,WAAW,EACX77B,MAAOA,EACPs5B,SAAU,SAAC1vB,GAAD,OAAOwxB,EAASxxB,EAAEo2B,OAAOhgC,QACnCy5B,MAAO,CAACwG,MAxBiB,IAwBkBnE,SAAU,QACrDoE,WAAY,CAACzG,MAAO,CAAC0G,SAAU,eAGnC,gBAACjI,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAQC,QAASR,EAASS,MAAM,UAAhC,oBAGA,eAACF,EAAA,EAAD,CACEC,QAASE,uBAAY,WACnB0F,GAAcI,OAAOuB,EAAW3/B,EAAMoR,QACtCwmB,MACC,CAAC+H,EAAW3/B,EAAO43B,IACtBwI,UAAWpgC,EAAMoR,OACjBinB,MAAM,UANR,wBAeR,SAASgI,GAAT,GAgBI,IAfF1I,EAeC,EAfDA,OACAC,EAcC,EAdDA,QACAN,EAaC,EAbDA,MACAqI,EAYC,EAZDA,UACAW,EAWC,EAXDA,IACAppB,EAUC,EAVDA,IACAxN,EASC,EATDA,KAUA,EAA0BqxB,mBAASiD,GAAcuB,OAAOI,IAAxD,mBAAO3/B,EAAP,KAAco7B,EAAd,KACA,OACE,gBAACtD,EAAA,EAAD,CAAQf,KAAMY,EAAQC,QAASA,EAA/B,UACE,eAACG,EAAA,EAAD,UAAcT,IACd,eAACU,EAAA,EAAD,CAAe4H,UAAU,EAAzB,SACE,eAACW,GAAA,EAAD,CACEvgC,MAAOA,EACPs5B,SAAU,SAAC1vB,EAAG5J,GAAJ,OAAco7B,EAASp7B,IACjCsgC,IAAKA,EACLppB,IAAKA,EACLxN,KAAMA,EACN82B,OAAO,EACPC,kBAAkB,KAClBhH,MAAO,CACLwG,MA9EuB,IA+EvBnE,SAAU,OACV4E,UAAW,QAIjB,gBAACxI,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAQC,QAASR,EAASS,MAAM,UAAhC,oBAGA,eAACF,EAAA,EAAD,CACEC,QAASE,uBAAY,WACnB0F,GAAcI,OAAOuB,EAAW3/B,GAChC43B,MACC,CAAC+H,EAAW3/B,EAAO43B,IACtBS,MAAM,UALR,wBAcR,SAASsI,GAAT,GAcI,IAbFhJ,EAaC,EAbDA,OACAC,EAYC,EAZDA,QACAN,EAWC,EAXDA,MACAqI,EAUC,EAVDA,UACAiB,EASC,EATDA,OACAC,EAQC,EARDA,QASA,EAA0B9F,mBAASiD,GAAcuB,OAAOI,IAAxD,mBAAO3/B,EAAP,KAAco7B,EAAd,KACM0F,EAAUhG,iBAAgC,MAC1CiG,EAAsBjG,iBAA8B,MACpDkG,EAA8BlG,kBAAO,GAErCmG,EAA2B3I,uBAAY,WACtCX,EAKFmJ,EAAQ3F,SACR4F,EAAoB5F,UACrB6F,EAA4B7F,UAI9B4F,EAAoB5F,QAAQ+F,gBAAe,GAGzCJ,EAAQ3F,QAAQgG,aACdL,EAAQ3F,QAAQiG,UAChBN,EAAQ3F,QAAQkG,aAClB,IAEAP,EAAQ3F,QAAQiG,WAAa,KAE/BJ,EAA4B7F,SAAU,GApBpC6F,EAA4B7F,SAAU,IAqBvC,CAACxD,IAGJ,OAFA2J,oBAAUL,GAGR,gBAACnJ,EAAA,EAAD,CAAQf,KAAMY,EAAQC,QAASA,EAA/B,UACE,eAACG,EAAA,EAAD,UAAcT,IACd,eAACU,EAAA,EAAD,CAAe4H,UAAU,EAAzB,SACE,eAAChH,EAAA,EAAD,CACEC,UAAW,wBACXY,MAAO,CACL8H,UAAW,UAEbC,IAAK,SAAC/9B,GACJq9B,EAAQ3F,QAAU13B,EAClBw9B,KAPJ,UAUIL,GAAU,CAAC,OAAOx4B,KAAI,SAAC21B,EAAO5f,GAAR,aACtB,qBAA8Bsb,MAAO,CAACkD,gBAAiB,WAAvD,SACE,sBAAIlD,MAAO,CAACgI,QAAS,EAAG9E,gBAAiB,WAAzC,UACGoB,GACC,eAAC2D,GAAA,EAAD,CAAerJ,MAAM,UAArB,SAAgC0F,EAAMtzB,QAEvCo2B,EAAQz4B,KAAI,SAACu5B,GACZ,GAAI5D,GAASA,EAAM/9B,QAAU2hC,EAAO5D,MAClC,OAAO,KAET,IAAM6D,EAAaD,EAAO3hC,QAAUA,EAC9Bw4B,EAAW,kBAAM4C,EAASuG,EAAO3hC,QACvC,OACE,gBAAC84B,EAAA,EAAD,CAEE+I,SAAUD,EACV7I,QAAQ,EACRX,QAASI,EACTiB,MAAO,CAACwG,MApLK,KAqLbuB,IACEI,EACI,SAACn+B,GACCs9B,EAAoB5F,QAAU13B,EAC9Bw9B,KAEF,KAZR,UAeE,eAAC/H,EAAA,EAAD,CACEC,QAASwI,EAAOl3B,MAChBq3B,uBAAwB,CAACrI,MAAO,CAAC0G,SAAU,aAE7C,eAAC4B,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACEC,QAASL,EACTpJ,SAAUA,EACVH,MAAM,gBAtBLsJ,EAAO3hC,cAbtB,iBAAS+9B,QAAT,IAASA,OAAT,EAASA,EAAO/9B,aAAhB,QAAyBme,UA8C/B,gBAAC+Z,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAQC,QAASR,EAASS,MAAM,UAAhC,oBAGA,eAACF,EAAA,EAAD,CACEC,QAASE,uBAAY,WACnB0F,GAAcI,OAAOuB,EAAW3/B,GAChC43B,MACC,CAAC+H,EAAW3/B,EAAO43B,IACtBS,MAAM,UALR,wBAcR,IAuSe6J,GAvSQ7H,aACrB,YAAgE,IAAD,IAA7D1C,EAA6D,EAA7DA,OAAQC,EAAqD,EAArDA,QACF2C,EAAQC,cACRC,EAAeC,YAAcH,EAAMI,YAAYC,KAAK,OAE1D,EAAkCG,mBAEhC,UAFF,mBAAOW,EAAP,KAAkBC,EAAlB,KAIA,EAA4DZ,oBAAS,GAArE,mBAAOoH,EAAP,KAA+BC,EAA/B,KACA,EACErH,oBAAS,GADX,mBAAOsH,EAAP,KAAmCC,EAAnC,KAEA,EACEvH,oBAAS,GADX,mBAAOwH,EAAP,KAAgCC,EAAhC,KAEA,EACEzH,oBAAS,GADX,mBAAO0H,EAAP,KAAsCC,EAAtC,KAGA,EAA4D3H,oBAAS,GAArE,mBAAO4H,EAAP,KAA+BC,EAA/B,KACA,EACE7H,oBAAS,GADX,mBAAO8H,EAAP,KAAmCC,EAAnC,KAEA,EAGI/H,oBAAS,GAHb,mBACEgI,EADF,KAEEC,EAFF,KAIA,GACEjI,oBAAS,GADX,qBAAOkI,GAAP,MAAqCC,GAArC,MAGA,GACEnI,oBAAS,GADX,qBAAOoI,GAAP,MAAmCC,GAAnC,MAGA,OACE,uCACE,gBAACtL,EAAA,EAAD,CACE8D,WAAYnB,EACZ1D,KAAMY,EACNC,QAASA,EACTiE,WAAW,EACXC,SAAS,KACTC,OAAO,QANT,UAQE,eAAChE,EAAA,EAAD,uBACA,eAACC,EAAA,EAAD,CAAe4H,UAAU,EAAzB,SACE,uBACEnG,MAAO,CACLC,QAAS,QAFb,UAKE,gBAACsC,EAAA,EAAD,CACEC,YAAY,WACZC,QAAQ,aACRl8B,MAAO07B,EACPpC,SAAU,SAAC6C,EAAOT,GAAR,OAAsBC,EAAaD,IAC7CjC,MAAO,CACL2C,YAAY,aAAD,OAAe7B,EAAM8B,QAAQC,UAE1CC,eAAe,UACfC,UAAU,UATZ,UAWE,eAACC,EAAA,EAAD,CACEhyB,MAAM,SACNiyB,KAAM,eAAC,KAAD,IACN18B,MAAO,WAET,eAACy8B,EAAA,EAAD,CACEhyB,MAAM,SACNiyB,KAAM,eAAC,KAAD,IACN18B,MAAO,iBAET,eAACy8B,EAAA,EAAD,CACEhyB,MAAM,YACNiyB,KAAM,eAAC,KAAD,IACN18B,MAAO,iBAGX,sBACEy5B,MAAO,CACLkD,gBAAiBpC,EAAM8B,QAAQO,WAAWC,MAE1CC,UAAW,UACXnD,KAAM,EACNC,OAAQ,IACRmD,YAAa,GACbC,aAAc,IARlB,SAWE,gBAACpE,EAAA,EAAD,CAAMC,UAAW,wBAAjB,UACiB,WAAd6C,GACC,uCACE,eAAC5C,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAMoK,GAA2B,IAF5C,SAIE,eAACtJ,EAAA,EAAD,CACEC,QAAQ,eACRC,UAAS,UACP5uB,IAAE8G,KAAKwsB,GAAe,CACpB,QACAE,GAAcuB,OAAOpF,GAAUmD,uBAH1B,aACP,EAGI7yB,UAIV,eAACquB,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAMgK,GAA0B,IAF3C,SAIE,eAAClJ,EAAA,EAAD,CACEC,QAAQ,cACRC,UAAW4E,GAAcuB,OACvBpF,GAAUiD,wBAIhB,gBAACtE,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAMkK,GAA8B,IAF/C,UAIE,eAACpJ,EAAA,EAAD,CACEC,QAAQ,mBACRC,UAAW4E,GAAcuB,OACvBpF,GAAUkD,oBAEX,OAEL,eAACvE,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAMsK,GAAiC,IAFlD,SAIE,eAACxJ,EAAA,EAAD,CACEC,QAAQ,qBACRC,UAAS,UACP5uB,IAAE8G,KAAKisB,GAAoB,CACzB,QACAS,GAAcuB,OACZpF,GAAUoD,6BAJP,aACP,EAKI9yB,aAMC,iBAAdixB,GACC,uCACE,eAAC5C,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAMwK,GAA0B,IAF3C,SAIE,eAAC1J,EAAA,EAAD,CACEC,QAAQ,qBACRC,UAAW4E,GAAcuB,OACvBpF,GAAUqD,wBAIhB,eAAC1E,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAM0K,GAA8B,IAF/C,SAIE,eAAC5J,EAAA,EAAD,CACEC,QAAQ,0BACRC,UAAW4E,GAAcuB,OACvBpF,GAAUsD,sBAIhB,eAAC3E,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAM4K,GAAmC,IAFpD,SAIE,eAAC9J,EAAA,EAAD,CACEC,QAAQ,+BACRC,UAAW4E,GAAcuB,OACvBpF,GAAUuD,2BAIhB,eAAC5E,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAM8K,IAAgC,IAFjD,SAIE,eAAChK,EAAA,EAAD,CACEC,QAAQ,4BACRC,UAAS,UAAK4E,GAAcuB,OAC1BpF,GAAUwD,oBADH,YAOF,cAAdjC,GACC,qCACE,eAAC5C,EAAA,EAAD,CACEC,QAAQ,EACRX,QAAS,kBAAMgL,IAA8B,IAF/C,SAIE,eAAClK,EAAA,EAAD,CACEC,QAAQ,4BACRC,UAAS,UAAK4E,GAAcuB,OAC1BpF,GAAUyD,iBADH,4BAWzB,eAAC1F,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAAQC,QAASR,EAASS,MAAM,UAAhC,wBAMJ,eAACqH,GAAD,CACE/H,OAAQwK,EACRvK,QAAS,kBAAMwK,GAA0B,IACzC9K,MAAM,cACNqI,UAAWxF,GAAUiD,qBAEvB,eAACiD,GAAD,CACE1I,OAAQ0K,EACRzK,QAAS,kBAAM0K,GAA8B,IAC7ChL,MAAM,mBACNqI,UAAWxF,GAAUkD,iBACrBiD,IAAK,EACLppB,IAAK,GACLxN,KAAM,IAER,eAACi3B,GAAD,CACEhJ,OAAQ4K,EACR3K,QAAS,kBAAM4K,GAA2B,IAC1ClL,MAAM,eACNqI,UAAWxF,GAAUmD,aACrBsD,OAAQ/C,GACRgD,QAAS/C,KAEX,eAAC6C,GAAD,CACEhJ,OAAQ8K,EACR7K,QAAS,kBAAM8K,GAAiC,IAChDpL,MAAM,qBACNqI,UAAWxF,GAAUoD,mBACrBsD,QAAStD,KAGX,eAACmC,GAAD,CACE/H,OAAQgL,EACR/K,QAAS,kBAAMgL,GAA0B,IACzCtL,MAAM,qBACNqI,UAAWxF,GAAUqD,qBAEvB,eAAC6C,GAAD,CACE1I,OAAQkL,EACRjL,QAAS,kBAAMkL,GAA8B,IAC7CxL,MAAM,0BACNqI,UAAWxF,GAAUsD,iBACrB6C,IAAK,EACLppB,IAAK,GACLxN,KAAM,IAER,eAAC22B,GAAD,CACE1I,OAAQoL,EACRnL,QAAS,kBAAMoL,GAAmC,IAClD1L,MAAM,+BACNqI,UAAWxF,GAAUuD,sBACrB4C,IAAK,EACLppB,IAAK,EACLxN,KAAM,IAER,eAAC22B,GAAD,CACE1I,OAAQsL,GACRrL,QAAS,kBAAMsL,IAAgC,IAC/C5L,MAAM,4BACNqI,UAAWxF,GAAUwD,mBACrB2C,IAAK,EACLppB,IAAK,EACLxN,KAAM,MAGR,eAAC22B,GAAD,CACE1I,OAAQwL,GACRvL,QAAS,kBAAMwL,IAA8B,IAC7C9L,MAAM,4BACNqI,UAAWxF,GAAUyD,gBACrB0C,IAAK,EACLppB,IAAK,GACLxN,KAAM,UCxaD25B,OAxGf,YAMI,IALFC,EAKC,EALDA,QACAhJ,EAIC,EAJDA,OAKMiJ,EAAcjL,uBAAY,WAC9B,GAAKgL,GAAYhJ,EAAjB,CAGA,IAAMkJ,EAAO,IAAIC,KAAK,CAACnJ,EAAOiB,YAAa,CACzC34B,KAAM,6BAER8gC,iBAAOF,EAAM,kBACZ,CAACF,EAAShJ,IAEPC,EAAQC,cAEd,EAAwDO,oBAAS,GAAjE,mBAAO4I,EAAP,KAA6BC,EAA7B,KACA,EAAgD7I,oBAAS,GAAzD,mBAAO8I,EAAP,KAAyBC,EAAzB,KAEA,OACE,uCACE,eAACC,EAAA,EAAD,CAAQvV,SAAS,WAAW6J,MAAM,UAAlC,SACE,gBAAC2L,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,CAAY/H,QAAQ,KAAKzC,MAAO,CAACyK,SAAU,GAA3C,6BAGCZ,GACC,uCACE,eAACa,EAAA,EAAD,CAAS7M,MAAM,eAAf,SACE,eAAC8M,EAAA,EAAD,CACE,aAAW,eACX/L,MAAM,UACND,QAAS,kBAAM0L,GAAoB,IAHrC,SAKE,eAAC,IAAD,QAGJ,eAACK,EAAA,EAAD,CAAS7M,MAAM,eAAf,SACE,eAAC8M,EAAA,EAAD,CACE,aAAW,eACX/L,MAAM,UACND,QAASmL,EAHX,SAKE,eAAC,IAAD,QAGJ,eAACY,EAAA,EAAD,CAAS7M,MAAM,WAAf,SACE,eAAC8M,EAAA,EAAD,CACE,aAAW,gBACX/L,MAAM,UACND,QAAS,kBAAMwL,GAAwB,IAHzC,SAKE,eAAC,IAAD,WAKR,eAACO,EAAA,EAAD,CACE7M,MACE,uBACEmC,MAAO,CACLC,QAAS,OACTG,WAAY,SACZC,eAAgB,UAJpB,2BAQE,eAAC,IAAD,CACEL,MAAO,CACL0G,SAAU5F,EAAM8J,WAAWC,SAASnE,SACpCoE,WAAY,eAbtB,SAmBE,eAACH,EAAA,EAAD,CACE,aAAW,iBACX/L,MAAM,UACNmM,KAAK,kCACLxE,OAAO,SAJT,SAME,eAAC,IAAD,aAMR,eAAC,GAAD,CACErI,OAAQkM,EACRjM,QAAS,kBAAMkM,GAAoB,IACnCxJ,OAAQA,IAEV,eAAC,GAAD,CACE3C,OAAQgM,EACR/L,QAAS,kBAAMgM,GAAwB,U,UC1DhCa,IC7BVC,GD6BUD,GArDf,YAAyD,IAClDE,EADmBrB,EAA8B,EAA9BA,SAA8B,SACjDqB,KADiD,kBACjDA,EADiD,8BACjDA,EADiD,iBACjDA,MADiD,KAMtD,IACA,EAA4B5J,mBAAiB4J,EAAOC,SAApD,mBAAOC,EAAP,KAAeC,EAAf,KACMvK,EAAQC,cASd,OAPA8G,qBAAU,WACJgC,GAAWuB,IAAWF,EAAOC,UAC/BE,EAAUH,EAAOI,eACjBzkB,YAAW,kBAAMwkB,EAAUH,EAAOK,UAPV,QASzB,CAAC1B,EAASuB,EAAQF,IAGnB,sBACElL,MAAK,qCACHjL,SAAU,QACVyW,KAAM,EACNC,IAAK,EACLjF,MAAO,OACPrG,OAAQ,OACRuL,OAAQ,IACRxI,gBAAiBpC,EAAM8B,QAAQO,WAAWC,MAC1CnD,QAAS,OACTI,eAAgB,SAChBD,WAAY,SACZuL,WAAW,WAAD,OAxBY,IAwBZ,OACNP,IAAWF,EAAOC,QAClB,CACES,QAAS,GAEX,IACAR,IAAWF,EAAOI,cAClB,CACEM,QAAS,GAEX,IACAR,IAAWF,EAAOK,OAClB,CACEtL,QAAS,QAEX,IA3BR,SA8BE,eAAC4L,GAAA,EAAD,O,4OCxBDZ,K,gBAAAA,E,iBAAAA,Q,KAKL,IAAMa,GAA4B,CAChC,CACEC,kBAAmBd,GAAkBhZ,OACrC+Z,UAAWC,KACXj7B,MAAO,cAET,CACE+6B,kBAAmBd,GAAkBiB,OACrCF,UAAWG,KACXn7B,MAAO,+BAIX,SAASo7B,GAAT,GAQI,IAPF7lC,EAOC,EAPDA,MACAs5B,EAMC,EANDA,SAMC,IALDG,aAKC,MALO,GAKP,EACD,EAAoCqM,IAAM/K,SAA6B,MAAvE,mBAAOgL,EAAP,KAAmBC,EAAnB,KACMC,EAAgB3N,uBAAY,SAAC6D,GACjC6J,EAAc7J,EAAM+J,iBACnB,IACGC,EAAe7N,uBACnB,SAAC8N,GACCJ,EAAc,MACd1M,EAAS8M,KAEX,CAAC9M,IAEG+M,EAAc/N,uBAAY,WAC9B0N,EAAc,QACb,IAEH,EAAsCx7B,IAAE8G,KAAKi0B,GAA2B,CACtE,oBACAvlC,IAFgBsmC,EAAlB,EAAOb,UAAsBh7B,EAA7B,EAA6BA,MAI7B,OACE,uCACE,eAAC0tB,EAAA,EAAD,CACEoO,UAAW,eAACD,EAAD,IACXE,QAAS,eAAC,KAAD,CAAuBrG,SAAS,UACzC/H,QAAS6N,EACTxM,MAAOA,EAJT,SAMGhvB,IAEH,eAACg8B,GAAA,EAAD,CACEC,SAAUX,EACVY,aAAa,EACb5P,OAAQgP,EACRnO,QAASyO,EAJX,SAMGd,GAA0Bn9B,KACzB,gBAAEo9B,EAAF,EAAEA,kBAA8Bc,EAAhC,EAAqBb,UAAsBh7B,EAA3C,EAA2CA,MAA3C,OACE,gBAACm8B,GAAA,EAAD,CAEE/E,SAAU2D,IAAsBxlC,EAChCo4B,QAAS,kBAAM+N,EAAaX,IAH9B,UAKE,eAACqB,GAAA,EAAD,UACE,eAACP,EAAD,MAEF,eAACrC,EAAA,EAAD,CAAY/H,QAAQ,UAApB,SAA+BzxB,MAP1B+6B,WAgBJ,SAASsB,GAAT,GAQX,IAPaC,EAOd,EAPDC,cACArP,EAMC,EANDA,OACSsP,EAKR,EALDrP,QAMM2C,EAAQC,cAEd,EAAkDO,mBAChD2J,GAAkBhZ,QADpB,mBAAO8Z,EAAP,KAA0B0B,EAA1B,KAGA,EACEnM,mBAA+B,MADjC,mBAAOoM,EAAP,KAA4BC,EAA5B,KAGMC,EAAYvM,iBAA0B,MAE5C,EAAwCC,oBAAS,GAAjD,mBAAON,EAAP,KAAqB6M,EAArB,KACMC,EAAkBjP,uBAAY,WAClCgP,GAAgB,GAChBhnB,YAAW,kCAAM+mB,EAAUlM,eAAhB,aAAM,EAAmBqM,WAAU,KAC7C,IACGC,EAAiBnP,uBAAY,WACjCgP,GAAgB,GAChBhnB,YAAW,kCAAM+mB,EAAUlM,eAAhB,aAAM,EAAmBqM,WAAU,KAC7C,IAEGE,EAAwBpP,uBAAY,WACxC,IAAMgC,EAAS+M,EAAUlM,QACzB,GAAKb,EAAL,CAGA,IAAKyM,EAKH,OAJAzM,EAAOc,SAAS,SACZ+L,GACFC,EAAuB,OAKxBD,GACDA,EAAoBnkB,SAAW+jB,EAAoB/jB,QAEnD1iB,mBAAQ,CACN0iB,OAAQ+jB,EAAoB/jB,OAC5Bxf,eAAgB,cAChByf,gBAAgB,IACfjZ,KAAKo9B,GAEV,IAAMhB,GACHZ,IAAsBd,GAAkBhZ,OACrCqb,EAAoBjnB,KADvB,OAEGqnB,QAFH,IAEGA,OAFH,EAEGA,EAAqBrnB,OAAS,GAChCsmB,GAAY9L,EAAOiB,aAAe6K,GACpC9L,EAAOc,SAASgL,MAEjB,CAACZ,EAAmBuB,EAAqBI,IAE5C7F,qBAAU,WACRoG,MACC,CAACA,IAEJ,IAAMC,EACJ7M,iBAAiC,MAC7Bxc,EAAOga,uBACX,SAAC70B,GACC,GAAKA,IAAQ4jC,EAAUlM,SAAYxD,EAAnC,CAGA,IAAM2C,EAASsN,KAAIC,KAAKpkC,EAAM,CAC5BqkC,WAAW,IAEbH,EAAsCxM,QAAU4M,cAAQ,WACtDzN,EAAO0N,WAAW,CAChBC,WAAYjK,GAAcuB,OAAOpF,GAAUiD,oBAC3C+C,SAAS,GAAD,OAAKnC,GAAcuB,OAAOpF,GAAUkD,kBAApC,QAEV/C,EAAO4N,SAAP,oBACelK,GAAcuB,OAAOpF,GAAUmD,gBAE9C,IAAM6K,EAAcnK,GAAcuB,OAAOpF,GAAUoD,oBACnDjD,EAAO8N,mBACLD,EAAW,uBAAmBA,GAAgB,OAGlD7N,EAAO+N,oBAAmB,GAC1B/N,EAAOgO,QAAQC,QAAQ,uBACvBjO,EAAOkO,aAAY,GAEnBlO,EAAOmO,iBACPnO,EAAO5iB,aAAa,EAAG,GACvB4iB,EAAOoO,QACPrB,EAAUlM,QAAUb,EAEpBoN,OAEF,CAAC/P,EAAQ+P,IAGL9P,EAAUU,uBAAY,WACtBqP,EAAsCxM,UACxCwM,EAAsCxM,UACtCwM,EAAsCxM,QAAU,MAE9CkM,EAAUlM,UACZkM,EAAUlM,QAAQwN,UAClBtB,EAAUlM,QAAU,MAEtB8L,MACC,CAACA,IAEE1D,EAAcjL,uBAAY,WAC9B,IAAMgC,EAAS+M,EAAUlM,QACzB,GAAKb,EAAL,CAGA,IAAMkJ,EAAO,IAAIC,KAAK,CAACnJ,EAAOiB,YAAa,CACzC34B,KAAM,6BAER8gC,iBAAOF,EAAM,iBACZ,IAEH,OACE,gBAAC1L,EAAA,EAAD,CACEF,QAASA,EACTb,KAAMY,EACNkE,WAAW,EACXD,WAAYnB,EACZqB,SAAS,KALX,UAOE,gBAAC/D,EAAA,EAAD,CACE6Q,mBAAmB,EACnBnP,MAAO,CAACC,QAAS,OAAQG,WAAY,UAFvC,UAIE,eAAC,KAAD,CAAmBJ,MAAO,CAACoP,YAAa,YACxC,eAAC5E,EAAA,EAAD,CAAY/H,QAAQ,KAAKzC,MAAO,CAACyK,SAAU,GAA3C,2BAGA,eAAC2B,GAAD,CACE7lC,MAAOwlC,EACPlM,SAAU4N,EACVzN,MAAO,CACLoP,YAAatO,EAAMuO,QAAQ,MAG/B,eAAC3E,EAAA,EAAD,CAAS7M,MAAM,mCAAf,SACE,eAAC8M,EAAA,EAAD,CAAYhM,QAASmL,EAArB,SACE,eAAC,IAAD,QAGH9I,EACC,eAAC0J,EAAA,EAAD,CAAS7M,MAAM,mBAAf,SACE,eAAC8M,EAAA,EAAD,CAAYhM,QAASqP,EAArB,SACE,eAAC,KAAD,QAIJ,eAACtD,EAAA,EAAD,CAAS7M,MAAM,sBAAf,SACE,eAAC8M,EAAA,EAAD,CAAYhM,QAASmP,EAArB,SACE,eAAC,KAAD,QAIN,eAACpD,EAAA,EAAD,CAAS7M,MAAM,QAAf,SACE,eAAC8M,EAAA,EAAD,CACEhM,QAASR,EACT6B,MAAO,CAACoP,aAActO,EAAMuO,QAAQ,IAFtC,SAIE,eAAC,KAAD,WAIN,eAAC9Q,EAAA,EAAD,CACE4H,UAAU,EACVnG,MAAO,CACLC,QAAS,OACTqP,cAAe,SACfnP,OAAQ,OACR6H,QAAS,GANb,SASE,sBACED,IAAKljB,EACLmb,MAAO,CAILyK,SAAU,EACVtK,OAAQ,EAERkD,UAAW,kBCrPRkM,OAjDf,WAGgF,IAAD,yDAAJ,GAAI,IAF7EC,eAE6E,MAFnE,aAEmE,MAD7ExP,aAC6E,MADrE,GACqE,EACvE4N,EAAYvM,iBAA0B,MACtCxc,EAAOga,uBACX,SAAC70B,GACC,GAAKA,IAAQ4jC,EAAUlM,QAAvB,CAGA,IAAMb,EAASsN,KAAIC,KAAKpkC,GACxBskC,cAAQ,WACNzN,EAAO0N,WAAW,CAChBC,WAAYjK,GAAcuB,OAAOpF,GAAUiD,oBAC3C+C,SAAS,GAAD,OAAKnC,GAAcuB,OAAOpF,GAAUkD,kBAApC,QAEV/C,EAAO4N,SAAP,oBACelK,GAAcuB,OAAOpF,GAAUmD,gBAE9C,IAAM6K,EAAcnK,GAAcuB,OAAOpF,GAAUoD,oBACnDjD,EAAO8N,mBACLD,EAAW,uBAAmBA,GAAgB,OAGlD7N,EAAO+N,oBAAmB,GAC1B/N,EAAOgO,QAAQC,QAAQ,qBAEvB,IAAMW,EAAiBlL,GAAcS,kBAAkB7a,QAAQxS,OAC3D4sB,GAAcS,kBAAkB7a,QAChC6T,GAAgB7T,QACpB0W,EAAOc,SAAS8N,GAChB5O,EAAOmO,iBACPnO,EAAO5iB,aAAa,EAAG,GACvB4iB,EAAOoO,QACPpO,EAAO6O,GAAG,UAAU,kBAClBnL,GAAcU,WACZV,GAAcS,kBACdnE,EAAOiB,eAGX8L,EAAUlM,QAAUb,EACpB2O,EAAQ3O,MAEV,CAAC2O,IAGH,OAAO,sBAAKzH,IAAKljB,EAAMmb,MAAOA,K,8FCdjB2P,IChCHC,GDgCGD,GAlCf,YAQI,IAPF9R,EAOC,EAPDA,MACAoF,EAMC,EANDA,KACA4M,EAKC,EALDA,SAMM/O,EAAQC,cACd,OACE,gBAAC+O,GAAA,EAAD,CACEC,UAAW,EACXC,QAAQ,EACRhQ,MAAO,CACLC,QAAS,OACTqP,cAAe,MACflP,WAAY,SACZ8C,gBAAiBpC,EAAM8B,QAAQO,WAAWn8B,SAP9C,UAUE,sBAAKg5B,MAAO,CAACC,QAAS,OAAQ+H,QAAS,gBAAvC,SAAyD/E,IACzD,eAACuH,EAAA,EAAD,CACE/H,QAAQ,WACR7D,MAAM,gBACNoB,MAAO,CAACyK,SAAU,EAAGlH,aAAc,QAHrC,SAKG1F,IAEFgS,M,oBC3BKD,K,cAAAA,E,YAAAA,E,uBAAAA,Q,SAsJGK,G,WAxBb,aAAe,0BAxGfC,WAAqB,EAwGP,KArGdC,SAA+B,GAqGjB,KAedtP,OAA4B,KAfd,KAkBdza,SAA4B,KAlBd,KAqBNgqB,SAAmC,KApBzC3L,aAAet/B,KAAM,CACnB0f,KAAM+f,KACNiF,QAAS9E,KACTmL,UAAWxL,KACXyL,SAAUzL,KACVjwB,IAAKmwB,KACLyL,YAAazL,KACb0L,cAAe1L,KACf/D,OAAQ6D,KAAWqD,IACnB3hB,SAAUse,KAAWqD,M,yCA5GzB,YAAsE,IAAhElH,EAA+D,EAA/DA,OAAQza,EAAuD,EAAvDA,SACRya,IACF17B,KAAK07B,OAASA,GAEZza,IACFjhB,KAAKihB,SAAWA,K,mBAKpB,WACE,QAASjhB,KAAK07B,UAAY17B,KAAKihB,W,wDAGjC,2CAAAkO,EAAA,yDACOnvB,KAAK07B,QAAW17B,KAAKihB,WAAYjhB,KAAK+qC,UAD7C,qDAIQ3mB,EAASpkB,KAAK07B,OAAOiB,YACfnqB,OALd,wDASExS,KAAK+qC,WAAY,EATnB,kBAY0BrpC,mBAAQ,CAC5B0iB,SACAxf,eAAgB,gBAdtB,OAYIwjC,EAZJ,OAgBI5lB,QAAQtK,IAAIkwB,EAAclnB,MAhB9B,yDAkBIsB,QAAQ4oB,MAAR,mCAAgC,KAAE3mC,eAAlC,QAA6C0E,KAAKC,UAAL,QAC7CiiC,cAAY,WACV,EAAKN,WAAY,KAEf,KAAEtmC,SACJzE,KAAKkrC,YAAY,CACfpmC,IAAK,KAAEA,IACPd,KAAMymC,GAAgBa,MACtB7mC,QAAS,KAAEA,UA1BnB,kCAgCEzE,KAAKkrC,YAAY,CACflnC,KAAMymC,GAAgBc,UACtB9mC,QAAS,aACT2jC,cAAeA,IAEXoD,EAAU,IAAIx0B,KACpBhX,KAAKihB,SAAS6oB,QACd9pC,KAAKirC,SAAW,IAAIpqB,mBAAgB7gB,KAAKihB,SAAU,CACjDzF,qBAAsB4jB,GAAcuB,OAAOpF,GAAUyD,mBAxCzD,oBA2CUh/B,KAAKirC,SAAShvB,cAAcmsB,EAAclnB,MA3CpD,yBA6CUuqB,EAAQ,IAAIz0B,KAClBq0B,cAAY,WACV,EAAKN,WAAY,KAEnB/qC,KAAKkrC,YAAY,CACflnC,KAAMymC,GAAgBiB,KACtBjnC,QACE,yBACKgnC,EAAMpyB,UAAYmyB,EAAQnyB,WAAa,KAAMxI,QAAQ,GAD1D,OAGJ7Q,KAAKirC,SAAW,KAChBjrC,KAAK07B,OAAOoO,QAxDhB,mF,wEA4DA,WACO9pC,KAAK+qC,WAAc/qC,KAAKirC,UAG7BjrC,KAAKirC,SAAS3tB,kB,oCAGhB,SAAuBxY,GACrB,GAAK9E,KAAK07B,QAAW52B,EAArB,CAGA,IAAO4K,EAAa5K,EAAb4K,KAAMiJ,EAAO7T,EAAP6T,IACb3Y,KAAK07B,OAAO5iB,aAAapJ,EAAO,EAAGiJ,EAAM,GACzC3Y,KAAK07B,OAAOiQ,UAAUC,qB,yBAGxB,SAAYnnC,GACVzE,KAAKgrC,SAASv+B,KAAKhI,K,2BAGrB,WACEzE,KAAKgrC,SAAS/oB,OAAO,EAAGjiB,KAAKgrC,SAASx+B,Y,KC3F1C,IAqKeq/B,GArKMpQ,aACnB,YAUO,IATLuP,EASI,EATJA,SACAc,EAQI,EARJA,WACAC,EAOI,EAPJA,yBAOI,IANJlR,aAMI,MANI,GAMJ,EACEc,EAAQC,cAERoQ,EAAqB9P,iBAA8B,MACnD+P,EAAwB/P,kBAAgB,GACxCgQ,EAAqBhQ,iBAAe,GAgB1C,OAdAwG,qBAAU,WACR,IAAgByJ,EAAqBH,EAA9BzP,QACS6P,EAAmBF,EAA5B3P,QACS8P,EAAsBJ,EAA/B1P,QACD+P,EAActB,EAASx+B,OACxB2/B,GAAqBG,IAAgBF,IAGtCC,IACFF,EAAkB3J,UAAY2J,EAAkB5J,cAElD2J,EAAmB3P,QAAU+P,MAI7B,uBACEzR,MAAK,aACHC,QAAS,OACTqP,cAAe,UACZtP,GAJP,UAOE,eAAC,GAAD,CACEnC,MAAM,WACNoF,KACE,eAAC,KAAD,CACEjD,MAAO,CACL0G,SAAU5F,EAAM8J,WAAWC,SAASnE,YAL5C,SAUE,eAACgE,EAAA,EAAD,CAAS7M,MAAM,iBAAf,SACE,eAAC8M,EAAA,EAAD,CACEhM,QAAS,kBACP6R,cAAY,WACVL,EAASx+B,OAAS,MAHxB,SAOE,eAAC,KAAD,CACEquB,MAAO,CACL0G,SAAU5F,EAAM8J,WAAWC,SAASnE,SACpC9H,MAAOkC,EAAM8B,QAAQnvB,KAAKksB,mBAMpC,sBACEoI,IAAKoJ,EACLnR,MAAO,CAILyK,SAAU,EACVtK,OAAQ,EAERkD,UAAW,WAEbqO,SAAU7S,uBAAY,WACpB,IAAgByS,EAAqBH,EAA9BzP,QACF4P,IAGLF,EAAsB1P,QACpB4P,EAAkB5J,aAChB4J,EAAkB3J,UAClB2J,EAAkB1J,aACpB,KACD,IArBL,SAuBE,eAACzI,EAAA,EAAD,CAAMwS,OAAO,EAAMC,gBAAgB,EAAnC,SACGzB,EAASxhC,KAAI,WAAsC+V,GAAS,IAA7Cza,EAA4C,EAA5CA,IAAKL,EAAuC,EAAvCA,QAAST,EAA8B,EAA9BA,KAAMokC,EAAwB,EAAxBA,cAClC,EA9Gd,SAAgCzM,EAAc+Q,GAA+B,IAAD,EAe1E,OAd2B,oBACxBjC,GAAgBa,MAAQ,CACvBzE,UAAW8F,KACXlT,MAAOkC,EAAM8B,QAAQmP,QAAQC,OAHN,eAKxBpC,GAAgBiB,KAAO,CACtB7E,UAAW,KACXpN,MAAOkC,EAAM8B,QAAQnvB,KAAKw+B,OAPH,eASxBrC,GAAgBc,UAAY,CAC3B1E,UAAWkG,KACXtT,MAAOkC,EAAM8B,QAAQnvB,KAAKw+B,OAXH,GAcEJ,GA+FgBM,CAC/BrR,EACA33B,GAFgBipC,EAAlB,EAAOpG,UAAiBpN,EAAxB,EAAwBA,MAIpByT,EAA+B,KASnC,OARID,IACFC,EACE,eAACD,EAAD,CACEE,UAAW1T,EACXoB,MAAO,CAAC0G,SAAU5F,EAAM8J,WAAW2H,MAAM7L,aAK7C,gBAACrH,EAAA,EAAD,CAEEC,QAAQ,EACRuD,SAAS,EACT7C,MAAO,CAACwS,WAAY,EAAGC,cAAe,GACtC9T,QAAS,kBAAO10B,EAAMgnC,EAAWhnC,GAAO,MAL1C,UAOGooC,GAAe,eAACjF,GAAA,EAAD,UAAeiF,IAC/B,eAAC5S,EAAA,EAAD,CACEC,QAAS91B,EACTy+B,uBAAwB,CACtB5F,QAAS,UACTzC,MAAO,CAAC0G,SAAU,WAEpBgM,OAAQL,EACRrS,MAAO,CACLpB,QACAqI,UAAW,EACX0L,aAAc,EACd7H,YAAa,MAGhByC,GACC,eAACjF,GAAA,EAAD,CAAyBtI,MAAO,CAACoP,aAAc,GAA/C,SACE,eAAC1E,EAAA,EAAD,CAAS7M,MAAM,gCAAf,SACE,eAACa,EAAA,EAAD,CACEoO,UACE,eAAC,KAAD,CACE9M,MAAO,CACL0G,SAAU5F,EAAM8J,WAAWC,SAASnE,SACpC9H,MAAOkC,EAAM8B,QAAQnvB,KAAKksB,UAC1ByP,aAAc,KAIpBzQ,QAAS,kBACPuS,EAAyB3D,IAE3BvN,MAAO,CACLoP,aAAc,EACd1I,SAAU,SACV9H,SAhBJ,iCAxBDla,gB,8BCIRkuB,I,OArIUhS,aACvB,YAUO,IATLsP,EASI,EATJA,UASI,IARJV,eAQI,MARM,aAQN,MAPJxP,aAOI,MAPI,GAOJ,MANJ6S,kBAMI,MANS,KAMT,EACE/R,EAAQC,cACR+R,EAAczR,iBAAwB,MACtC0R,EAAc1R,iBAAwB,MACtCxc,EAAOga,sBAAW,uCACtB,WAAO70B,GAAP,iBAAAsqB,EAAA,yDACOtqB,IAAQ8oC,EAAYpR,QAD3B,wDAIQtb,EAAW,IAAI4sB,YAAS,CAG5BC,YAAY,EAGZzE,WAAYjK,GAAcuB,OAAOpF,GAAUqD,sBAE7C+O,EAAYpR,QAAUtb,EAChB8sB,EAAW,IAAIC,YACrB/sB,EAASgtB,UAAUF,GACnB9sB,EAASgtB,UAAU,IAAIC,IAfzB,SAiBQjtB,EAASktB,mBAAmBtpC,GAjBpC,OAkBEskC,cAAQ,WACNloB,EAASmtB,UACP,aACAhP,GAAcuB,OAAOpF,GAAUqD,qBAEjC3d,EAASmtB,UACP,WACAhP,GAAcuB,OAAOpF,GAAUsD,mBAEjC5d,EAASmtB,UACP,gBACAhP,GAAcuB,OAAOpF,GAAUuD,wBAEjC7d,EAASmtB,UACP,aACAhP,GAAcuB,OAAOpF,GAAUwD,qBAEjCgP,EAASM,SAEX7sB,OAAO8sB,iBACL,SACA1iC,IAAE2iC,UAAS,kBAAMR,EAASM,QAAO,MAEnCptB,EAASutB,UAAS,gBAAEhhC,EAAF,EAAEA,KAAMC,EAAR,EAAQA,KAAR,OAChB+U,QAAQtK,IAAR,8BAAmCzK,EAAnC,YAA2CD,OAE7CogC,EAAYrR,QAAUwR,EACtB1D,EAAQppB,GA7CV,4CADsB,sDAgDtB,CAACopB,IAEGoE,EAAqBvS,iBAAO,IAC5BwS,EAAiBvlC,KAAKC,UAAUskC,GAatC,OAZAhL,qBAAU,WAEN+L,EAAmBlS,UAAYmS,GAC9Bf,EAAYpR,SACZqR,EAAYrR,UAIfqR,EAAYrR,QAAQ8R,MACpBI,EAAmBlS,QAAUmS,KAC5B,CAACA,IAGF,uBACE7T,MAAK,aACHC,QAAS,OACTqP,cAAe,UACZtP,GAJP,UAOE,eAAC,GAAD,CACEnC,MAAM,SACNoF,KACE,eAAC,KAAD,CACEjD,MAAO,CACL0G,SAAU5F,EAAM8J,WAAWC,SAASnE,YAL5C,SAUGwJ,EACC,sBAAKlQ,MAAO,CAACoP,YAAa,GAAIoD,WAAY,EAAGC,cAAe,GAA5D,SACE,eAAC/H,EAAA,EAAD,CAAS7M,MAAM,qBAAf,SACE,eAACgO,GAAA,EAAD,CAAkBjN,MAAM,UAAUkV,KAAM,SAI5C,eAACpJ,EAAA,EAAD,CAAS7M,MAAM,eAAf,SACE,eAAC8M,EAAA,EAAD,CAAYhM,QAAS,kCAAMmU,EAAYpR,eAAlB,aAAM,EAAqBtsB,SAAhD,SACE,eAAC,KAAD,CACE4qB,MAAO,CACL0G,SAAU5F,EAAM8J,WAAWC,SAASnE,SACpC9H,MAAOkC,EAAM8B,QAAQnvB,KAAKksB,mBAOtC,sBACEoI,IAAKljB,EACLmb,MAAO,CAILyK,SAAU,EACVtK,OAAQ,EAERkD,UAAW,oB,oDC7FR0Q,GAzCAnT,aAAS,YAAgD,IAA9CoT,EAA6C,EAA7CA,YAClB9D,EAAY8D,EAAY9D,UAC9B,OACE,sBACElQ,MAAO,CACLjL,SAAU,WACVkf,MAAO,OACPC,OAAQ,QAJZ,SAOE,sBAAKlU,MAAO,CAACjL,SAAU,YAAvB,SACE,eAAC2V,EAAA,EAAD,CAAS7M,MAAOqS,EAAY,eAAiB,cAA7C,SACE,eAACiE,GAAA,EAAD,CACExV,QAASE,sBAAW,sBAAC,sBAAAvK,EAAA,0DACf4b,EADe,gBAEjB8D,EAAYI,OAFK,sCAIXJ,EAAYv/B,MAJD,2CAMlB,CAACu/B,EAAa9D,IACjBtR,MAAOsR,EAAY,YAAc,UACjClQ,MAAO,CACL0L,OAAQ,IAVZ,SAaGwE,EAAY,eAAC,KAAD,IAAe,eAAC,KAAD,eCTlCmE,I,OAAYC,YAAY,CAC5B1R,QAAS,CACPz5B,KAAM,OACNu2B,QAAS,CACP6U,MAAOC,IAAK,KACZt8B,KAAMs8B,IAAK,KACXxC,KAAMwC,IAAK,KACXC,aAAc,aA8HLC,GAvHH9T,aAAS,WACnB,IACMoT,EADiB3S,iBAAoB,IAAI4O,IACZvO,QAEnC,EAAoCJ,mBAG1B,IAHV,mBAAOuR,EAAP,KAAmB8B,EAAnB,KAKA,EACErT,oBAAS,GADX,mBAAOsT,EAAP,KAAkCC,EAAlC,KAEA,EACEvT,mBAA+B,MADjC,mBAAOwT,EAAP,KAA+BC,EAA/B,KAEMC,EAA0BnW,uBAC9B,SAAC0O,GACCwH,EAA0BxH,GAC1BsH,GAA6B,KAE/B,IAEII,EAA0BpW,uBAAY,WAC1CgW,GAA6B,GAC7BE,EAA0B,QACzB,IAEH,OACE,gBAACG,EAAA,EAAD,CAAepU,MAAOuT,GAAtB,UACE,eAACc,EAAA,EAAD,IACA,eAAC,GAAD,CAAiBtL,QAASmK,EAAYnK,UACtC,eAACuL,EAAA,EAAD,UACE,qDACkBpB,EAAY9D,UAAY,gBAAkB,QAI9D,uBACElQ,MAAO,CACLC,QAAS,OACTqP,cAAe,SACfnP,OAAQ,OACRqG,MAAO,OACPtD,gBAAiBmR,GAAUzR,QAAQO,WAAWn8B,SANlD,UASE,eAAC,GAAD,CAAW6iC,QAASmK,EAAYnK,QAAShJ,OAAQmT,EAAYnT,SAE7D,gBAAC,IAAD,CACEwU,QAAS,IACTC,MAAO,CAAC,GAAI,IACZC,UAAW,SAACD,GACVX,EAAc,2BACT9B,GADQ,IAEX2C,gBAAiBF,MAGrBtV,MAAO,CACLC,QAAS,OACTqP,cAAe,MACf7E,SAAU,EACVxD,UAAW,GAEbwO,WA/DgB,EAgDlB,UAiBE,uBAAKzV,MAAO,CAACjL,SAAU,YAAvB,UACE,eAAC,GAAD,CACEya,QAAS,SAAC3O,GAAD,OAAYmT,EAAYnvB,KAAK,CAACgc,YACvCb,MAAO,CACLwG,MAAO,OACPrG,OAAQ,OAERuV,SAAU,aAGd,eAAC,GAAD,CAAQ1B,YAAaA,OAGvB,gBAAC,IAAD,CACE2B,UAAU,WACVL,MAAO,CAAC,GAAI,IACZD,QAAS,IACTO,aAAa,EACbL,UAAW,SAACD,GACVX,EAAc,2BACT9B,GADQ,IAEXgD,mBAAoBP,MAGxBtV,MAAO,CACLC,QAAS,OACTqP,cAAe,UAEjBmG,WA7Fc,EA8EhB,UAiBE,eAAC,GAAD,CACEjG,QAAS,SAACppB,GAAD,OAAc4tB,EAAYnvB,KAAK,CAACuB,cACzCysB,WAAYA,EACZ3C,UAAW8D,EAAY9D,YAEzB,eAAC,GAAD,CACEC,SAAU6D,EAAY7D,SACtBc,WAAYpS,uBACV,SAAC50B,GAAD,OAAS+pC,EAAY8B,uBAAuB7rC,KAC5C,CAAC+pC,IAEH9C,yBAA0B8D,aAMlC,eAAC3H,GAAD,CACEE,cAAeuH,EACf5W,OAAQ0W,EACRzW,QAAS8W,UCnJjBc,IAASC,OACP,eAAC,IAAMC,WAAP,UACE,eAAC,GAAD,MAEFC,SAASC,eAAe,U,gCCP1B,IAAI9uC,EAAalC,MAAQA,KAAKkC,WAAe,WACzC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBlC,OAAOqC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUJ,EAAGC,GAAKD,EAAEG,UAAYF,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIxB,KAAKwB,EAAOpC,OAAOa,UAAUC,eAAeC,KAAKqB,EAAGxB,KAAIuB,EAAEvB,GAAKwB,EAAExB,MAC3EuB,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAII,UAAU,uBAAyBC,OAAOL,GAAK,iCAE7D,SAASM,IAAO3C,KAAK4C,YAAcR,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEtB,UAAkB,OAANuB,EAAapC,OAAOC,OAAOmC,IAAMM,EAAG7B,UAAYuB,EAAEvB,UAAW,IAAI6B,IAZ1C,GAe7C1C,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IAEtD,IAAI6vC,EAA8B,SAAUzsC,GAExC,SAASysC,EAAaxsC,EAASC,GAC3B,IAAIC,OAAY,IAAPD,EAAgB,GAAKA,EAAIE,EAAiBD,EAAGC,eAAgBE,EAAMH,EAAGG,IAC3EyE,EAAQ/E,EAAOxD,KAAKhB,KAAMyE,IAAYzE,KAC1C,GAAI8E,EAAK,CACL,IAAIosC,EAAuBtsC,EAAiBA,EAAiB,IAAM,GAC/DusC,EAAYrsC,EAAI4K,KAAO,IAAM5K,EAAI6T,IACrCpP,EAAM9E,QAAU,GAAKysC,EAAuBC,EAAY,MAAQ5nC,EAAM9E,QACtE8E,EAAMzE,IAAMA,EAEhB,OAAOyE,EAEX,OAZArH,EAAU+uC,EAAczsC,GAYjBysC,EAbuB,CAchC/nC,OACFtI,EAAQiB,QAAUovC,G,gCChClBhxC,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQ+Z,cAAgB/Z,EAAQ6c,aAAe7c,EAAQ0sB,SAAW1sB,EAAQkc,aAAU,EAGpF,SAAWA,GAEPA,EAAO,IAAU,MAEjBA,EAAO,WAAiB,YAExBA,EAAO,MAAY,QAEnBA,EAAO,IAAU,MARrB,CASalc,EAAQkc,UAAYlc,EAAQkc,QAAU,KAGnD,SAAWwQ,GACPA,EAAQ,MAAY,QACpBA,EAAQ,OAAa,SAFzB,CAGc1sB,EAAQ0sB,WAAa1sB,EAAQ0sB,SAAW,KAKtD1sB,EAAQ6c,aAJR,SAAsB2zB,EAAaziC,GAC/B,IAAIjK,EACJ,OAAoH,QAA3GA,EAAK0sC,EAAY1+B,MAAK,SAAUuL,GAAU,OAAOA,EAAOtP,KAAKyE,gBAAkBzE,EAAKyE,wBAAsC,IAAP1O,EAAgBA,EAAK,MAMrJ9D,EAAQ+Z,cAHR,SAAuBy2B,EAAaziC,GAChC,OAAOyiC,EAAYla,QAAO,SAAUjZ,GAAU,OAAOA,EAAOtP,KAAKyE,gBAAkBzE,EAAKyE,mB,gCC1B5FnT,OAAOO,eAAeI,EAAS,aAAc,CAAEQ,OAAO,IACtDR,EAAQiP,aAAejP,EAAQie,4BAAyB,EAExD,SAAWA,GACPA,EAAsB,KAAW,OACjCA,EAAsB,MAAY,QAClCA,EAAsB,OAAa,SACnCA,EAAsB,IAAU,MAChCA,EAAsB,UAAgB,WAL1C,CAM4Bje,EAAQie,yBAA2Bje,EAAQie,uBAAyB,KAGhG,SAAWhP,GACPA,EAAY,MAAY,QACxBA,EAAY,UAAgB,YAC5BA,EAAY,MAAY,QAH5B,CAIkBjP,EAAQiP,eAAiBjP,EAAQiP,aAAe,O","file":"static/js/main.9e0f9974.chunk.js","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QbUdt = exports.QbArray = exports.RuntimePlatform = exports.Executor = exports.ExecutionError = exports.compile = void 0;\nvar compile_1 = require(\"./compile\");\nObject.defineProperty(exports, \"compile\", { enumerable: true, get: function () { return __importDefault(compile_1).default; } });\n__exportStar(require(\"./lib/error-with-loc\"), exports);\n__exportStar(require(\"./lib/types\"), exports);\nvar executor_1 = require(\"./runtime/executor\");\nObject.defineProperty(exports, \"ExecutionError\", { enumerable: true, get: function () { return executor_1.ExecutionError; } });\nObject.defineProperty(exports, \"Executor\", { enumerable: true, get: function () { return __importDefault(executor_1).default; } });\nvar runtime_1 = require(\"./runtime/runtime\");\nObject.defineProperty(exports, \"RuntimePlatform\", { enumerable: true, get: function () { return runtime_1.RuntimePlatform; } });\nvar qb_array_1 = require(\"./runtime/qb-array\");\nObject.defineProperty(exports, \"QbArray\", { enumerable: true, get: function () { return __importDefault(qb_array_1).default; } });\nvar qb_udt_1 = require(\"./runtime/qb-udt\");\nObject.defineProperty(exports, \"QbUdt\", { enumerable: true, get: function () { return __importDefault(qb_udt_1).default; } });\n__exportStar(require(\"./runtime/compiled-code\"), exports);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AstVisitor = exports.AstVisitorError = exports.UnaryOp = exports.BinaryOp = exports.ExprType = exports.isLhsExpr = exports.InputType = exports.PrintSep = exports.CondLoopStructure = exports.CaseExprType = exports.isSingularTypeExpr = exports.DataTypeExprType = exports.DimType = exports.StmtType = exports.isFnProcOrDefFnProc = void 0;\nvar error_with_loc_1 = __importDefault(require(\"./error-with-loc\"));\nvar types_1 = require(\"./types\");\nfunction isFnProcOrDefFnProc(proc) {\n    return types_1.isFnOrDefFn(proc.type);\n}\nexports.isFnProcOrDefFnProc = isFnProcOrDefFnProc;\nvar StmtType;\n(function (StmtType) {\n    StmtType[\"LABEL\"] = \"label\";\n    StmtType[\"DIM\"] = \"dim\";\n    StmtType[\"ASSIGN\"] = \"assign\";\n    StmtType[\"CONST\"] = \"const\";\n    StmtType[\"GOTO\"] = \"goto\";\n    StmtType[\"IF\"] = \"if\";\n    StmtType[\"SELECT\"] = \"select\";\n    StmtType[\"COND_LOOP\"] = \"condLoop\";\n    StmtType[\"UNCOND_LOOP\"] = \"uncondLoop\";\n    StmtType[\"EXIT_LOOP\"] = \"exitLoop\";\n    StmtType[\"FOR\"] = \"for\";\n    StmtType[\"NEXT\"] = \"next\";\n    StmtType[\"EXIT_FOR\"] = \"exitFor\";\n    StmtType[\"GOSUB\"] = \"gosub\";\n    StmtType[\"RETURN\"] = \"return\";\n    StmtType[\"CALL\"] = \"call\";\n    StmtType[\"EXIT_PROC\"] = \"exitProc\";\n    StmtType[\"END\"] = \"end\";\n    StmtType[\"SWAP\"] = \"swap\";\n    StmtType[\"PRINT\"] = \"print\";\n    StmtType[\"INPUT\"] = \"input\";\n    StmtType[\"DEF_TYPE\"] = \"defType\";\n    StmtType[\"DATA\"] = \"data\";\n    StmtType[\"READ\"] = \"read\";\n    StmtType[\"RESTORE\"] = \"restore\";\n})(StmtType = exports.StmtType || (exports.StmtType = {}));\nvar DimType;\n(function (DimType) {\n    DimType[\"LOCAL\"] = \"local\";\n    DimType[\"SHARED\"] = \"shared\";\n    DimType[\"STATIC\"] = \"static\";\n})(DimType = exports.DimType || (exports.DimType = {}));\nvar DataTypeExprType;\n(function (DataTypeExprType) {\n    DataTypeExprType[\"ELEMENTARY\"] = \"elementary\";\n    DataTypeExprType[\"ARRAY\"] = \"array\";\n    DataTypeExprType[\"UDT\"] = \"udt\";\n})(DataTypeExprType = exports.DataTypeExprType || (exports.DataTypeExprType = {}));\nfunction isSingularTypeExpr(typeExpr) {\n    return typeExpr.type !== DataTypeExprType.ARRAY;\n}\nexports.isSingularTypeExpr = isSingularTypeExpr;\nvar CaseExprType;\n(function (CaseExprType) {\n    /** Single value expression. */\n    CaseExprType[\"VALUE\"] = \"value\";\n    /** Range, e.g. 1 TO 5. */\n    CaseExprType[\"RANGE\"] = \"range\";\n    /** Comparison operator, e.g. IS >= 5. */\n    CaseExprType[\"COMP\"] = \"comp\";\n})(CaseExprType = exports.CaseExprType || (exports.CaseExprType = {}));\nvar CondLoopStructure;\n(function (CondLoopStructure) {\n    CondLoopStructure[\"COND_EXPR_BEFORE_STMTS\"] = \"condExprBeforeStmts\";\n    CondLoopStructure[\"COND_EXPR_AFTER_STMTS\"] = \"condExprAfterStmts\";\n})(CondLoopStructure = exports.CondLoopStructure || (exports.CondLoopStructure = {}));\n/** An unimplemented statement that we can ignore for codegen purposes. */\nvar PrintSep;\n(function (PrintSep) {\n    PrintSep[\"COMMA\"] = \"comma\";\n    PrintSep[\"SEMICOLON\"] = \"semicolon\";\n})(PrintSep = exports.PrintSep || (exports.PrintSep = {}));\nvar InputType;\n(function (InputType) {\n    /** INPUT. */\n    InputType[\"TOKENIZED\"] = \"tokenized\";\n    /** LINE INPUT. */\n    InputType[\"LINE\"] = \"line\";\n})(InputType = exports.InputType || (exports.InputType = {}));\nfunction isLhsExpr(expr) {\n    return [ExprType.VAR_REF, ExprType.SUBSCRIPT, ExprType.MEMBER].includes(expr.type);\n}\nexports.isLhsExpr = isLhsExpr;\nvar ExprType;\n(function (ExprType) {\n    ExprType[\"LITERAL\"] = \"literal\";\n    ExprType[\"VAR_REF\"] = \"varRef\";\n    ExprType[\"FN_CALL\"] = \"fnCall\";\n    ExprType[\"BINARY_OP\"] = \"binaryOp\";\n    ExprType[\"UNARY_OP\"] = \"unaryOp\";\n    ExprType[\"SUBSCRIPT\"] = \"subscript\";\n    ExprType[\"MEMBER\"] = \"member\";\n})(ExprType = exports.ExprType || (exports.ExprType = {}));\nvar BinaryOp;\n(function (BinaryOp) {\n    BinaryOp[\"ADD\"] = \"add\";\n    BinaryOp[\"SUB\"] = \"sub\";\n    BinaryOp[\"MUL\"] = \"mul\";\n    BinaryOp[\"DIV\"] = \"div\";\n    BinaryOp[\"INTDIV\"] = \"intdiv\";\n    BinaryOp[\"EXP\"] = \"exp\";\n    BinaryOp[\"MOD\"] = \"mod\";\n    BinaryOp[\"AND\"] = \"and\";\n    BinaryOp[\"OR\"] = \"or\";\n    BinaryOp[\"EQ\"] = \"eq\";\n    BinaryOp[\"NE\"] = \"ne\";\n    BinaryOp[\"GT\"] = \"gt\";\n    BinaryOp[\"GTE\"] = \"gte\";\n    BinaryOp[\"LT\"] = \"lt\";\n    BinaryOp[\"LTE\"] = \"lte\";\n})(BinaryOp = exports.BinaryOp || (exports.BinaryOp = {}));\nvar UnaryOp;\n(function (UnaryOp) {\n    UnaryOp[\"NOT\"] = \"not\";\n    UnaryOp[\"NEG\"] = \"sub\";\n    UnaryOp[\"PARENS\"] = \"parens\";\n})(UnaryOp = exports.UnaryOp || (exports.UnaryOp = {}));\n/** Error thrown by AST visitors. */\nvar AstVisitorError = /** @class */ (function (_super) {\n    __extends(AstVisitorError, _super);\n    function AstVisitorError(message, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, node = _b.node;\n        return _super.call(this, message, { sourceFileName: sourceFileName, loc: node === null || node === void 0 ? void 0 : node.loc }) || this;\n    }\n    return AstVisitorError;\n}(error_with_loc_1.default));\nexports.AstVisitorError = AstVisitorError;\n/** Base class for AST visitors. */\nvar AstVisitor = /** @class */ (function () {\n    function AstVisitor() {\n    }\n    /** Invokes the visitor method corresponding to the specified AstNode. */\n    AstVisitor.prototype.accept = function (node) {\n        switch (node.type) {\n            case types_1.ProcType.SUB:\n            case types_1.ProcType.FN:\n            case types_1.ProcType.DEF_FN:\n                return this.visitProc(node);\n            case StmtType.LABEL:\n                return this.visitLabelStmt(node);\n            case StmtType.DIM:\n                return this.visitDimStmt(node);\n            case StmtType.ASSIGN:\n                return this.visitAssignStmt(node);\n            case StmtType.CONST:\n                return this.visitConstStmt(node);\n            case StmtType.GOTO:\n                return this.visitGotoStmt(node);\n            case StmtType.IF:\n                return this.visitIfStmt(node);\n            case StmtType.SELECT:\n                return this.visitSelectStmt(node);\n            case StmtType.COND_LOOP:\n                return this.visitCondLoopStmt(node);\n            case StmtType.UNCOND_LOOP:\n                return this.visitUncondLoopStmt(node);\n            case StmtType.EXIT_LOOP:\n                return this.visitExitLoopStmt(node);\n            case StmtType.FOR:\n                return this.visitForStmt(node);\n            case StmtType.NEXT:\n                return this.visitNextStmt(node);\n            case StmtType.EXIT_FOR:\n                return this.visitExitForStmt(node);\n            case StmtType.GOSUB:\n                return this.visitGosubStmt(node);\n            case StmtType.RETURN:\n                return this.visitReturnStmt(node);\n            case StmtType.CALL:\n                return this.visitCallStmt(node);\n            case StmtType.EXIT_PROC:\n                return this.visitExitProcStmt(node);\n            case StmtType.END:\n                return this.visitEndStmt(node);\n            case StmtType.SWAP:\n                return this.visitSwapStmt(node);\n            case StmtType.PRINT:\n                return this.visitPrintStmt(node);\n            case StmtType.INPUT:\n                return this.visitInputStmt(node);\n            case StmtType.DEF_TYPE:\n                return this.visitDefTypeStmt(node);\n            case StmtType.DATA:\n                return this.visitDataStmt(node);\n            case StmtType.READ:\n                return this.visitReadStmt(node);\n            case StmtType.RESTORE:\n                return this.visitRestoreStmt(node);\n            case ExprType.LITERAL:\n                return this.visitLiteralExpr(node);\n            case ExprType.VAR_REF:\n                return this.visitVarRefExpr(node);\n            case ExprType.FN_CALL:\n                return this.visitFnCallExpr(node);\n            case ExprType.BINARY_OP:\n                return this.visitBinaryOpExpr(node);\n            case ExprType.UNARY_OP:\n                return this.visitUnaryOpExpr(node);\n            case ExprType.SUBSCRIPT:\n                return this.visitSubscriptExpr(node);\n            case ExprType.MEMBER:\n                return this.visitMemberExpr(node);\n            default:\n                throw new Error(\"Unknown node type: \" + JSON.stringify(node));\n        }\n    };\n    /** Invokes the corresponding visitor methods for each of the provided AstNodes. */\n    AstVisitor.prototype.acceptAll = function (nodes) {\n        var _this = this;\n        return nodes.map(function (node) { return _this.accept(node); });\n    };\n    /** Throws an AstVisitorError for the corresponding AstNode. */\n    AstVisitor.prototype.throwError = function (message, node) {\n        throw new AstVisitorError(message, {\n            sourceFileName: this.sourceFileName,\n            node: node,\n        });\n    };\n    return AstVisitor;\n}());\nexports.AstVisitor = AstVisitor;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar qb_array_1 = __importDefault(require(\"./qb-array\"));\nvar qb_udt_1 = __importDefault(require(\"./qb-udt\"));\n/** Initial value for elementary data types. */\nvar ELEMENTARY_TYPE_INIT_VALUES = (_a = {},\n    _a[types_1.DataType.INTEGER] = 0,\n    _a[types_1.DataType.LONG] = 0,\n    _a[types_1.DataType.SINGLE] = 0.0,\n    _a[types_1.DataType.DOUBLE] = 0.0,\n    _a[types_1.DataType.STRING] = '',\n    _a);\nfunction initValue(typeSpec) {\n    var dataType = typeSpec.type;\n    if (types_1.isElementaryType(dataType)) {\n        return ELEMENTARY_TYPE_INIT_VALUES[dataType];\n    }\n    switch (typeSpec.type) {\n        case types_1.DataType.ARRAY:\n            return new qb_array_1.default(typeSpec);\n        case types_1.DataType.UDT:\n            return new qb_udt_1.default(typeSpec);\n        default:\n            throw new Error(\"Unknown type: \" + JSON.stringify(typeSpec));\n    }\n}\nexports.default = initValue;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SCREEN_MODE_CONFIGS = exports.RuntimePlatform = void 0;\nvar moo_1 = __importDefault(require(\"moo\"));\nvar types_1 = require(\"../lib/types\");\nvar builtins_1 = require(\"./builtins\");\nvar compiled_code_1 = require(\"./compiled-code\");\nvar round_half_to_even_1 = __importDefault(require(\"../lib/round-half-to-even\"));\n/** Interface for platform-specific runtime functionality. */\nvar RuntimePlatform = /** @class */ (function () {\n    function RuntimePlatform() {\n        /** Flag indicating we should stop executing.\n         *\n         * Setting this flag will cause blocking methods like `inputLine()` to exit early.\n         */\n        this.shouldStopExecution = false;\n    }\n    return RuntimePlatform;\n}());\nexports.RuntimePlatform = RuntimePlatform;\nexports.SCREEN_MODE_CONFIGS = [\n    {\n        mode: 0,\n        textModeDimensions: [{ rows: 80, cols: 25 }],\n        colorMap: [\n            'black',\n            'blue',\n            'green',\n            'cyan',\n            'red',\n            'magenta',\n            'yellow',\n            'white',\n            'gray',\n            'blueBright',\n            'greenBright',\n            'cyanBright',\n            'redBright',\n            'magentaBright',\n            'yellowBright',\n            'whiteBright',\n        ],\n    },\n];\n/** Runtime support library.\n *\n * This class provides the interface invoked by compiled code. It is platform-agnostic, and wraps\n * the low-level, platform-dependent functionality in the injected RuntimePlatform.\n */\nvar Runtime = /** @class */ (function () {\n    function Runtime(platform) {\n        this.platform = platform;\n        this.roundHalfToEven = round_half_to_even_1.default;\n        this.printFormatStringLexer = moo_1.default.compile({\n            NUMBER: /(?:[#,])*\\.#+|[#,]+/,\n            STRING: '&',\n            DOLLAR_SIGNS: /\\$+/,\n            LITERAL: {\n                match: /[^.#&\\$]+/,\n                lineBreaks: true,\n            },\n        });\n        /** Lexer for input(). */\n        this.inputLexer = moo_1.default.compile({\n            WHITESPACE: { match: /\\s+/, lineBreaks: true },\n            QUOTED_STRING: {\n                match: /\"[^\"]*\"/,\n                value: function (text) { return text.substr(1, text.length - 2); },\n                type: function () { return 'STRING'; },\n            },\n            COMMA: ',',\n            STRING: /[^,\\s]+/,\n        });\n        this.currentScreenMode = 0;\n    }\n    Runtime.prototype.executeBuiltinProc = function (name, argTypeSpecs) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var builtinProc, runContext;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs) ||\n                            builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs);\n                        if (!builtinProc) {\n                            throw new Error(\"No matching built-in procedure found: \\\"\" + name + \"\\\"\");\n                        }\n                        if (argTypeSpecs.length !== args.length) {\n                            throw new Error(\"Argument types and values do not match: \" +\n                                (\"expected \" + argTypeSpecs.length + \" arguments, got \" + args.length));\n                        }\n                        runContext = {\n                            runtime: this,\n                            platform: this.platform,\n                            argTypeSpecs: argTypeSpecs,\n                            args: args,\n                        };\n                        return [4 /*yield*/, builtinProc.run.apply(builtinProc, __spreadArray(__spreadArray([], args.map(function (ptr) { return ptr[0][ptr[1]]; })), [runContext]))];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    Runtime.prototype.print = function (formatString) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var line;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        line = formatString\n                            ? this.printWithFormatString(formatString, args)\n                            : this.printWithDefaultFormat(args);\n                        if (args.length === 0 ||\n                            args[args.length - 1].type === compiled_code_1.PrintArgType.VALUE) {\n                            line += '\\n';\n                        }\n                        return [4 /*yield*/, this.platform.print(line)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Implements PRINT USING format strings.\n     *\n     * This is a VERY incomplete implementation. Supported:\n     *\n     *   - Formatting numbers with ##.##\n     *   - Formatting string with &\n     */\n    Runtime.prototype.printWithFormatString = function (formatString, args) {\n        var pieces = [];\n        var argIdx = 0;\n        this.printFormatStringLexer.reset(formatString);\n        for (;;) {\n            while (argIdx < args.length && args[argIdx].type !== compiled_code_1.PrintArgType.VALUE) {\n                ++argIdx;\n            }\n            var nextArg = argIdx < args.length ? args[argIdx] : null;\n            var token = this.printFormatStringLexer.next();\n            if (!token) {\n                break;\n            }\n            switch (token.type) {\n                case 'NUMBER':\n                    if (!nextArg || typeof nextArg.value !== 'number') {\n                        throw new Error('Formatting error: expected number ' +\n                            (\"as argument #\" + (argIdx + 1) + \", got \" + typeof (nextArg === null || nextArg === void 0 ? void 0 : nextArg.value)));\n                    }\n                    var _a = token.value.split('.'), integralFormat = _a[0], fractionFormat = _a[1];\n                    // Not supporting commas yet.\n                    var integralFormatLength = integralFormat.replace(/,/, '').length;\n                    if (fractionFormat) {\n                        var formattedValue = (\"\" + Math.floor(nextArg.value)).padStart(integralFormatLength) +\n                            '.' +\n                            nextArg.value.toFixed(fractionFormat.length).split('.')[1];\n                        pieces.push(formattedValue);\n                    }\n                    else {\n                        var formattedValue = nextArg.value.toFixed(0).padStart(integralFormatLength) +\n                            (token.value.indexOf('.') >= 0 ? '.' : '');\n                        pieces.push(formattedValue);\n                    }\n                    ++argIdx;\n                    break;\n                case 'STRING':\n                    if (!nextArg || typeof nextArg.value !== 'string') {\n                        throw new Error(\"Formatting error: expected string as argument #\" + (argIdx + 1));\n                    }\n                    pieces.push(nextArg.value);\n                    ++argIdx;\n                    break;\n                case 'DOLLAR_SIGNS': {\n                    var value = void 0;\n                    if (token.value.length <= 1) {\n                        value = token.value;\n                    }\n                    else if (token.value.length === 2) {\n                        value = ' $';\n                    }\n                    else {\n                        value = '%$';\n                    }\n                    pieces.push(value);\n                    break;\n                }\n                case 'LITERAL':\n                    pieces.push(token.value);\n                    break;\n                default:\n                    throw new Error(\"Unexpected token type: \" + JSON.stringify(token));\n            }\n        }\n        return pieces.join('');\n    };\n    Runtime.prototype.printWithDefaultFormat = function (args) {\n        var PRINT_ZONE_LENGTH = 14;\n        var line = '';\n        for (var _i = 0, args_1 = args; _i < args_1.length; _i++) {\n            var arg = args_1[_i];\n            switch (arg.type) {\n                case compiled_code_1.PrintArgType.SEMICOLON:\n                    break;\n                case compiled_code_1.PrintArgType.COMMA:\n                    var numPaddingChars = PRINT_ZONE_LENGTH - (line.length % PRINT_ZONE_LENGTH);\n                    line += ' '.repeat(numPaddingChars);\n                    break;\n                case compiled_code_1.PrintArgType.VALUE:\n                    if (typeof arg.value === 'string') {\n                        line += \"\" + arg.value;\n                        break;\n                    }\n                    else if (typeof arg.value === 'number') {\n                        line += \"\" + (arg.value >= 0 ? ' ' : '') + arg.value + \" \";\n                        break;\n                    }\n                    else {\n                        // Fall through\n                    }\n                default:\n                    throw new Error(\"Unknown print arg: '\" + JSON.stringify(arg) + \"'\");\n            }\n        }\n        return line;\n    };\n    Runtime.prototype.inputLine = function (prompt) {\n        return __awaiter(this, void 0, void 0, function () {\n            var line;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!prompt) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.platform.print(prompt)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, this.platform.setCursorVisibility(true)];\n                    case 3:\n                        _a.sent();\n                        return [4 /*yield*/, this.platform.inputLine()];\n                    case 4:\n                        line = _a.sent();\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\n                    case 5:\n                        _a.sent();\n                        return [2 /*return*/, line];\n                }\n            });\n        });\n    };\n    Runtime.prototype.input = function (prompt) {\n        var resultTypes = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            resultTypes[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var results, line, tokens, tokenIdx, errorMessage, resultIdx, resultType, errorMessagePrefix, tokenValue, numericValue;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        results = [];\n                        return [4 /*yield*/, this.platform.print(prompt)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.inputLine('')];\n                    case 2:\n                        line = _a.sent();\n                        if (this.platform.shouldStopExecution) {\n                            return [2 /*return*/, results];\n                        }\n                        tokens = this.lexInput(line);\n                        tokenIdx = 0;\n                        errorMessage = null;\n                        for (resultIdx = 0; resultIdx < resultTypes.length; ++resultIdx) {\n                            resultType = resultTypes[resultIdx];\n                            errorMessagePrefix = \"Error parsing value \" + (resultIdx + 1) + \": \";\n                            // Consume comma token for result 1+.\n                            if (resultIdx > 0) {\n                                if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'COMMA') {\n                                    ++tokenIdx;\n                                }\n                                else {\n                                    errorMessage = errorMessagePrefix + \"Comma expected\";\n                                    break;\n                                }\n                            }\n                            // Consume value.\n                            if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'STRING') {\n                                tokenValue = tokens[tokenIdx].value;\n                                if (types_1.isString(resultType)) {\n                                    results.push(tokenValue);\n                                }\n                                else if (types_1.isNumeric(resultType)) {\n                                    numericValue = parseFloat(tokenValue);\n                                    if (isNaN(numericValue)) {\n                                        errorMessage = errorMessagePrefix + \"Invalid numeric value \\\"\" + tokenValue + \"\\\"\";\n                                        break;\n                                    }\n                                    else {\n                                        results.push(numericValue);\n                                    }\n                                }\n                                else {\n                                    throw new Error(\"Unexpected result type \" + resultType.type);\n                                }\n                                ++tokenIdx;\n                            }\n                            else {\n                                errorMessage = errorMessagePrefix + \"No value provided\";\n                                break;\n                            }\n                        }\n                        if (!(results.length === resultTypes.length)) return [3 /*break*/, 3];\n                        return [2 /*return*/, results];\n                    case 3:\n                        if (!(results.length < resultTypes.length)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, this.platform.print(\"\\n\" + (errorMessage ? errorMessage + \"\\n\" : '') + \"Redo from start\\n\")];\n                    case 4:\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5: \n                    // This would indicate a logic error above - we should stop consuming from input once the\n                    // expected number of results has been reached.\n                    throw new Error(\"Too many results: expected \" + resultTypes.length + \", got \" + results.length);\n                    case 6: return [3 /*break*/, 0];\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Runtime.prototype.lexInput = function (line) {\n        this.inputLexer.reset(line.trim());\n        var tokens = [];\n        for (;;) {\n            var token = this.inputLexer.next();\n            if (!token) {\n                break;\n            }\n            if (token.type !== 'WHITESPACE') {\n                tokens.push(token);\n            }\n        }\n        return tokens;\n    };\n    Runtime.prototype.setScreenMode = function (n) {\n        var screenMode = exports.SCREEN_MODE_CONFIGS.find(function (_a) {\n            var mode = _a.mode;\n            return mode === n;\n        });\n        if (!screenMode) {\n            throw new Error(\"Unsupported screen mode: \" + n);\n        }\n        this.currentScreenMode = n;\n    };\n    Object.defineProperty(Runtime.prototype, \"currentScreenModeConfig\", {\n        get: function () {\n            var _this = this;\n            return exports.SCREEN_MODE_CONFIGS.find(function (_a) {\n                var mode = _a.mode;\n                return mode === _this.currentScreenMode;\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Runtime;\n}());\nexports.default = Runtime;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Keywords = void 0;\nvar moo_1 = __importDefault(require(\"moo\"));\n/** QBasic keywords.\n *\n * Note that the values must be lowercase!\n */\nvar Keywords;\n(function (Keywords) {\n    Keywords[\"AND\"] = \"and\";\n    Keywords[\"AS\"] = \"as\";\n    Keywords[\"CALL\"] = \"call\";\n    Keywords[\"CASE\"] = \"case\";\n    Keywords[\"COLOR\"] = \"color\";\n    Keywords[\"CONST\"] = \"const\";\n    Keywords[\"DATA\"] = \"data\";\n    Keywords[\"DECLARE\"] = \"declare\";\n    Keywords[\"DEF\"] = \"def\";\n    Keywords[\"DEFINT\"] = \"defint\";\n    Keywords[\"DEFSNG\"] = \"defsng\";\n    Keywords[\"DEFDBL\"] = \"defdbl\";\n    Keywords[\"DEFLNG\"] = \"deflng\";\n    Keywords[\"DEFSTR\"] = \"defstr\";\n    Keywords[\"DIM\"] = \"dim\";\n    Keywords[\"DO\"] = \"do\";\n    Keywords[\"DOUBLE\"] = \"double\";\n    Keywords[\"ELSE\"] = \"else\";\n    Keywords[\"ELSEIF\"] = \"elseif\";\n    Keywords[\"END\"] = \"end\";\n    Keywords[\"EXIT\"] = \"exit\";\n    Keywords[\"FUNCTION\"] = \"function\";\n    Keywords[\"FOR\"] = \"for\";\n    Keywords[\"GOSUB\"] = \"gosub\";\n    Keywords[\"GOTO\"] = \"goto\";\n    Keywords[\"IF\"] = \"if\";\n    Keywords[\"IS\"] = \"is\";\n    Keywords[\"INPUT\"] = \"input\";\n    Keywords[\"INTEGER\"] = \"integer\";\n    Keywords[\"LET\"] = \"let\";\n    Keywords[\"LINE\"] = \"line\";\n    Keywords[\"LOCATE\"] = \"locate\";\n    Keywords[\"LONG\"] = \"long\";\n    Keywords[\"LOOP\"] = \"loop\";\n    Keywords[\"MOD\"] = \"mod\";\n    Keywords[\"NEXT\"] = \"next\";\n    Keywords[\"NOT\"] = \"not\";\n    Keywords[\"OR\"] = \"or\";\n    Keywords[\"PRINT\"] = \"print\";\n    Keywords[\"READ\"] = \"read\";\n    Keywords[\"REM\"] = \"rem\";\n    Keywords[\"RESTORE\"] = \"restore\";\n    Keywords[\"RETURN\"] = \"return\";\n    Keywords[\"SEG\"] = \"seg\";\n    Keywords[\"SELECT\"] = \"select\";\n    Keywords[\"SHARED\"] = \"shared\";\n    Keywords[\"SINGLE\"] = \"single\";\n    Keywords[\"STATIC\"] = \"static\";\n    Keywords[\"STEP\"] = \"step\";\n    Keywords[\"STOP\"] = \"stop\";\n    Keywords[\"STRING\"] = \"string\";\n    Keywords[\"SUB\"] = \"sub\";\n    Keywords[\"SYSTEM\"] = \"system\";\n    Keywords[\"SWAP\"] = \"swap\";\n    Keywords[\"THEN\"] = \"then\";\n    Keywords[\"TO\"] = \"to\";\n    Keywords[\"TYPE\"] = \"type\";\n    Keywords[\"UNTIL\"] = \"until\";\n    Keywords[\"USING\"] = \"using\";\n    Keywords[\"VIEW\"] = \"view\";\n    Keywords[\"WEND\"] = \"wend\";\n    Keywords[\"WHILE\"] = \"while\";\n})(Keywords = exports.Keywords || (exports.Keywords = {}));\n/** moo lexer used internally by Lexer. */\nvar mooLexer = moo_1.default.states({\n    main: {\n        WHITESPACE: {\n            match: /\\s+/,\n            type: function (text) { return (text.includes('\\n') ? 'NEWLINE' : ''); },\n            lineBreaks: true,\n        },\n        COMMENT: {\n            match: /'/,\n            push: 'comment',\n        },\n        IDENTIFIER: {\n            match: /[a-zA-Z_][a-zA-Z0-9_]*(?:\\$|%|#|&|!)?/,\n            type: caseInsensitiveKeywords(Keywords),\n        },\n        STRING_LITERAL: {\n            match: /\"[^\"]*\"/,\n            value: function (text) { return text.substr(1, text.length - 2); },\n        },\n        NUMERIC_LITERAL: /(?:\\d*\\.\\d+|\\d+)/,\n        HEX_LITERAL: {\n            match: /&[hH][\\da-fA-F]+&?/,\n            type: function () { return 'NUMERIC_LITERAL'; },\n            value: function (text) { return \"\" + parseInt(text.substr(2), 16); },\n        },\n        OCT_LITERAL: {\n            match: /&[oO]?[0-7]+&?/,\n            type: function () { return 'NUMERIC_LITERAL'; },\n            value: function (text) { return \"\" + parseInt(text.match(/[0-7]+/)[0], 8); },\n        },\n        COLON: ':',\n        SEMICOLON: ';',\n        COMMA: ',',\n        DOT: '.',\n        LPAREN: '(',\n        RPAREN: ')',\n        ADD: '+',\n        SUB: '-',\n        MUL: '*',\n        EXP: '^',\n        DIV: '/',\n        INTDIV: '\\\\',\n        // Note: order matters in the comparison operators!\n        EQ: '=',\n        NE: '<>',\n        GTE: '>=',\n        LTE: '<=',\n        GT: '>',\n        LT: '<',\n    },\n    comment: {\n        COMMENT: {\n            match: /[^\\n]+/,\n            pop: 1,\n        },\n        NEWLINE: {\n            match: /\\n/,\n            pop: 1,\n            lineBreaks: true,\n        },\n    },\n}, 'main');\nvar TOKEN_TYPES_TO_DISCARD = ['WHITESPACE', 'COMMENT', 'REM'];\n/** Lexer for QBasic.\n *\n * This class wraps the moo lexer with some additional capabilities:\n *\n *   - Discard irrelevant tokens, based on https://github.com/no-context/moo/issues/81.\n *   - Set isFirstTokenOnLine flag on tokens to help disambiguate labels from statements.\n *   - Support lookahead with peek().\n *   - Store the last token for debugging output.\n */\nvar Lexer = /** @class */ (function () {\n    function Lexer(mooLexer) {\n        this.mooLexer = mooLexer;\n        this.lastToken = undefined;\n        this.isNextTokenFirstOnLine = true;\n        this.tokenQueue = [];\n    }\n    Lexer.prototype.next = function () {\n        if (this.tokenQueue.length > 0) {\n            return this.tokenQueue.pop();\n        }\n        var token;\n        do {\n            token = this.mooLexer.next();\n            if (token) {\n                this.lastToken = token;\n                token.isFirstTokenOnLine = this.isNextTokenFirstOnLine;\n                if (token.type === 'NEWLINE') {\n                    this.isNextTokenFirstOnLine = true;\n                }\n                else {\n                    this.isNextTokenFirstOnLine = false;\n                }\n                if (token.type === 'REM') {\n                    this.mooLexer.pushState('comment');\n                }\n            }\n        } while (token &&\n            token.type &&\n            TOKEN_TYPES_TO_DISCARD.includes(token.type));\n        return token;\n    };\n    Lexer.prototype.peek = function () {\n        var token = this.next();\n        this.tokenQueue.push(token);\n        return token;\n    };\n    Lexer.prototype.save = function () {\n        return this.mooLexer.save();\n    };\n    Lexer.prototype.reset = function (chunk, state) {\n        this.mooLexer.reset(chunk, state);\n        this.isNextTokenFirstOnLine = true;\n        this.lastToken = undefined;\n        this.tokenQueue = [];\n        return this;\n    };\n    Lexer.prototype.formatError = function (token, message) {\n        return this.mooLexer.formatError(token, message);\n    };\n    Lexer.prototype.has = function (tokenType) {\n        return this.mooLexer.has(tokenType);\n    };\n    return Lexer;\n}());\n// Based on https://github.com/no-context/moo/pull/85#issue-178701835\nfunction caseInsensitiveKeywords(map) {\n    var keywordsTransformFn = moo_1.default.keywords(map);\n    return function (text) { return keywordsTransformFn(text.toLowerCase()); };\n}\nvar lexer = new Lexer(mooLexer);\nexports.default = lexer;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupBuiltin = exports.BUILTIN_SUBS = exports.BUILTIN_FNS = void 0;\nvar singlebyte_1 = __importDefault(require(\"singlebyte\"));\nvar round_half_to_even_1 = __importDefault(require(\"../lib/round-half-to-even\"));\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\n/** Built-in functions. */\nexports.BUILTIN_FNS = __spreadArray(__spreadArray([\n    {\n        name: 'abs',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.abs(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'asc',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (s.length === 0) {\n                        throw new Error('Expected non-empty string in ASC()');\n                    }\n                    // We could use iconv-lite here instead:\n                    // return iconv.encode(s[0], 'cp437')[0];\n                    return [2 /*return*/, singlebyte_1.default.strToBuf(s[0], 'cp437')[0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'atn',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.atan(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'chr$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    // We could use iconv-lite here instead:\n                    // return iconv.decode(Buffer.from([n]), 'cp437');\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437')];\n                });\n            });\n        },\n    },\n    {\n        name: 'cdbl',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n];\n                });\n            });\n        },\n    },\n    {\n        name: 'cint',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'clng',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'cos',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.cos(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'csng',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.singleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n];\n                });\n            });\n        },\n    },\n    {\n        name: 'csrlin',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (_a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1: return [2 /*return*/, (_b.sent()).y + 1];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'date$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    return [2 /*return*/, [now.getMonth() + 1, now.getDate(), now.getFullYear()]\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\n                            .join('-')];\n                });\n            });\n        },\n    },\n    {\n        name: 'exp',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.exp(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'fix',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sign(n) * Math.floor(Math.abs(n))];\n                });\n            });\n        },\n    },\n    {\n        name: 'hex$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n.toString(16).toUpperCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'inkey$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (_a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var c;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getChar()];\n                        case 1:\n                            c = _b.sent();\n                            return [2 /*return*/, c !== null && c !== void 0 ? c : ''];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'input$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var result, c;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            result = [];\n                            _b.label = 1;\n                        case 1:\n                            if (!(result.length < n && !platform.shouldStopExecution)) return [3 /*break*/, 3];\n                            return [4 /*yield*/, platform.getChar()];\n                        case 2:\n                            c = _b.sent();\n                            if (c) {\n                                result.push(c);\n                            }\n                            return [3 /*break*/, 1];\n                        case 3: return [2 /*return*/, result.join('')];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'instr',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (haystack, needle) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, haystack.indexOf(needle) + 1];\n                });\n            });\n        },\n    },\n    {\n        name: 'instr',\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.integerSpec(),\n        run: function (start, haystack, needle) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, haystack.indexOf(needle, start - 1) + 1];\n                });\n            });\n        },\n    },\n    {\n        name: 'int',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.floor(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'lbound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'lbound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array, dimensionIdx) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (dimensionIdx < 1 ||\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\n                        throw new Error(\"Invalid dimension index: \" + dimensionIdx);\n                    }\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][0]];\n                });\n            });\n        },\n    },\n    {\n        name: 'lcase$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.toLowerCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'left$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(0, n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'len',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.length];\n                });\n            });\n        },\n    },\n    {\n        name: 'log',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.log(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'ltrim$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.trimStart()];\n                });\n            });\n        },\n    },\n    {\n        name: 'mid$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, startIdx, length) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(startIdx - 1, length)];\n                });\n            });\n        },\n    },\n    {\n        name: 'oct$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, n.toString(8)];\n                });\n            });\n        },\n    },\n    {\n        name: 'peek',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    // STUB\n                    return [2 /*return*/, 0];\n                });\n            });\n        },\n    },\n    {\n        name: 'pos',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (_, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1: return [2 /*return*/, (_b.sent()).x + 1];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'right$',\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.substr(Math.max(0, s.length - n))];\n                });\n            });\n        },\n    }\n], overload({\n    name: 'rnd',\n    returnTypeSpec: types_1.doubleSpec(),\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, Math.random()];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), [\n    {\n        name: 'rtrim$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s, _a) {\n            var args = _a.args;\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_b) {\n                    return [2 /*return*/, s.trimEnd()];\n                });\n            });\n        },\n    },\n    {\n        name: 'sgn',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sign(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'sin',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sin(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'spc',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, ' '.repeat(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'space$',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, ' '.repeat(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'sqr',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.sqrt(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'str$',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, \"\" + (n >= 0 ? ' ' : '') + n];\n                });\n            });\n        },\n    },\n    {\n        name: 'string$',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (m, n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437').repeat(m)];\n                });\n            });\n        },\n    },\n    {\n        name: 'string$',\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (m, s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (s.length === 0) {\n                        throw new Error(\"Empty string argument to STRING$\");\n                    }\n                    return [2 /*return*/, s[0].repeat(m)];\n                });\n            });\n        },\n    },\n    {\n        name: 'tab',\n        paramTypeSpecs: [types_1.longSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (col, _a) {\n            var platform = _a.platform;\n            return __awaiter(this, void 0, void 0, function () {\n                var _b, x, y, cols;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\n                        case 1:\n                            _b = _c.sent(), x = _b.x, y = _b.y;\n                            return [4 /*yield*/, platform.getScreenSize()];\n                        case 2:\n                            cols = (_c.sent()).cols;\n                            col = (Math.max(1, col) - 1) % cols;\n                            return [4 /*yield*/, platform.moveCursorTo(col, x <= col ? y : y + 1)];\n                        case 3:\n                            _c.sent();\n                            return [2 /*return*/, ''];\n                    }\n                });\n            });\n        },\n    },\n    {\n        name: 'tan',\n        paramTypeSpecs: [types_1.doubleSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (n) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, Math.tan(n)];\n                });\n            });\n        },\n    },\n    {\n        name: 'time$',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    return [2 /*return*/, [now.getHours(), now.getMinutes(), now.getSeconds()]\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\n                            .join(':')];\n                });\n            });\n        },\n    },\n    {\n        name: 'timer',\n        paramTypeSpecs: [],\n        returnTypeSpec: types_1.longSpec(),\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                var now, midnight, result;\n                return __generator(this, function (_a) {\n                    now = new Date();\n                    midnight = new Date(now);\n                    midnight.setHours(0, 0, 0, 0);\n                    result = (now.getTime() - midnight.getTime()) / 1000;\n                    return [2 /*return*/, result];\n                });\n            });\n        },\n    },\n    {\n        name: 'ubound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][1]];\n                });\n            });\n        },\n    },\n    {\n        name: 'ubound',\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\n        returnTypeSpec: types_1.longSpec(),\n        run: function (array, dimensionIdx) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (dimensionIdx < 1 ||\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\n                        throw new Error(\"Invalid dimension index: \" + dimensionIdx);\n                    }\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][1]];\n                });\n            });\n        },\n    },\n    {\n        name: 'ucase$',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.stringSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, s.toUpperCase()];\n                });\n            });\n        },\n    },\n    {\n        name: 'val',\n        paramTypeSpecs: [types_1.stringSpec()],\n        returnTypeSpec: types_1.doubleSpec(),\n        run: function (s) {\n            return __awaiter(this, void 0, void 0, function () {\n                var v;\n                return __generator(this, function (_a) {\n                    v = parseFloat(s);\n                    return [2 /*return*/, isNaN(v) ? 0 : v];\n                });\n            });\n        },\n    },\n]);\n/** Simple statements implemented as built-in subs. */\nexports.BUILTIN_SUBS = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([\n    {\n        name: 'beep',\n        paramTypeSpecs: [],\n        run: function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return __awaiter(this, void 0, void 0, function () {\n                var platform;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            platform = args.pop().platform;\n                            return [4 /*yield*/, platform.beep()];\n                        case 1:\n                            _a.sent();\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        },\n    }\n], overload({\n    name: 'cls',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        return [4 /*yield*/, platform.clearScreen()];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'color',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, platform, runtime, getColorName, fg, bg;\n            return __generator(this, function (_b) {\n                _a = args.pop(), platform = _a.platform, runtime = _a.runtime;\n                getColorName = function (n) {\n                    if (n < 0 || n >= runtime.currentScreenModeConfig.colorMap.length) {\n                        throw new Error(\"Invalid color: \" + n);\n                    }\n                    return runtime.currentScreenModeConfig.colorMap[n];\n                };\n                fg = args[0], bg = args[1];\n                if (Number.isFinite(fg)) {\n                    platform.setFgColor(getColorName(fg));\n                }\n                if (Number.isFinite(bg)) {\n                    platform.setBgColor(getColorName(bg));\n                }\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), overload({\n    name: '__def_seg',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'locate',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform, row, col, cursor, origPos, newX, newY;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        row = args[0], col = args[1], cursor = args[2];\n                        if (!(Number.isFinite(row) && Number.isFinite(col))) return [3 /*break*/, 2];\n                        return [4 /*yield*/, platform.moveCursorTo(col - 1, row - 1)];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 2:\n                        if (!(Number.isFinite(row) || Number.isFinite(col))) return [3 /*break*/, 5];\n                        return [4 /*yield*/, platform.getCursorPosition()];\n                    case 3:\n                        origPos = _a.sent();\n                        newX = Number.isFinite(col) ? col - 1 : origPos.x;\n                        newY = Number.isFinite(row) ? row - 1 : origPos.y;\n                        if (!(newX !== origPos.x || newY !== origPos.y)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, platform.moveCursorTo(newX, newY)];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5:\n                        if (!Number.isFinite(cursor)) return [3 /*break*/, 7];\n                        return [4 /*yield*/, platform.setCursorVisibility(!!cursor)];\n                    case 6:\n                        _a.sent();\n                        _a.label = 7;\n                    case 7: return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), [\n    {\n        name: 'play',\n        paramTypeSpecs: [types_1.stringSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    },\n    {\n        name: 'poke',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    }\n]), overload({\n    name: 'randomize',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: 'screen',\n    run: function (mode) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var runtime;\n            return __generator(this, function (_a) {\n                runtime = args.pop().runtime;\n                runtime.setScreenMode(mode);\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [\n    [types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\n])), overload({\n    name: 'sleep',\n    run: function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var platform, numSeconds, startTimeMs, nowMs, c;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        platform = args.pop().platform;\n                        numSeconds = args.length > 0 ? args[0] : 0;\n                        startTimeMs = new Date().getTime();\n                        _a.label = 1;\n                    case 1: return [4 /*yield*/, platform.getChar()];\n                    case 2:\n                        c = _a.sent();\n                        nowMs = new Date().getTime();\n                        _a.label = 3;\n                    case 3:\n                        if (c === null &&\n                            (numSeconds <= 0 || nowMs - startTimeMs < numSeconds * 1000) &&\n                            !platform.shouldStopExecution) return [3 /*break*/, 1];\n                        _a.label = 4;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    },\n}, [[], [types_1.longSpec()]])), overload({\n    name: '__view_print',\n    run: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    },\n}, [[], [types_1.longSpec(), types_1.longSpec()]])), [\n    {\n        name: 'width',\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\n        run: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/];\n                });\n            });\n        },\n    },\n]);\n/** Helper function to generate multiple signatures that map to the same built-in proc. */\nfunction overload(proc, paramTypeSpecsList) {\n    return paramTypeSpecsList.map(function (paramTypeSpecs) {\n        return (__assign(__assign({}, proc), { paramTypeSpecs: paramTypeSpecs }));\n    });\n}\nfunction lookupBuiltin(procs, name, argTypeSpecs, _a) {\n    var _b = _a === void 0 ? {} : _a, shouldReturnIfArgTypeMismatch = _b.shouldReturnIfArgTypeMismatch;\n    var builtinFnsMatchingName = symbol_table_1.lookupSymbols(procs, name);\n    var builtinFn = builtinFnsMatchingName.find(function (_a) {\n        var paramTypeSpecs = _a.paramTypeSpecs;\n        return paramTypeSpecs.length === argTypeSpecs.length &&\n            paramTypeSpecs.every(function (paramTypeSpec, i) {\n                return types_1.areMatchingElementaryTypes(paramTypeSpec, argTypeSpecs[i]) ||\n                    (types_1.isArray(paramTypeSpec) && types_1.isArray(argTypeSpecs[i]));\n            });\n    });\n    return (builtinFn !== null && builtinFn !== void 0 ? builtinFn : (shouldReturnIfArgTypeMismatch && builtinFnsMatchingName.length > 0\n        ? builtinFnsMatchingName[0]\n        : null));\n}\nexports.lookupBuiltin = lookupBuiltin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Round a number to integer using BASIC's round-half-to-even rule. */\nfunction roundHalfToEven(n) {\n    if (n - Math.floor(n) === 0.5) {\n        return Math.round(n / 2) * 2;\n    }\n    else {\n        return Math.round(n);\n    }\n}\nexports.default = roundHalfToEven;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExecutionError = void 0;\nvar data_item_1 = require(\"../lib/data-item\");\nvar error_with_loc_1 = __importDefault(require(\"../lib/error-with-loc\"));\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar compiled_code_1 = require(\"./compiled-code\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\nvar runtime_1 = __importDefault(require(\"./runtime\"));\nvar ExecutionError = /** @class */ (function (_super) {\n    __extends(ExecutionError, _super);\n    function ExecutionError(message, _a) {\n        var _b = _a === void 0 ? {} : _a, module = _b.module, stmt = _b.stmt;\n        return _super.call(this, message, {\n            sourceFileName: module === null || module === void 0 ? void 0 : module.sourceFileName,\n            loc: (stmt === null || stmt === void 0 ? void 0 : stmt.loc) ? { line: stmt.loc[0], col: stmt.loc[1] } : undefined,\n        }) || this;\n    }\n    return ExecutionError;\n}(error_with_loc_1.default));\nexports.ExecutionError = ExecutionError;\n/** Exception thrown to signal program termination via END. */\nvar EndDirective = /** @class */ (function (_super) {\n    __extends(EndDirective, _super);\n    function EndDirective() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isEndDirective = true;\n        return _this;\n    }\n    return EndDirective;\n}(Error));\n/** Manages the execution of a compiled program. */\nvar Executor = /** @class */ (function () {\n    function Executor(platform, _a) {\n        var _b = _a === void 0 ? {} : _a, stmtExecutionDelayUs = _b.stmtExecutionDelayUs;\n        this.platform = platform;\n        /** Current module being executed. */\n        this.currentModule = null;\n        /** Static vars, indexed by proc name. */\n        this.localStaticVarsMap = {};\n        /** Label index map for module-level statements. */\n        this.moduleLabelIndexMap = {};\n        /** Label index map for procs. */\n        this.procLabelIndexMap = {};\n        /** Cursor for READ. */\n        this.dataCursor = {\n            stmtIdx: 0,\n            itemIdx: 0,\n        };\n        this.stmtExecutionDelayUs =\n            stmtExecutionDelayUs !== null && stmtExecutionDelayUs !== void 0 ? stmtExecutionDelayUs : platform.defaultStmtExecutionDelayUs;\n    }\n    /** Executes a compiled module. */\n    Executor.prototype.executeModule = function (moduleOrCode) {\n        return __awaiter(this, void 0, void 0, function () {\n            var module, _a, ctx, e_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(typeof moduleOrCode === 'string')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.platform.loadCompiledModule(moduleOrCode)];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = moduleOrCode;\n                        _b.label = 3;\n                    case 3:\n                        module = _a;\n                        this.currentModule = module;\n                        this.buildLabelIndexMaps();\n                        this.localStaticVarsMap = {};\n                        this.restore();\n                        this.platform.shouldStopExecution = false;\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\n                    case 4:\n                        _b.sent();\n                        ctx = {\n                            runtime: new runtime_1.default(this.platform),\n                            executeProc: this.executeProc.bind(this),\n                            read: this.read.bind(this),\n                            restore: this.restore.bind(this),\n                            args: {},\n                            localVars: this.initVars(module.localSymbols, [\n                                symbol_table_1.VarType.VAR,\n                                symbol_table_1.VarType.CONST,\n                            ]),\n                            localStaticVars: {},\n                            globalVars: this.initVars(module.globalSymbols, [\n                                symbol_table_1.VarType.VAR,\n                                symbol_table_1.VarType.CONST,\n                            ]),\n                            tempVars: {},\n                        };\n                        _b.label = 5;\n                    case 5:\n                        _b.trys.push([5, 7, 8, 10]);\n                        return [4 /*yield*/, this.executeStmts(ctx, module.stmts, this.moduleLabelIndexMap)];\n                    case 6:\n                        _b.sent();\n                        return [3 /*break*/, 10];\n                    case 7:\n                        e_1 = _b.sent();\n                        if (e_1.isEndDirective) {\n                            // Swallow error\n                        }\n                        else {\n                            throw e_1;\n                        }\n                        return [3 /*break*/, 10];\n                    case 8:\n                        this.currentModule = null;\n                        this.moduleLabelIndexMap = {};\n                        this.procLabelIndexMap = {};\n                        this.localStaticVarsMap = {};\n                        this.restore();\n                        this.platform.shouldStopExecution = false;\n                        return [4 /*yield*/, this.platform.setCursorVisibility(true)];\n                    case 9:\n                        _b.sent();\n                        return [7 /*endfinally*/];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Sets flag to stop execution. */\n    Executor.prototype.stopExecution = function () {\n        this.platform.shouldStopExecution = true;\n    };\n    Executor.prototype.executeProc = function (prevCtx, name) {\n        var argPtrs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            argPtrs[_i - 2] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var proc, args, i, ctx;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        proc = symbol_table_1.lookupSymbol(this.currentModule.procs, name);\n                        if (!proc) {\n                            throw new Error(\"Procedure not found: \\\"\" + name + \"\\\"\");\n                        }\n                        // Init args.\n                        if (argPtrs.length !== proc.paramSymbols.length) {\n                            throw new Error('Incorrect number of arguments to ' +\n                                (types_1.procTypeName(proc.type) + \" \\\"\" + proc.name + \"\\\": \") +\n                                (\"expected \" + proc.paramSymbols.length + \", got \" + argPtrs.length));\n                        }\n                        args = {};\n                        for (i = 0; i < argPtrs.length; ++i) {\n                            args[proc.paramSymbols[i].name] = argPtrs[i];\n                        }\n                        // Init static vars.\n                        if (!this.localStaticVarsMap[proc.name]) {\n                            this.localStaticVarsMap[proc.name] = this.initVars(proc.localSymbols, [\n                                symbol_table_1.VarType.STATIC_VAR,\n                            ]);\n                        }\n                        ctx = __assign(__assign({}, prevCtx), { args: args, localVars: this.initVars(proc.localSymbols, [symbol_table_1.VarType.VAR, symbol_table_1.VarType.CONST]), localStaticVars: this.localStaticVarsMap[proc.name], tempVars: {} });\n                        if (!this.procLabelIndexMap[proc.name]) {\n                            throw new Error(\"Label index map not found for \\\"\" + proc.name + \"\\\"\");\n                        }\n                        return [4 /*yield*/, this.executeStmts(ctx, proc.stmts, this.procLabelIndexMap[proc.name])];\n                    case 1:\n                        _a.sent();\n                        // Return value.\n                        if (types_1.isFnOrDefFn(proc.type)) {\n                            return [2 /*return*/, ctx.localVars[proc.name]];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Executor.prototype.initVars = function (varSymbolTable, includeVarTypes) {\n        var container = {};\n        for (var _i = 0, varSymbolTable_1 = varSymbolTable; _i < varSymbolTable_1.length; _i++) {\n            var symbol = varSymbolTable_1[_i];\n            if (!includeVarTypes.includes(symbol.varType)) {\n                continue;\n            }\n            container[symbol.name] = init_value_1.default(symbol.typeSpec);\n        }\n        return container;\n    };\n    Executor.prototype.executeStmts = function (ctx, stmts, labelIndexMap) {\n        return __awaiter(this, void 0, void 0, function () {\n            var gosubStates, stmtIdx, _loop_1, this_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        gosubStates = [];\n                        stmtIdx = 0;\n                        _loop_1 = function () {\n                            var stmt, errorArgs, directive, e_2, gotoLabel, gosubState;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        if (this_1.platform.shouldStopExecution) {\n                                            this_1.platform.shouldStopExecution = false;\n                                            throw new EndDirective();\n                                        }\n                                        stmt = stmts[stmtIdx];\n                                        errorArgs = { module: this_1.currentModule, stmt: stmt };\n                                        if (!(this_1.stmtExecutionDelayUs > 0)) return [3 /*break*/, 2];\n                                        return [4 /*yield*/, this_1.platform.delay(this_1.stmtExecutionDelayUs)];\n                                    case 1:\n                                        _b.sent();\n                                        _b.label = 2;\n                                    case 2:\n                                        directive = void 0;\n                                        if (!('run' in stmt)) return [3 /*break*/, 6];\n                                        _b.label = 3;\n                                    case 3:\n                                        _b.trys.push([3, 5, , 6]);\n                                        return [4 /*yield*/, stmt.run(ctx)];\n                                    case 4:\n                                        directive = _b.sent();\n                                        return [3 /*break*/, 6];\n                                    case 5:\n                                        e_2 = _b.sent();\n                                        if (e_2.isEndDirective) {\n                                            throw e_2;\n                                        }\n                                        else {\n                                            throw new ExecutionError(e_2.message, errorArgs);\n                                        }\n                                        return [3 /*break*/, 6];\n                                    case 6:\n                                        if (!directive) {\n                                            ++stmtIdx;\n                                            return [2 /*return*/, \"continue\"];\n                                        }\n                                        gotoLabel = function (label) {\n                                            stmtIdx = labelIndexMap[label];\n                                            if (stmtIdx === undefined) {\n                                                throw new ExecutionError(\"Label not found: \\\"\" + label + \"\\\"\", errorArgs);\n                                            }\n                                        };\n                                        switch (directive.type) {\n                                            case compiled_code_1.ExecutionDirectiveType.GOSUB:\n                                                gosubStates.push({\n                                                    nextStmtIdx: stmtIdx + 1,\n                                                });\n                                                gotoLabel(directive.destLabel);\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.GOTO:\n                                                gotoLabel(directive.destLabel);\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.RETURN:\n                                                if (gosubStates.length === 0) {\n                                                    throw new ExecutionError(\"RETURN without prior GOSUB\", errorArgs);\n                                                }\n                                                gosubState = gosubStates.pop();\n                                                if (directive.destLabel) {\n                                                    gotoLabel(directive.destLabel);\n                                                }\n                                                else {\n                                                    stmtIdx = gosubState.nextStmtIdx;\n                                                }\n                                                break;\n                                            case compiled_code_1.ExecutionDirectiveType.END:\n                                                throw new EndDirective();\n                                            case compiled_code_1.ExecutionDirectiveType.EXIT_PROC:\n                                                stmtIdx = stmts.length;\n                                                break;\n                                            default:\n                                                throw new ExecutionError(\"Unrecognized execution directive: \" + JSON.stringify(directive), errorArgs);\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _a.label = 1;\n                    case 1:\n                        if (!(stmtIdx < stmts.length)) return [3 /*break*/, 3];\n                        return [5 /*yield**/, _loop_1()];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 1];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Executor.prototype.read = function () {\n        var resultTypes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resultTypes[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var results, i, dataItem;\n            return __generator(this, function (_a) {\n                results = [];\n                for (i = 0; i < resultTypes.length; ++i) {\n                    dataItem = this.getNextDataItem();\n                    if (!dataItem) {\n                        throw new Error(\"Data exhausted at item \" + (i + 1));\n                    }\n                    try {\n                        results.push(data_item_1.getDataItem(dataItem, resultTypes[i]));\n                    }\n                    catch (e) {\n                        e.message = \"Error reading item \" + (i + 1) + \": \" + e.message;\n                        throw e;\n                    }\n                }\n                return [2 /*return*/, results];\n            });\n        });\n    };\n    Executor.prototype.getNextDataItem = function () {\n        var stmts = this.currentModule.stmts;\n        for (;;) {\n            if (this.dataCursor.stmtIdx >= stmts.length) {\n                return null;\n            }\n            var stmt = stmts[this.dataCursor.stmtIdx];\n            if (!('data' in stmt)) {\n                ++this.dataCursor.stmtIdx;\n                continue;\n            }\n            if (this.dataCursor.itemIdx >= stmt.data.length) {\n                ++this.dataCursor.stmtIdx;\n                this.dataCursor.itemIdx = 0;\n                continue;\n            }\n            return stmt.data[this.dataCursor.itemIdx++];\n        }\n    };\n    Executor.prototype.restore = function (destLabel) {\n        return __awaiter(this, void 0, void 0, function () {\n            var stmtIdx;\n            var _a, _b;\n            return __generator(this, function (_c) {\n                if (destLabel) {\n                    stmtIdx = this.moduleLabelIndexMap[destLabel];\n                    if (stmtIdx === undefined) {\n                        throw new Error(\"Label not found: \\\"\" + destLabel + \"\\\"\");\n                    }\n                    _a = [stmtIdx, 0], this.dataCursor.stmtIdx = _a[0], this.dataCursor.itemIdx = _a[1];\n                }\n                else {\n                    _b = [0, 0], this.dataCursor.stmtIdx = _b[0], this.dataCursor.itemIdx = _b[1];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    Executor.prototype.buildLabelIndexMaps = function () {\n        this.moduleLabelIndexMap = this.buildLabelIndexMap(this.currentModule.stmts);\n        for (var _i = 0, _a = this.currentModule.procs; _i < _a.length; _i++) {\n            var _b = _a[_i], name_1 = _b.name, stmts = _b.stmts;\n            this.procLabelIndexMap[name_1] = this.buildLabelIndexMap(stmts);\n        }\n    };\n    Executor.prototype.buildLabelIndexMap = function (stmts) {\n        var _this = this;\n        var labelIndexMap = {};\n        stmts.forEach(function (stmt, idx) {\n            if ('label' in stmt) {\n                if (stmt.label in labelIndexMap) {\n                    throw new ExecutionError(\"Duplicate label \\\"\" + stmt.label + \"\\\"\", {\n                        module: _this.currentModule,\n                        stmt: stmt,\n                    });\n                }\n                labelIndexMap[stmt.label] = idx;\n            }\n        });\n        return labelIndexMap;\n    };\n    return Executor;\n}());\nexports.default = Executor;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\n/** Runtime representation for QBasic arrays. */\nvar QbArray = /** @class */ (function () {\n    function QbArray(arrayTypeSpec) {\n        /** The underlying array storing the actual elements. */\n        this._values = [];\n        this.init(arrayTypeSpec.elementTypeSpec, arrayTypeSpec.dimensionSpecs);\n    }\n    /** Initializes the array with the provided spec, discarding any previous contents. */\n    QbArray.prototype.init = function (elementTypeSpec, dimensionSpecs) {\n        if (dimensionSpecs.length === 0) {\n            throw new Error('No dimension specs provided');\n        }\n        this._typeSpec = types_1.arraySpec(elementTypeSpec, dimensionSpecs);\n        this._values.length = 0;\n        var currentDimensionArrays = [this._values];\n        for (var i = 0; i < dimensionSpecs.length; ++i) {\n            var _a = dimensionSpecs[i], minIdx = _a[0], maxIdx = _a[1];\n            var numElements = maxIdx - minIdx + 1;\n            var nextDimensionArrays = [];\n            for (var _i = 0, currentDimensionArrays_1 = currentDimensionArrays; _i < currentDimensionArrays_1.length; _i++) {\n                var dimensionArray = currentDimensionArrays_1[_i];\n                if (i === dimensionSpecs.length - 1) {\n                    for (var j = 0; j < numElements; ++j) {\n                        dimensionArray.push(init_value_1.default(elementTypeSpec));\n                    }\n                }\n                else {\n                    for (var j = 0; j < numElements; ++j) {\n                        var nextDimensionArray = new Array();\n                        nextDimensionArrays.push(nextDimensionArray);\n                        dimensionArray.push(nextDimensionArray);\n                    }\n                }\n            }\n            currentDimensionArrays = nextDimensionArrays;\n        }\n    };\n    /** Translates a QBasic index into the index in the underlying array. */\n    QbArray.prototype.getIdx = function (dimensionIdx, qbIdx) {\n        var dimensionSpecs = this._typeSpec.dimensionSpecs;\n        if (!Number.isFinite(dimensionIdx) ||\n            dimensionIdx < 0 ||\n            dimensionIdx >= dimensionSpecs.length) {\n            throw new Error('Invalid dimension in getIndex: ' +\n                (\"expected number between 0 and \" + (dimensionSpecs.length - 1) + \", \") +\n                (\"got \" + dimensionIdx));\n        }\n        var _a = dimensionSpecs[dimensionIdx], minIdx = _a[0], maxIdx = _a[1];\n        if (!Number.isFinite(qbIdx) || qbIdx < minIdx || qbIdx > maxIdx) {\n            throw new Error(\"Index out of range for dimension \" + (dimensionIdx + 1) + \": \" +\n                (\"expected number between \" + minIdx + \" and \" + maxIdx + \", \") +\n                (\"got \" + qbIdx));\n        }\n        return qbIdx - minIdx;\n    };\n    Object.defineProperty(QbArray.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(QbArray.prototype, \"typeSpec\", {\n        get: function () {\n            return this._typeSpec;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return QbArray;\n}());\nexports.default = QbArray;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../lib/types\");\nvar init_value_1 = __importDefault(require(\"./init-value\"));\n/** Runtime representation for QBasic user-defined types. */\nvar QbUdt = /** @class */ (function () {\n    function QbUdt(udtTypeSpec) {\n        /** The underlying array storing the actual elements. */\n        this._values = {};\n        this._typeSpec = __assign({}, udtTypeSpec);\n        this.init();\n    }\n    QbUdt.prototype.init = function () {\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\n            var fieldSpec = _a[_i];\n            this._values[fieldSpec.name] = init_value_1.default(fieldSpec.typeSpec);\n        }\n    };\n    QbUdt.prototype.clone = function () {\n        var newQbUdt = new QbUdt(this._typeSpec);\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\n            var fieldSpec = _a[_i];\n            var value = this._values[fieldSpec.name];\n            newQbUdt._values[fieldSpec.name] = types_1.isUdt(fieldSpec.typeSpec)\n                ? value.clone()\n                : value;\n        }\n        return newQbUdt;\n    };\n    Object.defineProperty(QbUdt.prototype, \"values\", {\n        get: function () {\n            return this._values;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(QbUdt.prototype, \"typeSpec\", {\n        get: function () {\n            return this._typeSpec;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return QbUdt;\n}());\nexports.default = QbUdt;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserExecutor = exports.BrowserPlatform = void 0;\nvar ansi_escapes_1 = __importDefault(require(\"ansi-escapes\"));\nvar ansi_terminal_platform_1 = __importDefault(require(\"./ansi-terminal-platform\"));\nvar executor_1 = __importDefault(require(\"./executor\"));\n/** RuntimePlatform for the browser environment based on xterm.js. */\nvar BrowserPlatform = /** @class */ (function (_super) {\n    __extends(BrowserPlatform, _super);\n    function BrowserPlatform(terminal) {\n        var _this = _super.call(this) || this;\n        _this.terminal = terminal;\n        // When running in the browser, delay is implemented as a busy loop as\n        // setImmediate will block input processing. So disabling delay by default.\n        _this.defaultStmtExecutionDelayUs = 0;\n        return _this;\n    }\n    BrowserPlatform.prototype.loadCompiledModule = function (code) {\n        return __awaiter(this, void 0, void 0, function () {\n            var match, fn, moduleObj;\n            return __generator(this, function (_a) {\n                match = code.match(/^(?:#![^\\n]+\\n)?([\\s\\S]+)$/);\n                if (!match) {\n                    throw new Error(\"Empty code string\");\n                }\n                fn = new Function('module', match[1]);\n                moduleObj = { exports: {} };\n                fn(moduleObj);\n                return [2 /*return*/, moduleObj.exports];\n            });\n        });\n    };\n    BrowserPlatform.prototype.delay = function (delayInUs) {\n        return __awaiter(this, void 0, void 0, function () {\n            var t0;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(typeof window === 'undefined' ||\n                            typeof window.performance === 'undefined')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, new Promise(function (resolve) {\n                                return setTimeout(resolve, Math.round(delayInUs / 1000));\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        t0 = performance.now();\n                        while ((performance.now() - t0) * 1000 < delayInUs) { }\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    BrowserPlatform.prototype.print = function (s) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.terminal.write(s);\n                return [2 /*return*/];\n            });\n        });\n    };\n    BrowserPlatform.prototype.inputLine = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var text, cursorIdx, initialX, cols, disposeFns;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        text = [];\n                        cursorIdx = 0;\n                        return [4 /*yield*/, this.getCursorPosition()];\n                    case 1:\n                        initialX = (_a.sent()).x;\n                        return [4 /*yield*/, this.getScreenSize()];\n                    case 2:\n                        cols = (_a.sent()).cols;\n                        disposeFns = [];\n                        return [4 /*yield*/, new Promise(function (resolve) {\n                                var removeOnDataListenerFn = _this.terminal.onData(function (chunk) { return __awaiter(_this, void 0, void 0, function () {\n                                    return __generator(this, function (_a) {\n                                        switch (chunk) {\n                                            case '\\r':\n                                                this.print('\\n');\n                                                resolve();\n                                                break;\n                                            case '\\x7f': // backspace\n                                                if (text.length > 0 && cursorIdx > 0) {\n                                                    text.splice(--cursorIdx, 1);\n                                                    this.print(ansi_escapes_1.default.cursorBackward());\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(ansi_escapes_1.default.eraseEndLine);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                break;\n                                            case '\\x1b[3~': // delete\n                                                if (cursorIdx < text.length) {\n                                                    text.splice(cursorIdx, 1);\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(ansi_escapes_1.default.eraseEndLine);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                break;\n                                            case '\\x1b[C': // right\n                                                if (cursorIdx < text.length) {\n                                                    ++cursorIdx;\n                                                    this.print(chunk);\n                                                }\n                                                break;\n                                            case '\\x1b[D': // left\n                                                if (cursorIdx > 0) {\n                                                    --cursorIdx;\n                                                    this.print(chunk);\n                                                }\n                                                break;\n                                            case '\\x1b[F': // end\n                                                if (cursorIdx < text.length) {\n                                                    this.print(ansi_escapes_1.default.cursorForward(text.length - cursorIdx));\n                                                    cursorIdx = text.length;\n                                                }\n                                                break;\n                                            case '\\x1b[H': // home\n                                                if (cursorIdx > 0) {\n                                                    this.print(ansi_escapes_1.default.cursorBackward(cursorIdx));\n                                                    cursorIdx = 0;\n                                                }\n                                                break;\n                                            default:\n                                                // TODO: Support multi-line line editing.\n                                                if (chunk.match(/^[\\x20-\\x7e]$/) &&\n                                                    initialX + text.length < cols - 2) {\n                                                    // Printable ASCII\n                                                    text.splice(cursorIdx++, 0, chunk);\n                                                    this.print(chunk);\n                                                    this.print(ansi_escapes_1.default.cursorSavePosition);\n                                                    this.print(text.slice(cursorIdx).join(''));\n                                                    this.print(ansi_escapes_1.default.cursorRestorePosition);\n                                                }\n                                                else {\n                                                    console.log(chunk\n                                                        .split('')\n                                                        .map(function (c) { return c.charCodeAt(0); })\n                                                        .join(', '));\n                                                }\n                                                break;\n                                        }\n                                        return [2 /*return*/];\n                                    });\n                                }); }).dispose;\n                                disposeFns.push(removeOnDataListenerFn);\n                                var checkShouldStopExecutionIntervalId = setInterval(function () {\n                                    if (_this.shouldStopExecution) {\n                                        resolve();\n                                    }\n                                }, 20);\n                                disposeFns.push(function () { return clearInterval(checkShouldStopExecutionIntervalId); });\n                            })];\n                    case 3:\n                        _a.sent();\n                        disposeFns.forEach(function (fn) { return fn(); });\n                        return [2 /*return*/, text.join('')];\n                }\n            });\n        });\n    };\n    BrowserPlatform.prototype.getChar = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, dispose;\n            var _this = this;\n            return __generator(this, function (_a) {\n                result = null;\n                dispose = this.terminal.onData(function (chunk) {\n                    result = _this.translateKeyCode(chunk.toString());\n                }).dispose;\n                return [2 /*return*/, new Promise(function (resolve) {\n                        setTimeout(function () {\n                            dispose();\n                            resolve(result);\n                        }, 20);\n                    })];\n            });\n        });\n    };\n    BrowserPlatform.prototype.getCursorPosition = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var dispose = _this.terminal.onData(function (chunk) {\n                            dispose();\n                            var match = chunk.toString().match(/\\[(\\d+)\\;(\\d+)R/);\n                            if (match) {\n                                var _a = [match[1], match[2]], row = _a[0], col = _a[1];\n                                var result = {\n                                    // ANSI row & col numbers are 1-based.\n                                    x: parseInt(col) - 1,\n                                    y: parseInt(row) - 1,\n                                };\n                                resolve(result);\n                            }\n                            else {\n                                reject();\n                            }\n                        }).dispose;\n                        _this.print(ansi_escapes_1.default.cursorGetPosition);\n                    })];\n            });\n        });\n    };\n    BrowserPlatform.prototype.getScreenSize = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, {\n                        rows: this.terminal.rows,\n                        cols: this.terminal.cols,\n                    }];\n            });\n        });\n    };\n    return BrowserPlatform;\n}(ansi_terminal_platform_1.default));\nexports.BrowserPlatform = BrowserPlatform;\nvar BrowserExecutor = /** @class */ (function (_super) {\n    __extends(BrowserExecutor, _super);\n    function BrowserExecutor(terminal, opts) {\n        if (opts === void 0) { opts = {}; }\n        return _super.call(this, new BrowserPlatform(terminal), opts) || this;\n    }\n    return BrowserExecutor;\n}(executor_1.default));\nexports.BrowserExecutor = BrowserExecutor;\n","var map = {\n\t\"./cal.bas\": 246,\n\t\"./check.bas\": 247,\n\t\"./guess.bas\": 248,\n\t\"./nibbles.bas\": 249,\n\t\"./strtonum.bas\": 250\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 245;","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\r\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\r\\n\\r\\nDEFINT A-Z               ' Default variable type is integer\\r\\n\\r\\n' Define a data type for the names of the months and the\\r\\n' number of days in each:\\r\\nTYPE MonthType\\r\\n   Number AS INTEGER     ' Number of days in the month\\r\\n   MName AS STRING * 9   ' Name of the month\\r\\nEND TYPE\\r\\n\\r\\n' Declare procedures used:\\r\\nDECLARE FUNCTION IsLeapYear% (N%)\\r\\nDECLARE FUNCTION GetInput% (Prompt$, Row%, LowVal%, HighVal%)\\r\\n\\r\\nDECLARE SUB PrintCalendar (Year%, Month%)\\r\\nDECLARE SUB ComputeMonth (Year%, Month%, StartDay%, TotalDays%)\\r\\n\\r\\nDIM MonthData(1 TO 12) AS MonthType\\r\\n\\r\\n' Initialize month definitions from DATA statements below:\\r\\nFOR I = 1 TO 12\\r\\n   READ MonthData(I).MName, MonthData(I).Number\\r\\nNEXT\\r\\n\\r\\n' Main loop, repeat for as many months as desired:\\r\\nDO\\r\\n\\r\\n   CLS\\r\\n\\r\\n   ' Get year and month as input:\\r\\n   Year = GetInput(\\\"Year (1899 to 2099): \\\", 1, 1899, 2099)\\r\\n   Month = GetInput(\\\"Month (1 to 12): \\\", 2, 1, 12)\\r\\n\\r\\n   ' Print the calendar:\\r\\n   PrintCalendar Year, Month\\r\\n\\r\\n   ' Another Date?\\r\\n   LOCATE 13, 1         ' Locate in 13th row, 1st column\\r\\n   PRINT \\\"New Date? \\\";  ' Keep cursor on same line\\r\\n   LOCATE , , 1, 0, 13  ' Turn cursor on and make it one\\r\\n                        ' character high\\r\\n   Resp$ = INPUT$(1)    ' Wait for a key press\\r\\n   PRINT Resp$          ' Print the key pressed\\r\\n\\r\\nLOOP WHILE UCASE$(Resp$) = \\\"Y\\\"\\r\\nEND\\r\\n\\r\\n' Data for the months of a year:\\r\\nDATA January, 31, February, 28, March, 31\\r\\nDATA April, 30, May, 31, June, 30, July, 31, August, 31\\r\\nDATA September, 30, October, 31, November, 30, December, 31\\r\\n'\\r\\n' ====================== COMPUTEMONTH ========================\\r\\n'     Computes the first day and the total days in a month.\\r\\n' ============================================================\\r\\n'\\r\\nSUB ComputeMonth (Year, Month, StartDay, TotalDays) STATIC\\r\\n   SHARED MonthData() AS MonthType\\r\\n   CONST LEAP = 366 MOD 7\\r\\n   CONST NORMAL = 365 MOD 7\\r\\n\\r\\n   ' Calculate total number of days (NumDays) since 1/1/1899.\\r\\n\\r\\n   ' Start with whole years:\\r\\n   NumDays = 0\\r\\n   FOR I = 1899 TO Year - 1\\r\\n      IF IsLeapYear(I) THEN         ' If year is leap, add\\r\\n         NumDays = NumDays + LEAP   ' 366 MOD 7.\\r\\n      ELSE                          ' If normal year, add\\r\\n         NumDays = NumDays + NORMAL ' 365 MOD 7.\\r\\n      END IF\\r\\n   NEXT\\r\\n\\r\\n   ' Next, add in days from whole months:\\r\\n   FOR I = 1 TO Month - 1\\r\\n      NumDays = NumDays + MonthData(I).Number\\r\\n   NEXT\\r\\n\\r\\n   ' Set the number of days in the requested month:\\r\\n   TotalDays = MonthData(Month).Number\\r\\n\\r\\n   ' Compensate if requested year is a leap year:\\r\\n   IF IsLeapYear(Year) THEN\\r\\n\\r\\n      ' If after February, add one to total days:\\r\\n      IF Month > 2 THEN\\r\\n         NumDays = NumDays + 1\\r\\n\\r\\n      ' If February, add one to the month's days:\\r\\n      ELSEIF Month = 2 THEN\\r\\n         TotalDays = TotalDays + 1\\r\\n\\r\\n      END IF\\r\\n   END IF\\r\\n\\r\\n   ' 1/1/1899 was a Sunday, so calculating \\\"NumDays MOD 7\\\"\\r\\n   ' gives the day of week (Sunday = 0, Monday = 1, Tuesday = 2,\\r\\n   ' and so on) for the first day of the input month:\\r\\n   StartDay = NumDays MOD 7\\r\\nEND SUB\\r\\n'\\r\\n' ======================== GETINPUT ==========================\\r\\n'       Prompts for input, then tests for a valid range.\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION GetInput (Prompt$, Row, LowVal, HighVal) STATIC\\r\\n\\r\\n   ' Locate prompt at specified row, turn cursor on and\\r\\n   ' make it one character high:\\r\\n   LOCATE Row, 1, 1, 0, 13\\r\\n   PRINT Prompt$;\\r\\n\\r\\n   ' Save column position:\\r\\n   Column = POS(0)\\r\\n\\r\\n   ' Input value until it's within range:\\r\\n   DO\\r\\n      LOCATE Row, Column   ' Locate cursor at end of prompt\\r\\n      PRINT SPACE$(10)     ' Erase anything already there\\r\\n      LOCATE Row, Column   ' Relocate cursor at end of prompt\\r\\n      INPUT \\\"\\\", Value      ' Input value with no prompt\\r\\n   LOOP WHILE (Value < LowVal OR Value > HighVal)\\r\\n\\r\\n   ' Return valid input as value of function:\\r\\n   GetInput = Value\\r\\n\\r\\nEND FUNCTION\\r\\n'\\r\\n' ====================== ISLEAPYEAR ==========================\\r\\n'         Determines if a year is a leap year or not.\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION IsLeapYear (N) STATIC\\r\\n\\r\\n   ' If the year is evenly divisible by 4 and not divisible\\r\\n   ' by 100, or if the year is evenly divisible by 400, then\\r\\n   ' it's a leap year:\\r\\n   IsLeapYear = (N MOD 4 = 0 AND N MOD 100 <> 0) OR (N MOD 400 = 0)\\r\\nEND FUNCTION\\r\\n'\\r\\n' ===================== PRINTCALENDAR ========================\\r\\n'     Prints a formatted calendar given the year and month.\\r\\n' ============================================================\\r\\n'\\r\\nSUB PrintCalendar (Year, Month) STATIC\\r\\nSHARED MonthData() AS MonthType\\r\\n\\r\\n   ' Compute starting day (Su M Tu ...) and total days\\r\\n   ' for the month:\\r\\n   ComputeMonth Year, Month, StartDay, TotalDays\\r\\n   CLS\\r\\n   Header$ = RTRIM$(MonthData(Month).MName) + \\\",\\\" + STR$(Year)\\r\\n\\r\\n   ' Calculates location for centering month and year:\\r\\n   LeftMargin = (35 - LEN(Header$)) \\\\ 2\\r\\n\\r\\n   ' Print header:\\r\\n   PRINT TAB(LeftMargin); Header$\\r\\n   PRINT\\r\\n   PRINT \\\"Su    M   Tu    W   Th    F   Sa\\\"\\r\\n   PRINT\\r\\n\\r\\n   ' Recalculate and print tab to the first day\\r\\n   ' of the month (Su M Tu ...):\\r\\n   LeftMargin = 5 * StartDay + 1\\r\\n   PRINT TAB(LeftMargin);\\r\\n\\r\\n   ' Print out the days of the month:\\r\\n   FOR I = 1 TO TotalDays\\r\\n      PRINT USING \\\"##   \\\"; I;\\r\\n\\r\\n      ' Advance to the next line when the cursor\\r\\n      ' is past column 32:\\r\\n      IF POS(0) > 32 THEN PRINT\\r\\n   NEXT\\r\\n\\r\\nEND SUB\\r\\n\";","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\n\\nDIM Amount(1 TO 100)\\nCONST FALSE = 0, TRUE = NOT FALSE\\n\\nCLS\\n' Get account's starting balance:\\nINPUT \\\"Type starting balance, then press <ENTER>: \\\", Balance\\n\\n' Get transactions. Continue accepting input\\n' until the input is zero for a transaction,\\n' or until 100 transactions have been entered:\\nFOR TransacNum% = 1 TO 100\\n    PRINT TransacNum%;\\n    PRINT \\\") Enter transaction amount (0 to end): \\\";\\n    INPUT \\\"\\\", Amount(TransacNum%)\\n    IF Amount(TransacNum%) = 0 THEN\\n    TransacNum% = TransacNum% - 1\\n    EXIT FOR\\n    END IF\\nNEXT\\n\\n' Sort transactions in ascending order,\\n' using a \\\"bubble sort\\\":\\nLimit% = TransacNum%\\nDO\\n    Swaps% = FALSE\\n    FOR I% = 1 TO (Limit% - 1)\\n\\n    ' If two adjacent elements are out of order,\\n    ' switch those elements:\\n    IF Amount(I%) < Amount(I% + 1) THEN\\n        SWAP Amount(I%), Amount(I% + 1)\\n        Swaps% = I%\\n    END IF\\n    NEXT I%\\n\\n    ' Sort on next pass only to where last switch was made:\\n    Limit% = Swaps%\\n\\n' Sort until no elements are exchanged:\\nLOOP WHILE Swaps%\\n\\n' Print the sorted transaction array. If a transaction\\n' is greater than zero, print it as a \\\"CREDIT\\\"; if a\\n' transaction is less than zero, print it as a \\\"DEBIT\\\":\\nFOR I% = 1 TO TransacNum%\\n    IF Amount(I%) > 0 THEN\\n    PRINT USING \\\"CREDIT: $$#####.##\\\"; Amount(I%)\\n    ELSEIF Amount(I%) < 0 THEN\\n    PRINT USING \\\"DEBIT: $$#####.##\\\"; Amount(I%)\\n    END IF\\n\\n    ' Update balance:\\n    Balance = Balance + Amount(I%)\\nNEXT I%\\n\\n' Print the final balance:\\nPRINT\\nPRINT \\\"--------------------------\\\"\\nPRINT USING \\\"Final Balance: $$######.##\\\"; Balance\\nEND\\n \";","export default \"' Welcome to qbjc playground!\\n'\\n' qbjc is a QBasic To JavaScript compiler. The qbjc playground\\n' lets you edit and run QBasic programs directly in the browser.\\n'\\n' To get started:\\n'\\n' - Press the blue \\\"Play\\\" button below to run this program. The\\n'   result will be displayed in the \\\"OUTPUT\\\" window on the right.\\n'\\n' - Feel free to modify and play around with this program. You can\\n'   also check out some other example programs using the \\\"Open\\\"\\n'   button at the top.\\n' \\n\\nCLS\\nPRINT \\\"Hi! Welcome to qbjc playground!\\\"\\nPRINT\\n\\nINPUT \\\"What's your name? \\\", name$\\nPRINT \\\"Hello, \\\"; name$; \\\"! Let's play a game! \\\"\\n\\nDO\\n  PRINT\\n  PlayNumberGuessingGame\\n  PRINT\\n  playAgain$ = InputYN$(\\\"Play again?\\\")\\n  PRINT\\nLOOP WHILE playAgain$ = \\\"Y\\\"\\n\\nPRINT\\nPRINT \\\"Thanks for playing \\\"; name$; \\\"! Have a great day!\\\"\\nPRINT\\n\\n\\nSUB PlayNumberGuessingGame\\n  PRINT \\\"I'll think of a number between 1 and 10, \\\";\\n  PRINT \\\"and you have 3 tries to guess it!\\\"\\n  answer = INT(RND * 10) + 1\\n  remainingTries = 3\\n  DO\\n    PRINT\\n    INPUT \\\"Enter your guess: \\\", guess\\n    IF answer = guess THEN\\n      PRINT \\\"Yay! You guessed the answer!\\\"\\n      EXIT DO\\n    ELSE\\n      remainingTries = remainingTries - 1\\n      IF remainingTries <= 0 THEN\\n        PRINT \\\"Sorry, you lost! The answer was\\\"; answer\\n        EXIT DO\\n      ELSEIF answer < guess THEN\\n        PRINT \\\"The answer is smaller than\\\"; guess\\n      ELSE\\n        PRINT \\\"The answer is larger than\\\"; guess\\n      END IF\\n    END IF\\n  LOOP\\nEND SUB\\n\\n\\nFUNCTION InputYN$(prompt$)\\n  PRINT prompt$; \\\" (Y/N)\\\";\\n  DO\\n    key$ = UCASE$(INKEY$)\\n  LOOP UNTIL key$ = \\\"Y\\\" OR key$ = \\\"N\\\"\\n  InputYN$ = key$\\nEND FUNCTION\\n\";","export default \"' Sample program from original QBasic distribution\\n' Source: https://archive.org/details/NibblesQbasic\\n\\n'\\n'                         Q B a s i c   N i b b l e s\\n'\\n'                   Copyright (C) Microsoft Corporation 1990\\n'\\n' Nibbles is a game for one or two players.  Navigate your snakes\\n' around the game board trying to eat up numbers while avoiding\\n' running into walls or other snakes.  The more numbers you eat up,\\n' the more points you gain and the longer your snake becomes.\\n'\\n' To run this game, press Shift+F5.\\n'\\n' To exit QBasic, press Alt, F, X.\\n'\\n' To get help on a BASIC keyword, move the cursor to the keyword and press\\n' F1 or click the right mouse button.\\n'\\n\\n'Set default data type to integer for faster game play\\nDEFINT A-Z\\n\\n'User-defined TYPEs\\nTYPE snakeBody\\n    row AS INTEGER\\n    col AS INTEGER\\nEND TYPE\\n\\n'This type defines the player's snake\\nTYPE snaketype\\n    head      AS INTEGER\\n    length    AS INTEGER\\n    row       AS INTEGER\\n    col       AS INTEGER\\n    direction AS INTEGER\\n    lives     AS INTEGER\\n    score     AS INTEGER\\n    scolor    AS INTEGER\\n    alive     AS INTEGER\\nEND TYPE\\n\\n'This type is used to represent the playing screen in memory\\n'It is used to simulate graphics in text mode, and has some interesting,\\n'and slightly advanced methods to increasing the speed of operation.\\n'Instead of the normal 80x25 text graphics using chr$(219) \\\"\\\", we will be\\n'using chr$(220)\\\"\\\" and chr$(223) \\\"\\\" and chr$(219) \\\"\\\" to mimic an 80x50\\n'pixel screen.\\n'Check out sub-programs SET and POINTISTHERE to see how this is implemented\\n'feel free to copy these (as well as arenaType and the DIM ARENA stmt and the\\n'initialization code in the DrawScreen subprogram) and use them in your own\\n'programs\\nTYPE arenaType\\n    realRow     AS INTEGER        'Maps the 80x50 point into the real 80x25\\n    acolor      AS INTEGER        'Stores the current color of the point\\n    sister      AS INTEGER        'Each char has 2 points in it.  .SISTER is\\nEND TYPE                          '-1 if sister point is above, +1 if below\\n\\n'Sub Declarations\\nDECLARE SUB SpacePause (text$)\\nDECLARE SUB PrintScore (NumPlayers%, score1%, score2%, lives1%, lives2%)\\nDECLARE SUB Intro ()\\nDECLARE SUB GetInputs (NumPlayers, speed, diff$, monitor$)\\nDECLARE SUB DrawScreen ()\\nDECLARE SUB PlayNibbles (NumPlayers, speed, diff$)\\nDECLARE SUB Set (row, col, acolor)\\nDECLARE SUB Center (row, text$)\\nDECLARE SUB DoIntro ()\\nDECLARE SUB Initialize ()\\nDECLARE SUB SparklePause ()\\nDECLARE SUB Level (WhatToDO, sammy() AS snaketype)\\nDECLARE SUB InitColors ()\\nDECLARE SUB EraseSnake (snake() AS ANY, snakeBod() AS ANY, snakeNum%)\\nDECLARE FUNCTION StillWantsToPlay ()\\nDECLARE FUNCTION PointIsThere (row, col, backColor)\\n\\n'Constants\\nCONST TRUE = -1\\nCONST FALSE = NOT TRUE\\nCONST MAXSNAKELENGTH = 1000\\nCONST STARTOVER = 1             ' Parameters to 'Level' SUB\\nCONST SAMELEVEL = 2\\nCONST NEXTLEVEL = 3\\n\\n'Global Variables\\nDIM SHARED arena(1 TO 50, 1 TO 80) AS arenaType\\nDIM SHARED curLevel, colorTable(10)\\n\\n    RANDOMIZE TIMER\\n    GOSUB ClearKeyLocks\\n    Intro\\n    GetInputs NumPlayers, speed, diff$, monitor$\\n    GOSUB SetColors\\n    DrawScreen\\n\\n    DO\\n      PlayNibbles NumPlayers, speed, diff$\\n    LOOP WHILE StillWantsToPlay\\n\\n    GOSUB RestoreKeyLocks\\n    COLOR 15, 0\\n    CLS\\nEND\\n\\nClearKeyLocks:\\n    DEF SEG = 0                     ' Turn off CapLock, NumLock and ScrollLock\\n    KeyFlags = PEEK(1047)\\n    POKE 1047, &H0\\n    DEF SEG\\n    RETURN\\n\\nRestoreKeyLocks:\\n    DEF SEG = 0                     ' Restore CapLock, NumLock and ScrollLock states\\n    POKE 1047, KeyFlags\\n    DEF SEG\\n    RETURN\\n\\nSetColors:\\n    IF monitor$ = \\\"M\\\" THEN\\n        RESTORE mono\\n    ELSE\\n        RESTORE normal\\n    END IF\\n\\n    FOR a = 1 TO 6\\n        READ colorTable(a)\\n    NEXT a\\n    RETURN\\n\\n           'snake1     snake2   Walls  Background  Dialogs-Fore  Back\\nmono:   DATA 15,         7,       7,     0,          15,            0\\nnormal: DATA 14,         13,      12,    1,          15,            4\\nEND\\n\\n'Center:\\n'  Centers text on given row\\nSUB Center (row, text$)\\n    LOCATE row, 41 - LEN(text$) / 2\\n    PRINT text$;\\nEND SUB\\n\\n'DrawScreen:\\n'  Draws playing field\\nSUB DrawScreen\\n\\n    'initialize screen\\n    VIEW PRINT\\n    COLOR colorTable(1), colorTable(4)\\n    CLS\\n\\n    'Print title & message\\n    Center 1, \\\"Nibbles!\\\"\\n    Center 11, \\\"Initializing Playing Field...\\\"\\n    \\n    'Initialize arena array\\n    FOR row = 1 TO 50\\n        FOR col = 1 TO 80\\n            arena(row, col).realRow = INT((row + 1) / 2)\\n            arena(row, col).sister = (row MOD 2) * 2 - 1\\n        NEXT col\\n    NEXT row\\nEND SUB\\n\\n'EraseSnake:\\n'  Erases snake to facilitate moving through playing field\\nSUB EraseSnake (snake() AS snaketype, snakeBod() AS snakeBody, snakeNum)\\n\\n    FOR c = 0 TO 9\\n        FOR b = snake(snakeNum).length - c TO 0 STEP -10\\n            tail = (snake(snakeNum).head + MAXSNAKELENGTH - b) MOD MAXSNAKELENGTH\\n            Set snakeBod(tail, snakeNum).row, snakeBod(tail, snakeNum).col, colorTable(4)\\n        NEXT b\\n    NEXT c\\n    \\nEND SUB\\n\\n'GetInputs:\\n'  Gets player inputs\\nSUB GetInputs (NumPlayers, speed, diff$, monitor$)\\n\\n    COLOR 7, 0\\n    CLS\\n\\n    DO\\n        LOCATE 5, 47: PRINT SPACE$(34);\\n        LOCATE 5, 20\\n        INPUT \\\"How many players (1 or 2)\\\"; num$\\n    LOOP UNTIL VAL(num$) = 1 OR VAL(num$) = 2\\n    NumPlayers = VAL(num$)\\n\\n    LOCATE 8, 21: PRINT \\\"Skill level (1 to 100)\\\"\\n    LOCATE 9, 22: PRINT \\\"1   = Novice\\\"\\n    LOCATE 10, 22: PRINT \\\"90  = Expert\\\"\\n    LOCATE 11, 22: PRINT \\\"100 = Twiddle Fingers\\\"\\n    LOCATE 12, 15: PRINT \\\"(Computer speed may affect your skill level)\\\"\\n    DO\\n        LOCATE 8, 44: PRINT SPACE$(35);\\n        LOCATE 8, 43\\n        INPUT gamespeed$\\n    LOOP UNTIL VAL(gamespeed$) >= 1 AND VAL(gamespeed$) <= 100\\n    speed = VAL(gamespeed$)\\n  \\n    speed = (100 - speed) * 2 + 1\\n\\n    DO\\n        LOCATE 15, 56: PRINT SPACE$(25);\\n        LOCATE 15, 15\\n        INPUT \\\"Increase game speed during play (Y or N)\\\"; diff$\\n        diff$ = UCASE$(diff$)\\n    LOOP UNTIL diff$ = \\\"Y\\\" OR diff$ = \\\"N\\\"\\n\\n    DO\\n        LOCATE 17, 46: PRINT SPACE$(34);\\n        LOCATE 17, 17\\n        INPUT \\\"Monochrome or color monitor (M or C)\\\"; monitor$\\n        monitor$ = UCASE$(monitor$)\\n    LOOP UNTIL monitor$ = \\\"M\\\" OR monitor$ = \\\"C\\\"\\n\\n    startTime# = TIMER                          ' Calculate speed of system\\n    FOR i# = 1 TO 1000: NEXT i#                 ' and do some compensation\\n    stopTime# = TIMER\\n    speed = speed * .5 / (stopTime# - startTime#)\\n\\nEND SUB\\n\\n'InitColors:\\n'Initializes playing field colors\\nSUB InitColors\\n    \\n    FOR row = 1 TO 50\\n        FOR col = 1 TO 80\\n            arena(row, col).acolor = colorTable(4)\\n        NEXT col\\n    NEXT row\\n\\n    CLS\\n   \\n    'Set (turn on) pixels for screen border\\n    FOR col = 1 TO 80\\n        Set 3, col, colorTable(3)\\n        Set 50, col, colorTable(3)\\n    NEXT col\\n\\n    FOR row = 4 TO 49\\n        Set row, 1, colorTable(3)\\n        Set row, 80, colorTable(3)\\n    NEXT row\\n\\nEND SUB\\n\\n'Intro:\\n'  Displays game introduction\\nSUB Intro\\n    SCREEN 0\\n    WIDTH 80, 25\\n    COLOR 15, 0\\n    CLS\\n\\n    Center 4, \\\"Q B a s i c   N i b b l e s\\\"\\n    COLOR 7\\n    Center 6, \\\"Copyright (C) Microsoft Corporation 1990\\\"\\n    Center 8, \\\"Nibbles is a game for one or two players.  Navigate your snakes\\\"\\n    Center 9, \\\"around the game board trying to eat up numbers while avoiding\\\"\\n    Center 10, \\\"running into walls or other snakes.  The more numbers you eat up,\\\"\\n    Center 11, \\\"the more points you gain and the longer your snake becomes.\\\"\\n    Center 13, \\\" Game Controls \\\"\\n    Center 15, \\\"  General             Player 1               Player 2    \\\"\\n    Center 16, \\\"                        (Up)                   (Up)      \\\"\\n    Center 17, \\\"P - Pause                \\\" + CHR$(24) + \\\"                      W       \\\"\\n    Center 18, \\\"                     (Left) \\\" + CHR$(27) + \\\"   \\\" + CHR$(26) + \\\" (Right)   (Left) A   D (Right)  \\\"\\n    Center 19, \\\"                         \\\" + CHR$(25) + \\\"                      S       \\\"\\n    Center 20, \\\"                       (Down)                 (Down)     \\\"\\n    Center 24, \\\"Press any key to continue\\\"\\n\\n    PLAY \\\"MBT160O1L8CDEDCDL4ECC\\\"\\n    SparklePause\\n\\nEND SUB\\n\\n'Level:\\n'Sets game level\\nSUB Level (WhatToDO, sammy() AS snaketype) STATIC\\n    \\n    SELECT CASE (WhatToDO)\\n\\n    CASE STARTOVER\\n        curLevel = 1\\n    CASE NEXTLEVEL\\n        curLevel = curLevel + 1\\n    END SELECT\\n\\n    sammy(1).head = 1                       'Initialize Snakes\\n    sammy(1).length = 2\\n    sammy(1).alive = TRUE\\n    sammy(2).head = 1\\n    sammy(2).length = 2\\n    sammy(2).alive = TRUE\\n\\n    InitColors\\n    \\n    SELECT CASE curLevel\\n    CASE 1\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 4: sammy(2).direction = 3\\n\\n\\n    CASE 2\\n        FOR i = 20 TO 60\\n            Set 25, i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 60: sammy(2).col = 20\\n        sammy(1).direction = 3: sammy(2).direction = 4\\n\\n    CASE 3\\n        FOR i = 10 TO 40\\n            Set i, 20, colorTable(3)\\n            Set i, 60, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n\\n    CASE 4\\n        FOR i = 4 TO 30\\n            Set i, 20, colorTable(3)\\n            Set 53 - i, 60, colorTable(3)\\n        NEXT i\\n        FOR i = 2 TO 40\\n            Set 38, i, colorTable(3)\\n            Set 15, 81 - i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 60: sammy(2).col = 20\\n        sammy(1).direction = 3: sammy(2).direction = 4\\n   \\n    CASE 5\\n        FOR i = 13 TO 39\\n            Set i, 21, colorTable(3)\\n            Set i, 59, colorTable(3)\\n        NEXT i\\n        FOR i = 23 TO 57\\n            Set 11, i, colorTable(3)\\n            Set 41, i, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 25: sammy(2).row = 25\\n        sammy(1).col = 50: sammy(2).col = 30\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n\\n    CASE 6\\n        FOR i = 4 TO 49\\n            IF i > 30 OR i < 23 THEN\\n                Set i, 10, colorTable(3)\\n                Set i, 20, colorTable(3)\\n                Set i, 30, colorTable(3)\\n                Set i, 40, colorTable(3)\\n                Set i, 50, colorTable(3)\\n                Set i, 60, colorTable(3)\\n                Set i, 70, colorTable(3)\\n            END IF\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 7\\n        FOR i = 4 TO 49 STEP 2\\n            Set i, 40, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 8\\n        FOR i = 4 TO 40\\n            Set i, 10, colorTable(3)\\n            Set 53 - i, 20, colorTable(3)\\n            Set i, 30, colorTable(3)\\n            Set 53 - i, 40, colorTable(3)\\n            Set i, 50, colorTable(3)\\n            Set 53 - i, 60, colorTable(3)\\n            Set i, 70, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    CASE 9\\n        FOR i = 6 TO 47\\n            Set i, i, colorTable(3)\\n            Set i, i + 28, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 40: sammy(2).row = 15\\n        sammy(1).col = 75: sammy(2).col = 5\\n        sammy(1).direction = 1: sammy(2).direction = 2\\n   \\n    CASE ELSE\\n        FOR i = 4 TO 49 STEP 2\\n            Set i, 10, colorTable(3)\\n            Set i + 1, 20, colorTable(3)\\n            Set i, 30, colorTable(3)\\n            Set i + 1, 40, colorTable(3)\\n            Set i, 50, colorTable(3)\\n            Set i + 1, 60, colorTable(3)\\n            Set i, 70, colorTable(3)\\n        NEXT i\\n        sammy(1).row = 7: sammy(2).row = 43\\n        sammy(1).col = 65: sammy(2).col = 15\\n        sammy(1).direction = 2: sammy(2).direction = 1\\n\\n    END SELECT\\nEND SUB\\n\\n'PlayNibbles:\\n'  Main routine that controls game play\\nSUB PlayNibbles (NumPlayers, speed, diff$)\\n\\n    'Initialize Snakes\\n    DIM sammyBody(MAXSNAKELENGTH - 1, 1 TO 2) AS snakeBody\\n    DIM sammy(1 TO 2) AS snaketype\\n    sammy(1).lives = 5\\n    sammy(1).score = 0\\n    sammy(1).scolor = colorTable(1)\\n    sammy(2).lives = 5\\n    sammy(2).score = 0\\n    sammy(2).scolor = colorTable(2)\\n                 \\n    Level STARTOVER, sammy()\\n    startRow1 = sammy(1).row: startCol1 = sammy(1).col\\n    startRow2 = sammy(2).row: startCol2 = sammy(2).col\\n\\n    curSpeed = speed\\n\\n    'play Nibbles until finished\\n\\n    SpacePause \\\"     Level\\\" + STR$(curLevel) + \\\",  Push Space\\\"\\n    gameOver = FALSE\\n    DO\\n        IF NumPlayers = 1 THEN\\n            sammy(2).row = 0\\n        END IF\\n\\n        number = 1          'Current number that snakes are trying to run into\\n        nonum = TRUE        'nonum = TRUE if a number is not on the screen\\n\\n        playerDied = FALSE\\n        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n        PLAY \\\"T160O1>L20CDEDCDL10ECC\\\"\\n\\n        DO\\n            'Print number if no number exists\\n            IF nonum = TRUE THEN\\n                DO\\n                    numberRow = INT(RND(1) * 47 + 3)\\n                    NumberCol = INT(RND(1) * 78 + 2)\\n                    sisterRow = numberRow + arena(numberRow, NumberCol).sister\\n                LOOP UNTIL NOT PointIsThere(numberRow, NumberCol, colorTable(4)) AND NOT PointIsThere(sisterRow, NumberCol, colorTable(4))\\n                numberRow = arena(numberRow, NumberCol).realRow\\n                nonum = FALSE\\n                COLOR colorTable(1), colorTable(4)\\n                LOCATE numberRow, NumberCol\\n                PRINT RIGHT$(STR$(number), 1);\\n                count = 0\\n            END IF\\n\\n            'Delay game\\n            FOR a# = 1 TO curSpeed:  NEXT a#\\n\\n            'Get keyboard input & Change direction accordingly\\n            kbd$ = INKEY$\\n            SELECT CASE kbd$\\n                CASE \\\"w\\\", \\\"W\\\": IF sammy(2).direction <> 2 THEN sammy(2).direction = 1\\n                CASE \\\"s\\\", \\\"S\\\": IF sammy(2).direction <> 1 THEN sammy(2).direction = 2\\n                CASE \\\"a\\\", \\\"A\\\": IF sammy(2).direction <> 4 THEN sammy(2).direction = 3\\n                CASE \\\"d\\\", \\\"D\\\": IF sammy(2).direction <> 3 THEN sammy(2).direction = 4\\n                CASE CHR$(0) + \\\"H\\\": IF sammy(1).direction <> 2 THEN sammy(1).direction = 1\\n                CASE CHR$(0) + \\\"P\\\": IF sammy(1).direction <> 1 THEN sammy(1).direction = 2\\n                CASE CHR$(0) + \\\"K\\\": IF sammy(1).direction <> 4 THEN sammy(1).direction = 3\\n                CASE CHR$(0) + \\\"M\\\": IF sammy(1).direction <> 3 THEN sammy(1).direction = 4\\n                CASE \\\"p\\\", \\\"P\\\": SpacePause \\\" Game Paused ... Push Space  \\\"\\n                CASE ELSE\\n            END SELECT\\n\\n            FOR a = 1 TO NumPlayers\\n                'Move Snake\\n                SELECT CASE sammy(a).direction\\n                    CASE 1: sammy(a).row = sammy(a).row - 1\\n                    CASE 2: sammy(a).row = sammy(a).row + 1\\n                    CASE 3: sammy(a).col = sammy(a).col - 1\\n                    CASE 4: sammy(a).col = sammy(a).col + 1\\n                END SELECT\\n\\n                'If snake hits number, respond accordingly\\n                IF numberRow = INT((sammy(a).row + 1) / 2) AND NumberCol = sammy(a).col THEN\\n                    PLAY \\\"MBO0L16>CCCE\\\"\\n                    IF sammy(a).length < (MAXSNAKELENGTH - 30) THEN\\n                        sammy(a).length = sammy(a).length + number * 4\\n                    END IF\\n                    sammy(a).score = sammy(a).score + number\\n                    PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                    number = number + 1\\n                    IF number = 10 THEN\\n                        EraseSnake sammy(), sammyBody(), 1\\n                        EraseSnake sammy(), sammyBody(), 2\\n                        LOCATE numberRow, NumberCol: PRINT \\\" \\\"\\n                        Level NEXTLEVEL, sammy()\\n                        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                        SpacePause \\\"     Level\\\" + STR$(curLevel) + \\\",  Push Space\\\"\\n                        IF NumPlayers = 1 THEN sammy(2).row = 0\\n                        number = 1\\n                        IF diff$ = \\\"P\\\" THEN speed = speed - 10: curSpeed = speed\\n                    END IF\\n                    nonum = TRUE\\n                    IF curSpeed < 1 THEN curSpeed = 1\\n                END IF\\n            NEXT a\\n\\n            FOR a = 1 TO NumPlayers\\n                'If player runs into any point, or the head of the other snake, it dies.\\n                IF PointIsThere(sammy(a).row, sammy(a).col, colorTable(4)) OR (sammy(1).row = sammy(2).row AND sammy(1).col = sammy(2).col) THEN\\n                    PLAY \\\"MBO0L32EFGEFDC\\\"\\n                    COLOR , colorTable(4)\\n                    LOCATE numberRow, NumberCol\\n                    PRINT \\\" \\\"\\n                   \\n                    playerDied = TRUE\\n                    sammy(a).alive = FALSE\\n                    sammy(a).lives = sammy(a).lives - 1\\n\\n                'Otherwise, move the snake, and erase the tail\\n                ELSE\\n                    sammy(a).head = (sammy(a).head + 1) MOD MAXSNAKELENGTH\\n                    sammyBody(sammy(a).head, a).row = sammy(a).row\\n                    sammyBody(sammy(a).head, a).col = sammy(a).col\\n                    tail = (sammy(a).head + MAXSNAKELENGTH - sammy(a).length) MOD MAXSNAKELENGTH\\n                    Set sammyBody(tail, a).row, sammyBody(tail, a).col, colorTable(4)\\n                    sammyBody(tail, a).row = 0\\n                    Set sammy(a).row, sammy(a).col, sammy(a).scolor\\n                END IF\\n            NEXT a\\n\\n        LOOP UNTIL playerDied\\n\\n        curSpeed = speed                ' reset speed to initial value\\n       \\n        FOR a = 1 TO NumPlayers\\n            EraseSnake sammy(), sammyBody(), a\\n\\n            'If dead, then erase snake in really cool way\\n            IF sammy(a).alive = FALSE THEN\\n                'Update score\\n                sammy(a).score = sammy(a).score - 10\\n                PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n                \\n                IF a = 1 THEN\\n                    SpacePause \\\" Sammy Dies! Push Space! --->\\\"\\n                ELSE\\n                    SpacePause \\\" <---- Jake Dies! Push Space \\\"\\n                END IF\\n            END IF\\n        NEXT a\\n\\n        Level SAMELEVEL, sammy()\\n        PrintScore NumPlayers, sammy(1).score, sammy(2).score, sammy(1).lives, sammy(2).lives\\n     \\n    'Play next round, until either of snake's lives have run out.\\n    LOOP UNTIL sammy(1).lives = 0 OR sammy(2).lives = 0\\n\\nEND SUB\\n\\n'PointIsThere:\\n'  Checks the global  arena array to see if the boolean flag is set\\nFUNCTION PointIsThere (row, col, acolor)\\n    IF row <> 0 THEN\\n        IF arena(row, col).acolor <> acolor THEN\\n            PointIsThere = TRUE\\n        ELSE\\n            PointIsThere = FALSE\\n        END IF\\n    END IF\\nEND FUNCTION\\n\\n'PrintScore:\\n'  Prints players scores and number of lives remaining\\nSUB PrintScore (NumPlayers, score1, score2, lives1, lives2)\\n    COLOR 15, colorTable(4)\\n\\n    IF NumPlayers = 2 THEN\\n        LOCATE 1, 1\\n        PRINT USING \\\"#,###,#00  Lives: #  <--JAKE\\\"; score2; lives2\\n    END IF\\n\\n    LOCATE 1, 49\\n    PRINT USING \\\"SAMMY-->  Lives: #     #,###,#00\\\"; lives1; score1\\nEND SUB\\n\\n'Set:\\n'  Sets row and column on playing field to given color to facilitate moving\\n'  of snakes around the field.\\nSUB Set (row, col, acolor)\\n    IF row <> 0 THEN\\n        arena(row, col).acolor = acolor             'assign color to arena\\n        realRow = arena(row, col).realRow           'Get real row of pixel\\n        topFlag = arena(row, col).sister + 1 / 2    'Deduce whether pixel\\n                                                    'is on top, or bottom\\n        sisterRow = row + arena(row, col).sister    'Get arena row of sister\\n        sisterColor = arena(sisterRow, col).acolor  'Determine sister's color\\n\\n        LOCATE realRow, col\\n\\n        IF acolor = sisterColor THEN                'If both points are same\\n            COLOR acolor, acolor                           'Print chr$(219) \\\"\\\"\\n            PRINT CHR$(219);\\n        ELSE\\n            IF topFlag THEN                         'Since you cannot have\\n                IF acolor > 7 THEN                  'bright backgrounds\\n                    COLOR acolor, sisterColor       'determine best combo\\n                    PRINT CHR$(223);                'to use.\\n                ELSE\\n                    COLOR sisterColor, acolor\\n                    PRINT CHR$(220);\\n                END IF\\n            ELSE\\n                IF acolor > 7 THEN\\n                    COLOR acolor, sisterColor\\n                    PRINT CHR$(220);\\n                ELSE\\n                    COLOR sisterColor, acolor\\n                    PRINT CHR$(223);\\n                END IF\\n            END IF\\n        END IF\\n    END IF\\nEND SUB\\n\\n'SpacePause:\\n'  Pauses game play and waits for space bar to be pressed before continuing\\nSUB SpacePause (text$)\\n\\n    COLOR colorTable(5), colorTable(6)\\n    Center 11, \\\"\\\"\\n    Center 12, \\\" \\\" + LEFT$(text$ + SPACE$(29), 29) + \\\" \\\"\\n    Center 13, \\\"\\\"\\n    WHILE INKEY$ <> \\\"\\\": WEND\\n    WHILE INKEY$ <> \\\" \\\": WEND\\n    COLOR 15, colorTable(4)\\n\\n    FOR i = 21 TO 26            ' Restore the screen background\\n        FOR j = 24 TO 56\\n            Set i, j, arena(i, j).acolor\\n        NEXT j\\n    NEXT i\\n\\nEND SUB\\n\\n'SparklePause:\\n'  Creates flashing border for intro screen\\nSUB SparklePause\\n\\n    COLOR 4, 0\\n    a$ = \\\"*    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    *    \\\"\\n    WHILE INKEY$ <> \\\"\\\": WEND 'Clear keyboard buffer\\n\\n    WHILE INKEY$ = \\\"\\\"\\n        FOR a = 1 TO 5\\n            LOCATE 1, 1                             'print horizontal sparkles\\n            PRINT MID$(a$, a, 80);\\n            LOCATE 22, 1\\n            PRINT MID$(a$, 6 - a, 80);\\n\\n            FOR b = 2 TO 21                         'Print Vertical sparkles\\n                c = (a + b) MOD 5\\n                IF c = 1 THEN\\n                    LOCATE b, 80\\n                    PRINT \\\"*\\\";\\n                    LOCATE 23 - b, 1\\n                    PRINT \\\"*\\\";\\n                ELSE\\n                    LOCATE b, 80\\n                    PRINT \\\" \\\";\\n                    LOCATE 23 - b, 1\\n                    PRINT \\\" \\\";\\n                END IF\\n            NEXT b\\n        NEXT a\\n    WEND\\n\\nEND SUB\\n\\n'StillWantsToPlay:\\n'  Determines if users want to play game again.\\nFUNCTION StillWantsToPlay\\n\\n    COLOR colorTable(5), colorTable(6)\\n    Center 10, \\\"\\\"\\n    Center 11, \\\"       G A M E   O V E R       \\\"\\n    Center 12, \\\"                               \\\"\\n    Center 13, \\\"      Play Again?   (Y/N)      \\\"\\n    Center 14, \\\"\\\"\\n\\n    WHILE INKEY$ <> \\\"\\\": WEND\\n    DO\\n        kbd$ = UCASE$(INKEY$)\\n    LOOP UNTIL kbd$ = \\\"Y\\\" OR kbd$ = \\\"N\\\"\\n\\n    COLOR 15, colorTable(4)\\n    Center 10, \\\"                                 \\\"\\n    Center 11, \\\"                                 \\\"\\n    Center 12, \\\"                                 \\\"\\n    Center 13, \\\"                                 \\\"\\n    Center 14, \\\"                                 \\\"\\n\\n    IF kbd$ = \\\"Y\\\" THEN\\n        StillWantsToPlay = TRUE\\n    ELSE\\n        StillWantsToPlay = FALSE\\n        COLOR 7, 0\\n        CLS\\n    END IF\\n\\nEND FUNCTION\\n\\n\";","export default \"' Example from \\\"Microsoft QuickBASIC: Programming in BASIC\\\"\\r\\n' Source: https://www.pcjs.org/documents/books/mspl13/basic/qbprog/\\r\\n\\r\\nDECLARE FUNCTION Filter$ (Txt$, FilterString$)\\r\\n\\r\\n' Input a line:\\r\\nLINE INPUT \\\"Enter a number with commas: \\\", A$\\r\\n\\r\\n' Look for only valid numeric characters (0123456789.-) in the\\r\\n' input string:\\r\\nCleanNum$ = Filter$(A$, \\\"0123456789.-\\\")\\r\\n\\r\\n' Convert the string to a number:\\r\\nPRINT \\\"The number's value = \\\"; VAL(CleanNum$)\\r\\nEND\\r\\n'\\r\\n' ========================== FILTER ==========================\\r\\n'         Takes unwanted characters out of a string by\\r\\n'        comparing them with a filter string containing\\r\\n'             only acceptable numeric characters\\r\\n' ============================================================\\r\\n'\\r\\nFUNCTION Filter$ (Txt$, FilterString$) STATIC\\r\\n   Temp$ = \\\"\\\"\\r\\n   TxtLength = LEN(Txt$)\\r\\n\\r\\n   FOR I = 1 TO TxtLength     ' Isolate each character in\\r\\n      C$ = MID$(Txt$, I, 1)   ' the string.\\r\\n\\r\\n      ' If the character is in the filter string, save it:\\r\\n      IF INSTR(FilterString$, C$) <> 0 THEN\\r\\n         Temp$ = Temp$ + C$\\r\\n      END IF\\r\\n   NEXT I\\r\\n\\r\\n   Filter$ = Temp$\\r\\nEND FUNCTION\\r\\n\";","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProcDefType = exports.procTypeName = exports.isFnOrDefFn = exports.ProcType = exports.typeSpecName = exports.areMatchingSingularTypes = exports.areMatchingElementaryTypes = exports.isSingularType = exports.isUdt = exports.isElementaryType = exports.isArray = exports.isString = exports.isIntegral = exports.isNumeric = exports.arraySpec = exports.stringSpec = exports.doubleSpec = exports.singleSpec = exports.longSpec = exports.integerSpec = exports.DataType = void 0;\n/** Overall type of the value. */\nvar DataType;\n(function (DataType) {\n    /** 16-bit integer */\n    DataType[\"INTEGER\"] = \"integer\";\n    /** 32-bit integer */\n    DataType[\"LONG\"] = \"long\";\n    /** 32-bit floating point. */\n    DataType[\"SINGLE\"] = \"single\";\n    /** 64-bit floating point. */\n    DataType[\"DOUBLE\"] = \"double\";\n    /** String. */\n    DataType[\"STRING\"] = \"string\";\n    /** Array. */\n    DataType[\"ARRAY\"] = \"array\";\n    /** User-defined data type, a.k.a. records. */\n    DataType[\"UDT\"] = \"udt\";\n})(DataType = exports.DataType || (exports.DataType = {}));\n// Helpers for creating DataTypeSpec instances.\nfunction integerSpec() {\n    return { type: DataType.INTEGER };\n}\nexports.integerSpec = integerSpec;\nfunction longSpec() {\n    return { type: DataType.LONG };\n}\nexports.longSpec = longSpec;\nfunction singleSpec() {\n    return { type: DataType.SINGLE };\n}\nexports.singleSpec = singleSpec;\nfunction doubleSpec() {\n    return { type: DataType.DOUBLE };\n}\nexports.doubleSpec = doubleSpec;\nfunction stringSpec() {\n    return { type: DataType.STRING };\n}\nexports.stringSpec = stringSpec;\nfunction arraySpec(elementTypeSpec, dimensionSpecs) {\n    return { type: DataType.ARRAY, elementTypeSpec: elementTypeSpec, dimensionSpecs: dimensionSpecs };\n}\nexports.arraySpec = arraySpec;\n// Helpers for type checking.\nfunction isNumeric(t) {\n    return [\n        DataType.INTEGER,\n        DataType.LONG,\n        DataType.SINGLE,\n        DataType.DOUBLE,\n    ].includes(getType(t));\n}\nexports.isNumeric = isNumeric;\nfunction isIntegral(t) {\n    return [DataType.INTEGER, DataType.LONG].includes(getType(t));\n}\nexports.isIntegral = isIntegral;\nfunction isString(t) {\n    return getType(t) === DataType.STRING;\n}\nexports.isString = isString;\nfunction isArray(t) {\n    return getType(t) === DataType.ARRAY;\n}\nexports.isArray = isArray;\nfunction isElementaryType(t) {\n    return isNumeric(t) || isString(t);\n}\nexports.isElementaryType = isElementaryType;\nfunction isUdt(t) {\n    return getType(t) === DataType.UDT;\n}\nexports.isUdt = isUdt;\nfunction isSingularType(t) {\n    return isElementaryType(t) || isUdt(t);\n}\nexports.isSingularType = isSingularType;\nfunction areMatchingElementaryTypes(typeSpec1, typeSpec2) {\n    return ((isNumeric(typeSpec1) && isNumeric(typeSpec2)) ||\n        (isString(typeSpec1) && isString(typeSpec2)));\n}\nexports.areMatchingElementaryTypes = areMatchingElementaryTypes;\nfunction areMatchingSingularTypes(typeSpec1, typeSpec2) {\n    return (areMatchingElementaryTypes(typeSpec1, typeSpec2) ||\n        (isUdt(typeSpec1) && isUdt(typeSpec2) && typeSpec1.name === typeSpec2.name));\n}\nexports.areMatchingSingularTypes = areMatchingSingularTypes;\nfunction typeSpecName(t) {\n    switch (t.type) {\n        case DataType.ARRAY:\n            return typeSpecName(t.elementTypeSpec) + \" array\";\n        case DataType.UDT:\n            return \"\\\"\" + t.name + \"\\\"\";\n        default:\n            return t.type;\n    }\n}\nexports.typeSpecName = typeSpecName;\nfunction getType(t) {\n    return typeof t === 'object' ? t.type : t;\n}\n/** Type of a procedure. */\nvar ProcType;\n(function (ProcType) {\n    /** SUB procedure. */\n    ProcType[\"SUB\"] = \"sub\";\n    /** FUNCTION procedure. */\n    ProcType[\"FN\"] = \"fn\";\n    /** DEF FN procedure. */\n    ProcType[\"DEF_FN\"] = \"defFn\";\n})(ProcType = exports.ProcType || (exports.ProcType = {}));\nfunction isFnOrDefFn(procType) {\n    return procType === ProcType.FN || procType === ProcType.DEF_FN;\n}\nexports.isFnOrDefFn = isFnOrDefFn;\n/** Returns the user-facing name of a ProcType. */\nfunction procTypeName(procType) {\n    var _a;\n    var NAMES = (_a = {},\n        _a[ProcType.SUB] = 'SUB procedure',\n        _a[ProcType.FN] = 'FUNCTION procedure',\n        _a[ProcType.DEF_FN] = 'DEF FN procedure',\n        _a);\n    return NAMES[procType];\n}\nexports.procTypeName = procTypeName;\n/** The type of a procedure definition. */\nvar ProcDefType;\n(function (ProcDefType) {\n    /** Built-in function. */\n    ProcDefType[\"BUILTIN\"] = \"builtin\";\n    /** User-defined function in the current module. */\n    ProcDefType[\"MODULE\"] = \"module\";\n})(ProcDefType = exports.ProcDefType || (exports.ProcDefType = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar terser_1 = require(\"terser\");\nvar codegen_1 = __importDefault(require(\"./codegen/codegen\"));\nvar parser_1 = __importDefault(require(\"./parser/parser\"));\nvar semantic_analysis_1 = __importDefault(require(\"./semantic-analysis/semantic-analysis\"));\nvar DEFAULT_SOURCE_FILE_NAME = 'source.bas';\n/** Compiles a QBasic program.\n *\n * This is the main entrypoint to qbjc's compiler.\n */\nfunction compile(_a) {\n    var source = _a.source, _b = _a.sourceFileName, sourceFileName = _b === void 0 ? DEFAULT_SOURCE_FILE_NAME : _b, enableBundling = _a.enableBundling, enableMinify = _a.enableMinify;\n    return __awaiter(this, void 0, void 0, function () {\n        var astModule, _c, code, sourceMap, sourceMapContent, _d, minifiedCode, minifiedSourceMap;\n        return __generator(this, function (_e) {\n            switch (_e.label) {\n                case 0:\n                    astModule = parser_1.default(source, { sourceFileName: sourceFileName });\n                    if (!astModule) {\n                        throw new Error(\"Invalid parse tree\");\n                    }\n                    // 2. Semantic analysis.\n                    semantic_analysis_1.default(astModule, { sourceFileName: sourceFileName });\n                    _c = codegen_1.default(astModule, {\n                        sourceFileName: sourceFileName,\n                        enableBundling: enableBundling,\n                    }), code = _c.code, sourceMap = _c.map;\n                    sourceMapContent = sourceMap.toString();\n                    if (!enableMinify) return [3 /*break*/, 2];\n                    return [4 /*yield*/, terser_1.minify(code, {\n                            sourceMap: {\n                                filename: sourceFileName,\n                                content: sourceMapContent,\n                            },\n                        })];\n                case 1:\n                    _d = _e.sent(), minifiedCode = _d.code, minifiedSourceMap = _d.map;\n                    if (minifiedCode && minifiedSourceMap) {\n                        code = minifiedCode;\n                        sourceMapContent = minifiedSourceMap;\n                    }\n                    _e.label = 2;\n                case 2: return [2 /*return*/, {\n                        source: source,\n                        code: code,\n                        map: sourceMapContent,\n                        astModule: astModule,\n                    }];\n            }\n        });\n    });\n}\nexports.default = compile;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGenerator = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar source_map_1 = require(\"source-map\");\nvar ast_1 = require(\"../lib/ast\");\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar compiled_code_1 = require(\"../runtime/compiled-code\");\n// Generated by src/tools/build-runtime-bundle.ts at build time.\nvar nodeRuntimeBundleCode = require('../runtime/node-runtime-bundle')\n    .default;\n/** Default indentation per level. */\nvar DEFAULT_INDENT_WIDTH = 4;\nvar BINARY_OP_MAP = (_a = {},\n    _a[ast_1.BinaryOp.ADD] = '+',\n    _a[ast_1.BinaryOp.SUB] = '-',\n    _a[ast_1.BinaryOp.MUL] = '*',\n    _a[ast_1.BinaryOp.DIV] = '/',\n    _a[ast_1.BinaryOp.MOD] = '%',\n    _a[ast_1.BinaryOp.AND] = '&&',\n    _a[ast_1.BinaryOp.OR] = '||',\n    _a[ast_1.BinaryOp.EQ] = '===',\n    _a[ast_1.BinaryOp.NE] = '!=',\n    _a[ast_1.BinaryOp.GT] = '>',\n    _a[ast_1.BinaryOp.GTE] = '>=',\n    _a[ast_1.BinaryOp.LT] = '<',\n    _a[ast_1.BinaryOp.LTE] = '<=',\n    _a);\n/** Code generation pass.\n *\n * Depends on semantic analysis info in the AST.\n */\nvar CodeGenerator = /** @class */ (function (_super) {\n    __extends(CodeGenerator, _super);\n    function CodeGenerator(module, opts) {\n        if (opts === void 0) { opts = {}; }\n        var _this = _super.call(this) || this;\n        _this.module = module;\n        /** Stack of open for loops in current context. */\n        _this.openForStmtStates = [];\n        /** Stack of open do loops in current context. */\n        _this.openLoopStmtStates = [];\n        /** Current indentation level. */\n        _this.indent = 0;\n        /** Current generated label index. */\n        _this.nextGeneratedLabelIdx = 1;\n        _this.opts = __assign({ sourceFileName: '', indentWidth: DEFAULT_INDENT_WIDTH, enableBundling: false }, opts);\n        _this.sourceFileName = _this.opts.sourceFileName;\n        return _this;\n    }\n    CodeGenerator.prototype.run = function () {\n        var compiledModuleSourceNode = this.visitModule(this.module);\n        return this.bundle(compiledModuleSourceNode).toStringWithSourceMap();\n    };\n    CodeGenerator.prototype.bundle = function (compiledModuleSourceNode) {\n        var sourceNode = new source_map_1.SourceNode();\n        if (this.opts.enableBundling) {\n            sourceNode.add('#!/usr/bin/env node\\n\\n');\n            sourceNode.add(compiledModuleSourceNode);\n            sourceNode.add(nodeRuntimeBundleCode);\n        }\n        else {\n            sourceNode.add(compiledModuleSourceNode);\n            sourceNode.add('module.exports = compiledModule;\\n');\n        }\n        return sourceNode;\n    };\n    CodeGenerator.prototype.visitModule = function (module) {\n        this.indent = 0;\n        var chunks = [];\n        chunks.push(this.lines('const compiledModule = {', +1, \"sourceFileName: \" + JSON.stringify(this.opts.sourceFileName) + \",\", \"localSymbols: \" + JSON.stringify(module.localSymbols) + \",\", \"globalSymbols: \" + JSON.stringify(module.globalSymbols) + \",\", ''));\n        chunks.push(this.lines('stmts: [', '', +1), this.visitStmts(module.stmts), this.lines(-1, '],', ''));\n        chunks.push(this.lines('procs: [', '', +1), this.acceptAll(module.procs), this.lines(-1, '],', ''));\n        chunks.push(this.lines(-1, '};', ''));\n        return new source_map_1.SourceNode(null, null, this.opts.sourceFileName, lodash_1.default.flattenDeep(chunks));\n    };\n    CodeGenerator.prototype.visitProc = function (node) {\n        var chunks = [];\n        chunks.push(this.lines('{', +1, this.generateLoc(node), \"type: '\" + node.type + \"',\", \"name: '\" + node.name + \"',\", \"localSymbols: \" + JSON.stringify(node.localSymbols) + \",\", \"paramSymbols: \" + JSON.stringify(node.paramSymbols) + \",\", 'stmts: [', '', +1), this.visitStmts(node.stmts), this.lines(-1, '],', -1, '},', ''));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitStmts = function (stmts) {\n        var origOpenForStmtStatesLength = this.openForStmtStates.length;\n        var sourceNodes = this.acceptAll(stmts);\n        if (this.openForStmtStates.length > origOpenForStmtStatesLength) {\n            this.throwError('FOR statement without corresponding NEXT statement', this.openForStmtStates[this.openForStmtStates.length - 1].forStmt);\n        }\n        return sourceNodes;\n    };\n    CodeGenerator.prototype.visitLabelStmt = function (node) {\n        return this.createSourceNode(node, this.generateLabelStmt(node, node.label));\n    };\n    CodeGenerator.prototype.visitDimStmt = function (node) {\n        var _this = this;\n        var chunks = [];\n        for (var _i = 0, _a = node.varDecls; _i < _a.length; _i++) {\n            var varDecl = _a[_i];\n            var typeExpr = varDecl.typeExpr;\n            var typeSpec = varDecl.symbol.typeSpec;\n            switch (typeExpr.type) {\n                case ast_1.DataTypeExprType.ARRAY:\n                    if (!types_1.isArray(typeSpec)) {\n                        this.throwError(\"Mismatch types: expected array, got \" + typeSpec.type, varDecl);\n                    }\n                    if (node.dimType === ast_1.DimType.SHARED &&\n                        typeExpr.dimensionSpecExprs.length === 0) {\n                        // SHARED statement only indicating scoping.\n                        continue;\n                    }\n                    chunks.push.apply(chunks, __spreadArray(__spreadArray([this.generateVarRefCode(varDecl, varDecl.symbol),\n                        '.init(',\n                        JSON.stringify(typeSpec.elementTypeSpec),\n                        ', ['], typeExpr.dimensionSpecExprs.map(function (_a) {\n                        var minIdxExpr = _a.minIdxExpr, maxIdxExpr = _a.maxIdxExpr;\n                        return [\n                            '[',\n                            minIdxExpr ? _this.accept(minIdxExpr) : '0',\n                            ', ',\n                            _this.accept(maxIdxExpr),\n                            '],',\n                        ];\n                    })), [']); ']));\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (chunks.length > 0) {\n            return this.createStmtSourceNode(node, function () { return chunks; });\n        }\n        else {\n            return new source_map_1.SourceNode();\n        }\n    };\n    CodeGenerator.prototype.visitAssignStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            return [\n                _this.accept(node.targetExpr),\n                ' = ',\n                _this.generateAssignableValueCode(node.valueExpr, node.targetExpr.typeSpec),\n                ';',\n            ];\n        });\n    };\n    CodeGenerator.prototype.visitConstStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray([], lodash_1.default.flatMap(node.constDefs, function (constDef) { return [\n            _this.generateVarRefCode(constDef, constDef.symbol) + \" = \",\n            _this.accept(constDef.valueExpr),\n            '; ',\n        ]; })); });\n    };\n    CodeGenerator.prototype.visitGotoStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(node.destLabel);\n        });\n    };\n    CodeGenerator.prototype.visitIfStmt = function (node) {\n        var _this = this;\n        return this.visitCondStmt(node, this.generateLabel(), function (ifBranch) { return _this.accept(ifBranch.condExpr); });\n    };\n    CodeGenerator.prototype.visitSelectStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var testValue = this.generateTempVarRef(labelPrefix + \"_test\");\n        return this.createSourceNode(node, this.createStmtSourceNode(node, function () { return [\n            testValue + \" = \",\n            _this.accept(node.testExpr),\n            ';',\n        ]; }), this.visitCondStmt(node, labelPrefix, function (caseBranch) {\n            var chunks = [];\n            for (var i = 0; i < caseBranch.condExprs.length; ++i) {\n                var condExpr = caseBranch.condExprs[i];\n                if (i > 0) {\n                    chunks.push(' || ');\n                }\n                switch (condExpr.type) {\n                    case ast_1.CaseExprType.VALUE:\n                        chunks.push(testValue + \" === \", _this.accept(condExpr.valueExpr));\n                        break;\n                    case ast_1.CaseExprType.RANGE:\n                        chunks.push(\"(\" + testValue + \" >= \", _this.accept(condExpr.lowerBoundExpr), \" && \" + testValue + \" <= \", _this.accept(condExpr.upperBoundExpr), ')');\n                        break;\n                    case ast_1.CaseExprType.COMP:\n                        chunks.push(testValue + \" \" + BINARY_OP_MAP[condExpr.op] + \" \", _this.accept(condExpr.rightExpr));\n                        break;\n                    default:\n                        _this.throwError(\"Unknown case expression type: \" + JSON.stringify(condExpr), node);\n                }\n            }\n            return chunks;\n        }), this.createStmtSourceNode(node, function () { return \"delete \" + testValue + \";\"; }));\n    };\n    CodeGenerator.prototype.visitCondStmt = function (node, labelPrefix, generateCondExprCode) {\n        var _this = this;\n        // Generate labels for each \"elseif\" branch, the else branch, and the \"end if\".\n        var branchLabels = [];\n        for (var i = 1; i < node.ifBranches.length; ++i) {\n            branchLabels.push({\n                node: node.ifBranches[i],\n                label: labelPrefix + \"_elif\" + i,\n            });\n        }\n        if (node.elseBranch && node.elseBranch.stmts.length > 0) {\n            branchLabels.push({\n                node: node.elseBranch,\n                label: labelPrefix + \"_else\",\n            });\n        }\n        var endIfLabel = labelPrefix + \"_endif\";\n        branchLabels.push({ node: null, label: endIfLabel });\n        var chunks = [];\n        var nextBranchLabelIdx = 0;\n        var _loop_1 = function (ifBranch) {\n            var _b = branchLabels[nextBranchLabelIdx], nextBranchNode = _b.node, nextBranchLabel = _b.label;\n            chunks.push(this_1.createStmtSourceNode(ifBranch, function () {\n                return lodash_1.default.flattenDeep([\n                    'if (!(',\n                    generateCondExprCode(ifBranch),\n                    \")) { \" + _this.generateGotoCode(nextBranchLabel) + \" }\",\n                ]);\n            }));\n            ++this_1.indent;\n            chunks.push(this_1.visitStmts(ifBranch.stmts));\n            if (nextBranchLabelIdx < branchLabels.length - 1) {\n                chunks.push(this_1.createStmtSourceNode(ifBranch, function () {\n                    return _this.generateGotoCode(endIfLabel);\n                }));\n            }\n            --this_1.indent;\n            chunks.push(this_1.generateLabelStmt(nextBranchNode, nextBranchLabel));\n            ++nextBranchLabelIdx;\n        };\n        var this_1 = this;\n        // Generate code for \"if\" and \"elseif\" branches.\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var ifBranch = _a[_i];\n            _loop_1(ifBranch);\n        }\n        // Generate code for \"else\" branch.\n        if (node.elseBranch && node.elseBranch.stmts.length > 0) {\n            ++this.indent;\n            chunks.push(this.visitStmts(node.elseBranch.stmts));\n            --this.indent;\n            chunks.push(this.generateLabelStmt(null, endIfLabel));\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitCondLoopStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var loopStartLabel = labelPrefix + \"_loopStart\";\n        var loopEndLabel = labelPrefix + \"_loopEnd\";\n        var cond = node.isCondNegated\n            ? [this.accept(node.condExpr)]\n            : ['!(', this.accept(node.condExpr), ')'];\n        var condStmt = this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([\n            'if ('\n        ], cond), [\n            \") { \" + _this.generateGotoCode(loopEndLabel) + \" }\",\n        ]); });\n        ++this.indent;\n        this.openLoopStmtStates.push({\n            loopStmt: node,\n            endLabel: loopEndLabel,\n        });\n        var stmts = this.visitStmts(node.stmts);\n        this.openLoopStmtStates.pop();\n        --this.indent;\n        var chunks = [];\n        chunks.push(this.generateLabelStmt(node, loopStartLabel));\n        switch (node.structure) {\n            case ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS:\n                chunks.push(condStmt, stmts);\n                break;\n            case ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS:\n                chunks.push(stmts, condStmt);\n                break;\n            default:\n                this.throwError(\"Unexpected loop structure: \" + JSON.stringify(node), node);\n        }\n        chunks.push(this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(loopStartLabel);\n        }), this.generateLabelStmt(node, loopEndLabel));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitUncondLoopStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var loopStartLabel = labelPrefix + \"_loopStart\";\n        var loopEndLabel = labelPrefix + \"_loopEnd\";\n        var chunks = [];\n        chunks.push(this.generateLabelStmt(node, loopStartLabel));\n        ++this.indent;\n        this.openLoopStmtStates.push({\n            loopStmt: node,\n            endLabel: loopEndLabel,\n        });\n        chunks.push(this.visitStmts(node.stmts));\n        this.openLoopStmtStates.pop();\n        --this.indent;\n        chunks.push(this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(loopStartLabel);\n        }), this.generateLabelStmt(node, loopEndLabel));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitExitLoopStmt = function (node) {\n        var _this = this;\n        if (this.openLoopStmtStates.length === 0) {\n            this.throwError(\"EXIT DO statement outside DO loop\", node);\n        }\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(_this.openLoopStmtStates[_this.openLoopStmtStates.length - 1].endLabel);\n        });\n    };\n    CodeGenerator.prototype.visitForStmt = function (node) {\n        var _this = this;\n        var labelPrefix = this.generateLabel();\n        var startLabel = labelPrefix + \"_loopStart\";\n        var endLabel = labelPrefix + \"_loopEnd\";\n        var stepValue = this.generateTempVarRef(labelPrefix + \"_step\");\n        var endValue = this.generateTempVarRef(labelPrefix + \"_end\");\n        this.openForStmtStates.push({\n            forStmt: node,\n            startLabel: startLabel,\n            endLabel: endLabel,\n            stepValue: stepValue,\n            endValue: endValue,\n        });\n        var chunks = [];\n        chunks.push(this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray(__spreadArray([], [\n            _this.accept(node.counterExpr),\n            ' = ',\n            _this.accept(node.startExpr),\n            '; ',\n        ]), [\n            stepValue + \" = \",\n            node.stepExpr ? _this.accept(node.stepExpr) : '1',\n            '; ',\n        ]), [endValue + \" = \", _this.accept(node.endExpr), ';']); }), this.generateLabelStmt(node, startLabel));\n        ++this.indent;\n        chunks.push(this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([], [\"const counterValue = \", _this.accept(node.counterExpr), '; ']), [\n            'if (',\n            \"(\" + stepValue + \" >= 0 && counterValue > \" + endValue + \") || \",\n            \"(\" + stepValue + \" < 0 && counterValue < \" + endValue + \")\",\n            \") { \" + _this.generateGotoCode(endLabel) + \" }\",\n        ]); }));\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitNextStmt = function (node) {\n        var _this = this;\n        // Determine how many open FOR statements this NEXT statement will close.\n        var numForStmtStatesToClose = node.counterExprs.length || 1;\n        if (numForStmtStatesToClose > this.openForStmtStates.length) {\n            this.throwError(\"NEXT statement without corresponding FOR statement\", node);\n        }\n        // Verify that the counter expressions match the corresponding FOR statements.\n        for (var i = 0; i < node.counterExprs.length; ++i) {\n            var nextCounterExprString = this.accept(node.counterExprs[i]).toString();\n            var forStmt = this.openForStmtStates[this.openForStmtStates.length - 1 - i].forStmt;\n            var forStmtCounterExprString = this.accept(forStmt.counterExpr).toString();\n            if (nextCounterExprString !== forStmtCounterExprString) {\n                this.throwError(\"Counter #\" + (i + 1) + \" does not match corresponding FOR statement\", node);\n            }\n        }\n        // Generate code.\n        var chunks = [];\n        var _loop_2 = function (i) {\n            var _a = this_2.openForStmtStates.pop(), forStmt = _a.forStmt, startLabel = _a.startLabel, endLabel = _a.endLabel, stepValue = _a.stepValue, endValue = _a.endValue;\n            chunks.push(this_2.createStmtSourceNode(node, function () { return [\n                _this.accept(forStmt.counterExpr),\n                \" += \" + stepValue + \"; \",\n                _this.generateGotoCode(startLabel),\n            ]; }));\n            --this_2.indent;\n            chunks.push(this_2.generateLabelStmt(forStmt, endLabel));\n            chunks.push(this_2.createStmtSourceNode(forStmt, function () { return \"delete \" + stepValue + \"; delete \" + endValue + \";\"; }));\n        };\n        var this_2 = this;\n        for (var i = 0; i < numForStmtStatesToClose; ++i) {\n            _loop_2(i);\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitExitForStmt = function (node) {\n        var _this = this;\n        if (this.openForStmtStates.length === 0) {\n            this.throwError(\"EXIT FOR statement outside FOR loop\", node);\n        }\n        return this.createStmtSourceNode(node, function () {\n            return _this.generateGotoCode(_this.openForStmtStates[_this.openForStmtStates.length - 1].endLabel);\n        });\n    };\n    CodeGenerator.prototype.visitGosubStmt = function (node) {\n        return this.createStmtSourceNode(node, function () {\n            return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.GOSUB + \"', destLabel: '\" + node.destLabel + \"' };\";\n        });\n    };\n    CodeGenerator.prototype.visitReturnStmt = function (node) {\n        return this.createStmtSourceNode(node, function () {\n            return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.RETURN + \"'\" + (node.destLabel ? \", destLabel: '\" + node.destLabel + \"'\" : '') + \" };\";\n        });\n    };\n    CodeGenerator.prototype.visitCallStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return [\n            _this.visitProcCall(node),\n            ';',\n        ]; });\n    };\n    CodeGenerator.prototype.visitExitProcStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.EXIT_PROC + \"' };\"; });\n    };\n    CodeGenerator.prototype.visitEndStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.END + \"' };\"; });\n    };\n    CodeGenerator.prototype.visitSwapStmt = function (node) {\n        var _this = this;\n        var tempVarName = this.generateLabel() + \"_temp\";\n        return this.createStmtSourceNode(node, function () { return [\n            _this.generateTempVarRef(tempVarName),\n            ' = ',\n            _this.accept(node.leftExpr),\n            '; ',\n            _this.accept(node.leftExpr),\n            ' = ',\n            _this.accept(node.rightExpr),\n            '; ',\n            _this.accept(node.rightExpr),\n            ' = ',\n            _this.generateTempVarRef(tempVarName),\n            '; ',\n            'delete ',\n            _this.generateTempVarRef(tempVarName),\n            ';',\n        ]; });\n    };\n    CodeGenerator.prototype.visitPrintStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray(__spreadArray([\n            'await ctx.runtime.print(',\n            node.formatExpr ? _this.accept(node.formatExpr) : 'null',\n            ', '\n        ], node.args.map(function (arg) {\n            return typeof arg === 'string'\n                ? \"{ type: '\" + arg + \"' }, \"\n                : _this.createSourceNode(arg, \"{ type: '\" + compiled_code_1.PrintArgType.VALUE + \"', value: \", _this.accept(arg), ' }, ');\n        })), [\n            ');',\n        ]); });\n    };\n    CodeGenerator.prototype.visitInputStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () {\n            switch (node.inputType) {\n                case ast_1.InputType.TOKENIZED:\n                    return __spreadArray([\n                        'const results = await ctx.runtime.input(',\n                        JSON.stringify(node.prompt) + \", \",\n                        node.targetExprs\n                            .map(function (expr) { return JSON.stringify(expr.typeSpec); })\n                            .join(', '),\n                        '); '\n                    ], node.targetExprs.map(function (expr, i) {\n                        return _this.createSourceNode(expr, _this.accept(expr), \" = results[\" + i + \"]; \");\n                    }));\n                case ast_1.InputType.LINE:\n                    return _this.createSourceNode(node.targetExprs[0], _this.accept(node.targetExprs[0]), \" = await ctx.runtime.inputLine(\" + JSON.stringify(node.prompt) + \");\");\n                default:\n                    _this.throwError(\"Unknown input type: \" + JSON.stringify(node.inputType), node);\n            }\n        });\n    };\n    CodeGenerator.prototype.visitDefTypeStmt = function (node) {\n        return new source_map_1.SourceNode();\n    };\n    CodeGenerator.prototype.visitDataStmt = function (node) {\n        return this.createSourceNode(node, this.lines('{', +1, this.generateLoc(node), \"data: \" + JSON.stringify(node.data) + \",\", -1, \"},\", ''));\n    };\n    CodeGenerator.prototype.visitReadStmt = function (node) {\n        var _this = this;\n        return this.createStmtSourceNode(node, function () { return __spreadArray([\n            'const results = await ctx.read(',\n            node.targetExprs.map(function (expr) { return JSON.stringify(expr.typeSpec); }).join(', '),\n            '); '\n        ], node.targetExprs.map(function (expr, i) {\n            return _this.createSourceNode(expr, _this.accept(expr), \" = results[\" + i + \"]; \");\n        })); });\n    };\n    CodeGenerator.prototype.visitRestoreStmt = function (node) {\n        return this.createStmtSourceNode(node, function () { return \"ctx.restore(\" + (node.destLabel ? \"'\" + node.destLabel + \"'\" : '') + \");\"; });\n    };\n    CodeGenerator.prototype.createStmtSourceNode = function (node, generateRunCode) {\n        return this.createSourceNode(node, this.lines('{', +1, ''), this.lines(this.generateLoc(node), ''), this.lines('async run(ctx) { '), generateRunCode(), ' },\\n', this.lines(-1, '},', ''));\n    };\n    CodeGenerator.prototype.visitLiteralExpr = function (node) {\n        var valueString;\n        if (typeof node.value === 'string') {\n            valueString = JSON.stringify(node.value);\n        }\n        else if (typeof node.value === 'number') {\n            valueString = \"\" + node.value;\n        }\n        else {\n            this.throwError(\"Unrecognized literal value: \" + JSON.stringify(node.value), node);\n        }\n        return this.createSourceNode(node, valueString);\n    };\n    CodeGenerator.prototype.visitVarRefExpr = function (node) {\n        return this.createSourceNode(node, this.generateVarRefCode(node, node.symbol));\n    };\n    CodeGenerator.prototype.visitFnCallExpr = function (node) {\n        return this.visitProcCall(node);\n    };\n    CodeGenerator.prototype.visitBinaryOpExpr = function (node) {\n        var chunks = [];\n        switch (node.op) {\n            case ast_1.BinaryOp.EXP:\n                chunks.push('Math.pow(', this.accept(node.leftExpr), ', ', this.accept(node.rightExpr), ')');\n                break;\n            case ast_1.BinaryOp.INTDIV:\n                chunks.push('Math.floor(', this.accept(node.leftExpr), ' / ', this.accept(node.rightExpr), ')');\n                break;\n            default:\n                chunks.push('(', this.accept(node.leftExpr), \" \" + BINARY_OP_MAP[node.op] + \" \", this.accept(node.rightExpr), ')');\n                break;\n        }\n        return this.createSourceNode.apply(this, __spreadArray([node], chunks));\n    };\n    CodeGenerator.prototype.visitUnaryOpExpr = function (node) {\n        var _a;\n        var OP_MAP = (_a = {},\n            _a[ast_1.UnaryOp.NEG] = '-',\n            _a[ast_1.UnaryOp.NOT] = '!',\n            _a[ast_1.UnaryOp.PARENS] = '',\n            _a);\n        return this.createSourceNode(node, '(', OP_MAP[node.op], this.accept(node.rightExpr), ')');\n    };\n    CodeGenerator.prototype.visitSubscriptExpr = function (node) {\n        var _this = this;\n        return this.createSourceNode.apply(this, __spreadArray([node,\n            this.accept(node.arrayExpr),\n            '.values'], node.indexExprs.map(function (indexExpr, i) { return [\n            '[',\n            _this.generateSubscriptCode(node.arrayExpr, i, indexExpr),\n            ']',\n        ]; })));\n    };\n    CodeGenerator.prototype.generateSubscriptCode = function (arrayExpr, dimension, indexExpr) {\n        return [\n            this.accept(arrayExpr),\n            \".getIdx(\" + dimension + \", \",\n            this.accept(indexExpr),\n            ')',\n        ];\n    };\n    CodeGenerator.prototype.visitMemberExpr = function (node) {\n        return this.createSourceNode(node, this.accept(node.udtExpr), \".values['\" + node.fieldName + \"']\");\n    };\n    CodeGenerator.prototype.visitProcCall = function (node) {\n        var _a;\n        var _this = this;\n        var argPtrs = [];\n        var tempVars = [];\n        var tempVarPrefix = null;\n        var tempVarIdx = 0;\n        for (var i = 0; i < node.argExprs.length; ++i) {\n            var argExpr = node.argExprs[i];\n            var _b = node.argTypeProps[i], paramTypeSpec = _b.paramTypeSpec, shouldPassByRef = _b.shouldPassByRef;\n            if (shouldPassByRef) {\n                switch (argExpr.type) {\n                    case ast_1.ExprType.VAR_REF:\n                        argPtrs.push(this.createSourceNode(argExpr, argExpr.symbol.varType === symbol_table_1.VarType.ARG\n                            ? \"ctx.args['\" + argExpr.symbol.name + \"']\"\n                            : \"[\" + this.generateVarContainerCode(argExpr, argExpr.symbol) + \", '\" + argExpr.symbol.name + \"']\"));\n                        break;\n                    case ast_1.ExprType.SUBSCRIPT:\n                        var containerCode = this.accept(__assign(__assign({}, argExpr), { indexExprs: argExpr.indexExprs.slice(0, argExpr.indexExprs.length - 1) }));\n                        var lastIndexExprCode = this.generateSubscriptCode(argExpr.arrayExpr, argExpr.indexExprs.length - 1, argExpr.indexExprs[argExpr.indexExprs.length - 1]);\n                        argPtrs.push(this.createSourceNode(argExpr, '[', containerCode, ', ', lastIndexExprCode, ']'));\n                        break;\n                    case ast_1.ExprType.MEMBER:\n                        argPtrs.push(this.createSourceNode(argExpr, '[', this.accept(argExpr.udtExpr), '.values, ', \"'\" + argExpr.fieldName + \"']\"));\n                        break;\n                    default:\n                        this.throwError(\"Unknown pass-by-reference expression type: \" + JSON.stringify(argExpr), argExpr);\n                }\n            }\n            else {\n                if (!tempVarPrefix) {\n                    tempVarPrefix = this.generateLabel();\n                }\n                var tempVarName = tempVarPrefix + \"_\" + tempVarIdx++;\n                tempVars.push({\n                    name: tempVarName,\n                    argExpr: argExpr,\n                    paramTypeSpec: paramTypeSpec,\n                });\n                argPtrs.push(\"[ctx.tempVars, '\" + tempVarName + \"']\");\n            }\n        }\n        var executeProcCodePrefixMap = (_a = {},\n            _a[types_1.ProcDefType.BUILTIN] = 'ctx.runtime.executeBuiltinProc(' +\n                (\"'\" + node.name + \"', \" + JSON.stringify(node.argExprs.map(function (_a) {\n                    var typeSpec = _a.typeSpec;\n                    return typeSpec;\n                }))),\n            _a[types_1.ProcDefType.MODULE] = \"ctx.executeProc(ctx, '\" + node.name + \"'\",\n            _a);\n        return this.createSourceNode.apply(this, __spreadArray(__spreadArray([node,\n            '(await (async () => {\\n',\n            this.lines(+1)], tempVars.map(function (_a) {\n            var name = _a.name, argExpr = _a.argExpr, paramTypeSpec = _a.paramTypeSpec;\n            return [\n                _this.lines(_this.generateTempVarRef(name) + \" = \"),\n                _this.generateAssignableValueCode(argExpr, paramTypeSpec),\n                ';\\n',\n            ];\n        })), [this.lines.apply(this, __spreadArray(__spreadArray([\"const result = await \" + executeProcCodePrefixMap[node.procDefType] + \", \" + argPtrs.join(', ') + \");\"], tempVars.map(function (_a) {\n                var name = _a.name;\n                return \"delete \" + _this.generateTempVarRef(name) + \";\";\n            })), ['return result;',\n                -1,\n                '})())']))]));\n    };\n    CodeGenerator.prototype.createSourceNode = function (node) {\n        var chunks = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            chunks[_i - 1] = arguments[_i];\n        }\n        return new source_map_1.SourceNode(node.loc.line, node.loc.col, this.opts.sourceFileName, lodash_1.default.flattenDeep(chunks));\n    };\n    CodeGenerator.prototype.lines = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        var outputLines = [];\n        for (var _a = 0, values_1 = values; _a < values_1.length; _a++) {\n            var value = values_1[_a];\n            if (typeof value === 'string') {\n                var indentStr = value\n                    ? ' '.repeat(this.opts.indentWidth * this.indent)\n                    : '';\n                outputLines.push(indentStr + value);\n            }\n            else if (typeof value === 'number') {\n                this.indent += value;\n            }\n            else {\n                throw new Error(\"Unexpected line value: \" + JSON.stringify(value));\n            }\n        }\n        return outputLines.join('\\n');\n    };\n    CodeGenerator.prototype.generateLabel = function () {\n        return \"$\" + this.nextGeneratedLabelIdx++;\n    };\n    CodeGenerator.prototype.generateLoc = function (node) {\n        return node.loc ? \"loc: [\" + node.loc.line + \", \" + node.loc.col + \"],\" : '';\n    };\n    CodeGenerator.prototype.generateLabelStmt = function (node, label) {\n        return this.lines.apply(this, __spreadArray(__spreadArray(['{',\n            +1], (node ? [this.generateLoc(node)] : [])), [\"label: '\" + label + \"',\", -1, \"},\", '']));\n    };\n    CodeGenerator.prototype.generateVarRefCode = function (node, symbol) {\n        var varContainer = this.generateVarContainerCode(node, symbol);\n        if (symbol.varType === symbol_table_1.VarType.ARG) {\n            return varContainer + \"['\" + symbol.name + \"'][0][\" + varContainer + \"['\" + symbol.name + \"'][1]]\";\n        }\n        else {\n            return varContainer + \"['\" + symbol.name + \"']\";\n        }\n    };\n    CodeGenerator.prototype.generateVarContainerCode = function (node, symbol) {\n        if (symbol.varType === symbol_table_1.VarType.ARG) {\n            return 'ctx.args';\n        }\n        else if (symbol.varScope === symbol_table_1.VarScope.LOCAL) {\n            switch (symbol.varType) {\n                case symbol_table_1.VarType.STATIC_VAR:\n                    return 'ctx.localStaticVars';\n                case symbol_table_1.VarType.VAR:\n                case symbol_table_1.VarType.CONST:\n                    return 'ctx.localVars';\n                default:\n                    this.throwError(\"Unexpected local var type: \" + JSON.stringify(symbol.varType), node);\n            }\n        }\n        else if (symbol.varScope === symbol_table_1.VarScope.GLOBAL) {\n            return 'ctx.globalVars';\n        }\n        else {\n            this.throwError(\"Unknown variable type or scope: \" + JSON.stringify(symbol), node);\n        }\n    };\n    CodeGenerator.prototype.generateAssignableValueCode = function (valueExpr, targetTypeSpec) {\n        var valueTypeSpec = valueExpr.typeSpec;\n        var valueCode = this.accept(valueExpr);\n        if (types_1.isIntegral(targetTypeSpec) && !types_1.isIntegral(valueTypeSpec)) {\n            return ['ctx.runtime.roundHalfToEven(', valueCode, ')'];\n        }\n        else if (types_1.isUdt(targetTypeSpec)) {\n            return [valueCode, '.clone()'];\n        }\n        else {\n            return valueCode;\n        }\n    };\n    CodeGenerator.prototype.generateGotoCode = function (destLabel) {\n        return \"return { type: '\" + compiled_code_1.ExecutionDirectiveType.GOTO + \"', destLabel: '\" + destLabel + \"' };\";\n    };\n    CodeGenerator.prototype.generateTempVarRef = function (label) {\n        return \"ctx.tempVars['\" + label + \"']\";\n    };\n    return CodeGenerator;\n}(ast_1.AstVisitor));\nexports.CodeGenerator = CodeGenerator;\nfunction codegen(module, opts) {\n    if (opts === void 0) { opts = {}; }\n    return new CodeGenerator(module, opts).run();\n}\nexports.default = codegen;\n","module.exports = { default: \"/******/ (() => { // webpackBootstrap\\n/******/ \\tvar __webpack_modules__ = ({\\n\\n/***/ 575:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\n\\nconst ansiEscapes = module.exports;\\n// TODO: remove this in the next major version\\nmodule.exports.default = ansiEscapes;\\n\\nconst ESC = '\\\\u001B[';\\nconst OSC = '\\\\u001B]';\\nconst BEL = '\\\\u0007';\\nconst SEP = ';';\\nconst isTerminalApp = process.env.TERM_PROGRAM === 'Apple_Terminal';\\n\\nansiEscapes.cursorTo = (x, y) => {\\n\\tif (typeof x !== 'number') {\\n\\t\\tthrow new TypeError('The `x` argument is required');\\n\\t}\\n\\n\\tif (typeof y !== 'number') {\\n\\t\\treturn ESC + (x + 1) + 'G';\\n\\t}\\n\\n\\treturn ESC + (y + 1) + ';' + (x + 1) + 'H';\\n};\\n\\nansiEscapes.cursorMove = (x, y) => {\\n\\tif (typeof x !== 'number') {\\n\\t\\tthrow new TypeError('The `x` argument is required');\\n\\t}\\n\\n\\tlet ret = '';\\n\\n\\tif (x < 0) {\\n\\t\\tret += ESC + (-x) + 'D';\\n\\t} else if (x > 0) {\\n\\t\\tret += ESC + x + 'C';\\n\\t}\\n\\n\\tif (y < 0) {\\n\\t\\tret += ESC + (-y) + 'A';\\n\\t} else if (y > 0) {\\n\\t\\tret += ESC + y + 'B';\\n\\t}\\n\\n\\treturn ret;\\n};\\n\\nansiEscapes.cursorUp = (count = 1) => ESC + count + 'A';\\nansiEscapes.cursorDown = (count = 1) => ESC + count + 'B';\\nansiEscapes.cursorForward = (count = 1) => ESC + count + 'C';\\nansiEscapes.cursorBackward = (count = 1) => ESC + count + 'D';\\n\\nansiEscapes.cursorLeft = ESC + 'G';\\nansiEscapes.cursorSavePosition = isTerminalApp ? '\\\\u001B7' : ESC + 's';\\nansiEscapes.cursorRestorePosition = isTerminalApp ? '\\\\u001B8' : ESC + 'u';\\nansiEscapes.cursorGetPosition = ESC + '6n';\\nansiEscapes.cursorNextLine = ESC + 'E';\\nansiEscapes.cursorPrevLine = ESC + 'F';\\nansiEscapes.cursorHide = ESC + '?25l';\\nansiEscapes.cursorShow = ESC + '?25h';\\n\\nansiEscapes.eraseLines = count => {\\n\\tlet clear = '';\\n\\n\\tfor (let i = 0; i < count; i++) {\\n\\t\\tclear += ansiEscapes.eraseLine + (i < count - 1 ? ansiEscapes.cursorUp() : '');\\n\\t}\\n\\n\\tif (count) {\\n\\t\\tclear += ansiEscapes.cursorLeft;\\n\\t}\\n\\n\\treturn clear;\\n};\\n\\nansiEscapes.eraseEndLine = ESC + 'K';\\nansiEscapes.eraseStartLine = ESC + '1K';\\nansiEscapes.eraseLine = ESC + '2K';\\nansiEscapes.eraseDown = ESC + 'J';\\nansiEscapes.eraseUp = ESC + '1J';\\nansiEscapes.eraseScreen = ESC + '2J';\\nansiEscapes.scrollUp = ESC + 'S';\\nansiEscapes.scrollDown = ESC + 'T';\\n\\nansiEscapes.clearScreen = '\\\\u001Bc';\\n\\nansiEscapes.clearTerminal = process.platform === 'win32' ?\\n\\t`${ansiEscapes.eraseScreen}${ESC}0f` :\\n\\t// 1. Erases the screen (Only done in case `2` is not supported)\\n\\t// 2. Erases the whole screen including scrollback buffer\\n\\t// 3. Moves cursor to the top-left position\\n\\t// More info: https://www.real-world-systems.com/docs/ANSIcode.html\\n\\t`${ansiEscapes.eraseScreen}${ESC}3J${ESC}H`;\\n\\nansiEscapes.beep = BEL;\\n\\nansiEscapes.link = (text, url) => {\\n\\treturn [\\n\\t\\tOSC,\\n\\t\\t'8',\\n\\t\\tSEP,\\n\\t\\tSEP,\\n\\t\\turl,\\n\\t\\tBEL,\\n\\t\\ttext,\\n\\t\\tOSC,\\n\\t\\t'8',\\n\\t\\tSEP,\\n\\t\\tSEP,\\n\\t\\tBEL\\n\\t].join('');\\n};\\n\\nansiEscapes.image = (buffer, options = {}) => {\\n\\tlet ret = `${OSC}1337;File=inline=1`;\\n\\n\\tif (options.width) {\\n\\t\\tret += `;width=${options.width}`;\\n\\t}\\n\\n\\tif (options.height) {\\n\\t\\tret += `;height=${options.height}`;\\n\\t}\\n\\n\\tif (options.preserveAspectRatio === false) {\\n\\t\\tret += ';preserveAspectRatio=0';\\n\\t}\\n\\n\\treturn ret + ':' + buffer.toString('base64') + BEL;\\n};\\n\\nansiEscapes.iTerm = {\\n\\tsetCwd: (cwd = process.cwd()) => `${OSC}50;CurrentDir=${cwd}${BEL}`,\\n\\n\\tannotation: (message, options = {}) => {\\n\\t\\tlet ret = `${OSC}1337;`;\\n\\n\\t\\tconst hasX = typeof options.x !== 'undefined';\\n\\t\\tconst hasY = typeof options.y !== 'undefined';\\n\\t\\tif ((hasX || hasY) && !(hasX && hasY && typeof options.length !== 'undefined')) {\\n\\t\\t\\tthrow new Error('`x`, `y` and `length` must be defined when `x` or `y` is defined');\\n\\t\\t}\\n\\n\\t\\tmessage = message.replace(/\\\\|/g, '');\\n\\n\\t\\tret += options.isHidden ? 'AddHiddenAnnotation=' : 'AddAnnotation=';\\n\\n\\t\\tif (options.length > 0) {\\n\\t\\t\\tret +=\\n\\t\\t\\t\\t\\t(hasX ?\\n\\t\\t\\t\\t\\t\\t[message, options.length, options.x, options.y] :\\n\\t\\t\\t\\t\\t\\t[options.length, message]).join('|');\\n\\t\\t} else {\\n\\t\\t\\tret += message;\\n\\t\\t}\\n\\n\\t\\treturn ret + BEL;\\n\\t}\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 566:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n/* module decorator */ module = __nccwpck_require__.nmd(module);\\n\\n\\nconst ANSI_BACKGROUND_OFFSET = 10;\\n\\nconst wrapAnsi256 = (offset = 0) => code => `\\\\u001B[${38 + offset};5;${code}m`;\\n\\nconst wrapAnsi16m = (offset = 0) => (red, green, blue) => `\\\\u001B[${38 + offset};2;${red};${green};${blue}m`;\\n\\nfunction assembleStyles() {\\n\\tconst codes = new Map();\\n\\tconst styles = {\\n\\t\\tmodifier: {\\n\\t\\t\\treset: [0, 0],\\n\\t\\t\\t// 21 isn't widely supported and 22 does the same thing\\n\\t\\t\\tbold: [1, 22],\\n\\t\\t\\tdim: [2, 22],\\n\\t\\t\\titalic: [3, 23],\\n\\t\\t\\tunderline: [4, 24],\\n\\t\\t\\toverline: [53, 55],\\n\\t\\t\\tinverse: [7, 27],\\n\\t\\t\\thidden: [8, 28],\\n\\t\\t\\tstrikethrough: [9, 29]\\n\\t\\t},\\n\\t\\tcolor: {\\n\\t\\t\\tblack: [30, 39],\\n\\t\\t\\tred: [31, 39],\\n\\t\\t\\tgreen: [32, 39],\\n\\t\\t\\tyellow: [33, 39],\\n\\t\\t\\tblue: [34, 39],\\n\\t\\t\\tmagenta: [35, 39],\\n\\t\\t\\tcyan: [36, 39],\\n\\t\\t\\twhite: [37, 39],\\n\\n\\t\\t\\t// Bright color\\n\\t\\t\\tblackBright: [90, 39],\\n\\t\\t\\tredBright: [91, 39],\\n\\t\\t\\tgreenBright: [92, 39],\\n\\t\\t\\tyellowBright: [93, 39],\\n\\t\\t\\tblueBright: [94, 39],\\n\\t\\t\\tmagentaBright: [95, 39],\\n\\t\\t\\tcyanBright: [96, 39],\\n\\t\\t\\twhiteBright: [97, 39]\\n\\t\\t},\\n\\t\\tbgColor: {\\n\\t\\t\\tbgBlack: [40, 49],\\n\\t\\t\\tbgRed: [41, 49],\\n\\t\\t\\tbgGreen: [42, 49],\\n\\t\\t\\tbgYellow: [43, 49],\\n\\t\\t\\tbgBlue: [44, 49],\\n\\t\\t\\tbgMagenta: [45, 49],\\n\\t\\t\\tbgCyan: [46, 49],\\n\\t\\t\\tbgWhite: [47, 49],\\n\\n\\t\\t\\t// Bright color\\n\\t\\t\\tbgBlackBright: [100, 49],\\n\\t\\t\\tbgRedBright: [101, 49],\\n\\t\\t\\tbgGreenBright: [102, 49],\\n\\t\\t\\tbgYellowBright: [103, 49],\\n\\t\\t\\tbgBlueBright: [104, 49],\\n\\t\\t\\tbgMagentaBright: [105, 49],\\n\\t\\t\\tbgCyanBright: [106, 49],\\n\\t\\t\\tbgWhiteBright: [107, 49]\\n\\t\\t}\\n\\t};\\n\\n\\t// Alias bright black as gray (and grey)\\n\\tstyles.color.gray = styles.color.blackBright;\\n\\tstyles.bgColor.bgGray = styles.bgColor.bgBlackBright;\\n\\tstyles.color.grey = styles.color.blackBright;\\n\\tstyles.bgColor.bgGrey = styles.bgColor.bgBlackBright;\\n\\n\\tfor (const [groupName, group] of Object.entries(styles)) {\\n\\t\\tfor (const [styleName, style] of Object.entries(group)) {\\n\\t\\t\\tstyles[styleName] = {\\n\\t\\t\\t\\topen: `\\\\u001B[${style[0]}m`,\\n\\t\\t\\t\\tclose: `\\\\u001B[${style[1]}m`\\n\\t\\t\\t};\\n\\n\\t\\t\\tgroup[styleName] = styles[styleName];\\n\\n\\t\\t\\tcodes.set(style[0], style[1]);\\n\\t\\t}\\n\\n\\t\\tObject.defineProperty(styles, groupName, {\\n\\t\\t\\tvalue: group,\\n\\t\\t\\tenumerable: false\\n\\t\\t});\\n\\t}\\n\\n\\tObject.defineProperty(styles, 'codes', {\\n\\t\\tvalue: codes,\\n\\t\\tenumerable: false\\n\\t});\\n\\n\\tstyles.color.close = '\\\\u001B[39m';\\n\\tstyles.bgColor.close = '\\\\u001B[49m';\\n\\n\\tstyles.color.ansi256 = wrapAnsi256();\\n\\tstyles.color.ansi16m = wrapAnsi16m();\\n\\tstyles.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);\\n\\tstyles.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);\\n\\n\\t// From https://github.com/Qix-/color-convert/blob/3f0e0d4e92e235796ccb17f6e85c72094a651f49/conversions.js\\n\\tObject.defineProperties(styles, {\\n\\t\\trgbToAnsi256: {\\n\\t\\t\\tvalue: (red, green, blue) => {\\n\\t\\t\\t\\t// We use the extended greyscale palette here, with the exception of\\n\\t\\t\\t\\t// black and white. normal palette only has 4 greyscale shades.\\n\\t\\t\\t\\tif (red === green && green === blue) {\\n\\t\\t\\t\\t\\tif (red < 8) {\\n\\t\\t\\t\\t\\t\\treturn 16;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\tif (red > 248) {\\n\\t\\t\\t\\t\\t\\treturn 231;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\treturn Math.round(((red - 8) / 247) * 24) + 232;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\treturn 16 +\\n\\t\\t\\t\\t\\t(36 * Math.round(red / 255 * 5)) +\\n\\t\\t\\t\\t\\t(6 * Math.round(green / 255 * 5)) +\\n\\t\\t\\t\\t\\tMath.round(blue / 255 * 5);\\n\\t\\t\\t},\\n\\t\\t\\tenumerable: false\\n\\t\\t},\\n\\t\\thexToRgb: {\\n\\t\\t\\tvalue: hex => {\\n\\t\\t\\t\\tconst matches = /(?<colorString>[a-f\\\\d]{6}|[a-f\\\\d]{3})/i.exec(hex.toString(16));\\n\\t\\t\\t\\tif (!matches) {\\n\\t\\t\\t\\t\\treturn [0, 0, 0];\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tlet {colorString} = matches.groups;\\n\\n\\t\\t\\t\\tif (colorString.length === 3) {\\n\\t\\t\\t\\t\\tcolorString = colorString.split('').map(character => character + character).join('');\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tconst integer = Number.parseInt(colorString, 16);\\n\\n\\t\\t\\t\\treturn [\\n\\t\\t\\t\\t\\t(integer >> 16) & 0xFF,\\n\\t\\t\\t\\t\\t(integer >> 8) & 0xFF,\\n\\t\\t\\t\\t\\tinteger & 0xFF\\n\\t\\t\\t\\t];\\n\\t\\t\\t},\\n\\t\\t\\tenumerable: false\\n\\t\\t},\\n\\t\\thexToAnsi256: {\\n\\t\\t\\tvalue: hex => styles.rgbToAnsi256(...styles.hexToRgb(hex)),\\n\\t\\t\\tenumerable: false\\n\\t\\t}\\n\\t});\\n\\n\\treturn styles;\\n}\\n\\n// Make the export immutable\\nObject.defineProperty(module, 'exports', {\\n\\tenumerable: true,\\n\\tget: assembleStyles\\n});\\n\\n\\n/***/ }),\\n\\n/***/ 721:\\n/***/ ((module) => {\\n\\nvar hasOwn = Object.prototype.hasOwnProperty;\\nvar toString = Object.prototype.toString;\\n\\nfunction isPlainObject(obj) {\\n\\tif (!obj || toString.call(obj) !== '[object Object]' || obj.nodeType || obj.setInterval)\\n\\t\\treturn false;\\n\\n\\tvar has_own_constructor = hasOwn.call(obj, 'constructor');\\n\\tvar has_is_property_of_method = hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\\n\\t// Not own constructor property must be Object\\n\\tif (obj.constructor && !has_own_constructor && !has_is_property_of_method)\\n\\t\\treturn false;\\n\\n\\t// Own properties are enumerated firstly, so to speed up,\\n\\t// if last one is own, then all properties are own.\\n\\tvar key;\\n\\tfor ( key in obj ) {}\\n\\n\\treturn key === undefined || hasOwn.call( obj, key );\\n};\\n\\nmodule.exports = function extend() {\\n\\tvar options, name, src, copy, copyIsArray, clone,\\n\\t    target = arguments[0] || {},\\n\\t    i = 1,\\n\\t    length = arguments.length,\\n\\t    deep = false;\\n\\n\\t// Handle a deep copy situation\\n\\tif ( typeof target === \\\"boolean\\\" ) {\\n\\t\\tdeep = target;\\n\\t\\ttarget = arguments[1] || {};\\n\\t\\t// skip the boolean and the target\\n\\t\\ti = 2;\\n\\t}\\n\\n\\t// Handle case when target is a string or something (possible in deep copy)\\n\\tif ( typeof target !== \\\"object\\\" && typeof target !== \\\"function\\\") {\\n\\t\\ttarget = {};\\n\\t}\\n\\n\\tfor ( ; i < length; i++ ) {\\n\\t\\t// Only deal with non-null/undefined values\\n\\t\\tif ( (options = arguments[ i ]) != null ) {\\n\\t\\t\\t// Extend the base object\\n\\t\\t\\tfor ( name in options ) {\\n\\t\\t\\t\\tsrc = target[ name ];\\n\\t\\t\\t\\tcopy = options[ name ];\\n\\n\\t\\t\\t\\t// Prevent never-ending loop\\n\\t\\t\\t\\tif ( target === copy ) {\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t// Recurse if we're merging plain objects or arrays\\n\\t\\t\\t\\tif ( deep && copy && ( isPlainObject(copy) || (copyIsArray = Array.isArray(copy)) ) ) {\\n\\t\\t\\t\\t\\tif ( copyIsArray ) {\\n\\t\\t\\t\\t\\t\\tcopyIsArray = false;\\n\\t\\t\\t\\t\\t\\tclone = src && Array.isArray(src) ? src : [];\\n\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tclone = src && isPlainObject(src) ? src : {};\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t// Never move original objects, clone them\\n\\t\\t\\t\\t\\ttarget[ name ] = extend( deep, clone, copy );\\n\\n\\t\\t\\t\\t// Don't bring in undefined values\\n\\t\\t\\t\\t} else if ( copy !== undefined ) {\\n\\t\\t\\t\\t\\ttarget[ name ] = copy;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t// Return the modified object\\n\\treturn target;\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 357:\\n/***/ (function(module) {\\n\\n(function(root, factory) {\\n  if (typeof define === 'function' && define.amd) {\\n    define([], factory) /* global define */\\n  } else if ( true && module.exports) {\\n    module.exports = factory()\\n  } else {\\n    root.moo = factory()\\n  }\\n}(this, function() {\\n  'use strict';\\n\\n  var hasOwnProperty = Object.prototype.hasOwnProperty\\n  var toString = Object.prototype.toString\\n  var hasSticky = typeof new RegExp().sticky === 'boolean'\\n\\n  /***************************************************************************/\\n\\n  function isRegExp(o) { return o && toString.call(o) === '[object RegExp]' }\\n  function isObject(o) { return o && typeof o === 'object' && !isRegExp(o) && !Array.isArray(o) }\\n\\n  function reEscape(s) {\\n    return s.replace(/[-\\\\/\\\\\\\\^$*+?.()|[\\\\]{}]/g, '\\\\\\\\$&')\\n  }\\n  function reGroups(s) {\\n    var re = new RegExp('|' + s)\\n    return re.exec('').length - 1\\n  }\\n  function reCapture(s) {\\n    return '(' + s + ')'\\n  }\\n  function reUnion(regexps) {\\n    if (!regexps.length) return '(?!)'\\n    var source =  regexps.map(function(s) {\\n      return \\\"(?:\\\" + s + \\\")\\\"\\n    }).join('|')\\n    return \\\"(?:\\\" + source + \\\")\\\"\\n  }\\n\\n  function regexpOrLiteral(obj) {\\n    if (typeof obj === 'string') {\\n      return '(?:' + reEscape(obj) + ')'\\n\\n    } else if (isRegExp(obj)) {\\n      // TODO: consider /u support\\n      if (obj.ignoreCase) throw new Error('RegExp /i flag not allowed')\\n      if (obj.global) throw new Error('RegExp /g flag is implied')\\n      if (obj.sticky) throw new Error('RegExp /y flag is implied')\\n      if (obj.multiline) throw new Error('RegExp /m flag is implied')\\n      return obj.source\\n\\n    } else {\\n      throw new Error('Not a pattern: ' + obj)\\n    }\\n  }\\n\\n  function objectToRules(object) {\\n    var keys = Object.getOwnPropertyNames(object)\\n    var result = []\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      var thing = object[key]\\n      var rules = [].concat(thing)\\n      if (key === 'include') {\\n        for (var j = 0; j < rules.length; j++) {\\n          result.push({include: rules[j]})\\n        }\\n        continue\\n      }\\n      var match = []\\n      rules.forEach(function(rule) {\\n        if (isObject(rule)) {\\n          if (match.length) result.push(ruleOptions(key, match))\\n          result.push(ruleOptions(key, rule))\\n          match = []\\n        } else {\\n          match.push(rule)\\n        }\\n      })\\n      if (match.length) result.push(ruleOptions(key, match))\\n    }\\n    return result\\n  }\\n\\n  function arrayToRules(array) {\\n    var result = []\\n    for (var i = 0; i < array.length; i++) {\\n      var obj = array[i]\\n      if (obj.include) {\\n        var include = [].concat(obj.include)\\n        for (var j = 0; j < include.length; j++) {\\n          result.push({include: include[j]})\\n        }\\n        continue\\n      }\\n      if (!obj.type) {\\n        throw new Error('Rule has no type: ' + JSON.stringify(obj))\\n      }\\n      result.push(ruleOptions(obj.type, obj))\\n    }\\n    return result\\n  }\\n\\n  function ruleOptions(type, obj) {\\n    if (!isObject(obj)) {\\n      obj = { match: obj }\\n    }\\n    if (obj.include) {\\n      throw new Error('Matching rules cannot also include states')\\n    }\\n\\n    // nb. error and fallback imply lineBreaks\\n    var options = {\\n      defaultType: type,\\n      lineBreaks: !!obj.error || !!obj.fallback,\\n      pop: false,\\n      next: null,\\n      push: null,\\n      error: false,\\n      fallback: false,\\n      value: null,\\n      type: null,\\n      shouldThrow: false,\\n    }\\n\\n    // Avoid Object.assign(), so we support IE9+\\n    for (var key in obj) {\\n      if (hasOwnProperty.call(obj, key)) {\\n        options[key] = obj[key]\\n      }\\n    }\\n\\n    // type transform cannot be a string\\n    if (typeof options.type === 'string' && type !== options.type) {\\n      throw new Error(\\\"Type transform cannot be a string (type '\\\" + options.type + \\\"' for token '\\\" + type + \\\"')\\\")\\n    }\\n\\n    // convert to array\\n    var match = options.match\\n    options.match = Array.isArray(match) ? match : match ? [match] : []\\n    options.match.sort(function(a, b) {\\n      return isRegExp(a) && isRegExp(b) ? 0\\n           : isRegExp(b) ? -1 : isRegExp(a) ? +1 : b.length - a.length\\n    })\\n    return options\\n  }\\n\\n  function toRules(spec) {\\n    return Array.isArray(spec) ? arrayToRules(spec) : objectToRules(spec)\\n  }\\n\\n  var defaultErrorRule = ruleOptions('error', {lineBreaks: true, shouldThrow: true})\\n  function compileRules(rules, hasStates) {\\n    var errorRule = null\\n    var fast = Object.create(null)\\n    var fastAllowed = true\\n    var unicodeFlag = null\\n    var groups = []\\n    var parts = []\\n\\n    // If there is a fallback rule, then disable fast matching\\n    for (var i = 0; i < rules.length; i++) {\\n      if (rules[i].fallback) {\\n        fastAllowed = false\\n      }\\n    }\\n\\n    for (var i = 0; i < rules.length; i++) {\\n      var options = rules[i]\\n\\n      if (options.include) {\\n        // all valid inclusions are removed by states() preprocessor\\n        throw new Error('Inheritance is not allowed in stateless lexers')\\n      }\\n\\n      if (options.error || options.fallback) {\\n        // errorRule can only be set once\\n        if (errorRule) {\\n          if (!options.fallback === !errorRule.fallback) {\\n            throw new Error(\\\"Multiple \\\" + (options.fallback ? \\\"fallback\\\" : \\\"error\\\") + \\\" rules not allowed (for token '\\\" + options.defaultType + \\\"')\\\")\\n          } else {\\n            throw new Error(\\\"fallback and error are mutually exclusive (for token '\\\" + options.defaultType + \\\"')\\\")\\n          }\\n        }\\n        errorRule = options\\n      }\\n\\n      var match = options.match.slice()\\n      if (fastAllowed) {\\n        while (match.length && typeof match[0] === 'string' && match[0].length === 1) {\\n          var word = match.shift()\\n          fast[word.charCodeAt(0)] = options\\n        }\\n      }\\n\\n      // Warn about inappropriate state-switching options\\n      if (options.pop || options.push || options.next) {\\n        if (!hasStates) {\\n          throw new Error(\\\"State-switching options are not allowed in stateless lexers (for token '\\\" + options.defaultType + \\\"')\\\")\\n        }\\n        if (options.fallback) {\\n          throw new Error(\\\"State-switching options are not allowed on fallback tokens (for token '\\\" + options.defaultType + \\\"')\\\")\\n        }\\n      }\\n\\n      // Only rules with a .match are included in the RegExp\\n      if (match.length === 0) {\\n        continue\\n      }\\n      fastAllowed = false\\n\\n      groups.push(options)\\n\\n      // Check unicode flag is used everywhere or nowhere\\n      for (var j = 0; j < match.length; j++) {\\n        var obj = match[j]\\n        if (!isRegExp(obj)) {\\n          continue\\n        }\\n\\n        if (unicodeFlag === null) {\\n          unicodeFlag = obj.unicode\\n        } else if (unicodeFlag !== obj.unicode && options.fallback === false) {\\n          throw new Error('If one rule is /u then all must be')\\n        }\\n      }\\n\\n      // convert to RegExp\\n      var pat = reUnion(match.map(regexpOrLiteral))\\n\\n      // validate\\n      var regexp = new RegExp(pat)\\n      if (regexp.test(\\\"\\\")) {\\n        throw new Error(\\\"RegExp matches empty string: \\\" + regexp)\\n      }\\n      var groupCount = reGroups(pat)\\n      if (groupCount > 0) {\\n        throw new Error(\\\"RegExp has capture groups: \\\" + regexp + \\\"\\\\nUse (?:  ) instead\\\")\\n      }\\n\\n      // try and detect rules matching newlines\\n      if (!options.lineBreaks && regexp.test('\\\\n')) {\\n        throw new Error('Rule should declare lineBreaks: ' + regexp)\\n      }\\n\\n      // store regex\\n      parts.push(reCapture(pat))\\n    }\\n\\n\\n    // If there's no fallback rule, use the sticky flag so we only look for\\n    // matches at the current index.\\n    //\\n    // If we don't support the sticky flag, then fake it using an irrefutable\\n    // match (i.e. an empty pattern).\\n    var fallbackRule = errorRule && errorRule.fallback\\n    var flags = hasSticky && !fallbackRule ? 'ym' : 'gm'\\n    var suffix = hasSticky || fallbackRule ? '' : '|'\\n\\n    if (unicodeFlag === true) flags += \\\"u\\\"\\n    var combined = new RegExp(reUnion(parts) + suffix, flags)\\n    return {regexp: combined, groups: groups, fast: fast, error: errorRule || defaultErrorRule}\\n  }\\n\\n  function compile(rules) {\\n    var result = compileRules(toRules(rules))\\n    return new Lexer({start: result}, 'start')\\n  }\\n\\n  function checkStateGroup(g, name, map) {\\n    var state = g && (g.push || g.next)\\n    if (state && !map[state]) {\\n      throw new Error(\\\"Missing state '\\\" + state + \\\"' (in token '\\\" + g.defaultType + \\\"' of state '\\\" + name + \\\"')\\\")\\n    }\\n    if (g && g.pop && +g.pop !== 1) {\\n      throw new Error(\\\"pop must be 1 (in token '\\\" + g.defaultType + \\\"' of state '\\\" + name + \\\"')\\\")\\n    }\\n  }\\n  function compileStates(states, start) {\\n    var all = states.$all ? toRules(states.$all) : []\\n    delete states.$all\\n\\n    var keys = Object.getOwnPropertyNames(states)\\n    if (!start) start = keys[0]\\n\\n    var ruleMap = Object.create(null)\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      ruleMap[key] = toRules(states[key]).concat(all)\\n    }\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      var rules = ruleMap[key]\\n      var included = Object.create(null)\\n      for (var j = 0; j < rules.length; j++) {\\n        var rule = rules[j]\\n        if (!rule.include) continue\\n        var splice = [j, 1]\\n        if (rule.include !== key && !included[rule.include]) {\\n          included[rule.include] = true\\n          var newRules = ruleMap[rule.include]\\n          if (!newRules) {\\n            throw new Error(\\\"Cannot include nonexistent state '\\\" + rule.include + \\\"' (in state '\\\" + key + \\\"')\\\")\\n          }\\n          for (var k = 0; k < newRules.length; k++) {\\n            var newRule = newRules[k]\\n            if (rules.indexOf(newRule) !== -1) continue\\n            splice.push(newRule)\\n          }\\n        }\\n        rules.splice.apply(rules, splice)\\n        j--\\n      }\\n    }\\n\\n    var map = Object.create(null)\\n    for (var i = 0; i < keys.length; i++) {\\n      var key = keys[i]\\n      map[key] = compileRules(ruleMap[key], true)\\n    }\\n\\n    for (var i = 0; i < keys.length; i++) {\\n      var name = keys[i]\\n      var state = map[name]\\n      var groups = state.groups\\n      for (var j = 0; j < groups.length; j++) {\\n        checkStateGroup(groups[j], name, map)\\n      }\\n      var fastKeys = Object.getOwnPropertyNames(state.fast)\\n      for (var j = 0; j < fastKeys.length; j++) {\\n        checkStateGroup(state.fast[fastKeys[j]], name, map)\\n      }\\n    }\\n\\n    return new Lexer(map, start)\\n  }\\n\\n  function keywordTransform(map) {\\n    var reverseMap = Object.create(null)\\n    var byLength = Object.create(null)\\n    var types = Object.getOwnPropertyNames(map)\\n    for (var i = 0; i < types.length; i++) {\\n      var tokenType = types[i]\\n      var item = map[tokenType]\\n      var keywordList = Array.isArray(item) ? item : [item]\\n      keywordList.forEach(function(keyword) {\\n        (byLength[keyword.length] = byLength[keyword.length] || []).push(keyword)\\n        if (typeof keyword !== 'string') {\\n          throw new Error(\\\"keyword must be string (in keyword '\\\" + tokenType + \\\"')\\\")\\n        }\\n        reverseMap[keyword] = tokenType\\n      })\\n    }\\n\\n    // fast string lookup\\n    // https://jsperf.com/string-lookups\\n    function str(x) { return JSON.stringify(x) }\\n    var source = ''\\n    source += 'switch (value.length) {\\\\n'\\n    for (var length in byLength) {\\n      var keywords = byLength[length]\\n      source += 'case ' + length + ':\\\\n'\\n      source += 'switch (value) {\\\\n'\\n      keywords.forEach(function(keyword) {\\n        var tokenType = reverseMap[keyword]\\n        source += 'case ' + str(keyword) + ': return ' + str(tokenType) + '\\\\n'\\n      })\\n      source += '}\\\\n'\\n    }\\n    source += '}\\\\n'\\n    return Function('value', source) // type\\n  }\\n\\n  /***************************************************************************/\\n\\n  var Lexer = function(states, state) {\\n    this.startState = state\\n    this.states = states\\n    this.buffer = ''\\n    this.stack = []\\n    this.reset()\\n  }\\n\\n  Lexer.prototype.reset = function(data, info) {\\n    this.buffer = data || ''\\n    this.index = 0\\n    this.line = info ? info.line : 1\\n    this.col = info ? info.col : 1\\n    this.queuedToken = info ? info.queuedToken : null\\n    this.queuedThrow = info ? info.queuedThrow : null\\n    this.setState(info ? info.state : this.startState)\\n    this.stack = info && info.stack ? info.stack.slice() : []\\n    return this\\n  }\\n\\n  Lexer.prototype.save = function() {\\n    return {\\n      line: this.line,\\n      col: this.col,\\n      state: this.state,\\n      stack: this.stack.slice(),\\n      queuedToken: this.queuedToken,\\n      queuedThrow: this.queuedThrow,\\n    }\\n  }\\n\\n  Lexer.prototype.setState = function(state) {\\n    if (!state || this.state === state) return\\n    this.state = state\\n    var info = this.states[state]\\n    this.groups = info.groups\\n    this.error = info.error\\n    this.re = info.regexp\\n    this.fast = info.fast\\n  }\\n\\n  Lexer.prototype.popState = function() {\\n    this.setState(this.stack.pop())\\n  }\\n\\n  Lexer.prototype.pushState = function(state) {\\n    this.stack.push(this.state)\\n    this.setState(state)\\n  }\\n\\n  var eat = hasSticky ? function(re, buffer) { // assume re is /y\\n    return re.exec(buffer)\\n  } : function(re, buffer) { // assume re is /g\\n    var match = re.exec(buffer)\\n    // will always match, since we used the |(?:) trick\\n    if (match[0].length === 0) {\\n      return null\\n    }\\n    return match\\n  }\\n\\n  Lexer.prototype._getGroup = function(match) {\\n    var groupCount = this.groups.length\\n    for (var i = 0; i < groupCount; i++) {\\n      if (match[i + 1] !== undefined) {\\n        return this.groups[i]\\n      }\\n    }\\n    throw new Error('Cannot find token type for matched text')\\n  }\\n\\n  function tokenToString() {\\n    return this.value\\n  }\\n\\n  Lexer.prototype.next = function() {\\n    var index = this.index\\n\\n    // If a fallback token matched, we don't need to re-run the RegExp\\n    if (this.queuedGroup) {\\n      var token = this._token(this.queuedGroup, this.queuedText, index)\\n      this.queuedGroup = null\\n      this.queuedText = \\\"\\\"\\n      return token\\n    }\\n\\n    var buffer = this.buffer\\n    if (index === buffer.length) {\\n      return // EOF\\n    }\\n\\n    // Fast matching for single characters\\n    var group = this.fast[buffer.charCodeAt(index)]\\n    if (group) {\\n      return this._token(group, buffer.charAt(index), index)\\n    }\\n\\n    // Execute RegExp\\n    var re = this.re\\n    re.lastIndex = index\\n    var match = eat(re, buffer)\\n\\n    // Error tokens match the remaining buffer\\n    var error = this.error\\n    if (match == null) {\\n      return this._token(error, buffer.slice(index, buffer.length), index)\\n    }\\n\\n    var group = this._getGroup(match)\\n    var text = match[0]\\n\\n    if (error.fallback && match.index !== index) {\\n      this.queuedGroup = group\\n      this.queuedText = text\\n\\n      // Fallback tokens contain the unmatched portion of the buffer\\n      return this._token(error, buffer.slice(index, match.index), index)\\n    }\\n\\n    return this._token(group, text, index)\\n  }\\n\\n  Lexer.prototype._token = function(group, text, offset) {\\n    // count line breaks\\n    var lineBreaks = 0\\n    if (group.lineBreaks) {\\n      var matchNL = /\\\\n/g\\n      var nl = 1\\n      if (text === '\\\\n') {\\n        lineBreaks = 1\\n      } else {\\n        while (matchNL.exec(text)) { lineBreaks++; nl = matchNL.lastIndex }\\n      }\\n    }\\n\\n    var token = {\\n      type: (typeof group.type === 'function' && group.type(text)) || group.defaultType,\\n      value: typeof group.value === 'function' ? group.value(text) : text,\\n      text: text,\\n      toString: tokenToString,\\n      offset: offset,\\n      lineBreaks: lineBreaks,\\n      line: this.line,\\n      col: this.col,\\n    }\\n    // nb. adding more props to token object will make V8 sad!\\n\\n    var size = text.length\\n    this.index += size\\n    this.line += lineBreaks\\n    if (lineBreaks !== 0) {\\n      this.col = size - nl + 1\\n    } else {\\n      this.col += size\\n    }\\n\\n    // throw, if no rule with {error: true}\\n    if (group.shouldThrow) {\\n      throw new Error(this.formatError(token, \\\"invalid syntax\\\"))\\n    }\\n\\n    if (group.pop) this.popState()\\n    else if (group.push) this.pushState(group.push)\\n    else if (group.next) this.setState(group.next)\\n\\n    return token\\n  }\\n\\n  if (typeof Symbol !== 'undefined' && Symbol.iterator) {\\n    var LexerIterator = function(lexer) {\\n      this.lexer = lexer\\n    }\\n\\n    LexerIterator.prototype.next = function() {\\n      var token = this.lexer.next()\\n      return {value: token, done: !token}\\n    }\\n\\n    LexerIterator.prototype[Symbol.iterator] = function() {\\n      return this\\n    }\\n\\n    Lexer.prototype[Symbol.iterator] = function() {\\n      return new LexerIterator(this)\\n    }\\n  }\\n\\n  Lexer.prototype.formatError = function(token, message) {\\n    if (token == null) {\\n      // An undefined token indicates EOF\\n      var text = this.buffer.slice(this.index)\\n      var token = {\\n        text: text,\\n        offset: this.index,\\n        lineBreaks: text.indexOf('\\\\n') === -1 ? 0 : 1,\\n        line: this.line,\\n        col: this.col,\\n      }\\n    }\\n    var start = Math.max(0, token.offset - token.col + 1)\\n    var eol = token.lineBreaks ? token.text.indexOf('\\\\n') : token.text.length\\n    var firstLine = this.buffer.substring(start, token.offset + eol)\\n    message += \\\" at line \\\" + token.line + \\\" col \\\" + token.col + \\\":\\\\n\\\\n\\\"\\n    message += \\\"  \\\" + firstLine + \\\"\\\\n\\\"\\n    message += \\\"  \\\" + Array(token.col).join(\\\" \\\") + \\\"^\\\"\\n    return message\\n  }\\n\\n  Lexer.prototype.clone = function() {\\n    return new Lexer(this.states, this.state)\\n  }\\n\\n  Lexer.prototype.has = function(tokenType) {\\n    return true\\n  }\\n\\n\\n  return {\\n    compile: compile,\\n    states: compileStates,\\n    error: Object.freeze({error: true}),\\n    fallback: Object.freeze({fallback: true}),\\n    keywords: keywordTransform,\\n  }\\n\\n}));\\n\\n\\n/***/ }),\\n\\n/***/ 7:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n/* module decorator */ module = __nccwpck_require__.nmd(module);\\n\\n\\nvar Module = __nccwpck_require__(282);\\nvar path = __nccwpck_require__(622);\\n\\nmodule.exports = function requireFromString(code, filename, opts) {\\n\\tif (typeof filename === 'object') {\\n\\t\\topts = filename;\\n\\t\\tfilename = undefined;\\n\\t}\\n\\n\\topts = opts || {};\\n\\tfilename = filename || '';\\n\\n\\topts.appendPaths = opts.appendPaths || [];\\n\\topts.prependPaths = opts.prependPaths || [];\\n\\n\\tif (typeof code !== 'string') {\\n\\t\\tthrow new Error('code must be a string, not ' + typeof code);\\n\\t}\\n\\n\\tvar paths = Module._nodeModulePaths(path.dirname(filename));\\n\\n\\tvar parent = module.parent;\\n\\tvar m = new Module(filename, parent);\\n\\tm.filename = filename;\\n\\tm.paths = [].concat(opts.prependPaths).concat(paths).concat(opts.appendPaths);\\n\\tm._compile(code, filename);\\n\\n\\tvar exports = m.exports;\\n\\tparent && parent.children && parent.children.splice(parent.children.indexOf(m), 1);\\n\\n\\treturn exports;\\n};\\n\\n\\n/***/ }),\\n\\n/***/ 770:\\n/***/ ((module, __unused_webpack_exports, __nccwpck_require__) => {\\n\\nvar extend = __nccwpck_require__(721);\\r\\n\\r\\nvar singlebyte = function(){\\r\\n   /* jshint indent: false */\\r\\n   if(!( this instanceof singlebyte )){\\r\\n      return new singlebyte();\\r\\n   }\\r\\n\\r\\n   this.encodings = [];\\r\\n\\r\\n   // CP437\\r\\n   this.learnEncoding('cp437', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xA2,   0xA3,   0xA5,  0x20A7, 0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,  0x2310,  0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x3B1,  0x3B2,  0x393,  0x3C0,  0x3A3,  0x3C3,  0x3BC,  0x3C4,\\r\\n      0x3A6,  0x398,  0x3A9,  0x3B4,  0x221E, 0x3C6,  0x3B5,  0x2229,\\r\\n      0x2261,  0xB1,  0x2265, 0x2264, 0x2320, 0x2321,  0xF7,  0x2248,\\r\\n      0xB0,   0x2219,  0xB7,  0x221A, 0x207F,  0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP850\\r\\n   this.learnEncoding('cp850', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xF8,   0xA3,   0xD8,   0xD7,  0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,   0xAE,   0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524,  0xC1,   0xC2,   0xC0,\\r\\n       0xA9,  0x2563, 0x2551, 0x2557, 0x255D,  0xA2,   0xA5,  0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C,  0xE3,   0xC3,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C,  0xA4,\\r\\n       0xF0,   0xD0,   0xCA,   0xCB,   0xC8,  0x131,   0xCD,   0xCE,\\r\\n       0xCF,  0x2518, 0x250C, 0x2588, 0x2584,  0xA6,   0xCC,  0x2580,\\r\\n       0xD3,   0xDF,   0xD4,   0xD2,   0xF5,   0xD5,   0xB5,   0xFE,\\r\\n       0xDE,   0xDA,   0xDB,   0xD9,   0xFD,   0xDD,   0xAF,   0xB4,\\r\\n       0xAD,   0xB1,  0x2017,  0xBE,   0xB6,   0xA7,   0xF7,   0xB8,\\r\\n       0xB0,   0xA8,   0xB7,   0xB9,   0xB3,   0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP858\\r\\n   this.learnEncoding('cp858', this.extendASCII([\\r\\n       0xC7,   0xFC,   0xE9,   0xE2,   0xE4,   0xE0,   0xE5,   0xE7,\\r\\n       0xEA,   0xEB,   0xE8,   0xEF,   0xEE,   0xEC,   0xC4,   0xC5,\\r\\n       0xC9,   0xE6,   0xC6,   0xF4,   0xF6,   0xF2,   0xFB,   0xF9,\\r\\n       0xFF,   0xD6,   0xDC,   0xF8,   0xA3,   0xD8,   0xD7,  0x192,\\r\\n       0xE1,   0xED,   0xF3,   0xFA,   0xF1,   0xD1,   0xAA,   0xBA,\\r\\n       0xBF,   0xAE,   0xAC,   0xBD,   0xBC,   0xA1,   0xAB,   0xBB,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524,  0xC1,   0xC2,   0xC0,\\r\\n       0xA9,  0x2563, 0x2551, 0x2557, 0x255D,  0xA2,   0xA5,  0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C,  0xE3,   0xC3,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C,  0xA4,\\r\\n       0xF0,   0xD0,   0xCA,   0xCB,   0xC8,  0x20AC,   0xCD,   0xCE,\\r\\n       0xCF,  0x2518, 0x250C, 0x2588, 0x2584,  0xA6,   0xCC,  0x2580,\\r\\n       0xD3,   0xDF,   0xD4,   0xD2,   0xF5,   0xD5,   0xB5,   0xFE,\\r\\n       0xDE,   0xDA,   0xDB,   0xD9,   0xFD,   0xDD,   0xAF,   0xB4,\\r\\n       0xAD,   0xB1,  0x2017,  0xBE,   0xB6,   0xA7,   0xF7,   0xB8,\\r\\n       0xB0,   0xA8,   0xB7,   0xB9,   0xB3,   0xB2,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP808\\r\\n   this.learnEncoding('cp808', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x404,  0x454,  0x407,  0x457,  0x40E,  0x45E,\\r\\n       0xB0,  0x2219,  0xB7,  0x221A, 0x2116, 0x20AC, 0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP866\\r\\n   this.learnEncoding('cp866', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x404,  0x454,  0x407,  0x457,  0x40E,  0x45E,\\r\\n       0xB0,  0x2219,  0xB7,  0x221A, 0x2116,  0xA4,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // CP1125\\r\\n   this.learnEncoding('cp1125', this.extendASCII([\\r\\n      0x410,  0x411,  0x412,  0x413,  0x414,  0x415,  0x416,  0x417,\\r\\n      0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,  0x41F,\\r\\n      0x420,  0x421,  0x422,  0x423,  0x424,  0x425,  0x426,  0x427,\\r\\n      0x428,  0x429,  0x42A,  0x42B,  0x42C,  0x42D,  0x42E,  0x42F,\\r\\n      0x430,  0x431,  0x432,  0x433,  0x434,  0x435,  0x436,  0x437,\\r\\n      0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x43E,  0x43F,\\r\\n      0x2591, 0x2592, 0x2593, 0x2502, 0x2524, 0x2561, 0x2562, 0x2556,\\r\\n      0x2555, 0x2563, 0x2551, 0x2557, 0x255D, 0x255C, 0x255B, 0x2510,\\r\\n      0x2514, 0x2534, 0x252C, 0x251C, 0x2500, 0x253C, 0x255E, 0x255F,\\r\\n      0x255A, 0x2554, 0x2569, 0x2566, 0x2560, 0x2550, 0x256C, 0x2567,\\r\\n      0x2568, 0x2564, 0x2565, 0x2559, 0x2558, 0x2552, 0x2553, 0x256B,\\r\\n      0x256A, 0x2518, 0x250C, 0x2588, 0x2584, 0x258C, 0x2590, 0x2580,\\r\\n      0x440,  0x441,  0x442,  0x443,  0x444,  0x445,  0x446,  0x447,\\r\\n      0x448,  0x449,  0x44A,  0x44B,  0x44C,  0x44D,  0x44E,  0x44F,\\r\\n      0x401,  0x451,  0x490,  0x491,  0x404,  0x454,  0x406,  0x456,\\r\\n      0x407,  0x457,   0xB7,  0x221A, 0x2116,  0xA4,  0x25A0,  0xA0\\r\\n   ]));\\r\\n\\r\\n   // KOI8-R\\r\\n   this.learnEncoding('koi8-r', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x2553, 0x2554, 0x2555, 0x2556,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x255C, 0x255D, 0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x2562, 0x2563, 0x2564, 0x2565,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x256B, 0x256C,  0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // KOI8-U\\r\\n   this.learnEncoding('koi8-u', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x454,  0x2554, 0x456,  0x457,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x491,  0x255D, 0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x404,  0x2563, 0x406,  0x407,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x490,  0x256C,  0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // KOI8-RU\\r\\n   this.learnEncoding('koi8-ru', this.extendASCII([\\r\\n      0x2500, 0x2502, 0x250C, 0x2510, 0x2514, 0x2518, 0x251C, 0x2524,\\r\\n      0x252C, 0x2534, 0x253C, 0x2580, 0x2584, 0x2588, 0x258C, 0x2590,\\r\\n      0x2591, 0x2592, 0x2593, 0x2320, 0x25A0, 0x2219, 0x221A, 0x2248,\\r\\n      0x2264, 0x2265,  0xA0,  0x2321,  0xB0,   0xB2,   0xB7,   0xF7,\\r\\n      0x2550, 0x2551, 0x2552, 0x451,  0x454,  0x2554, 0x456,  0x457,\\r\\n      0x2557, 0x2558, 0x2559, 0x255A, 0x255B, 0x491,  0x45E,  0x255E,\\r\\n      0x255F, 0x2560, 0x2561, 0x401,  0x404,  0x2563, 0x406,  0x407,\\r\\n      0x2566, 0x2567, 0x2568, 0x2569, 0x256A, 0x490,  0x40E,   0xA9,\\r\\n      0x44E,  0x430,  0x431,  0x446,  0x434,  0x435,  0x444,  0x433,\\r\\n      0x445,  0x438,  0x439,  0x43A,  0x43B,  0x43C,  0x43D,  0x043E,\\r\\n      0x43F,  0x44F,  0x440,  0x441,  0x442,  0x443,  0x436,  0x432,\\r\\n      0x44C,  0x44B,  0x437,  0x448,  0x44D,  0x449,  0x447,  0x44A,\\r\\n      0x42E,  0x410,  0x411,  0x426,  0x414,  0x415,  0x424,  0x413,\\r\\n      0x425,  0x418,  0x419,  0x41A,  0x41B,  0x41C,  0x41D,  0x41E,\\r\\n      0x41F,  0x42F,  0x420,  0x421,  0x422,  0x423,  0x416,  0x412,\\r\\n      0x42C,  0x42B,  0x417,  0x428,  0x42D,  0x429,  0x427,  0x42A\\r\\n   ]));\\r\\n\\r\\n   // LATIN-1 aka ISO 8859-1 (Western European)\\r\\n   this.learnEncoding('latin-1', this.extendASCII([\\r\\n      0x80, 0x81, 0x82, 0x83, 0x84, 0x85, 0x86, 0x87,\\r\\n      0x88, 0x89, 0x8A, 0x8B, 0x8C, 0x8D, 0x8E, 0x8F,\\r\\n      0x90, 0x91, 0x92, 0x93, 0x94, 0x95, 0x96, 0x97,\\r\\n      0x98, 0x99, 0x9A, 0x9B, 0x9C, 0x9D, 0x9E, 0x9F,\\r\\n      0xA0, 0xA1, 0xA2, 0xA3, 0xA4, 0xA5, 0xA6, 0xA7,\\r\\n      0xA8, 0xA9, 0xAA, 0xAB, 0xAC, 0xAD, 0xAE, 0xAF,\\r\\n      0xB0, 0xB1, 0xB2, 0xB3, 0xB4, 0xB5, 0xB6, 0xB7,\\r\\n      0xB8, 0xB9, 0xBA, 0xBB, 0xBC, 0xBD, 0xBE, 0xBF,\\r\\n      0xC0, 0xC1, 0xC2, 0xC3, 0xC4, 0xC5, 0xC6, 0xC7,\\r\\n      0xC8, 0xC9, 0xCA, 0xCB, 0xCC, 0xCD, 0xCE, 0xCF,\\r\\n      0xD0, 0xD1, 0xD2, 0xD3, 0xD4, 0xD5, 0xD6, 0xD7,\\r\\n      0xD8, 0xD9, 0xDA, 0xDB, 0xDC, 0xDD, 0xDE, 0xDF,\\r\\n      0xE0, 0xE1, 0xE2, 0xE3, 0xE4, 0xE5, 0xE6, 0xE7,\\r\\n      0xE8, 0xE9, 0xEA, 0xEB, 0xEC, 0xED, 0xEE, 0xEF,\\r\\n      0xF0, 0xF1, 0xF2, 0xF3, 0xF4, 0xF5, 0xF6, 0xF7,\\r\\n      0xF8, 0xF9, 0xFA, 0xFB, 0xFC, 0xFD, 0xFE, 0xFF\\r\\n   ]));\\r\\n\\r\\n   // Windows-1252\\r\\n   this.learnEncoding('cp1252', this.extendASCII([\\r\\n      0x20AC,  0x81,  0x201A, 0x192,  0x201E, 0x2026, 0x2020, 0x2021,\\r\\n      0x2C6,  0x2030, 0x160,  0x2039, 0x152,   0x8D,  0x017D,  0x8F,\\r\\n       0x90,  0x2018, 0x2019, 0x201C, 0x201D, 0x2022, 0x2013, 0x2014,\\r\\n      0x02DC, 0x2122, 0x161,  0x203A, 0x0153,  0x9D,  0x17E,  0x178,\\r\\n       0xA0,   0xA1,   0xA2,   0xA3,   0xA4,   0xA5,   0xA6,   0xA7,\\r\\n       0xA8,   0xA9,   0xAA,   0xAB,   0xAC,   0xAD,   0xAE,   0xAF,\\r\\n       0xB0,   0xB1,   0xB2,   0xB3,   0xB4,   0xB5,   0xB6,   0xB7,\\r\\n       0xB8,   0xB9,   0xBA,   0xBB,   0xBC,   0xBD,   0xBE,   0xBF,\\r\\n       0xC0,   0xC1,   0xC2,   0xC3,   0xC4,   0xC5,   0xC6,   0xC7,\\r\\n       0xC8,   0xC9,   0xCA,   0xCB,   0xCC,   0xCD,   0xCE,   0xCF,\\r\\n       0xD0,   0xD1,   0xD2,   0xD3,   0xD4,   0xD5,   0xD6,   0xD7,\\r\\n       0xD8,   0xD9,   0xDA,   0xDB,   0xDC,   0xDD,   0xDE,   0xDF,\\r\\n       0xE0,   0xE1,   0xE2,   0xE3,   0xE4,   0xE5,   0xE6,   0xE7,\\r\\n       0xE8,   0xE9,   0xEA,   0xEB,   0xEC,   0xED,   0xEE,   0xEF,\\r\\n       0xF0,   0xF1,   0xF2,   0xF3,   0xF4,   0xF5,   0xF6,   0xF7,\\r\\n       0xF8,   0xF9,   0xFA,   0xFB,   0xFC,   0xFD,   0xFE,   0xFF\\r\\n   ]));\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.isEncoding = function(encodingName){\\r\\n   if( Buffer.isEncoding(encodingName) ) return true;\\r\\n   for( var i = 0; i < this.encodings.length; i++ ){\\r\\n      if( this.encodings[i].name === encodingName ) return true;\\r\\n   }\\r\\n   return false;\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.learnEncoding = function(encodingName, encodingTable){\\r\\n   /*jshint bitwise: false */\\r\\n   if( Buffer.isEncoding(encodingName) ){\\r\\n      throw new Error(this.errors.BUFFER_ENCODING);\\r\\n   }\\r\\n\\r\\n   if( encodingTable.length !== 256 ){\\r\\n      throw new Error(this.errors.INVALID_TABLE_LENGTH);\\r\\n   }\\r\\n\\r\\n   var _this = this;\\r\\n   encodingTable = encodingTable.map(function(item){\\r\\n      var nextCode = item |0;\\r\\n      if( 0 > nextCode || nextCode > 0x10FFFF ){\\r\\n         throw new Error(_this.errors.OUT_OF_UNICODE);\\r\\n      }\\r\\n      return item;\\r\\n   });\\r\\n\\r\\n   if( this.isEncoding(encodingName) ){\\r\\n      for( var i = 0; i < this.encodings.length; i++ ){\\r\\n         if( this.encodings[i].name === encodingName ){\\r\\n            this.encodings[i].table = encodingTable;\\r\\n            return;\\r\\n         }\\r\\n      }\\r\\n   } else {\\r\\n      this.encodings.push({\\r\\n         name:  encodingName,\\r\\n         table: encodingTable\\r\\n      });\\r\\n   }\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.getEncodingTable = function(encodingName){\\r\\n   for( var i = 0; i < this.encodings.length; i++ ){\\r\\n      if( this.encodings[i].name === encodingName ){\\r\\n         return this.encodings[i].table;\\r\\n      }\\r\\n   }\\r\\n   return null;\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.extendASCII = function(extensionTable){\\r\\n   if( extensionTable.length !== 128 ){\\r\\n      throw new Error(this.errors.INVALID_EXTENSION);\\r\\n   }\\r\\n\\r\\n   var output = [];\\r\\n   for( var i = 0; i < 128; i++ ) output.push(i);\\r\\n   return output.concat(extensionTable);\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.bufToStr = function(buf, encoding, start, end){\\r\\n   /* jshint bitwise: false */\\r\\n   if(!( Buffer.isBuffer(buf) )){\\r\\n      throw new Error(this.errors.NOT_A_BUFFER);\\r\\n   }\\r\\n   if( Buffer.isEncoding(encoding) ){\\r\\n      return buf.toString(encoding, start, end);\\r\\n   }\\r\\n   var table = this.getEncodingTable(encoding);\\r\\n   if( table === null ) throw new Error(this.errors.UNKNOWN_ENCODING);\\r\\n\\r\\n   if( typeof end   === 'undefined' ) end   = buf.length;\\r\\n   if( typeof start === 'undefined' ) start = 0;\\r\\n\\r\\n   var output = '';\\r\\n   var sourceValue;\\r\\n   for( var i = start; i < end; i++ ){\\r\\n      sourceValue = table[ buf[i] ];\\r\\n      if( sourceValue <= 0xFFFF ){\\r\\n         output += String.fromCharCode(sourceValue);\\r\\n      } else if( 0x10000 <= sourceValue && sourceValue <= 0x10FFFF ){\\r\\n         sourceValue -= 0x10000;\\r\\n         output += String.fromCharCode( 0xD800 + (sourceValue >> 10) );\\r\\n         output += String.fromCharCode( 0xDC00 + (sourceValue & 0x3FF) );\\r\\n      } else throw new Error(this.errors.OUT_OF_UNICODE);\\r\\n   }\\r\\n   return output;\\r\\n};\\r\\n\\r\\nvar strToBufDefaults = {\\r\\n   defaultCode: 0x3F   // '?'\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.strToBuf = function(str, encoding, encodingOptions){\\r\\n   if( Buffer.isEncoding(encoding) ){\\r\\n      return new Buffer(str, encoding);\\r\\n   }\\r\\n   str = '' + str;\\r\\n   var options = extend({}, strToBufDefaults, encodingOptions);\\r\\n   var table = this.getEncodingTable(encoding);\\r\\n   if( table === null ) throw new Error(this.errors.UNKNOWN_ENCODING);\\r\\n   var output = [];\\r\\n   for( var i = 0; i < str.length; i++ ){\\r\\n      var charUnicode;\\r\\n      var thisCharCode = str.charCodeAt(i);\\r\\n      if( 0xD800 <= thisCharCode && thisCharCode <= 0xDBFF &&\\r\\n         i+1 < str.length\\r\\n      ){\\r\\n         var nextCharCode = str.charCodeAt(i+1);\\r\\n         if( 0xDC00 <= nextCharCode && nextCharCode <= 0xDFFF ){\\r\\n            charUnicode = 0x10000 + (thisCharCode - 0xD800)*0x400 +\\r\\n               (nextCharCode - 0xDC00);\\r\\n            i++;\\r\\n         } else {\\r\\n            charUnicode = thisCharCode;\\r\\n         }\\r\\n      } else {\\r\\n         charUnicode = thisCharCode;\\r\\n      }\\r\\n\\r\\n      var codeFoundIndex = table.indexOf(charUnicode);\\r\\n      if( codeFoundIndex < 0 ){\\r\\n         output.push(options.defaultCode);\\r\\n      } else {\\r\\n         output.push(codeFoundIndex);\\r\\n      }\\r\\n   }\\r\\n   return new Buffer(output);\\r\\n};\\r\\n\\r\\nsinglebyte.prototype.errors = {\\r\\n   NOT_A_BUFFER : 'The given source is not a buffer!',\\r\\n   UNKNOWN_ENCODING : 'The given encoding is not defined!',\\r\\n   INVALID_TABLE_LENGTH : 'The encoding table must have 256 elements!',\\r\\n   INVALID_EXTENSION : 'The ASCII extension table must have 128 elements!',\\r\\n   BUFFER_ENCODING : \\\"Cannot redefine aNode's encoding!\\\",\\r\\n   OUT_OF_UNICODE : \\\"An encoding table's element is greater than 0x10FFFF!\\\"\\r\\n};\\r\\n\\r\\nmodule.exports = singlebyte();\\n\\n/***/ }),\\n\\n/***/ 962:\\n/***/ ((__unused_webpack_module, exports, __nccwpck_require__) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.getDataItem = exports.dataItemTypeName = void 0;\\nvar types_1 = __nccwpck_require__(521);\\nfunction dataItemTypeName(_a) {\\n    var _ = _a[0], value = _a[1];\\n    return value === null ? 'null' : typeof value;\\n}\\nexports.dataItemTypeName = dataItemTypeName;\\n/** Converts a data item to the expected type. */\\nfunction getDataItem(item, expectedTypeSpec) {\\n    var _ = item[0], value = item[1];\\n    if (types_1.isNumeric(expectedTypeSpec)) {\\n        switch (typeof value) {\\n            case 'number':\\n                return value;\\n            case 'object':\\n                return 0;\\n            default:\\n                throwDataItemTypeError(item, expectedTypeSpec);\\n        }\\n    }\\n    else if (types_1.isString(expectedTypeSpec)) {\\n        switch (typeof value) {\\n            case 'string':\\n                return value;\\n            case 'object':\\n                return '';\\n            default:\\n                throwDataItemTypeError(item, expectedTypeSpec);\\n        }\\n    }\\n    else {\\n        throw new Error(\\\"Unknown expected type spec: \\\" + JSON.stringify(expectedTypeSpec));\\n    }\\n}\\nexports.getDataItem = getDataItem;\\nfunction throwDataItemTypeError(item, expectedTypeSpec) {\\n    var _a = item[0], line = _a[0], col = _a[1], _ = item[1];\\n    throw new Error(\\\"expected \\\" + types_1.typeSpecName(expectedTypeSpec) + \\\", \\\" +\\n        (\\\"got \\\" + dataItemTypeName(item) + \\\" data item \\\") +\\n        (\\\"(defined at \\\" + line + \\\":\\\" + col + \\\")\\\"));\\n}\\n\\n\\n/***/ }),\\n\\n/***/ 813:\\n/***/ (function(__unused_webpack_module, exports) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** An error with source file and location info. */\\nvar ErrorWithLoc = /** @class */ (function (_super) {\\n    __extends(ErrorWithLoc, _super);\\n    function ErrorWithLoc(message, _a) {\\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, loc = _b.loc;\\n        var _this = _super.call(this, message) || this;\\n        if (loc) {\\n            var sourceFileNamePrefix = sourceFileName ? sourceFileName + \\\":\\\" : '';\\n            var locPrefix = loc.line + \\\":\\\" + loc.col;\\n            _this.message = \\\"\\\" + sourceFileNamePrefix + locPrefix + \\\" - \\\" + _this.message;\\n            _this.loc = loc;\\n        }\\n        return _this;\\n    }\\n    return ErrorWithLoc;\\n}(Error));\\nexports.default = ErrorWithLoc;\\n\\n\\n/***/ }),\\n\\n/***/ 345:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** Round a number to integer using BASIC's round-half-to-even rule. */\\nfunction roundHalfToEven(n) {\\n    if (n - Math.floor(n) === 0.5) {\\n        return Math.round(n / 2) * 2;\\n    }\\n    else {\\n        return Math.round(n);\\n    }\\n}\\nexports.default = roundHalfToEven;\\n\\n\\n/***/ }),\\n\\n/***/ 973:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.lookupSymbols = exports.lookupSymbol = exports.VarScope = exports.VarType = void 0;\\n/** Type of a variable symbol. */\\nvar VarType;\\n(function (VarType) {\\n    /** Regular variable. */\\n    VarType[\\\"VAR\\\"] = \\\"var\\\";\\n    /** Static variable. */\\n    VarType[\\\"STATIC_VAR\\\"] = \\\"staticVar\\\";\\n    /** Constant. */\\n    VarType[\\\"CONST\\\"] = \\\"const\\\";\\n    /** FUNCTION or SUB argument. */\\n    VarType[\\\"ARG\\\"] = \\\"arg\\\";\\n})(VarType = exports.VarType || (exports.VarType = {}));\\n/** Scope of a variable symbol. */\\nvar VarScope;\\n(function (VarScope) {\\n    VarScope[\\\"LOCAL\\\"] = \\\"local\\\";\\n    VarScope[\\\"GLOBAL\\\"] = \\\"global\\\";\\n})(VarScope = exports.VarScope || (exports.VarScope = {}));\\nfunction lookupSymbol(symbolTable, name) {\\n    var _a;\\n    return ((_a = symbolTable.find(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); })) !== null && _a !== void 0 ? _a : null);\\n}\\nexports.lookupSymbol = lookupSymbol;\\nfunction lookupSymbols(symbolTable, name) {\\n    return symbolTable.filter(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); });\\n}\\nexports.lookupSymbols = lookupSymbols;\\n\\n\\n/***/ }),\\n\\n/***/ 521:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.ProcDefType = exports.procTypeName = exports.isFnOrDefFn = exports.ProcType = exports.typeSpecName = exports.areMatchingSingularTypes = exports.areMatchingElementaryTypes = exports.isSingularType = exports.isUdt = exports.isElementaryType = exports.isArray = exports.isString = exports.isIntegral = exports.isNumeric = exports.arraySpec = exports.stringSpec = exports.doubleSpec = exports.singleSpec = exports.longSpec = exports.integerSpec = exports.DataType = void 0;\\n/** Overall type of the value. */\\nvar DataType;\\n(function (DataType) {\\n    /** 16-bit integer */\\n    DataType[\\\"INTEGER\\\"] = \\\"integer\\\";\\n    /** 32-bit integer */\\n    DataType[\\\"LONG\\\"] = \\\"long\\\";\\n    /** 32-bit floating point. */\\n    DataType[\\\"SINGLE\\\"] = \\\"single\\\";\\n    /** 64-bit floating point. */\\n    DataType[\\\"DOUBLE\\\"] = \\\"double\\\";\\n    /** String. */\\n    DataType[\\\"STRING\\\"] = \\\"string\\\";\\n    /** Array. */\\n    DataType[\\\"ARRAY\\\"] = \\\"array\\\";\\n    /** User-defined data type, a.k.a. records. */\\n    DataType[\\\"UDT\\\"] = \\\"udt\\\";\\n})(DataType = exports.DataType || (exports.DataType = {}));\\n// Helpers for creating DataTypeSpec instances.\\nfunction integerSpec() {\\n    return { type: DataType.INTEGER };\\n}\\nexports.integerSpec = integerSpec;\\nfunction longSpec() {\\n    return { type: DataType.LONG };\\n}\\nexports.longSpec = longSpec;\\nfunction singleSpec() {\\n    return { type: DataType.SINGLE };\\n}\\nexports.singleSpec = singleSpec;\\nfunction doubleSpec() {\\n    return { type: DataType.DOUBLE };\\n}\\nexports.doubleSpec = doubleSpec;\\nfunction stringSpec() {\\n    return { type: DataType.STRING };\\n}\\nexports.stringSpec = stringSpec;\\nfunction arraySpec(elementTypeSpec, dimensionSpecs) {\\n    return { type: DataType.ARRAY, elementTypeSpec: elementTypeSpec, dimensionSpecs: dimensionSpecs };\\n}\\nexports.arraySpec = arraySpec;\\n// Helpers for type checking.\\nfunction isNumeric(t) {\\n    return [\\n        DataType.INTEGER,\\n        DataType.LONG,\\n        DataType.SINGLE,\\n        DataType.DOUBLE,\\n    ].includes(getType(t));\\n}\\nexports.isNumeric = isNumeric;\\nfunction isIntegral(t) {\\n    return [DataType.INTEGER, DataType.LONG].includes(getType(t));\\n}\\nexports.isIntegral = isIntegral;\\nfunction isString(t) {\\n    return getType(t) === DataType.STRING;\\n}\\nexports.isString = isString;\\nfunction isArray(t) {\\n    return getType(t) === DataType.ARRAY;\\n}\\nexports.isArray = isArray;\\nfunction isElementaryType(t) {\\n    return isNumeric(t) || isString(t);\\n}\\nexports.isElementaryType = isElementaryType;\\nfunction isUdt(t) {\\n    return getType(t) === DataType.UDT;\\n}\\nexports.isUdt = isUdt;\\nfunction isSingularType(t) {\\n    return isElementaryType(t) || isUdt(t);\\n}\\nexports.isSingularType = isSingularType;\\nfunction areMatchingElementaryTypes(typeSpec1, typeSpec2) {\\n    return ((isNumeric(typeSpec1) && isNumeric(typeSpec2)) ||\\n        (isString(typeSpec1) && isString(typeSpec2)));\\n}\\nexports.areMatchingElementaryTypes = areMatchingElementaryTypes;\\nfunction areMatchingSingularTypes(typeSpec1, typeSpec2) {\\n    return (areMatchingElementaryTypes(typeSpec1, typeSpec2) ||\\n        (isUdt(typeSpec1) && isUdt(typeSpec2) && typeSpec1.name === typeSpec2.name));\\n}\\nexports.areMatchingSingularTypes = areMatchingSingularTypes;\\nfunction typeSpecName(t) {\\n    switch (t.type) {\\n        case DataType.ARRAY:\\n            return typeSpecName(t.elementTypeSpec) + \\\" array\\\";\\n        case DataType.UDT:\\n            return \\\"\\\\\\\"\\\" + t.name + \\\"\\\\\\\"\\\";\\n        default:\\n            return t.type;\\n    }\\n}\\nexports.typeSpecName = typeSpecName;\\nfunction getType(t) {\\n    return typeof t === 'object' ? t.type : t;\\n}\\n/** Type of a procedure. */\\nvar ProcType;\\n(function (ProcType) {\\n    /** SUB procedure. */\\n    ProcType[\\\"SUB\\\"] = \\\"sub\\\";\\n    /** FUNCTION procedure. */\\n    ProcType[\\\"FN\\\"] = \\\"fn\\\";\\n    /** DEF FN procedure. */\\n    ProcType[\\\"DEF_FN\\\"] = \\\"defFn\\\";\\n})(ProcType = exports.ProcType || (exports.ProcType = {}));\\nfunction isFnOrDefFn(procType) {\\n    return procType === ProcType.FN || procType === ProcType.DEF_FN;\\n}\\nexports.isFnOrDefFn = isFnOrDefFn;\\n/** Returns the user-facing name of a ProcType. */\\nfunction procTypeName(procType) {\\n    var _a;\\n    var NAMES = (_a = {},\\n        _a[ProcType.SUB] = 'SUB procedure',\\n        _a[ProcType.FN] = 'FUNCTION procedure',\\n        _a[ProcType.DEF_FN] = 'DEF FN procedure',\\n        _a);\\n    return NAMES[procType];\\n}\\nexports.procTypeName = procTypeName;\\n/** The type of a procedure definition. */\\nvar ProcDefType;\\n(function (ProcDefType) {\\n    /** Built-in function. */\\n    ProcDefType[\\\"BUILTIN\\\"] = \\\"builtin\\\";\\n    /** User-defined function in the current module. */\\n    ProcDefType[\\\"MODULE\\\"] = \\\"module\\\";\\n})(ProcDefType = exports.ProcDefType || (exports.ProcDefType = {}));\\n\\n\\n/***/ }),\\n\\n/***/ 168:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nvar _a;\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\n/** Returns a VT100 escape sequence prefixed by \\\"ESC [\\\". */\\nfunction ESC(c) {\\n    return \\\"\\\\u001B[\\\" + c;\\n}\\n/** Returns a DOS keyboard scan code prefixed by NUL. */\\nfunction NUL(n) {\\n    return String.fromCharCode(0, n);\\n}\\n/** Map ANSI / VT100 sequences to DOS keyboard scan codes. */\\nvar ANSI_TERMINAL_KEY_CODE_MAP = (_a = {},\\n    _a[ESC('A')] = NUL(72),\\n    _a[ESC('B')] = NUL(80),\\n    _a[ESC('C')] = NUL(77),\\n    _a[ESC('D')] = NUL(75),\\n    _a);\\nexports.default = ANSI_TERMINAL_KEY_CODE_MAP;\\n\\n\\n/***/ }),\\n\\n/***/ 769:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar ansi_escapes_1 = __importDefault(__nccwpck_require__(575));\\nvar ansi_styles_1 = __importDefault(__nccwpck_require__(566));\\nvar ansi_terminal_key_code_map_1 = __importDefault(__nccwpck_require__(168));\\nvar runtime_1 = __nccwpck_require__(753);\\n/** RuntimePlatform implementing screen manipulation using ANSI escape codes.\\n *\\n * Ideally this functionality could be made into a mixin, but 1) it relies on this.print() etc and\\n * so must be a class and 2) abstract classes don't support mixins yet:\\n * https://github.com/microsoft/TypeScript/issues/35356\\n */\\nvar AnsiTerminalPlatform = /** @class */ (function (_super) {\\n    __extends(AnsiTerminalPlatform, _super);\\n    function AnsiTerminalPlatform() {\\n        return _super !== null && _super.apply(this, arguments) || this;\\n    }\\n    AnsiTerminalPlatform.prototype.moveCursorTo = function (x, y) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.cursorTo(x, y))];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setCursorVisibility = function (isCursorVisible) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(isCursorVisible ? ansi_escapes_1.default.cursorShow : ansi_escapes_1.default.cursorHide)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.clearScreen = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.eraseScreen)];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(0, 0)];\\n                    case 2:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setFgColor = function (colorName) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_styles_1.default[colorName].open)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.setBgColor = function (colorName) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var bgColorName;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        bgColorName = \\\"bg\\\" + colorName[0].toUpperCase() + colorName.substr(1);\\n                        return [4 /*yield*/, this.print(ansi_styles_1.default[bgColorName].open)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    AnsiTerminalPlatform.prototype.beep = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.beep)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Translates an ANSI / VT100 key code to the DOS equivalent. */\\n    AnsiTerminalPlatform.prototype.translateKeyCode = function (c) {\\n        var _a;\\n        return (_a = ansi_terminal_key_code_map_1.default[c]) !== null && _a !== void 0 ? _a : c;\\n    };\\n    return AnsiTerminalPlatform;\\n}(runtime_1.RuntimePlatform));\\nexports.default = AnsiTerminalPlatform;\\n\\n\\n/***/ }),\\n\\n/***/ 562:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\\n        to[j] = from[i];\\n    return to;\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.lookupBuiltin = exports.BUILTIN_SUBS = exports.BUILTIN_FNS = void 0;\\nvar singlebyte_1 = __importDefault(__nccwpck_require__(770));\\nvar round_half_to_even_1 = __importDefault(__nccwpck_require__(345));\\nvar symbol_table_1 = __nccwpck_require__(973);\\nvar types_1 = __nccwpck_require__(521);\\n/** Built-in functions. */\\nexports.BUILTIN_FNS = __spreadArray(__spreadArray([\\n    {\\n        name: 'abs',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.abs(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'asc',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (s.length === 0) {\\n                        throw new Error('Expected non-empty string in ASC()');\\n                    }\\n                    // We could use iconv-lite here instead:\\n                    // return iconv.encode(s[0], 'cp437')[0];\\n                    return [2 /*return*/, singlebyte_1.default.strToBuf(s[0], 'cp437')[0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'atn',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.atan(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'chr$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    // We could use iconv-lite here instead:\\n                    // return iconv.decode(Buffer.from([n]), 'cp437');\\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cdbl',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cint',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'clng',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, round_half_to_even_1.default(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'cos',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.cos(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'csng',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.singleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'csrlin',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (_a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1: return [2 /*return*/, (_b.sent()).y + 1];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'date$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    return [2 /*return*/, [now.getMonth() + 1, now.getDate(), now.getFullYear()]\\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\\n                            .join('-')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'exp',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.exp(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'fix',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sign(n) * Math.floor(Math.abs(n))];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'hex$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n.toString(16).toUpperCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'inkey$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (_a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var c;\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getChar()];\\n                        case 1:\\n                            c = _b.sent();\\n                            return [2 /*return*/, c !== null && c !== void 0 ? c : ''];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'input$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var result, c;\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0:\\n                            result = [];\\n                            _b.label = 1;\\n                        case 1:\\n                            if (!(result.length < n && !platform.shouldStopExecution)) return [3 /*break*/, 3];\\n                            return [4 /*yield*/, platform.getChar()];\\n                        case 2:\\n                            c = _b.sent();\\n                            if (c) {\\n                                result.push(c);\\n                            }\\n                            return [3 /*break*/, 1];\\n                        case 3: return [2 /*return*/, result.join('')];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'instr',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (haystack, needle) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, haystack.indexOf(needle) + 1];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'instr',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.integerSpec(),\\n        run: function (start, haystack, needle) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, haystack.indexOf(needle, start - 1) + 1];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'int',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.floor(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lbound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lbound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array, dimensionIdx) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (dimensionIdx < 1 ||\\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\\n                        throw new Error(\\\"Invalid dimension index: \\\" + dimensionIdx);\\n                    }\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][0]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'lcase$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.toLowerCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'left$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(0, n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'len',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.length];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'log',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.log(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ltrim$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.trimStart()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'mid$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, startIdx, length) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(startIdx - 1, length)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'oct$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, n.toString(8)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'peek',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    // STUB\\n                    return [2 /*return*/, 0];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'pos',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (_, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    switch (_b.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1: return [2 /*return*/, (_b.sent()).x + 1];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'right$',\\n        paramTypeSpecs: [types_1.stringSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.substr(Math.max(0, s.length - n))];\\n                });\\n            });\\n        },\\n    }\\n], overload({\\n    name: 'rnd',\\n    returnTypeSpec: types_1.doubleSpec(),\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, Math.random()];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), [\\n    {\\n        name: 'rtrim$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s, _a) {\\n            var args = _a.args;\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_b) {\\n                    return [2 /*return*/, s.trimEnd()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sgn',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sign(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sin',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sin(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'spc',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, ' '.repeat(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'space$',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, ' '.repeat(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'sqr',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.sqrt(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'str$',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, \\\"\\\" + (n >= 0 ? ' ' : '') + n];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'string$',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (m, n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, singlebyte_1.default.bufToStr(Buffer.from([n]), 'cp437').repeat(m)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'string$',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (m, s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (s.length === 0) {\\n                        throw new Error(\\\"Empty string argument to STRING$\\\");\\n                    }\\n                    return [2 /*return*/, s[0].repeat(m)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'tab',\\n        paramTypeSpecs: [types_1.longSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (col, _a) {\\n            var platform = _a.platform;\\n            return __awaiter(this, void 0, void 0, function () {\\n                var _b, x, y, cols;\\n                return __generator(this, function (_c) {\\n                    switch (_c.label) {\\n                        case 0: return [4 /*yield*/, platform.getCursorPosition()];\\n                        case 1:\\n                            _b = _c.sent(), x = _b.x, y = _b.y;\\n                            return [4 /*yield*/, platform.getScreenSize()];\\n                        case 2:\\n                            cols = (_c.sent()).cols;\\n                            col = (Math.max(1, col) - 1) % cols;\\n                            return [4 /*yield*/, platform.moveCursorTo(col, x <= col ? y : y + 1)];\\n                        case 3:\\n                            _c.sent();\\n                            return [2 /*return*/, ''];\\n                    }\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'tan',\\n        paramTypeSpecs: [types_1.doubleSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (n) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, Math.tan(n)];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'time$',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    return [2 /*return*/, [now.getHours(), now.getMinutes(), now.getSeconds()]\\n                            .map(function (p) { return p.toString().padStart(2, '0'); })\\n                            .join(':')];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'timer',\\n        paramTypeSpecs: [],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var now, midnight, result;\\n                return __generator(this, function (_a) {\\n                    now = new Date();\\n                    midnight = new Date(now);\\n                    midnight.setHours(0, 0, 0, 0);\\n                    result = (now.getTime() - midnight.getTime()) / 1000;\\n                    return [2 /*return*/, result];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ubound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), [])],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[0][1]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ubound',\\n        paramTypeSpecs: [types_1.arraySpec(types_1.doubleSpec(), []), types_1.longSpec()],\\n        returnTypeSpec: types_1.longSpec(),\\n        run: function (array, dimensionIdx) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    if (dimensionIdx < 1 ||\\n                        dimensionIdx > array.typeSpec.dimensionSpecs.length) {\\n                        throw new Error(\\\"Invalid dimension index: \\\" + dimensionIdx);\\n                    }\\n                    return [2 /*return*/, array.typeSpec.dimensionSpecs[dimensionIdx - 1][1]];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'ucase$',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.stringSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/, s.toUpperCase()];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'val',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        returnTypeSpec: types_1.doubleSpec(),\\n        run: function (s) {\\n            return __awaiter(this, void 0, void 0, function () {\\n                var v;\\n                return __generator(this, function (_a) {\\n                    v = parseFloat(s);\\n                    return [2 /*return*/, isNaN(v) ? 0 : v];\\n                });\\n            });\\n        },\\n    },\\n]);\\n/** Simple statements implemented as built-in subs. */\\nexports.BUILTIN_SUBS = __spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([\\n    {\\n        name: 'beep',\\n        paramTypeSpecs: [],\\n        run: function () {\\n            var args = [];\\n            for (var _i = 0; _i < arguments.length; _i++) {\\n                args[_i] = arguments[_i];\\n            }\\n            return __awaiter(this, void 0, void 0, function () {\\n                var platform;\\n                return __generator(this, function (_a) {\\n                    switch (_a.label) {\\n                        case 0:\\n                            platform = args.pop().platform;\\n                            return [4 /*yield*/, platform.beep()];\\n                        case 1:\\n                            _a.sent();\\n                            return [2 /*return*/];\\n                    }\\n                });\\n            });\\n        },\\n    }\\n], overload({\\n    name: 'cls',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        return [4 /*yield*/, platform.clearScreen()];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'color',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a, platform, runtime, getColorName, fg, bg;\\n            return __generator(this, function (_b) {\\n                _a = args.pop(), platform = _a.platform, runtime = _a.runtime;\\n                getColorName = function (n) {\\n                    if (n < 0 || n >= runtime.currentScreenModeConfig.colorMap.length) {\\n                        throw new Error(\\\"Invalid color: \\\" + n);\\n                    }\\n                    return runtime.currentScreenModeConfig.colorMap[n];\\n                };\\n                fg = args[0], bg = args[1];\\n                if (Number.isFinite(fg)) {\\n                    platform.setFgColor(getColorName(fg));\\n                }\\n                if (Number.isFinite(bg)) {\\n                    platform.setBgColor(getColorName(bg));\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), overload({\\n    name: '__def_seg',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'locate',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform, row, col, cursor, origPos, newX, newY;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        row = args[0], col = args[1], cursor = args[2];\\n                        if (!(Number.isFinite(row) && Number.isFinite(col))) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, platform.moveCursorTo(col - 1, row - 1)];\\n                    case 1:\\n                        _a.sent();\\n                        return [3 /*break*/, 5];\\n                    case 2:\\n                        if (!(Number.isFinite(row) || Number.isFinite(col))) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, platform.getCursorPosition()];\\n                    case 3:\\n                        origPos = _a.sent();\\n                        newX = Number.isFinite(col) ? col - 1 : origPos.x;\\n                        newY = Number.isFinite(row) ? row - 1 : origPos.y;\\n                        if (!(newX !== origPos.x || newY !== origPos.y)) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, platform.moveCursorTo(newX, newY)];\\n                    case 4:\\n                        _a.sent();\\n                        _a.label = 5;\\n                    case 5:\\n                        if (!Number.isFinite(cursor)) return [3 /*break*/, 7];\\n                        return [4 /*yield*/, platform.setCursorVisibility(!!cursor)];\\n                    case 6:\\n                        _a.sent();\\n                        _a.label = 7;\\n                    case 7: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), [\\n    {\\n        name: 'play',\\n        paramTypeSpecs: [types_1.stringSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    },\\n    {\\n        name: 'poke',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    }\\n]), overload({\\n    name: 'randomize',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: 'screen',\\n    run: function (mode) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var runtime;\\n            return __generator(this, function (_a) {\\n                runtime = args.pop().runtime;\\n                runtime.setScreenMode(mode);\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [\\n    [types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n    [types_1.longSpec(), types_1.longSpec(), types_1.longSpec(), types_1.longSpec()],\\n])), overload({\\n    name: 'sleep',\\n    run: function () {\\n        var args = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            args[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var platform, numSeconds, startTimeMs, nowMs, c;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        platform = args.pop().platform;\\n                        numSeconds = args.length > 0 ? args[0] : 0;\\n                        startTimeMs = new Date().getTime();\\n                        _a.label = 1;\\n                    case 1: return [4 /*yield*/, platform.getChar()];\\n                    case 2:\\n                        c = _a.sent();\\n                        nowMs = new Date().getTime();\\n                        _a.label = 3;\\n                    case 3:\\n                        if (c === null &&\\n                            (numSeconds <= 0 || nowMs - startTimeMs < numSeconds * 1000) &&\\n                            !platform.shouldStopExecution) return [3 /*break*/, 1];\\n                        _a.label = 4;\\n                    case 4: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec()]])), overload({\\n    name: '__view_print',\\n    run: function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/];\\n            });\\n        });\\n    },\\n}, [[], [types_1.longSpec(), types_1.longSpec()]])), [\\n    {\\n        name: 'width',\\n        paramTypeSpecs: [types_1.longSpec(), types_1.longSpec()],\\n        run: function () {\\n            return __awaiter(this, void 0, void 0, function () {\\n                return __generator(this, function (_a) {\\n                    return [2 /*return*/];\\n                });\\n            });\\n        },\\n    },\\n]);\\n/** Helper function to generate multiple signatures that map to the same built-in proc. */\\nfunction overload(proc, paramTypeSpecsList) {\\n    return paramTypeSpecsList.map(function (paramTypeSpecs) {\\n        return (__assign(__assign({}, proc), { paramTypeSpecs: paramTypeSpecs }));\\n    });\\n}\\nfunction lookupBuiltin(procs, name, argTypeSpecs, _a) {\\n    var _b = _a === void 0 ? {} : _a, shouldReturnIfArgTypeMismatch = _b.shouldReturnIfArgTypeMismatch;\\n    var builtinFnsMatchingName = symbol_table_1.lookupSymbols(procs, name);\\n    var builtinFn = builtinFnsMatchingName.find(function (_a) {\\n        var paramTypeSpecs = _a.paramTypeSpecs;\\n        return paramTypeSpecs.length === argTypeSpecs.length &&\\n            paramTypeSpecs.every(function (paramTypeSpec, i) {\\n                return types_1.areMatchingElementaryTypes(paramTypeSpec, argTypeSpecs[i]) ||\\n                    (types_1.isArray(paramTypeSpec) && types_1.isArray(argTypeSpecs[i]));\\n            });\\n    });\\n    return (builtinFn !== null && builtinFn !== void 0 ? builtinFn : (shouldReturnIfArgTypeMismatch && builtinFnsMatchingName.length > 0\\n        ? builtinFnsMatchingName[0]\\n        : null));\\n}\\nexports.lookupBuiltin = lookupBuiltin;\\n\\n\\n/***/ }),\\n\\n/***/ 308:\\n/***/ ((__unused_webpack_module, exports) => {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.PrintArgType = exports.ExecutionDirectiveType = void 0;\\nvar ExecutionDirectiveType;\\n(function (ExecutionDirectiveType) {\\n    ExecutionDirectiveType[\\\"GOTO\\\"] = \\\"goto\\\";\\n    ExecutionDirectiveType[\\\"GOSUB\\\"] = \\\"gosub\\\";\\n    ExecutionDirectiveType[\\\"RETURN\\\"] = \\\"return\\\";\\n    ExecutionDirectiveType[\\\"END\\\"] = \\\"end\\\";\\n    ExecutionDirectiveType[\\\"EXIT_PROC\\\"] = \\\"exitProc\\\";\\n})(ExecutionDirectiveType = exports.ExecutionDirectiveType || (exports.ExecutionDirectiveType = {}));\\n/** Type of an argument to print(). */\\nvar PrintArgType;\\n(function (PrintArgType) {\\n    PrintArgType[\\\"COMMA\\\"] = \\\"comma\\\";\\n    PrintArgType[\\\"SEMICOLON\\\"] = \\\"semicolon\\\";\\n    PrintArgType[\\\"VALUE\\\"] = \\\"value\\\";\\n})(PrintArgType = exports.PrintArgType || (exports.PrintArgType = {}));\\n\\n\\n/***/ }),\\n\\n/***/ 586:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.ExecutionError = void 0;\\nvar data_item_1 = __nccwpck_require__(962);\\nvar error_with_loc_1 = __importDefault(__nccwpck_require__(813));\\nvar symbol_table_1 = __nccwpck_require__(973);\\nvar types_1 = __nccwpck_require__(521);\\nvar compiled_code_1 = __nccwpck_require__(308);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\nvar runtime_1 = __importDefault(__nccwpck_require__(753));\\nvar ExecutionError = /** @class */ (function (_super) {\\n    __extends(ExecutionError, _super);\\n    function ExecutionError(message, _a) {\\n        var _b = _a === void 0 ? {} : _a, module = _b.module, stmt = _b.stmt;\\n        return _super.call(this, message, {\\n            sourceFileName: module === null || module === void 0 ? void 0 : module.sourceFileName,\\n            loc: (stmt === null || stmt === void 0 ? void 0 : stmt.loc) ? { line: stmt.loc[0], col: stmt.loc[1] } : undefined,\\n        }) || this;\\n    }\\n    return ExecutionError;\\n}(error_with_loc_1.default));\\nexports.ExecutionError = ExecutionError;\\n/** Exception thrown to signal program termination via END. */\\nvar EndDirective = /** @class */ (function (_super) {\\n    __extends(EndDirective, _super);\\n    function EndDirective() {\\n        var _this = _super !== null && _super.apply(this, arguments) || this;\\n        _this.isEndDirective = true;\\n        return _this;\\n    }\\n    return EndDirective;\\n}(Error));\\n/** Manages the execution of a compiled program. */\\nvar Executor = /** @class */ (function () {\\n    function Executor(platform, _a) {\\n        var _b = _a === void 0 ? {} : _a, stmtExecutionDelayUs = _b.stmtExecutionDelayUs;\\n        this.platform = platform;\\n        /** Current module being executed. */\\n        this.currentModule = null;\\n        /** Static vars, indexed by proc name. */\\n        this.localStaticVarsMap = {};\\n        /** Label index map for module-level statements. */\\n        this.moduleLabelIndexMap = {};\\n        /** Label index map for procs. */\\n        this.procLabelIndexMap = {};\\n        /** Cursor for READ. */\\n        this.dataCursor = {\\n            stmtIdx: 0,\\n            itemIdx: 0,\\n        };\\n        this.stmtExecutionDelayUs =\\n            stmtExecutionDelayUs !== null && stmtExecutionDelayUs !== void 0 ? stmtExecutionDelayUs : platform.defaultStmtExecutionDelayUs;\\n    }\\n    /** Executes a compiled module. */\\n    Executor.prototype.executeModule = function (moduleOrCode) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var module, _a, ctx, e_1;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        if (!(typeof moduleOrCode === 'string')) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.platform.loadCompiledModule(moduleOrCode)];\\n                    case 1:\\n                        _a = _b.sent();\\n                        return [3 /*break*/, 3];\\n                    case 2:\\n                        _a = moduleOrCode;\\n                        _b.label = 3;\\n                    case 3:\\n                        module = _a;\\n                        this.currentModule = module;\\n                        this.buildLabelIndexMaps();\\n                        this.localStaticVarsMap = {};\\n                        this.restore();\\n                        this.platform.shouldStopExecution = false;\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\\n                    case 4:\\n                        _b.sent();\\n                        ctx = {\\n                            runtime: new runtime_1.default(this.platform),\\n                            executeProc: this.executeProc.bind(this),\\n                            read: this.read.bind(this),\\n                            restore: this.restore.bind(this),\\n                            args: {},\\n                            localVars: this.initVars(module.localSymbols, [\\n                                symbol_table_1.VarType.VAR,\\n                                symbol_table_1.VarType.CONST,\\n                            ]),\\n                            localStaticVars: {},\\n                            globalVars: this.initVars(module.globalSymbols, [\\n                                symbol_table_1.VarType.VAR,\\n                                symbol_table_1.VarType.CONST,\\n                            ]),\\n                            tempVars: {},\\n                        };\\n                        _b.label = 5;\\n                    case 5:\\n                        _b.trys.push([5, 7, 8, 10]);\\n                        return [4 /*yield*/, this.executeStmts(ctx, module.stmts, this.moduleLabelIndexMap)];\\n                    case 6:\\n                        _b.sent();\\n                        return [3 /*break*/, 10];\\n                    case 7:\\n                        e_1 = _b.sent();\\n                        if (e_1.isEndDirective) {\\n                            // Swallow error\\n                        }\\n                        else {\\n                            throw e_1;\\n                        }\\n                        return [3 /*break*/, 10];\\n                    case 8:\\n                        this.currentModule = null;\\n                        this.moduleLabelIndexMap = {};\\n                        this.procLabelIndexMap = {};\\n                        this.localStaticVarsMap = {};\\n                        this.restore();\\n                        this.platform.shouldStopExecution = false;\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(true)];\\n                    case 9:\\n                        _b.sent();\\n                        return [7 /*endfinally*/];\\n                    case 10: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Sets flag to stop execution. */\\n    Executor.prototype.stopExecution = function () {\\n        this.platform.shouldStopExecution = true;\\n    };\\n    Executor.prototype.executeProc = function (prevCtx, name) {\\n        var argPtrs = [];\\n        for (var _i = 2; _i < arguments.length; _i++) {\\n            argPtrs[_i - 2] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var proc, args, i, ctx;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        proc = symbol_table_1.lookupSymbol(this.currentModule.procs, name);\\n                        if (!proc) {\\n                            throw new Error(\\\"Procedure not found: \\\\\\\"\\\" + name + \\\"\\\\\\\"\\\");\\n                        }\\n                        // Init args.\\n                        if (argPtrs.length !== proc.paramSymbols.length) {\\n                            throw new Error('Incorrect number of arguments to ' +\\n                                (types_1.procTypeName(proc.type) + \\\" \\\\\\\"\\\" + proc.name + \\\"\\\\\\\": \\\") +\\n                                (\\\"expected \\\" + proc.paramSymbols.length + \\\", got \\\" + argPtrs.length));\\n                        }\\n                        args = {};\\n                        for (i = 0; i < argPtrs.length; ++i) {\\n                            args[proc.paramSymbols[i].name] = argPtrs[i];\\n                        }\\n                        // Init static vars.\\n                        if (!this.localStaticVarsMap[proc.name]) {\\n                            this.localStaticVarsMap[proc.name] = this.initVars(proc.localSymbols, [\\n                                symbol_table_1.VarType.STATIC_VAR,\\n                            ]);\\n                        }\\n                        ctx = __assign(__assign({}, prevCtx), { args: args, localVars: this.initVars(proc.localSymbols, [symbol_table_1.VarType.VAR, symbol_table_1.VarType.CONST]), localStaticVars: this.localStaticVarsMap[proc.name], tempVars: {} });\\n                        if (!this.procLabelIndexMap[proc.name]) {\\n                            throw new Error(\\\"Label index map not found for \\\\\\\"\\\" + proc.name + \\\"\\\\\\\"\\\");\\n                        }\\n                        return [4 /*yield*/, this.executeStmts(ctx, proc.stmts, this.procLabelIndexMap[proc.name])];\\n                    case 1:\\n                        _a.sent();\\n                        // Return value.\\n                        if (types_1.isFnOrDefFn(proc.type)) {\\n                            return [2 /*return*/, ctx.localVars[proc.name]];\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Executor.prototype.initVars = function (varSymbolTable, includeVarTypes) {\\n        var container = {};\\n        for (var _i = 0, varSymbolTable_1 = varSymbolTable; _i < varSymbolTable_1.length; _i++) {\\n            var symbol = varSymbolTable_1[_i];\\n            if (!includeVarTypes.includes(symbol.varType)) {\\n                continue;\\n            }\\n            container[symbol.name] = init_value_1.default(symbol.typeSpec);\\n        }\\n        return container;\\n    };\\n    Executor.prototype.executeStmts = function (ctx, stmts, labelIndexMap) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var gosubStates, stmtIdx, _loop_1, this_1;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        gosubStates = [];\\n                        stmtIdx = 0;\\n                        _loop_1 = function () {\\n                            var stmt, errorArgs, directive, e_2, gotoLabel, gosubState;\\n                            return __generator(this, function (_b) {\\n                                switch (_b.label) {\\n                                    case 0:\\n                                        if (this_1.platform.shouldStopExecution) {\\n                                            this_1.platform.shouldStopExecution = false;\\n                                            throw new EndDirective();\\n                                        }\\n                                        stmt = stmts[stmtIdx];\\n                                        errorArgs = { module: this_1.currentModule, stmt: stmt };\\n                                        if (!(this_1.stmtExecutionDelayUs > 0)) return [3 /*break*/, 2];\\n                                        return [4 /*yield*/, this_1.platform.delay(this_1.stmtExecutionDelayUs)];\\n                                    case 1:\\n                                        _b.sent();\\n                                        _b.label = 2;\\n                                    case 2:\\n                                        directive = void 0;\\n                                        if (!('run' in stmt)) return [3 /*break*/, 6];\\n                                        _b.label = 3;\\n                                    case 3:\\n                                        _b.trys.push([3, 5, , 6]);\\n                                        return [4 /*yield*/, stmt.run(ctx)];\\n                                    case 4:\\n                                        directive = _b.sent();\\n                                        return [3 /*break*/, 6];\\n                                    case 5:\\n                                        e_2 = _b.sent();\\n                                        if (e_2.isEndDirective) {\\n                                            throw e_2;\\n                                        }\\n                                        else {\\n                                            throw new ExecutionError(e_2.message, errorArgs);\\n                                        }\\n                                        return [3 /*break*/, 6];\\n                                    case 6:\\n                                        if (!directive) {\\n                                            ++stmtIdx;\\n                                            return [2 /*return*/, \\\"continue\\\"];\\n                                        }\\n                                        gotoLabel = function (label) {\\n                                            stmtIdx = labelIndexMap[label];\\n                                            if (stmtIdx === undefined) {\\n                                                throw new ExecutionError(\\\"Label not found: \\\\\\\"\\\" + label + \\\"\\\\\\\"\\\", errorArgs);\\n                                            }\\n                                        };\\n                                        switch (directive.type) {\\n                                            case compiled_code_1.ExecutionDirectiveType.GOSUB:\\n                                                gosubStates.push({\\n                                                    nextStmtIdx: stmtIdx + 1,\\n                                                });\\n                                                gotoLabel(directive.destLabel);\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.GOTO:\\n                                                gotoLabel(directive.destLabel);\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.RETURN:\\n                                                if (gosubStates.length === 0) {\\n                                                    throw new ExecutionError(\\\"RETURN without prior GOSUB\\\", errorArgs);\\n                                                }\\n                                                gosubState = gosubStates.pop();\\n                                                if (directive.destLabel) {\\n                                                    gotoLabel(directive.destLabel);\\n                                                }\\n                                                else {\\n                                                    stmtIdx = gosubState.nextStmtIdx;\\n                                                }\\n                                                break;\\n                                            case compiled_code_1.ExecutionDirectiveType.END:\\n                                                throw new EndDirective();\\n                                            case compiled_code_1.ExecutionDirectiveType.EXIT_PROC:\\n                                                stmtIdx = stmts.length;\\n                                                break;\\n                                            default:\\n                                                throw new ExecutionError(\\\"Unrecognized execution directive: \\\" + JSON.stringify(directive), errorArgs);\\n                                        }\\n                                        return [2 /*return*/];\\n                                }\\n                            });\\n                        };\\n                        this_1 = this;\\n                        _a.label = 1;\\n                    case 1:\\n                        if (!(stmtIdx < stmts.length)) return [3 /*break*/, 3];\\n                        return [5 /*yield**/, _loop_1()];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 1];\\n                    case 3: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Executor.prototype.read = function () {\\n        var resultTypes = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            resultTypes[_i] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var results, i, dataItem;\\n            return __generator(this, function (_a) {\\n                results = [];\\n                for (i = 0; i < resultTypes.length; ++i) {\\n                    dataItem = this.getNextDataItem();\\n                    if (!dataItem) {\\n                        throw new Error(\\\"Data exhausted at item \\\" + (i + 1));\\n                    }\\n                    try {\\n                        results.push(data_item_1.getDataItem(dataItem, resultTypes[i]));\\n                    }\\n                    catch (e) {\\n                        e.message = \\\"Error reading item \\\" + (i + 1) + \\\": \\\" + e.message;\\n                        throw e;\\n                    }\\n                }\\n                return [2 /*return*/, results];\\n            });\\n        });\\n    };\\n    Executor.prototype.getNextDataItem = function () {\\n        var stmts = this.currentModule.stmts;\\n        for (;;) {\\n            if (this.dataCursor.stmtIdx >= stmts.length) {\\n                return null;\\n            }\\n            var stmt = stmts[this.dataCursor.stmtIdx];\\n            if (!('data' in stmt)) {\\n                ++this.dataCursor.stmtIdx;\\n                continue;\\n            }\\n            if (this.dataCursor.itemIdx >= stmt.data.length) {\\n                ++this.dataCursor.stmtIdx;\\n                this.dataCursor.itemIdx = 0;\\n                continue;\\n            }\\n            return stmt.data[this.dataCursor.itemIdx++];\\n        }\\n    };\\n    Executor.prototype.restore = function (destLabel) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var stmtIdx;\\n            var _a, _b;\\n            return __generator(this, function (_c) {\\n                if (destLabel) {\\n                    stmtIdx = this.moduleLabelIndexMap[destLabel];\\n                    if (stmtIdx === undefined) {\\n                        throw new Error(\\\"Label not found: \\\\\\\"\\\" + destLabel + \\\"\\\\\\\"\\\");\\n                    }\\n                    _a = [stmtIdx, 0], this.dataCursor.stmtIdx = _a[0], this.dataCursor.itemIdx = _a[1];\\n                }\\n                else {\\n                    _b = [0, 0], this.dataCursor.stmtIdx = _b[0], this.dataCursor.itemIdx = _b[1];\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    Executor.prototype.buildLabelIndexMaps = function () {\\n        this.moduleLabelIndexMap = this.buildLabelIndexMap(this.currentModule.stmts);\\n        for (var _i = 0, _a = this.currentModule.procs; _i < _a.length; _i++) {\\n            var _b = _a[_i], name_1 = _b.name, stmts = _b.stmts;\\n            this.procLabelIndexMap[name_1] = this.buildLabelIndexMap(stmts);\\n        }\\n    };\\n    Executor.prototype.buildLabelIndexMap = function (stmts) {\\n        var _this = this;\\n        var labelIndexMap = {};\\n        stmts.forEach(function (stmt, idx) {\\n            if ('label' in stmt) {\\n                if (stmt.label in labelIndexMap) {\\n                    throw new ExecutionError(\\\"Duplicate label \\\\\\\"\\\" + stmt.label + \\\"\\\\\\\"\\\", {\\n                        module: _this.currentModule,\\n                        stmt: stmt,\\n                    });\\n                }\\n                labelIndexMap[stmt.label] = idx;\\n            }\\n        });\\n        return labelIndexMap;\\n    };\\n    return Executor;\\n}());\\nexports.default = Executor;\\n\\n\\n/***/ }),\\n\\n/***/ 176:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nvar _a;\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar qb_array_1 = __importDefault(__nccwpck_require__(59));\\nvar qb_udt_1 = __importDefault(__nccwpck_require__(83));\\n/** Initial value for elementary data types. */\\nvar ELEMENTARY_TYPE_INIT_VALUES = (_a = {},\\n    _a[types_1.DataType.INTEGER] = 0,\\n    _a[types_1.DataType.LONG] = 0,\\n    _a[types_1.DataType.SINGLE] = 0.0,\\n    _a[types_1.DataType.DOUBLE] = 0.0,\\n    _a[types_1.DataType.STRING] = '',\\n    _a);\\nfunction initValue(typeSpec) {\\n    var dataType = typeSpec.type;\\n    if (types_1.isElementaryType(dataType)) {\\n        return ELEMENTARY_TYPE_INIT_VALUES[dataType];\\n    }\\n    switch (typeSpec.type) {\\n        case types_1.DataType.ARRAY:\\n            return new qb_array_1.default(typeSpec);\\n        case types_1.DataType.UDT:\\n            return new qb_udt_1.default(typeSpec);\\n        default:\\n            throw new Error(\\\"Unknown type: \\\" + JSON.stringify(typeSpec));\\n    }\\n}\\nexports.default = initValue;\\n\\n\\n/***/ }),\\n\\n/***/ 999:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.NodeExecutor = exports.NodePlatform = void 0;\\nvar ansi_escapes_1 = __importDefault(__nccwpck_require__(575));\\nvar perf_hooks_1 = __nccwpck_require__(630);\\nvar require_from_string_1 = __importDefault(__nccwpck_require__(7));\\nvar ansi_terminal_platform_1 = __importDefault(__nccwpck_require__(769));\\nvar executor_1 = __importDefault(__nccwpck_require__(586));\\n/** RuntimePlatform for Node.JS on TTY. */\\nvar NodePlatform = /** @class */ (function (_super) {\\n    __extends(NodePlatform, _super);\\n    function NodePlatform() {\\n        var _this = _super !== null && _super.apply(this, arguments) || this;\\n        // When running in Node, delay is implemented using setImmediate and won't\\n        // block other functionality. So we can safely set a higher delay value for\\n        // better compatibility.\\n        _this.defaultStmtExecutionDelayUs = 5;\\n        return _this;\\n    }\\n    NodePlatform.prototype.loadCompiledModule = function (code) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, require_from_string_1.default(code)];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.delay = function (delayInUs) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var t0;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        t0 = perf_hooks_1.performance.now();\\n                        _a.label = 1;\\n                    case 1:\\n                        if (!((perf_hooks_1.performance.now() - t0) * 1000 < delayInUs)) return [3 /*break*/, 3];\\n                        return [4 /*yield*/, new Promise(function (resolve) { return setImmediate(resolve); })];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 1];\\n                    case 3: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.print = function (s) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                process.stdout.write(s);\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.inputLine = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, new Promise(function (resolve) {\\n                        process.stdin.resume();\\n                        process.stdin.setRawMode(false);\\n                        process.stdin.once('data', function (chunk) {\\n                            process.stdin.pause();\\n                            resolve(chunk.toString());\\n                        });\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getChar = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var result, callbackFn;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                result = null;\\n                process.stdin.resume();\\n                process.stdin.setRawMode(true);\\n                callbackFn = function (chunk) {\\n                    result = _this.translateKeyCode(chunk.toString());\\n                    // Handle Ctrl-C\\n                    if (result === String.fromCharCode(3)) {\\n                        throw new Error('Received Ctrl-C, aborting');\\n                    }\\n                    process.stdin.pause();\\n                };\\n                process.stdin.once('data', callbackFn);\\n                return [2 /*return*/, new Promise(function (resolve) {\\n                        setTimeout(function () {\\n                            if (result === null) {\\n                                process.stdin.removeListener('data', callbackFn);\\n                                process.stdin.pause();\\n                            }\\n                            resolve(result);\\n                        }, 20);\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getCursorPosition = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var originalIsRaw;\\n            return __generator(this, function (_a) {\\n                // Based on https://github.com/bubkoo/get-cursor-position/blob/master/index.js\\n                process.stdin.resume();\\n                originalIsRaw = process.stdin.isRaw;\\n                process.stdin.setRawMode(true);\\n                return [2 /*return*/, new Promise(function (resolve, reject) {\\n                        process.stdin.once('data', function (chunk) {\\n                            process.stdin.pause();\\n                            process.stdin.setRawMode(originalIsRaw);\\n                            var match = chunk.toString().match(/\\\\[(\\\\d+)\\\\;(\\\\d+)R/);\\n                            if (match) {\\n                                var _a = [match[1], match[2]], row = _a[0], col = _a[1];\\n                                var result = {\\n                                    // ANSI row & col numbers are 1-based.\\n                                    x: parseInt(col) - 1,\\n                                    y: parseInt(row) - 1,\\n                                };\\n                                resolve(result);\\n                            }\\n                            else {\\n                                reject();\\n                            }\\n                        });\\n                        process.stdout.write(ansi_escapes_1.default.cursorGetPosition);\\n                    })];\\n            });\\n        });\\n    };\\n    NodePlatform.prototype.getScreenSize = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var origPos, bottomRightPos;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.getCursorPosition()];\\n                    case 1:\\n                        origPos = _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(10000, 10000)];\\n                    case 2:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.getCursorPosition()];\\n                    case 3:\\n                        bottomRightPos = _a.sent();\\n                        return [4 /*yield*/, this.moveCursorTo(origPos.x, origPos.y)];\\n                    case 4:\\n                        _a.sent();\\n                        return [2 /*return*/, {\\n                                rows: bottomRightPos.y + 1,\\n                                cols: bottomRightPos.x + 1,\\n                            }];\\n                }\\n            });\\n        });\\n    };\\n    return NodePlatform;\\n}(ansi_terminal_platform_1.default));\\nexports.NodePlatform = NodePlatform;\\nvar NodeExecutor = /** @class */ (function (_super) {\\n    __extends(NodeExecutor, _super);\\n    function NodeExecutor(opts) {\\n        if (opts === void 0) { opts = {}; }\\n        return _super.call(this, new NodePlatform(), opts) || this;\\n    }\\n    return NodeExecutor;\\n}(executor_1.default));\\nexports.NodeExecutor = NodeExecutor;\\n\\n\\n/***/ }),\\n\\n/***/ 421:\\n/***/ (function(module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar node_platform_1 = __nccwpck_require__(999);\\n/** Executes the bundled module.\\n *\\n * This is the main execution entrypoint to a compiled program.\\n */\\nfunction run(opts) {\\n    if (opts === void 0) { opts = {}; }\\n    return __awaiter(this, void 0, void 0, function () {\\n        var stmtExecutionDelayUs;\\n        return __generator(this, function (_a) {\\n            switch (_a.label) {\\n                case 0:\\n                    if (process.env.DELAY) {\\n                        stmtExecutionDelayUs = parseInt(process.env.DELAY);\\n                        if (isNaN(stmtExecutionDelayUs)) {\\n                            stmtExecutionDelayUs = undefined;\\n                        }\\n                    }\\n                    return [4 /*yield*/, new node_platform_1.NodeExecutor(__assign({ stmtExecutionDelayUs: stmtExecutionDelayUs }, opts)).executeModule(compiledModule)];\\n                case 1: return [2 /*return*/, _a.sent()];\\n            }\\n        });\\n    });\\n}\\nmodule.exports = __assign(__assign({}, (typeof compiledModule === 'undefined' ? {} : compiledModule)), { run: run });\\n// When invoked directly as part of a compiled program, execute the bundled module.\\nif (require.main === require.cache[eval('__filename')]) {\\n    run();\\n}\\n\\n\\n/***/ }),\\n\\n/***/ 59:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\n/** Runtime representation for QBasic arrays. */\\nvar QbArray = /** @class */ (function () {\\n    function QbArray(arrayTypeSpec) {\\n        /** The underlying array storing the actual elements. */\\n        this._values = [];\\n        this.init(arrayTypeSpec.elementTypeSpec, arrayTypeSpec.dimensionSpecs);\\n    }\\n    /** Initializes the array with the provided spec, discarding any previous contents. */\\n    QbArray.prototype.init = function (elementTypeSpec, dimensionSpecs) {\\n        if (dimensionSpecs.length === 0) {\\n            throw new Error('No dimension specs provided');\\n        }\\n        this._typeSpec = types_1.arraySpec(elementTypeSpec, dimensionSpecs);\\n        this._values.length = 0;\\n        var currentDimensionArrays = [this._values];\\n        for (var i = 0; i < dimensionSpecs.length; ++i) {\\n            var _a = dimensionSpecs[i], minIdx = _a[0], maxIdx = _a[1];\\n            var numElements = maxIdx - minIdx + 1;\\n            var nextDimensionArrays = [];\\n            for (var _i = 0, currentDimensionArrays_1 = currentDimensionArrays; _i < currentDimensionArrays_1.length; _i++) {\\n                var dimensionArray = currentDimensionArrays_1[_i];\\n                if (i === dimensionSpecs.length - 1) {\\n                    for (var j = 0; j < numElements; ++j) {\\n                        dimensionArray.push(init_value_1.default(elementTypeSpec));\\n                    }\\n                }\\n                else {\\n                    for (var j = 0; j < numElements; ++j) {\\n                        var nextDimensionArray = new Array();\\n                        nextDimensionArrays.push(nextDimensionArray);\\n                        dimensionArray.push(nextDimensionArray);\\n                    }\\n                }\\n            }\\n            currentDimensionArrays = nextDimensionArrays;\\n        }\\n    };\\n    /** Translates a QBasic index into the index in the underlying array. */\\n    QbArray.prototype.getIdx = function (dimensionIdx, qbIdx) {\\n        var dimensionSpecs = this._typeSpec.dimensionSpecs;\\n        if (!Number.isFinite(dimensionIdx) ||\\n            dimensionIdx < 0 ||\\n            dimensionIdx >= dimensionSpecs.length) {\\n            throw new Error('Invalid dimension in getIndex: ' +\\n                (\\\"expected number between 0 and \\\" + (dimensionSpecs.length - 1) + \\\", \\\") +\\n                (\\\"got \\\" + dimensionIdx));\\n        }\\n        var _a = dimensionSpecs[dimensionIdx], minIdx = _a[0], maxIdx = _a[1];\\n        if (!Number.isFinite(qbIdx) || qbIdx < minIdx || qbIdx > maxIdx) {\\n            throw new Error(\\\"Index out of range for dimension \\\" + (dimensionIdx + 1) + \\\": \\\" +\\n                (\\\"expected number between \\\" + minIdx + \\\" and \\\" + maxIdx + \\\", \\\") +\\n                (\\\"got \\\" + qbIdx));\\n        }\\n        return qbIdx - minIdx;\\n    };\\n    Object.defineProperty(QbArray.prototype, \\\"values\\\", {\\n        get: function () {\\n            return this._values;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(QbArray.prototype, \\\"typeSpec\\\", {\\n        get: function () {\\n            return this._typeSpec;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return QbArray;\\n}());\\nexports.default = QbArray;\\n\\n\\n/***/ }),\\n\\n/***/ 83:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __assign = (this && this.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nvar types_1 = __nccwpck_require__(521);\\nvar init_value_1 = __importDefault(__nccwpck_require__(176));\\n/** Runtime representation for QBasic user-defined types. */\\nvar QbUdt = /** @class */ (function () {\\n    function QbUdt(udtTypeSpec) {\\n        /** The underlying array storing the actual elements. */\\n        this._values = {};\\n        this._typeSpec = __assign({}, udtTypeSpec);\\n        this.init();\\n    }\\n    QbUdt.prototype.init = function () {\\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\\n            var fieldSpec = _a[_i];\\n            this._values[fieldSpec.name] = init_value_1.default(fieldSpec.typeSpec);\\n        }\\n    };\\n    QbUdt.prototype.clone = function () {\\n        var newQbUdt = new QbUdt(this._typeSpec);\\n        for (var _i = 0, _a = this._typeSpec.fieldSpecs; _i < _a.length; _i++) {\\n            var fieldSpec = _a[_i];\\n            var value = this._values[fieldSpec.name];\\n            newQbUdt._values[fieldSpec.name] = types_1.isUdt(fieldSpec.typeSpec)\\n                ? value.clone()\\n                : value;\\n        }\\n        return newQbUdt;\\n    };\\n    Object.defineProperty(QbUdt.prototype, \\\"values\\\", {\\n        get: function () {\\n            return this._values;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(QbUdt.prototype, \\\"typeSpec\\\", {\\n        get: function () {\\n            return this._typeSpec;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return QbUdt;\\n}());\\nexports.default = QbUdt;\\n\\n\\n/***/ }),\\n\\n/***/ 753:\\n/***/ (function(__unused_webpack_module, exports, __nccwpck_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\\n        to[j] = from[i];\\n    return to;\\n};\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", ({ value: true }));\\nexports.SCREEN_MODE_CONFIGS = exports.RuntimePlatform = void 0;\\nvar moo_1 = __importDefault(__nccwpck_require__(357));\\nvar types_1 = __nccwpck_require__(521);\\nvar builtins_1 = __nccwpck_require__(562);\\nvar compiled_code_1 = __nccwpck_require__(308);\\nvar round_half_to_even_1 = __importDefault(__nccwpck_require__(345));\\n/** Interface for platform-specific runtime functionality. */\\nvar RuntimePlatform = /** @class */ (function () {\\n    function RuntimePlatform() {\\n        /** Flag indicating we should stop executing.\\n         *\\n         * Setting this flag will cause blocking methods like `inputLine()` to exit early.\\n         */\\n        this.shouldStopExecution = false;\\n    }\\n    return RuntimePlatform;\\n}());\\nexports.RuntimePlatform = RuntimePlatform;\\nexports.SCREEN_MODE_CONFIGS = [\\n    {\\n        mode: 0,\\n        textModeDimensions: [{ rows: 80, cols: 25 }],\\n        colorMap: [\\n            'black',\\n            'blue',\\n            'green',\\n            'cyan',\\n            'red',\\n            'magenta',\\n            'yellow',\\n            'white',\\n            'gray',\\n            'blueBright',\\n            'greenBright',\\n            'cyanBright',\\n            'redBright',\\n            'magentaBright',\\n            'yellowBright',\\n            'whiteBright',\\n        ],\\n    },\\n];\\n/** Runtime support library.\\n *\\n * This class provides the interface invoked by compiled code. It is platform-agnostic, and wraps\\n * the low-level, platform-dependent functionality in the injected RuntimePlatform.\\n */\\nvar Runtime = /** @class */ (function () {\\n    function Runtime(platform) {\\n        this.platform = platform;\\n        this.roundHalfToEven = round_half_to_even_1.default;\\n        this.printFormatStringLexer = moo_1.default.compile({\\n            NUMBER: /(?:[#,])*\\\\.#+|[#,]+/,\\n            STRING: '&',\\n            DOLLAR_SIGNS: /\\\\$+/,\\n            LITERAL: {\\n                match: /[^.#&\\\\$]+/,\\n                lineBreaks: true,\\n            },\\n        });\\n        /** Lexer for input(). */\\n        this.inputLexer = moo_1.default.compile({\\n            WHITESPACE: { match: /\\\\s+/, lineBreaks: true },\\n            QUOTED_STRING: {\\n                match: /\\\"[^\\\"]*\\\"/,\\n                value: function (text) { return text.substr(1, text.length - 2); },\\n                type: function () { return 'STRING'; },\\n            },\\n            COMMA: ',',\\n            STRING: /[^,\\\\s]+/,\\n        });\\n        this.currentScreenMode = 0;\\n    }\\n    Runtime.prototype.executeBuiltinProc = function (name, argTypeSpecs) {\\n        var args = [];\\n        for (var _i = 2; _i < arguments.length; _i++) {\\n            args[_i - 2] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var builtinProc, runContext;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs) ||\\n                            builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs);\\n                        if (!builtinProc) {\\n                            throw new Error(\\\"No matching built-in procedure found: \\\\\\\"\\\" + name + \\\"\\\\\\\"\\\");\\n                        }\\n                        if (argTypeSpecs.length !== args.length) {\\n                            throw new Error(\\\"Argument types and values do not match: \\\" +\\n                                (\\\"expected \\\" + argTypeSpecs.length + \\\" arguments, got \\\" + args.length));\\n                        }\\n                        runContext = {\\n                            runtime: this,\\n                            platform: this.platform,\\n                            argTypeSpecs: argTypeSpecs,\\n                            args: args,\\n                        };\\n                        return [4 /*yield*/, builtinProc.run.apply(builtinProc, __spreadArray(__spreadArray([], args.map(function (ptr) { return ptr[0][ptr[1]]; })), [runContext]))];\\n                    case 1: return [2 /*return*/, _a.sent()];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.print = function (formatString) {\\n        var args = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            args[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var line;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        line = formatString\\n                            ? this.printWithFormatString(formatString, args)\\n                            : this.printWithDefaultFormat(args);\\n                        if (args.length === 0 ||\\n                            args[args.length - 1].type === compiled_code_1.PrintArgType.VALUE) {\\n                            line += '\\\\n';\\n                        }\\n                        return [4 /*yield*/, this.platform.print(line)];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /** Implements PRINT USING format strings.\\n     *\\n     * This is a VERY incomplete implementation. Supported:\\n     *\\n     *   - Formatting numbers with ##.##\\n     *   - Formatting string with &\\n     */\\n    Runtime.prototype.printWithFormatString = function (formatString, args) {\\n        var pieces = [];\\n        var argIdx = 0;\\n        this.printFormatStringLexer.reset(formatString);\\n        for (;;) {\\n            while (argIdx < args.length && args[argIdx].type !== compiled_code_1.PrintArgType.VALUE) {\\n                ++argIdx;\\n            }\\n            var nextArg = argIdx < args.length ? args[argIdx] : null;\\n            var token = this.printFormatStringLexer.next();\\n            if (!token) {\\n                break;\\n            }\\n            switch (token.type) {\\n                case 'NUMBER':\\n                    if (!nextArg || typeof nextArg.value !== 'number') {\\n                        throw new Error('Formatting error: expected number ' +\\n                            (\\\"as argument #\\\" + (argIdx + 1) + \\\", got \\\" + typeof (nextArg === null || nextArg === void 0 ? void 0 : nextArg.value)));\\n                    }\\n                    var _a = token.value.split('.'), integralFormat = _a[0], fractionFormat = _a[1];\\n                    // Not supporting commas yet.\\n                    var integralFormatLength = integralFormat.replace(/,/, '').length;\\n                    if (fractionFormat) {\\n                        var formattedValue = (\\\"\\\" + Math.floor(nextArg.value)).padStart(integralFormatLength) +\\n                            '.' +\\n                            nextArg.value.toFixed(fractionFormat.length).split('.')[1];\\n                        pieces.push(formattedValue);\\n                    }\\n                    else {\\n                        var formattedValue = nextArg.value.toFixed(0).padStart(integralFormatLength) +\\n                            (token.value.indexOf('.') >= 0 ? '.' : '');\\n                        pieces.push(formattedValue);\\n                    }\\n                    ++argIdx;\\n                    break;\\n                case 'STRING':\\n                    if (!nextArg || typeof nextArg.value !== 'string') {\\n                        throw new Error(\\\"Formatting error: expected string as argument #\\\" + (argIdx + 1));\\n                    }\\n                    pieces.push(nextArg.value);\\n                    ++argIdx;\\n                    break;\\n                case 'DOLLAR_SIGNS': {\\n                    var value = void 0;\\n                    if (token.value.length <= 1) {\\n                        value = token.value;\\n                    }\\n                    else if (token.value.length === 2) {\\n                        value = ' $';\\n                    }\\n                    else {\\n                        value = '%$';\\n                    }\\n                    pieces.push(value);\\n                    break;\\n                }\\n                case 'LITERAL':\\n                    pieces.push(token.value);\\n                    break;\\n                default:\\n                    throw new Error(\\\"Unexpected token type: \\\" + JSON.stringify(token));\\n            }\\n        }\\n        return pieces.join('');\\n    };\\n    Runtime.prototype.printWithDefaultFormat = function (args) {\\n        var PRINT_ZONE_LENGTH = 14;\\n        var line = '';\\n        for (var _i = 0, args_1 = args; _i < args_1.length; _i++) {\\n            var arg = args_1[_i];\\n            switch (arg.type) {\\n                case compiled_code_1.PrintArgType.SEMICOLON:\\n                    break;\\n                case compiled_code_1.PrintArgType.COMMA:\\n                    var numPaddingChars = PRINT_ZONE_LENGTH - (line.length % PRINT_ZONE_LENGTH);\\n                    line += ' '.repeat(numPaddingChars);\\n                    break;\\n                case compiled_code_1.PrintArgType.VALUE:\\n                    if (typeof arg.value === 'string') {\\n                        line += \\\"\\\" + arg.value;\\n                        break;\\n                    }\\n                    else if (typeof arg.value === 'number') {\\n                        line += \\\"\\\" + (arg.value >= 0 ? ' ' : '') + arg.value + \\\" \\\";\\n                        break;\\n                    }\\n                    else {\\n                        // Fall through\\n                    }\\n                default:\\n                    throw new Error(\\\"Unknown print arg: '\\\" + JSON.stringify(arg) + \\\"'\\\");\\n            }\\n        }\\n        return line;\\n    };\\n    Runtime.prototype.inputLine = function (prompt) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var line;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!prompt) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.platform.print(prompt)];\\n                    case 1:\\n                        _a.sent();\\n                        _a.label = 2;\\n                    case 2: return [4 /*yield*/, this.platform.setCursorVisibility(true)];\\n                    case 3:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.platform.inputLine()];\\n                    case 4:\\n                        line = _a.sent();\\n                        return [4 /*yield*/, this.platform.setCursorVisibility(false)];\\n                    case 5:\\n                        _a.sent();\\n                        return [2 /*return*/, line];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.input = function (prompt) {\\n        var resultTypes = [];\\n        for (var _i = 1; _i < arguments.length; _i++) {\\n            resultTypes[_i - 1] = arguments[_i];\\n        }\\n        return __awaiter(this, void 0, void 0, function () {\\n            var results, line, tokens, tokenIdx, errorMessage, resultIdx, resultType, errorMessagePrefix, tokenValue, numericValue;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        results = [];\\n                        return [4 /*yield*/, this.platform.print(prompt)];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.inputLine('')];\\n                    case 2:\\n                        line = _a.sent();\\n                        if (this.platform.shouldStopExecution) {\\n                            return [2 /*return*/, results];\\n                        }\\n                        tokens = this.lexInput(line);\\n                        tokenIdx = 0;\\n                        errorMessage = null;\\n                        for (resultIdx = 0; resultIdx < resultTypes.length; ++resultIdx) {\\n                            resultType = resultTypes[resultIdx];\\n                            errorMessagePrefix = \\\"Error parsing value \\\" + (resultIdx + 1) + \\\": \\\";\\n                            // Consume comma token for result 1+.\\n                            if (resultIdx > 0) {\\n                                if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'COMMA') {\\n                                    ++tokenIdx;\\n                                }\\n                                else {\\n                                    errorMessage = errorMessagePrefix + \\\"Comma expected\\\";\\n                                    break;\\n                                }\\n                            }\\n                            // Consume value.\\n                            if (tokenIdx < tokens.length && tokens[tokenIdx].type === 'STRING') {\\n                                tokenValue = tokens[tokenIdx].value;\\n                                if (types_1.isString(resultType)) {\\n                                    results.push(tokenValue);\\n                                }\\n                                else if (types_1.isNumeric(resultType)) {\\n                                    numericValue = parseFloat(tokenValue);\\n                                    if (isNaN(numericValue)) {\\n                                        errorMessage = errorMessagePrefix + \\\"Invalid numeric value \\\\\\\"\\\" + tokenValue + \\\"\\\\\\\"\\\";\\n                                        break;\\n                                    }\\n                                    else {\\n                                        results.push(numericValue);\\n                                    }\\n                                }\\n                                else {\\n                                    throw new Error(\\\"Unexpected result type \\\" + resultType.type);\\n                                }\\n                                ++tokenIdx;\\n                            }\\n                            else {\\n                                errorMessage = errorMessagePrefix + \\\"No value provided\\\";\\n                                break;\\n                            }\\n                        }\\n                        if (!(results.length === resultTypes.length)) return [3 /*break*/, 3];\\n                        return [2 /*return*/, results];\\n                    case 3:\\n                        if (!(results.length < resultTypes.length)) return [3 /*break*/, 5];\\n                        return [4 /*yield*/, this.platform.print(\\\"\\\\n\\\" + (errorMessage ? errorMessage + \\\"\\\\n\\\" : '') + \\\"Redo from start\\\\n\\\")];\\n                    case 4:\\n                        _a.sent();\\n                        return [3 /*break*/, 6];\\n                    case 5: \\n                    // This would indicate a logic error above - we should stop consuming from input once the\\n                    // expected number of results has been reached.\\n                    throw new Error(\\\"Too many results: expected \\\" + resultTypes.length + \\\", got \\\" + results.length);\\n                    case 6: return [3 /*break*/, 0];\\n                    case 7: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    Runtime.prototype.lexInput = function (line) {\\n        this.inputLexer.reset(line.trim());\\n        var tokens = [];\\n        for (;;) {\\n            var token = this.inputLexer.next();\\n            if (!token) {\\n                break;\\n            }\\n            if (token.type !== 'WHITESPACE') {\\n                tokens.push(token);\\n            }\\n        }\\n        return tokens;\\n    };\\n    Runtime.prototype.setScreenMode = function (n) {\\n        var screenMode = exports.SCREEN_MODE_CONFIGS.find(function (_a) {\\n            var mode = _a.mode;\\n            return mode === n;\\n        });\\n        if (!screenMode) {\\n            throw new Error(\\\"Unsupported screen mode: \\\" + n);\\n        }\\n        this.currentScreenMode = n;\\n    };\\n    Object.defineProperty(Runtime.prototype, \\\"currentScreenModeConfig\\\", {\\n        get: function () {\\n            var _this = this;\\n            return exports.SCREEN_MODE_CONFIGS.find(function (_a) {\\n                var mode = _a.mode;\\n                return mode === _this.currentScreenMode;\\n            });\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return Runtime;\\n}());\\nexports.default = Runtime;\\n\\n\\n/***/ }),\\n\\n/***/ 282:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"module\\\");;\\n\\n/***/ }),\\n\\n/***/ 622:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"path\\\");;\\n\\n/***/ }),\\n\\n/***/ 630:\\n/***/ ((module) => {\\n\\n\\\"use strict\\\";\\nmodule.exports = require(\\\"perf_hooks\\\");;\\n\\n/***/ })\\n\\n/******/ \\t});\\n/************************************************************************/\\n/******/ \\t// The module cache\\n/******/ \\tvar __webpack_module_cache__ = {};\\n/******/ \\t\\n/******/ \\t// The require function\\n/******/ \\tfunction __nccwpck_require__(moduleId) {\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tvar cachedModule = __webpack_module_cache__[moduleId];\\n/******/ \\t\\tif (cachedModule !== undefined) {\\n/******/ \\t\\t\\treturn cachedModule.exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = __webpack_module_cache__[moduleId] = {\\n/******/ \\t\\t\\tid: moduleId,\\n/******/ \\t\\t\\tloaded: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/ \\t\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tvar threw = true;\\n/******/ \\t\\ttry {\\n/******/ \\t\\t\\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __nccwpck_require__);\\n/******/ \\t\\t\\tthrew = false;\\n/******/ \\t\\t} finally {\\n/******/ \\t\\t\\tif(threw) delete __webpack_module_cache__[moduleId];\\n/******/ \\t\\t}\\n/******/ \\t\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.loaded = true;\\n/******/ \\t\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/ \\t\\n/************************************************************************/\\n/******/ \\t/* webpack/runtime/node module decorator */\\n/******/ \\t(() => {\\n/******/ \\t\\t__nccwpck_require__.nmd = (module) => {\\n/******/ \\t\\t\\tmodule.paths = [];\\n/******/ \\t\\t\\tif (!module.children) module.children = [];\\n/******/ \\t\\t\\treturn module;\\n/******/ \\t\\t};\\n/******/ \\t})();\\n/******/ \\t\\n/******/ \\t/* webpack/runtime/compat */\\n/******/ \\t\\n/******/ \\tif (typeof __nccwpck_require__ !== 'undefined') __nccwpck_require__.ab = __dirname + \\\"/\\\";/************************************************************************/\\n/******/ \\t\\n/******/ \\t// startup\\n/******/ \\t// Load entry module and return exports\\n/******/ \\t// This entry module is referenced by other modules so it can't be inlined\\n/******/ \\tvar __webpack_exports__ = __nccwpck_require__(421);\\n/******/ \\tmodule.exports = __webpack_exports__;\\n/******/ \\t\\n/******/ })()\\n;\" };","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createParser = void 0;\nvar nearley_1 = require(\"nearley\");\nvar grammar_1 = __importDefault(require(\"./grammar\"));\nvar lexer_1 = __importDefault(require(\"./lexer\"));\nvar error_with_loc_1 = __importDefault(require(\"../lib/error-with-loc\"));\nfunction createParser(opts) {\n    return new nearley_1.Parser(nearley_1.Grammar.fromCompiled(grammar_1.default), opts);\n}\nexports.createParser = createParser;\n/** Entry point for parsing an input string into an AST module. */\nfunction parse(input, opts) {\n    var parser = createParser(opts);\n    try {\n        parser.feed(input);\n        // Add terminating line break (necessary due to lack of EOF terminal).\n        parser.feed('\\n');\n    }\n    catch (e) {\n        if ('token' in e) {\n            throw new error_with_loc_1.default(\n            // Hack to reduce verbosity of nearley error messages...\n            e.message.replace(/ Instead, I was expecting to see one of the following:$[\\s\\S]*/gm, ''), {\n                sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n                loc: e.token,\n            });\n        }\n        else {\n            throw e;\n        }\n    }\n    if (parser.results.length === 0) {\n        throw new error_with_loc_1.default(\"Unexpected end of input\", {\n            sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n            loc: lexer_1.default.lastToken,\n        });\n    }\n    else if (parser.results.length !== 1) {\n        throw new error_with_loc_1.default(parser.results.length + \" parse trees:\\n\\n\" +\n            parser.results\n                .map(function (tree, idx) {\n                return \"Parse tree #\" + (idx + 1) + \":\\n\" + JSON.stringify(tree, null, 4);\n            })\n                .join('\\n\\n'), {\n            sourceFileName: opts === null || opts === void 0 ? void 0 : opts.sourceFileName,\n            loc: lexer_1.default.lastToken,\n        });\n    }\n    return parser.results[0];\n}\nexports.default = parse;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Generated automatically by nearley, version 2.20.1\n// http://github.com/Hardmath123/nearley\n// Bypasses TS6133. Allow declared but unused functions.\n// @ts-ignore\nfunction id(d) { return d[0]; }\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar lexer_1 = __importDefault(require(\"./lexer\"));\nvar ast_1 = require(\"../lib/ast\");\nvar types_1 = require(\"../lib/types\");\n// ----\n// Helper functions.\n// ----\nfunction discard() { return null; }\nfunction useLoc(tokenOrAstNode) {\n    if ('loc' in tokenOrAstNode) {\n        return { loc: tokenOrAstNode.loc };\n    }\n    else if (('line' in tokenOrAstNode) && ('col' in tokenOrAstNode)) {\n        return { loc: { line: tokenOrAstNode.line, col: tokenOrAstNode.col } };\n    }\n    else {\n        throw new Error(\"Invalid tokenOrAstNode: \" + JSON.stringify(tokenOrAstNode));\n    }\n}\nfunction buildBinaryOpExpr(_a) {\n    var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n    return __assign({ type: ast_1.ExprType.BINARY_OP, op: id($2).type.toLowerCase(), leftExpr: $1, rightExpr: $3 }, useLoc($1));\n}\nfunction buildUnaryOpExpr(_a) {\n    var $1 = _a[0], $2 = _a[1];\n    return __assign({ type: ast_1.ExprType.UNARY_OP, op: id($1).type.toLowerCase(), rightExpr: $2 }, useLoc(id($1)));\n}\nfunction buildDataItem(tokenOrAstNode, value) {\n    var _a = useLoc(tokenOrAstNode).loc, line = _a.line, col = _a.col;\n    return [[line, col], value];\n}\n;\n;\n;\n;\nvar grammar = {\n    Lexer: lexer_1.default,\n    ParserRules: [\n        { \"name\": \"module$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"module$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"module$ebnf$2\", \"symbols\": [\"moduleComponentWithSep\"] },\n        { \"name\": \"module$ebnf$2\", \"symbols\": [\"module$ebnf$2\", \"moduleComponentWithSep\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"module\", \"symbols\": [\"module$ebnf$1\", \"module$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return $2.reduce(function (a, b) { return ({\n                    stmts: __spreadArray(__spreadArray([], a.stmts), b.stmts),\n                    procs: __spreadArray(__spreadArray([], a.procs), b.procs),\n                    udts: __spreadArray(__spreadArray([], a.udts), b.udts),\n                }); });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"stmtWithSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    stmts: [$1],\n                    procs: [],\n                    udts: [],\n                });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"proc\", \"stmtSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return ({\n                    stmts: [],\n                    procs: $1 ? [$1] : [],\n                    udts: [],\n                });\n            }\n        },\n        { \"name\": \"moduleComponentWithSep\", \"symbols\": [\"udt\", \"stmtSep\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return ({\n                    stmts: [],\n                    procs: [],\n                    udts: $1 ? [$1] : [],\n                });\n            }\n        },\n        { \"name\": \"proc\", \"symbols\": [\"fnProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"subProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"defFnExprProc\"], \"postprocess\": id },\n        { \"name\": \"proc\", \"symbols\": [\"procDecl\"], \"postprocess\": discard },\n        { \"name\": \"fnProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"fnProc$ebnf$1\", \"symbols\": [\"fnProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"fnProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fnProc$ebnf$2\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC)], \"postprocess\": id },\n        { \"name\": \"fnProc$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fnProc\", \"symbols\": [(lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"fnProc$ebnf$1\", \"fnProc$ebnf$2\", \"stmts\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: types_1.ProcType.FN, name: $2.value, params: $3 ? $3[1] : [], stmts: $5, isDefaultStatic: !!$4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"subProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"subProc$ebnf$1\", \"symbols\": [\"subProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"subProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"subProc$ebnf$2\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC)], \"postprocess\": id },\n        { \"name\": \"subProc$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"subProc\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"subProc$ebnf$1\", \"subProc$ebnf$2\", \"stmts\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: types_1.ProcType.SUB, name: $2.value, params: $3 ? $3[1] : [], stmts: $5, isDefaultStatic: !!$4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defFnExprProc$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"defFnExprProc$ebnf$1\", \"symbols\": [\"defFnExprProc$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"defFnExprProc$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"defFnExprProc\", \"symbols\": [(lexer_1.default.has(\"DEF\") ? { type: \"DEF\" } : DEF), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"defFnExprProc$ebnf$1\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a, position, reject) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                if (!$2.value.toLowerCase().startsWith('fn')) {\n                    return reject;\n                }\n                return __assign({ type: types_1.ProcType.DEF_FN, name: $2.value, params: $3 ? $3[1] : [], stmts: [\n                        __assign({ type: ast_1.StmtType.ASSIGN, targetExpr: __assign({ type: ast_1.ExprType.VAR_REF, name: $2.value }, useLoc($4)), valueExpr: $5 }, useLoc($4))\n                    ], isDefaultStatic: false }, useLoc($1));\n            }\n        },\n        { \"name\": \"procDecl$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)] },\n        { \"name\": \"procDecl$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"procDecl$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"params\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"procDecl$ebnf$1\", \"symbols\": [\"procDecl$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"procDecl$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"procDecl\", \"symbols\": [(lexer_1.default.has(\"DECLARE\") ? { type: \"DECLARE\" } : DECLARE), \"procDecl$subexpression$1\", (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"procDecl$ebnf$1\"], \"postprocess\": discard },\n        { \"name\": \"params\", \"symbols\": [], \"postprocess\": function () { return []; } },\n        { \"name\": \"params$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"params$ebnf$1$subexpression$1\", \"symbols\": [\"param\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"params$ebnf$1\", \"symbols\": [\"params$ebnf$1\", \"params$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"params\", \"symbols\": [\"params$ebnf$1\", \"param\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"param\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"param\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ name: $1.value, typeExpr: __assign({ type: ast_1.DataTypeExprType.ARRAY, elementTypeExpr: $4, dimensionSpecExprs: [] }, useLoc($1)) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"udt\", \"symbols\": [(lexer_1.default.has(\"TYPE\") ? { type: \"TYPE\" } : TYPE), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"fieldExprs\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"TYPE\") ? { type: \"TYPE\" } : TYPE)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ name: $2.value, fieldSpecExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"fieldExprs$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs\", \"symbols\": [\"fieldExprs$ebnf$1\"], \"postprocess\": function () { return []; } },\n        { \"name\": \"fieldExprs$ebnf$2\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs$ebnf$3\", \"symbols\": [] },\n        { \"name\": \"fieldExprs$ebnf$3$subexpression$1\", \"symbols\": [\"fieldExpr\", \"stmtSep\"] },\n        { \"name\": \"fieldExprs$ebnf$3\", \"symbols\": [\"fieldExprs$ebnf$3\", \"fieldExprs$ebnf$3$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"fieldExprs$ebnf$4\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"fieldExprs$ebnf$4\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"fieldExprs\", \"symbols\": [\"fieldExprs$ebnf$2\", \"fieldExprs$ebnf$3\", \"fieldExpr\", \"fieldExprs$ebnf$4\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return __spreadArray(__spreadArray([], ($2 ? $2.map(function (_a) {\n                    var $2_1 = _a[0], $2_2 = _a[1];\n                    return $2_1;\n                }) : [])), [\n                    $3,\n                ]);\n            }\n        },\n        { \"name\": \"fieldExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"stmts$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmts$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmts$ebnf$2\", \"symbols\": [] },\n        { \"name\": \"stmts$ebnf$2\", \"symbols\": [\"stmts$ebnf$2\", \"stmtWithSep\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"stmts\", \"symbols\": [\"stmts$ebnf$1\", \"stmts$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return $2;\n            } },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)] },\n        { \"name\": \"stmtSep$ebnf$1\", \"symbols\": [\"stmtSep$ebnf$1$subexpression$1\"] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"stmtSep$ebnf$1$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)] },\n        { \"name\": \"stmtSep$ebnf$1\", \"symbols\": [\"stmtSep$ebnf$1\", \"stmtSep$ebnf$1$subexpression$2\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"stmtSep\", \"symbols\": [\"stmtSep$ebnf$1\"], \"postprocess\": discard },\n        { \"name\": \"stmtWithSep$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"labelStmt\", \"stmtWithSep$ebnf$1\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"nonLabelStmt\", \"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$2\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"stmtWithSep$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"stmtWithSep\", \"symbols\": [\"singleLineIfStmt\", \"stmtWithSep$ebnf$2\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"dimStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"assignStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"constStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"gotoStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"blockIfStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"selectStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"whileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doWhileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doUntilStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"loopWhileStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"loopUntilStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"doLoopStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitLoopStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"forStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"nextStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitForStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"gosubStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"returnStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"callStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"exitProcStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"endStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"swapStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"printStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"inputStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"defTypeStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"dataStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"readStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"restoreStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"callStmtWithOptParams\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"defSegStmt\"], \"postprocess\": id },\n        { \"name\": \"nonLabelStmt\", \"symbols\": [\"viewPrintStmt\"], \"postprocess\": id },\n        { \"name\": \"labelStmt\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0];\n                return $1.isFirstTokenOnLine ? __assign({ type: ast_1.StmtType.LABEL, label: $1.value }, useLoc($1)) : reject;\n            }\n        },\n        { \"name\": \"labelStmt\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0], $2 = _a[1];\n                // A line like \"f: f:\" should parse as a label \"f\" followed by an invocation of the\n                // sub \"f\", so need to explicitly disambiguate here.\n                return $1.isFirstTokenOnLine ? __assign({ type: ast_1.StmtType.LABEL, label: $1.value }, useLoc($1)) : reject;\n            }\n        },\n        { \"name\": \"dimStmt$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"SHARED\") ? { type: \"SHARED\" } : SHARED)], \"postprocess\": id },\n        { \"name\": \"dimStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"DIM\") ? { type: \"DIM\" } : DIM), \"dimStmt$ebnf$1\", \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: $2 ? ast_1.DimType.SHARED : ast_1.DimType.LOCAL, varDecls: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"STATIC\") ? { type: \"STATIC\" } : STATIC), \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: ast_1.DimType.STATIC, varDecls: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimStmt\", \"symbols\": [(lexer_1.default.has(\"SHARED\") ? { type: \"SHARED\" } : SHARED), \"varDecls\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DIM, dimType: ast_1.DimType.SHARED, varDecls: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varDecls$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"varDecls$ebnf$1$subexpression$1\", \"symbols\": [\"varDecl\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"varDecls$ebnf$1\", \"symbols\": [\"varDecls$ebnf$1\", \"varDecls$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"varDecls\", \"symbols\": [\"varDecls$ebnf$1\", \"varDecl\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"varDecl\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ name: $1.value, typeExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varDecl$ebnf$1\", \"symbols\": [\"dimensionSpecExprs\"], \"postprocess\": id },\n        { \"name\": \"varDecl$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"varDecl\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"varDecl$ebnf$1\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN), \"singularTypeExprOrDefault\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ name: $1.value, typeExpr: __assign({ type: ast_1.DataTypeExprType.ARRAY, elementTypeExpr: $5, dimensionSpecExprs: $3 !== null && $3 !== void 0 ? $3 : [] }, useLoc($1)) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dimensionSpecExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"dimensionSpecExprs$ebnf$1$subexpression$1\", \"symbols\": [\"dimensionSpecExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"dimensionSpecExprs$ebnf$1\", \"symbols\": [\"dimensionSpecExprs$ebnf$1\", \"dimensionSpecExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"dimensionSpecExprs\", \"symbols\": [\"dimensionSpecExprs$ebnf$1\", \"dimensionSpecExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"dimensionSpecExpr\", \"symbols\": [\"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ maxIdxExpr: $1 }, useLoc($1)));\n            } },\n        { \"name\": \"dimensionSpecExpr\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ minIdxExpr: $1, maxIdxExpr: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"assignStmt$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"LET\") ? { type: \"LET\" } : LET)], \"postprocess\": id },\n        { \"name\": \"assignStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"assignStmt\", \"symbols\": [\"assignStmt$ebnf$1\", \"lhsExpr\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.ASSIGN, targetExpr: $2, valueExpr: $4 }, useLoc($1 || $2)));\n            }\n        },\n        { \"name\": \"constStmt\", \"symbols\": [(lexer_1.default.has(\"CONST\") ? { type: \"CONST\" } : CONST), \"constDefs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.CONST, constDefs: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"constDefs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"constDefs$ebnf$1$subexpression$1\", \"symbols\": [\"constDef\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"constDefs$ebnf$1\", \"symbols\": [\"constDefs$ebnf$1\", \"constDefs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"constDefs\", \"symbols\": [\"constDefs$ebnf$1\", \"constDef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [\n                    $2,\n                ]);\n            }\n        },\n        { \"name\": \"constDef\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ name: $1.value, valueExpr: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"gotoStmt\", \"symbols\": [(lexer_1.default.has(\"GOTO\") ? { type: \"GOTO\" } : GOTO), \"labelRef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.GOTO, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singleLineIfStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"singleLineStmts\"] },\n        { \"name\": \"singleLineIfStmt$ebnf$1\", \"symbols\": [\"singleLineIfStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"singleLineIfStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"singleLineIfStmt\", \"symbols\": [(lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), \"singleLineStmts\", \"singleLineIfStmt$ebnf$1\", (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: ast_1.StmtType.IF, ifBranches: [__assign({ condExpr: $2, stmts: $4 }, useLoc($1))], elseBranch: $5 ? __assign({ stmts: $5[1] }, useLoc($5[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"blockIfStmt$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"blockIfStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSEIF\") ? { type: \"ELSEIF\" } : ELSEIF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE), \"stmts\"] },\n        { \"name\": \"blockIfStmt$ebnf$1\", \"symbols\": [\"blockIfStmt$ebnf$1\", \"blockIfStmt$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"blockIfStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"stmts\"] },\n        { \"name\": \"blockIfStmt$ebnf$2\", \"symbols\": [\"blockIfStmt$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"blockIfStmt$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"blockIfStmt\", \"symbols\": [(lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF), \"expr\", (lexer_1.default.has(\"THEN\") ? { type: \"THEN\" } : THEN), (lexer_1.default.has(\"NEWLINE\") ? { type: \"NEWLINE\" } : NEWLINE), \"stmts\", \"blockIfStmt$ebnf$1\", \"blockIfStmt$ebnf$2\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"IF\") ? { type: \"IF\" } : IF)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6], $8 = _a[7], $9 = _a[8];\n                return (__assign({ type: ast_1.StmtType.IF, ifBranches: __spreadArray([\n                        __assign({ condExpr: $2, stmts: $5 }, useLoc($1))\n                    ], $6.map(function (_a) {\n                        var $6_1 = _a[0], $6_2 = _a[1], $6_3 = _a[2], $6_4 = _a[3], $6_5 = _a[4];\n                        return (__assign({ condExpr: $6_2, stmts: $6_5 }, useLoc($6_1)));\n                    })), elseBranch: $7 ? __assign({ stmts: $7[1] }, useLoc($7[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"selectStmt$ebnf$1\", \"symbols\": [\"stmtSep\"], \"postprocess\": id },\n        { \"name\": \"selectStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"selectStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"caseExprs\", \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$2\", \"symbols\": [\"selectStmt$ebnf$2$subexpression$1\"] },\n        { \"name\": \"selectStmt$ebnf$2$subexpression$2\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"caseExprs\", \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$2\", \"symbols\": [\"selectStmt$ebnf$2\", \"selectStmt$ebnf$2$subexpression$2\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"selectStmt$ebnf$3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), (lexer_1.default.has(\"ELSE\") ? { type: \"ELSE\" } : ELSE), \"stmts\"] },\n        { \"name\": \"selectStmt$ebnf$3\", \"symbols\": [\"selectStmt$ebnf$3$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"selectStmt$ebnf$3\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"selectStmt\", \"symbols\": [(lexer_1.default.has(\"SELECT\") ? { type: \"SELECT\" } : SELECT), (lexer_1.default.has(\"CASE\") ? { type: \"CASE\" } : CASE), \"expr\", \"selectStmt$ebnf$1\", \"selectStmt$ebnf$2\", \"selectStmt$ebnf$3\", (lexer_1.default.has(\"END\") ? { type: \"END\" } : END), (lexer_1.default.has(\"SELECT\") ? { type: \"SELECT\" } : SELECT)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6], $8 = _a[7];\n                return (__assign({ type: ast_1.StmtType.SELECT, testExpr: $3, ifBranches: $5.map(function (_a) {\n                        var $5_1 = _a[0], $5_2 = _a[1], $5_3 = _a[2];\n                        return (__assign({ condExprs: $5_2, stmts: $5_3 }, useLoc($5_1)));\n                    }), elseBranch: $6 ? __assign({ stmts: $6[2] }, useLoc($6[0])) : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"caseExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"caseExprs$ebnf$1$subexpression$1\", \"symbols\": [\"caseExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"caseExprs$ebnf$1\", \"symbols\": [\"caseExprs$ebnf$1\", \"caseExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"caseExprs\", \"symbols\": [\"caseExprs$ebnf$1\", \"caseExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"caseExpr\", \"symbols\": [\"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    type: ast_1.CaseExprType.VALUE,\n                    valueExpr: $1,\n                });\n            }\n        },\n        { \"name\": \"caseExpr\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return ({\n                    type: ast_1.CaseExprType.RANGE,\n                    lowerBoundExpr: $1,\n                    upperBoundExpr: $3,\n                });\n            }\n        },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NE\") ? { type: \"NE\" } : NE)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GT\") ? { type: \"GT\" } : GT)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GTE\") ? { type: \"GTE\" } : GTE)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LT\") ? { type: \"LT\" } : LT)] },\n        { \"name\": \"caseExpr$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LTE\") ? { type: \"LTE\" } : LTE)] },\n        { \"name\": \"caseExpr\", \"symbols\": [(lexer_1.default.has(\"IS\") ? { type: \"IS\" } : IS), \"caseExpr$subexpression$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return ({\n                    type: ast_1.CaseExprType.COMP,\n                    op: id($2).type.toLowerCase(),\n                    rightExpr: $3,\n                });\n            }\n        },\n        { \"name\": \"whileStmt\", \"symbols\": [(lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\", \"stmts\", (lexer_1.default.has(\"WEND\") ? { type: \"WEND\" } : WEND)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $2, isCondNegated: false, stmts: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doWhileStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), (lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\", \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $3, isCondNegated: false, stmts: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doUntilStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), (lexer_1.default.has(\"UNTIL\") ? { type: \"UNTIL\" } : UNTIL), \"expr\", \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_BEFORE_STMTS, condExpr: $3, isCondNegated: true, stmts: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"loopWhileStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP), (lexer_1.default.has(\"WHILE\") ? { type: \"WHILE\" } : WHILE), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS, condExpr: $5, isCondNegated: false, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"loopUntilStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP), (lexer_1.default.has(\"UNTIL\") ? { type: \"UNTIL\" } : UNTIL), \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4];\n                return (__assign({ type: ast_1.StmtType.COND_LOOP, structure: ast_1.CondLoopStructure.COND_EXPR_AFTER_STMTS, condExpr: $5, isCondNegated: true, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"doLoopStmt\", \"symbols\": [(lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO), \"stmts\", (lexer_1.default.has(\"LOOP\") ? { type: \"LOOP\" } : LOOP)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.UNCOND_LOOP, stmts: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitLoopStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"DO\") ? { type: \"DO\" } : DO)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_LOOP }, useLoc($1)));\n            } },\n        { \"name\": \"forStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STEP\") ? { type: \"STEP\" } : STEP), \"expr\"] },\n        { \"name\": \"forStmt$ebnf$1\", \"symbols\": [\"forStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"forStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"forStmt\", \"symbols\": [(lexer_1.default.has(\"FOR\") ? { type: \"FOR\" } : FOR), \"lhsExpr\", (lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\", \"forStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3], $5 = _a[4], $6 = _a[5], $7 = _a[6];\n                return (__assign({ type: ast_1.StmtType.FOR, counterExpr: $2, startExpr: $4, endExpr: $6, stepExpr: $7 ? $7[1] : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"nextStmt$ebnf$1\", \"symbols\": [\"lhsExprs\"], \"postprocess\": id },\n        { \"name\": \"nextStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"nextStmt\", \"symbols\": [(lexer_1.default.has(\"NEXT\") ? { type: \"NEXT\" } : NEXT), \"nextStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.NEXT, counterExprs: $2 !== null && $2 !== void 0 ? $2 : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitForStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"FOR\") ? { type: \"FOR\" } : FOR)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_FOR }, useLoc($1)));\n            } },\n        { \"name\": \"gosubStmt\", \"symbols\": [(lexer_1.default.has(\"GOSUB\") ? { type: \"GOSUB\" } : GOSUB), \"labelRef\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.GOSUB, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"returnStmt$ebnf$1\", \"symbols\": [\"labelRef\"], \"postprocess\": id },\n        { \"name\": \"returnStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"returnStmt\", \"symbols\": [(lexer_1.default.has(\"RETURN\") ? { type: \"RETURN\" } : RETURN), \"returnStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.RETURN, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"exprs\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)] },\n        { \"name\": \"callStmt$ebnf$1\", \"symbols\": [\"callStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"callStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"callStmt\", \"symbols\": [(lexer_1.default.has(\"CALL\") ? { type: \"CALL\" } : CALL), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"callStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: $2.value, argExprs: $3 ? $3[1] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmt\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), \"exprs\"], \"postprocess\": function (_a, _, reject) {\n                var $1 = _a[0], $2 = _a[1];\n                // A line like \"f: f:\" should parse as a label \"f\" followed by an invocation of the\n                // sub \"f\", so need to explicitly disambiguate here.\n                if ($1.isFirstTokenOnLine && $2.length === 0) {\n                    var nextToken = lexer_1.default.peek();\n                    if (nextToken && nextToken.type === 'COLON') {\n                        return reject;\n                    }\n                }\n                // A line like \"A(0) = 42\" should parse as an assignment rather than a CALL statement.\n                if ($2.length === 1 && $2[0].type === ast_1.ExprType.BINARY_OP && $2[0].op === ast_1.BinaryOp.EQ) {\n                    return reject;\n                }\n                return __assign({ type: ast_1.StmtType.CALL, name: $1.value, argExprs: $2 }, useLoc($1));\n            }\n        },\n        { \"name\": \"exitProcStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"FUNCTION\") ? { type: \"FUNCTION\" } : FUNCTION)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_PROC, procType: types_1.ProcType.FN }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exitProcStmt\", \"symbols\": [(lexer_1.default.has(\"EXIT\") ? { type: \"EXIT\" } : EXIT), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.EXIT_PROC, procType: types_1.ProcType.SUB }, useLoc($1)));\n            }\n        },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"END\") ? { type: \"END\" } : END)] },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SYSTEM\") ? { type: \"SYSTEM\" } : SYSTEM)] },\n        { \"name\": \"endStmt$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STOP\") ? { type: \"STOP\" } : STOP)] },\n        { \"name\": \"endStmt\", \"symbols\": [\"endStmt$subexpression$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.StmtType.END }, useLoc(id($1))));\n            } },\n        { \"name\": \"swapStmt\", \"symbols\": [(lexer_1.default.has(\"SWAP\") ? { type: \"SWAP\" } : SWAP), \"lhsExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA), \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.SWAP, leftExpr: $2, rightExpr: $4 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"printStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"USING\") ? { type: \"USING\" } : USING), \"expr\", (lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)] },\n        { \"name\": \"printStmt$ebnf$1\", \"symbols\": [\"printStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"printStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"printStmt\", \"symbols\": [(lexer_1.default.has(\"PRINT\") ? { type: \"PRINT\" } : PRINT), \"printStmt$ebnf$1\", \"printArgs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.PRINT, args: $3, formatExpr: $2 ? $2[1] : null }, useLoc($1)));\n            }\n        },\n        { \"name\": \"printArgs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"printArgs$ebnf$1$subexpression$1\", \"symbols\": [\"expr\"] },\n        { \"name\": \"printArgs$ebnf$1$subexpression$1\", \"symbols\": [\"printSep\"] },\n        { \"name\": \"printArgs$ebnf$1\", \"symbols\": [\"printArgs$ebnf$1\", \"printArgs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"printArgs\", \"symbols\": [\"printArgs$ebnf$1\"], \"postprocess\": function (_a, location, reject) {\n                var $1 = _a[0];\n                var args = lodash_1.default.flatten($1);\n                // Disambiguate \"fn (x)\" - prefer to parse as function call.\n                for (var i = 0; i < args.length - 1; ++i) {\n                    var arg1 = args[i], arg2 = args[i + 1];\n                    if (typeof arg1 !== 'string' && arg1.type === ast_1.ExprType.VAR_REF &&\n                        typeof arg2 !== 'string' && arg2.type === ast_1.ExprType.UNARY_OP && arg2.op === ast_1.UnaryOp.PARENS) {\n                        return reject;\n                    }\n                }\n                return args;\n            }\n        },\n        { \"name\": \"printSep\", \"symbols\": [(lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)], \"postprocess\": function () { return ast_1.PrintSep.COMMA; } },\n        { \"name\": \"printSep\", \"symbols\": [(lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)], \"postprocess\": function () { return ast_1.PrintSep.SEMICOLON; } },\n        { \"name\": \"inputStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL), \"inputStmtPromptSep\"] },\n        { \"name\": \"inputStmt$ebnf$1\", \"symbols\": [\"inputStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"inputStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"inputStmt\", \"symbols\": [(lexer_1.default.has(\"INPUT\") ? { type: \"INPUT\" } : INPUT), \"inputStmt$ebnf$1\", \"lhsExprs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.INPUT, prompt: $2 ? \"\" + $2[0].value + ($2[1] ? '? ' : '') : '? ', inputType: ast_1.InputType.TOKENIZED, targetExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"inputStmt$ebnf$2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL), \"inputStmtPromptSep\"] },\n        { \"name\": \"inputStmt$ebnf$2\", \"symbols\": [\"inputStmt$ebnf$2$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"inputStmt$ebnf$2\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"inputStmt\", \"symbols\": [(lexer_1.default.has(\"LINE\") ? { type: \"LINE\" } : LINE), (lexer_1.default.has(\"INPUT\") ? { type: \"INPUT\" } : INPUT), \"inputStmt$ebnf$2\", \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.StmtType.INPUT, prompt: $3 ? $3[0].value : '', inputType: ast_1.InputType.LINE, targetExprs: [$4] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"inputStmtPromptSep\", \"symbols\": [(lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)], \"postprocess\": function () { return false; } },\n        { \"name\": \"inputStmtPromptSep\", \"symbols\": [(lexer_1.default.has(\"SEMICOLON\") ? { type: \"SEMICOLON\" } : SEMICOLON)], \"postprocess\": function () { return true; } },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFINT\") ? { type: \"DEFINT\" } : DEFINT), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.integerSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFSNG\") ? { type: \"DEFSNG\" } : DEFSNG), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.singleSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFDBL\") ? { type: \"DEFDBL\" } : DEFDBL), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.doubleSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFLNG\") ? { type: \"DEFLNG\" } : DEFLNG), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.longSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeStmt\", \"symbols\": [(lexer_1.default.has(\"DEFSTR\") ? { type: \"DEFSTR\" } : DEFSTR), \"defTypeRanges\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.DEF_TYPE, typeSpec: types_1.stringSpec(), ranges: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeRanges$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"defTypeRanges$ebnf$1$subexpression$1\", \"symbols\": [\"defTypeRange\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"defTypeRanges$ebnf$1\", \"symbols\": [\"defTypeRanges$ebnf$1\", \"defTypeRanges$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"defTypeRanges\", \"symbols\": [\"defTypeRanges$ebnf$1\", \"defTypeRange\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"defTypeRange\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ minPrefix: $1.value, maxPrefix: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"defTypeRange\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ minPrefix: $1.value, maxPrefix: $3.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dataStmt$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"dataStmt$ebnf$1$subexpression$1\", \"symbols\": [\"dataItem\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"dataStmt$ebnf$1\", \"symbols\": [\"dataStmt$ebnf$1\", \"dataStmt$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"dataStmt\", \"symbols\": [(lexer_1.default.has(\"DATA\") ? { type: \"DATA\" } : DATA), \"dataStmt$ebnf$1\", \"dataItem\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.DATA, data: __spreadArray(__spreadArray([], $2 ? $2.map(function (_a) {\n                        var $2_1 = _a[0], $2_2 = _a[1];\n                        return $2_1;\n                    }) : []), [\n                        $3,\n                    ]) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"dataItem\", \"symbols\": [], \"postprocess\": function () { return buildDataItem(lexer_1.default.lastToken, null); } },\n        { \"name\": \"dataItem\", \"symbols\": [\"literalExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return buildDataItem($1, $1.value);\n            } },\n        { \"name\": \"dataItem\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return buildDataItem($1, $1.value);\n            } },\n        { \"name\": \"readStmt\", \"symbols\": [(lexer_1.default.has(\"READ\") ? { type: \"READ\" } : READ), \"lhsExprs\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.READ, targetExprs: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"restoreStmt$ebnf$1\", \"symbols\": [\"labelRef\"], \"postprocess\": id },\n        { \"name\": \"restoreStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"restoreStmt\", \"symbols\": [(lexer_1.default.has(\"RESTORE\") ? { type: \"RESTORE\" } : RESTORE), \"restoreStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.StmtType.RESTORE, destLabel: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"callStmtWithOptParams$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LOCATE\") ? { type: \"LOCATE\" } : LOCATE)] },\n        { \"name\": \"callStmtWithOptParams$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"COLOR\") ? { type: \"COLOR\" } : COLOR)] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", \"symbols\": [\"expr\"], \"postprocess\": id },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"callStmtWithOptParams$ebnf$1$subexpression$1\", \"symbols\": [\"callStmtWithOptParams$ebnf$1$subexpression$1$ebnf$1\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"callStmtWithOptParams$ebnf$1\", \"symbols\": [\"callStmtWithOptParams$ebnf$1\", \"callStmtWithOptParams$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"callStmtWithOptParams\", \"symbols\": [\"callStmtWithOptParams$subexpression$1\", \"callStmtWithOptParams$ebnf$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: $1[0].value, argExprs: __spreadArray(__spreadArray([], ($2 ? $2.map(function (_a) {\n                        var $2_1 = _a[0], $2_2 = _a[1];\n                        return $2_1 !== null && $2_1 !== void 0 ? $2_1 : __assign({ type: ast_1.ExprType.LITERAL, value: NaN }, useLoc($2_2));\n                    }) : [])), [\n                        $3,\n                    ]) }, useLoc($1[0])));\n            }\n        },\n        { \"name\": \"defSegStmt$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ), \"expr\"] },\n        { \"name\": \"defSegStmt$ebnf$1\", \"symbols\": [\"defSegStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"defSegStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"defSegStmt\", \"symbols\": [(lexer_1.default.has(\"DEF\") ? { type: \"DEF\" } : DEF), (lexer_1.default.has(\"SEG\") ? { type: \"SEG\" } : SEG), \"defSegStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: '__def_seg', argExprs: $3 ? [$3[1]] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"viewPrintStmt$ebnf$1$subexpression$1\", \"symbols\": [\"expr\", (lexer_1.default.has(\"TO\") ? { type: \"TO\" } : TO), \"expr\"] },\n        { \"name\": \"viewPrintStmt$ebnf$1\", \"symbols\": [\"viewPrintStmt$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"viewPrintStmt$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"viewPrintStmt\", \"symbols\": [(lexer_1.default.has(\"VIEW\") ? { type: \"VIEW\" } : VIEW), (lexer_1.default.has(\"PRINT\") ? { type: \"PRINT\" } : PRINT), \"viewPrintStmt$ebnf$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.StmtType.CALL, name: '__view_print', argExprs: $3 ? [$3[0], $3[2]] : [] }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singleLineStmts$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"singleLineStmts$ebnf$1\", \"symbols\": [\"singleLineStmts$ebnf$1\", (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts$ebnf$2\", \"symbols\": [] },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [(lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)] },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"symbols\": [\"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", (lexer_1.default.has(\"COLON\") ? { type: \"COLON\" } : COLON)], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts$ebnf$2$subexpression$1\", \"symbols\": [\"singleLineStmts$ebnf$2$subexpression$1$ebnf$1\", \"nonLabelStmt\"] },\n        { \"name\": \"singleLineStmts$ebnf$2\", \"symbols\": [\"singleLineStmts$ebnf$2\", \"singleLineStmts$ebnf$2$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"singleLineStmts\", \"symbols\": [\"singleLineStmts$ebnf$1\", \"nonLabelStmt\", \"singleLineStmts$ebnf$2\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return __spreadArray([$2], $3.map(function (_a) {\n                    var $3_1 = _a[0], $3_2 = _a[1];\n                    return $3_2;\n                }));\n            }\n        },\n        { \"name\": \"lhsExprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"lhsExprs$ebnf$1$subexpression$1\", \"symbols\": [\"lhsExpr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"lhsExprs$ebnf$1\", \"symbols\": [\"lhsExprs$ebnf$1\", \"lhsExprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"lhsExprs\", \"symbols\": [\"lhsExprs$ebnf$1\", \"lhsExpr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        },\n        { \"name\": \"labelRef$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)] },\n        { \"name\": \"labelRef$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)] },\n        { \"name\": \"labelRef\", \"symbols\": [\"labelRef$subexpression$1\"], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return id($1).value;\n            } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"INTEGER\") ? { type: \"INTEGER\" } : INTEGER)], \"postprocess\": function () { return types_1.integerSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"LONG\") ? { type: \"LONG\" } : LONG)], \"postprocess\": function () { return types_1.longSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"SINGLE\") ? { type: \"SINGLE\" } : SINGLE)], \"postprocess\": function () { return types_1.singleSpec(); } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"DOUBLE\") ? { type: \"DOUBLE\" } : DOUBLE)], \"postprocess\": function () { return types_1.doubleSpec(); } },\n        { \"name\": \"elementaryTypeSpec$ebnf$1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MUL\") ? { type: \"MUL\" } : MUL), \"expr2\"] },\n        { \"name\": \"elementaryTypeSpec$ebnf$1\", \"symbols\": [\"elementaryTypeSpec$ebnf$1$subexpression$1\"], \"postprocess\": id },\n        { \"name\": \"elementaryTypeSpec$ebnf$1\", \"symbols\": [], \"postprocess\": function () { return null; } },\n        { \"name\": \"elementaryTypeSpec\", \"symbols\": [(lexer_1.default.has(\"STRING\") ? { type: \"STRING\" } : STRING), \"elementaryTypeSpec$ebnf$1\"], \"postprocess\": function () { return types_1.stringSpec(); } },\n        { \"name\": \"singularTypeExpr\", \"symbols\": [(lexer_1.default.has(\"AS\") ? { type: \"AS\" } : AS), \"elementaryTypeSpec\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.DataTypeExprType.ELEMENTARY, typeSpec: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singularTypeExpr\", \"symbols\": [(lexer_1.default.has(\"AS\") ? { type: \"AS\" } : AS), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return (__assign({ type: ast_1.DataTypeExprType.UDT, name: $2.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"singularTypeExprOrDefault\", \"symbols\": [], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return ({\n                    type: ast_1.DataTypeExprType.ELEMENTARY,\n                    loc: { line: lexer_1.default.lastToken.line, col: lexer_1.default.lastToken.col },\n                });\n            }\n        },\n        { \"name\": \"singularTypeExprOrDefault\", \"symbols\": [\"singularTypeExpr\"], \"postprocess\": id },\n        { \"name\": \"expr\", \"symbols\": [\"expr10\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"varRefExpr\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"fnCallExpr\"], \"postprocess\": id },\n        { \"name\": \"lhsExpr\", \"symbols\": [\"memberExpr\"], \"postprocess\": id },\n        { \"name\": \"expr10\", \"symbols\": [\"expr9\"], \"postprocess\": id },\n        { \"name\": \"expr10$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"OR\") ? { type: \"OR\" } : OR)] },\n        { \"name\": \"expr10\", \"symbols\": [\"expr10\", \"expr10$subexpression$1\", \"expr9\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr9\", \"symbols\": [\"expr8\"], \"postprocess\": id },\n        { \"name\": \"expr9$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"AND\") ? { type: \"AND\" } : AND)] },\n        { \"name\": \"expr9\", \"symbols\": [\"expr9\", \"expr9$subexpression$1\", \"expr8\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr8\", \"symbols\": [\"expr7\"], \"postprocess\": id },\n        { \"name\": \"expr8$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NOT\") ? { type: \"NOT\" } : NOT)] },\n        { \"name\": \"expr8\", \"symbols\": [\"expr8$subexpression$1\", \"expr7\"], \"postprocess\": buildUnaryOpExpr },\n        { \"name\": \"expr7\", \"symbols\": [\"expr6\"], \"postprocess\": id },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EQ\") ? { type: \"EQ\" } : EQ)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"NE\") ? { type: \"NE\" } : NE)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GT\") ? { type: \"GT\" } : GT)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"GTE\") ? { type: \"GTE\" } : GTE)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LT\") ? { type: \"LT\" } : LT)] },\n        { \"name\": \"expr7$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"LTE\") ? { type: \"LTE\" } : LTE)] },\n        { \"name\": \"expr7\", \"symbols\": [\"expr6\", \"expr7$subexpression$1\", \"expr6\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr6\", \"symbols\": [\"expr5\"], \"postprocess\": id },\n        { \"name\": \"expr6$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"ADD\") ? { type: \"ADD\" } : ADD)] },\n        { \"name\": \"expr6$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"expr6\", \"symbols\": [\"expr6\", \"expr6$subexpression$1\", \"expr5\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr5\", \"symbols\": [\"expr4\"], \"postprocess\": id },\n        { \"name\": \"expr5$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MOD\") ? { type: \"MOD\" } : MOD)] },\n        { \"name\": \"expr5\", \"symbols\": [\"expr5\", \"expr5$subexpression$1\", \"expr4\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr4\", \"symbols\": [\"expr3\"], \"postprocess\": id },\n        { \"name\": \"expr4$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"INTDIV\") ? { type: \"INTDIV\" } : INTDIV)] },\n        { \"name\": \"expr4\", \"symbols\": [\"expr4\", \"expr4$subexpression$1\", \"expr3\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr3\", \"symbols\": [\"expr2\"], \"postprocess\": id },\n        { \"name\": \"expr3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"MUL\") ? { type: \"MUL\" } : MUL)] },\n        { \"name\": \"expr3$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"DIV\") ? { type: \"DIV\" } : DIV)] },\n        { \"name\": \"expr3\", \"symbols\": [\"expr3\", \"expr3$subexpression$1\", \"expr2\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr2\", \"symbols\": [\"expr1\"], \"postprocess\": id },\n        { \"name\": \"expr2$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"SUB\") ? { type: \"SUB\" } : SUB)] },\n        { \"name\": \"expr2\", \"symbols\": [\"expr2$subexpression$1\", \"expr1\"], \"postprocess\": buildUnaryOpExpr },\n        { \"name\": \"expr1\", \"symbols\": [\"expr0\"], \"postprocess\": id },\n        { \"name\": \"expr1$subexpression$1\", \"symbols\": [(lexer_1.default.has(\"EXP\") ? { type: \"EXP\" } : EXP)] },\n        { \"name\": \"expr1\", \"symbols\": [\"expr1\", \"expr1$subexpression$1\", \"expr0\"], \"postprocess\": buildBinaryOpExpr },\n        { \"name\": \"expr0\", \"symbols\": [\"varRefExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"fnCallExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"literalExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [\"memberExpr\"], \"postprocess\": id },\n        { \"name\": \"expr0\", \"symbols\": [(lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"expr\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.ExprType.UNARY_OP, op: ast_1.UnaryOp.PARENS, rightExpr: $2 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"varRefExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.VAR_REF, name: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"fnCallExpr\", \"symbols\": [(lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER), (lexer_1.default.has(\"LPAREN\") ? { type: \"LPAREN\" } : LPAREN), \"exprs\", (lexer_1.default.has(\"RPAREN\") ? { type: \"RPAREN\" } : RPAREN)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2], $4 = _a[3];\n                return (__assign({ type: ast_1.ExprType.FN_CALL, name: $1.value, argExprs: $3 }, useLoc($1)));\n            }\n        },\n        { \"name\": \"literalExpr\", \"symbols\": [\"stringLiteralExpr\"], \"postprocess\": id },\n        { \"name\": \"literalExpr\", \"symbols\": [\"numericLiteralExpr\"], \"postprocess\": id },\n        { \"name\": \"stringLiteralExpr\", \"symbols\": [(lexer_1.default.has(\"STRING_LITERAL\") ? { type: \"STRING_LITERAL\" } : STRING_LITERAL)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.LITERAL, value: $1.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"numericLiteralExpr\", \"symbols\": [(lexer_1.default.has(\"NUMERIC_LITERAL\") ? { type: \"NUMERIC_LITERAL\" } : NUMERIC_LITERAL)], \"postprocess\": function (_a) {\n                var $1 = _a[0];\n                return (__assign({ type: ast_1.ExprType.LITERAL, value: parseFloat($1.value) }, useLoc($1)));\n            }\n        },\n        { \"name\": \"memberExpr\", \"symbols\": [\"lhsExpr\", (lexer_1.default.has(\"DOT\") ? { type: \"DOT\" } : DOT), (lexer_1.default.has(\"IDENTIFIER\") ? { type: \"IDENTIFIER\" } : IDENTIFIER)], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1], $3 = _a[2];\n                return (__assign({ type: ast_1.ExprType.MEMBER, udtExpr: $1, fieldName: $3.value }, useLoc($1)));\n            }\n        },\n        { \"name\": \"exprs\", \"symbols\": [], \"postprocess\": function () { return []; } },\n        { \"name\": \"exprs$ebnf$1\", \"symbols\": [] },\n        { \"name\": \"exprs$ebnf$1$subexpression$1\", \"symbols\": [\"expr\", (lexer_1.default.has(\"COMMA\") ? { type: \"COMMA\" } : COMMA)] },\n        { \"name\": \"exprs$ebnf$1\", \"symbols\": [\"exprs$ebnf$1\", \"exprs$ebnf$1$subexpression$1\"], \"postprocess\": function (d) { return d[0].concat([d[1]]); } },\n        { \"name\": \"exprs\", \"symbols\": [\"exprs$ebnf$1\", \"expr\"], \"postprocess\": function (_a) {\n                var $1 = _a[0], $2 = _a[1];\n                return __spreadArray(__spreadArray([], ($1 ? $1.map(function (_a) {\n                    var $1_1 = _a[0], $1_2 = _a[1];\n                    return $1_1;\n                }) : [])), [$2]);\n            }\n        }\n    ],\n    ParserStart: \"module\",\n};\nexports.default = grammar;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticAnalyzer = void 0;\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar ast_1 = require(\"../lib/ast\");\nvar symbol_table_1 = require(\"../lib/symbol-table\");\nvar types_1 = require(\"../lib/types\");\nvar builtins_1 = require(\"../runtime/builtins\");\n/** Map from variable type declaration suffix to the corresponding type spec. */\nvar TYPE_SUFFIX_MAP = Object.freeze({\n    '%': types_1.integerSpec(),\n    '&': types_1.longSpec(),\n    '!': types_1.singleSpec(),\n    '#': types_1.doubleSpec(),\n    $: types_1.stringSpec(),\n});\n/** Default array dimension spec. */\nvar DEFAULT_DIMENSION_SPEC = [0, 10];\n/** Semantic analysis pass.\n *\n * Main tasks:\n *\n * - Type analysis for symbols, expressions and statements\n * - Build symbol table and resolve references\n */\nvar SemanticAnalyzer = /** @class */ (function (_super) {\n    __extends(SemanticAnalyzer, _super);\n    function SemanticAnalyzer(module, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName;\n        var _this = _super.call(this) || this;\n        _this.module = module;\n        /** Stack of UDTs being resolved. Used to detect cycles. */\n        _this.udtStack = [];\n        /** The current proc being visited, or null if currently visiting module-level nodes. */\n        _this.currentProc = null;\n        /** Default type based on first letter of identifier. */\n        _this.defTypeMap = {};\n        _this.sourceFileName = sourceFileName;\n        return _this;\n    }\n    SemanticAnalyzer.prototype.run = function () {\n        this.visitModule(this.module);\n    };\n    SemanticAnalyzer.prototype.visitModule = function (module) {\n        this.setUpDefTypeMap();\n        // Resolve UDT types.\n        this.udtStack = [];\n        module.udts.forEach(this.visitUdt.bind(this));\n        // Resolve type signatures of procs.\n        module.procs.forEach(this.preprocessProc.bind(this));\n        this.currentProc = null;\n        module.localSymbols = [];\n        module.globalSymbols = [];\n        module.labels = this.getLabels(module.stmts);\n        this.acceptAll(module.stmts);\n        this.acceptAll(module.procs);\n    };\n    SemanticAnalyzer.prototype.preprocessProc = function (node) {\n        var _this = this;\n        node.paramSymbols = node.params.map(function (param) { return ({\n            name: param.name,\n            varType: symbol_table_1.VarType.ARG,\n            typeSpec: _this.getTypeSpecForVarDeclOrParam(param),\n            varScope: symbol_table_1.VarScope.LOCAL,\n        }); });\n        node.localSymbols = [];\n        if (ast_1.isFnProcOrDefFnProc(node)) {\n            if (!node.returnTypeSpec) {\n                node.returnTypeSpec = this.getDefaultTypeSpecFromName(node.name);\n            }\n            node.localSymbols.push({\n                name: node.name,\n                varType: symbol_table_1.VarType.VAR,\n                typeSpec: node.returnTypeSpec,\n                varScope: symbol_table_1.VarScope.LOCAL,\n            });\n        }\n        node.labels = this.getLabels(node.stmts);\n    };\n    SemanticAnalyzer.prototype.getLabels = function (stmts) {\n        var labelLocMap = {};\n        for (var _i = 0, stmts_1 = stmts; _i < stmts_1.length; _i++) {\n            var stmt = stmts_1[_i];\n            if (stmt.type !== ast_1.StmtType.LABEL) {\n                continue;\n            }\n            if (labelLocMap[stmt.label]) {\n                this.throwError(\"Label \\\"\" + stmt.label + \"\\\" already defined on line \" + labelLocMap[stmt.label].line, stmt);\n            }\n            labelLocMap[stmt.label] = stmt.loc;\n        }\n        return Object.keys(labelLocMap);\n    };\n    /** Resolve UDT type spec using depth first search. */\n    SemanticAnalyzer.prototype.visitUdt = function (udt) {\n        var _a;\n        if (udt.typeSpec) {\n            return;\n        }\n        // Check if we have a cycle.\n        var udtStackIdx = this.udtStack.indexOf(udt);\n        if (udtStackIdx >= 0) {\n            var udtsInCycle = __spreadArray(__spreadArray([], this.udtStack.slice(udtStackIdx)), [udt]);\n            this.throwError('Dependency cycle in user-defined types: ' +\n                udtsInCycle.map(function (_a) {\n                    var name = _a.name;\n                    return name;\n                }).join(' -> '), udt);\n        }\n        // Resolve typeSpec of each field.\n        this.udtStack.push(udt);\n        var typeSpec = {\n            type: types_1.DataType.UDT,\n            name: udt.name,\n            fieldSpecs: [],\n        };\n        for (var _i = 0, _b = udt.fieldSpecExprs; _i < _b.length; _i++) {\n            var _c = _b[_i], fieldName = _c.name, typeExpr = _c.typeExpr;\n            var fieldTypeSpec = void 0;\n            switch (typeExpr.type) {\n                case ast_1.DataTypeExprType.ELEMENTARY:\n                    fieldTypeSpec =\n                        (_a = typeExpr.typeSpec) !== null && _a !== void 0 ? _a : this.getDefaultTypeSpecFromName(fieldName);\n                    break;\n                case ast_1.DataTypeExprType.UDT:\n                    var fieldUdt = this.lookupUdtOrThrow(typeExpr, typeExpr.name);\n                    this.visitUdt(fieldUdt);\n                    fieldTypeSpec = fieldUdt.typeSpec;\n                    break;\n                default:\n                    this.throwError(\"Unexpected field type: \" + JSON.stringify(typeExpr), typeExpr);\n            }\n            typeSpec.fieldSpecs.push({ name: fieldName, typeSpec: fieldTypeSpec });\n        }\n        udt.typeSpec = typeSpec;\n    };\n    SemanticAnalyzer.prototype.visitProc = function (node) {\n        this.currentProc = node;\n        this.acceptAll(node.stmts);\n        this.currentProc = null;\n    };\n    SemanticAnalyzer.prototype.visitLabelStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitDimStmt = function (node) {\n        if (node.dimType === ast_1.DimType.STATIC && !this.currentProc) {\n            this.throwError('STATIC statement can only be used inside a procedure.', node);\n        }\n        for (var _i = 0, _a = node.varDecls; _i < _a.length; _i++) {\n            var varDecl = _a[_i];\n            var typeSpec = this.getTypeSpecForVarDeclOrParam(varDecl);\n            var resolvedSymbol = this.lookupSymbol(varDecl.name);\n            if (resolvedSymbol) {\n                if (resolvedSymbol.varScope === symbol_table_1.VarScope.LOCAL) {\n                    this.throwError(\"Variable already defined in local scope: \\\"\" + varDecl.name + \"\\\"\", node);\n                }\n                else if (resolvedSymbol.varScope === symbol_table_1.VarScope.GLOBAL &&\n                    node.dimType === ast_1.DimType.SHARED &&\n                    !(types_1.areMatchingSingularTypes(typeSpec, resolvedSymbol.typeSpec) ||\n                        (types_1.isArray(typeSpec) &&\n                            types_1.isArray(resolvedSymbol.typeSpec) &&\n                            types_1.areMatchingSingularTypes(typeSpec.elementTypeSpec, resolvedSymbol.typeSpec.elementTypeSpec)))) {\n                    this.throwError(\"Variable already defined in global scope: \\\"\" + varDecl.name + \"\\\"\", node);\n                }\n                varDecl.symbol = resolvedSymbol;\n            }\n            else {\n                var symbol = void 0;\n                switch (node.dimType) {\n                    case ast_1.DimType.SHARED:\n                        // If this symbol is already defined as a local var at the module level, promote it to\n                        // global.\n                        var moduleLocalSymbol = symbol_table_1.lookupSymbol(this.module.localSymbols, varDecl.name);\n                        if (moduleLocalSymbol) {\n                            symbol = moduleLocalSymbol;\n                            this.module.localSymbols.splice(this.module.localSymbols.indexOf(moduleLocalSymbol), 1);\n                            symbol.varScope = symbol_table_1.VarScope.GLOBAL;\n                        }\n                        else {\n                            symbol = {\n                                name: varDecl.name,\n                                varType: symbol_table_1.VarType.VAR,\n                                typeSpec: typeSpec,\n                                varScope: symbol_table_1.VarScope.GLOBAL,\n                            };\n                        }\n                        this.module.globalSymbols.push(symbol);\n                        break;\n                    case ast_1.DimType.LOCAL:\n                        symbol = this.createLocalVarSymbol({\n                            name: varDecl.name,\n                            typeSpec: typeSpec,\n                        });\n                        this.addLocalSymbol(symbol);\n                        break;\n                    case ast_1.DimType.STATIC:\n                        symbol = {\n                            name: varDecl.name,\n                            varType: symbol_table_1.VarType.STATIC_VAR,\n                            typeSpec: typeSpec,\n                            varScope: symbol_table_1.VarScope.LOCAL,\n                        };\n                        this.addLocalSymbol(symbol);\n                        break;\n                    default:\n                        this.throwError(\"Unknown DimType: \" + JSON.stringify(node.dimType), node);\n                }\n                varDecl.symbol = symbol;\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitAssignStmt = function (node) {\n        this.accept(node.targetExpr);\n        this.accept(node.valueExpr);\n        var targetTypeSpec = node.targetExpr.typeSpec;\n        var valueTypeSpec = node.valueExpr.typeSpec;\n        if (!types_1.areMatchingSingularTypes(targetTypeSpec, valueTypeSpec)) {\n            this.throwError(\"Cannot assign \" + types_1.typeSpecName(valueTypeSpec) + \" value \" +\n                (\"to \" + types_1.typeSpecName(targetTypeSpec) + \" variable\"), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitConstStmt = function (node) {\n        for (var _i = 0, _a = node.constDefs; _i < _a.length; _i++) {\n            var constDef = _a[_i];\n            this.accept(constDef.valueExpr);\n            var resolvedSymbol = this.lookupSymbol(constDef.name);\n            if (resolvedSymbol) {\n                if (resolvedSymbol.varScope === symbol_table_1.VarScope.LOCAL) {\n                    this.throwError(\"Constant already defined in local scope: \\\"\" + constDef.name + \"\\\"\", node);\n                }\n                else if (resolvedSymbol.varScope === symbol_table_1.VarScope.GLOBAL &&\n                    !this.currentProc) {\n                    this.throwError(\"Constant already defined in global scope: \\\"\" + constDef.name + \"\\\"\", node);\n                }\n            }\n            var symbolProps = {\n                name: constDef.name,\n                varType: symbol_table_1.VarType.CONST,\n                typeSpec: constDef.valueExpr.typeSpec,\n            };\n            if (this.currentProc) {\n                var symbol = __assign(__assign({}, symbolProps), { varScope: symbol_table_1.VarScope.LOCAL });\n                this.addLocalSymbol(symbol);\n                constDef.symbol = symbol;\n            }\n            else {\n                var symbol = __assign(__assign({}, symbolProps), { varScope: symbol_table_1.VarScope.GLOBAL });\n                this.module.globalSymbols.push(symbol);\n                constDef.symbol = symbol;\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitGotoStmt = function (node) {\n        var _a;\n        node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n    };\n    SemanticAnalyzer.prototype.requireNumericExpr = function () {\n        var exprs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            exprs[_i] = arguments[_i];\n        }\n        for (var _a = 0, exprs_1 = exprs; _a < exprs_1.length; _a++) {\n            var expr = exprs_1[_a];\n            this.accept(expr);\n            if (!types_1.isNumeric(expr.typeSpec)) {\n                this.throwError(\"Expected numeric expression (got \" + types_1.typeSpecName(expr.typeSpec) + \")\", expr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.requireElementaryTypeExpr = function () {\n        var exprs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            exprs[_i] = arguments[_i];\n        }\n        for (var _a = 0, exprs_2 = exprs; _a < exprs_2.length; _a++) {\n            var expr = exprs_2[_a];\n            this.accept(expr);\n            if (!types_1.isElementaryType(expr.typeSpec)) {\n                this.throwError(\"Expected elementary type expression instead of \" + expr.typeSpec.type, expr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitIfStmt = function (node) {\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var _b = _a[_i], condExpr = _b.condExpr, stmts = _b.stmts;\n            this.requireNumericExpr(condExpr);\n            this.acceptAll(stmts);\n        }\n        if (node.elseBranch) {\n            this.acceptAll(node.elseBranch.stmts);\n        }\n    };\n    SemanticAnalyzer.prototype.visitSelectStmt = function (node) {\n        this.accept(node.testExpr);\n        for (var _i = 0, _a = node.ifBranches; _i < _a.length; _i++) {\n            var _b = _a[_i], condExprs = _b.condExprs, stmts = _b.stmts;\n            for (var _c = 0, condExprs_1 = condExprs; _c < condExprs_1.length; _c++) {\n                var condExpr = condExprs_1[_c];\n                var exprs = [];\n                switch (condExpr.type) {\n                    case ast_1.CaseExprType.VALUE:\n                        exprs.push(condExpr.valueExpr);\n                        break;\n                    case ast_1.CaseExprType.RANGE:\n                        exprs.push(condExpr.lowerBoundExpr, condExpr.upperBoundExpr);\n                        break;\n                    case ast_1.CaseExprType.COMP:\n                        exprs.push(condExpr.rightExpr);\n                        break;\n                    default:\n                        this.throwError(\"Unknown case expression type: \" + JSON.stringify(condExpr), node);\n                }\n                this.acceptAll(exprs);\n                for (var _d = 0, exprs_3 = exprs; _d < exprs_3.length; _d++) {\n                    var expr = exprs_3[_d];\n                    if (!types_1.areMatchingElementaryTypes(node.testExpr.typeSpec, expr.typeSpec)) {\n                        this.throwError('Case expression type does not match test expression: ' +\n                            (\"expected \" + types_1.typeSpecName(node.testExpr.typeSpec) + \", \") +\n                            (\"got \" + types_1.typeSpecName(expr.typeSpec)), expr);\n                    }\n                }\n            }\n            this.acceptAll(stmts);\n        }\n        if (node.elseBranch) {\n            this.acceptAll(node.elseBranch.stmts);\n        }\n    };\n    SemanticAnalyzer.prototype.visitCondLoopStmt = function (node) {\n        this.requireNumericExpr(node.condExpr);\n        this.acceptAll(node.stmts);\n    };\n    SemanticAnalyzer.prototype.visitUncondLoopStmt = function (node) {\n        this.acceptAll(node.stmts);\n    };\n    SemanticAnalyzer.prototype.visitExitLoopStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitForStmt = function (node) {\n        this.requireNumericExpr.apply(this, __spreadArray([node.counterExpr,\n            node.startExpr,\n            node.endExpr], (node.stepExpr ? [node.stepExpr] : [])));\n    };\n    SemanticAnalyzer.prototype.visitNextStmt = function (node) {\n        this.requireNumericExpr.apply(this, node.counterExprs);\n    };\n    SemanticAnalyzer.prototype.visitExitForStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitGosubStmt = function (node) {\n        var _a;\n        node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n    };\n    SemanticAnalyzer.prototype.visitReturnStmt = function (node) {\n        var _a;\n        if (node.destLabel) {\n            node.destLabel = this.lookupLabelOrThrow(node, (_a = this.currentProc) !== null && _a !== void 0 ? _a : this.module, node.destLabel);\n        }\n    };\n    SemanticAnalyzer.prototype.visitCallStmt = function (node) {\n        this.acceptAll(node.argExprs);\n        var resolvedSub = this.lookupSub(node.name, node.argExprs.map(function (_a) {\n            var typeSpec = _a.typeSpec;\n            return typeSpec;\n        }));\n        if (!resolvedSub ||\n            (resolvedSub.defType === types_1.ProcDefType.MODULE &&\n                resolvedSub.proc.type !== types_1.ProcType.SUB)) {\n            this.throwError(types_1.procTypeName(types_1.ProcType.SUB) + \" not found: \\\"\" + node.name + \"\\\"\", node);\n        }\n        this.visitProcCall(resolvedSub, node);\n    };\n    SemanticAnalyzer.prototype.visitExitProcStmt = function (node) {\n        if (!this.currentProc || this.currentProc.type !== node.procType) {\n            this.throwError(\"EXIT statement must be placed inside a \" + types_1.procTypeName(node.procType), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitEndStmt = function (node) { };\n    SemanticAnalyzer.prototype.visitSwapStmt = function (node) {\n        this.accept(node.leftExpr);\n        this.accept(node.rightExpr);\n        if (!types_1.areMatchingSingularTypes(node.leftExpr.typeSpec, node.rightExpr.typeSpec)) {\n            this.throwError(\"Cannot swap a \" + types_1.typeSpecName(node.leftExpr.typeSpec) + \" \" +\n                (\"variable with a \" + types_1.typeSpecName(node.rightExpr.typeSpec) + \" variable\"), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitPrintStmt = function (node) {\n        if (node.formatExpr) {\n            this.accept(node.formatExpr);\n            if (!types_1.isString(node.formatExpr.typeSpec)) {\n                this.throwError('Expected format expression to be a string, ' +\n                    (\"got \" + types_1.typeSpecName(node.formatExpr.typeSpec)), node.formatExpr);\n            }\n        }\n        for (var _i = 0, _a = node.args; _i < _a.length; _i++) {\n            var arg = _a[_i];\n            if (typeof arg === 'string') {\n                continue;\n            }\n            this.requireElementaryTypeExpr(arg);\n        }\n    };\n    SemanticAnalyzer.prototype.visitInputStmt = function (node) {\n        switch (node.inputType) {\n            case ast_1.InputType.TOKENIZED:\n                this.requireElementaryTypeExpr.apply(this, node.targetExprs);\n                break;\n            case ast_1.InputType.LINE:\n                if (node.targetExprs.length !== 1) {\n                    this.throwError('Expected single destination in LINE INPUT statement, ' +\n                        (\"got \" + node.targetExprs.length), node);\n                }\n                this.accept(node.targetExprs[0]);\n                if (!types_1.isString(node.targetExprs[0].typeSpec)) {\n                    this.throwError(\"Expected string destination in LINE INPUT staement, got \" + node.targetExprs[0].typeSpec.type, node.targetExprs[0]);\n                }\n                break;\n            default:\n                this.throwError(\"Unknown input type: \" + JSON.stringify(node.inputType), node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitDefTypeStmt = function (node) {\n        if (this.currentProc) {\n            this.throwError(\"DEFtype statements are only allowed at module level\", node);\n        }\n        var _loop_1 = function (range) {\n            var _b = [\n                range.minPrefix.toLowerCase(),\n                range.maxPrefix.toLowerCase(),\n            ], minPrefix = _b[0], maxPrefix = _b[1];\n            if (![minPrefix, maxPrefix].every(function (p) { return p.match(/^[a-z]$/) || minPrefix > maxPrefix; })) {\n                this_1.throwError(\"Invalid DEFtype range\", range);\n            }\n            for (var c = minPrefix.charCodeAt(0); c <= maxPrefix.charCodeAt(0); ++c) {\n                this_1.defTypeMap[String.fromCharCode(c)] = node.typeSpec;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = node.ranges; _i < _a.length; _i++) {\n            var range = _a[_i];\n            _loop_1(range);\n        }\n    };\n    SemanticAnalyzer.prototype.visitDataStmt = function (node) {\n        if (this.currentProc) {\n            this.throwError(\"DATA statement must be at module level\", node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitReadStmt = function (node) {\n        if (node.targetExprs.length === 0) {\n            this.throwError('Empty READ statement', node);\n        }\n        for (var _i = 0, _a = node.targetExprs; _i < _a.length; _i++) {\n            var targetExpr = _a[_i];\n            this.accept(targetExpr);\n            if (!types_1.isElementaryType(targetExpr.typeSpec)) {\n                this.throwError('Expected elementary type variable in READ statement ' +\n                    (\"(got \" + types_1.typeSpecName(targetExpr.typeSpec) + \")\"), targetExpr);\n            }\n        }\n    };\n    SemanticAnalyzer.prototype.visitRestoreStmt = function (node) {\n        if (node.destLabel) {\n            node.destLabel = this.lookupLabelOrThrow(node, this.module, node.destLabel);\n        }\n    };\n    SemanticAnalyzer.prototype.visitLiteralExpr = function (node) {\n        if (typeof node.value === 'string') {\n            node.typeSpec = types_1.stringSpec();\n        }\n        else if (typeof node.value === 'number') {\n            // TODO\n            node.typeSpec = types_1.singleSpec();\n        }\n        else {\n            this.throwError(\"Unknown literal expression value type: \" + typeof node.value, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitVarRefExpr = function (node) {\n        var _a;\n        var _b;\n        var symbol = this.lookupSymbol(node.name);\n        if (!symbol) {\n            // VarRef may actually be a function invocation without args.\n            var proc = this.lookupFn(node.name, []);\n            if (proc) {\n                var fnCallExpr = {\n                    type: ast_1.ExprType.FN_CALL,\n                    name: node.name,\n                    argExprs: [],\n                    loc: node.loc,\n                };\n                this.accept(fnCallExpr);\n                Object.assign(node, fnCallExpr);\n                return;\n            }\n            symbol = this.createLocalVarSymbol({\n                name: node.name,\n                // If this VarRefExpr is nested inside a SubscriptExpr, visitSubScriptExpr() will set the\n                // typeSpec for this VarRefExpr based on the index expressions. So we should respect that\n                // here.\n                typeSpec: (_b = node.typeSpec) !== null && _b !== void 0 ? _b : this.getDefaultTypeSpecFromName(node.name),\n            });\n            this.addLocalSymbol(symbol);\n        }\n        _a = [symbol.typeSpec, symbol], node.typeSpec = _a[0], node.symbol = _a[1];\n    };\n    SemanticAnalyzer.prototype.visitFnCallExpr = function (node) {\n        this.acceptAll(node.argExprs);\n        // Try resolving the name as a function.\n        var resolvedFn = this.lookupFn(node.name, node.argExprs.map(function (_a) {\n            var typeSpec = _a.typeSpec;\n            return typeSpec;\n        }));\n        if (resolvedFn) {\n            if (resolvedFn.defType === types_1.ProcDefType.MODULE &&\n                !ast_1.isFnProcOrDefFnProc(resolvedFn.proc)) {\n                this.throwError(\"A \" + types_1.procTypeName(resolvedFn.proc.type) + \" cannot be used in an expression: \\\"\" + node.name + \"\\\"\", node);\n            }\n            this.visitProcCall(resolvedFn, node);\n            node.typeSpec = resolvedFn.returnTypeSpec;\n            return;\n        }\n        // Try resolving as a subscript expression.\n        var subscriptExpr = {\n            type: ast_1.ExprType.SUBSCRIPT,\n            arrayExpr: {\n                type: ast_1.ExprType.VAR_REF,\n                name: node.name,\n                loc: node.loc,\n            },\n            indexExprs: node.argExprs,\n            loc: node.loc,\n        };\n        this.accept(subscriptExpr);\n        Object.assign(node, subscriptExpr);\n    };\n    SemanticAnalyzer.prototype.visitBinaryOpExpr = function (node) {\n        var _this = this;\n        this.accept(node.leftExpr);\n        this.accept(node.rightExpr);\n        var leftTypeSpec = node.leftExpr.typeSpec;\n        var rightTypeSpec = node.rightExpr.typeSpec;\n        var errorMessage = \"Incompatible types for \" + node.op + \" operator: \" +\n            (types_1.typeSpecName(leftTypeSpec) + \" and \" + types_1.typeSpecName(rightTypeSpec));\n        var requireNumericOperands = function () {\n            if (!(types_1.isNumeric(leftTypeSpec) && types_1.isNumeric(rightTypeSpec))) {\n                _this.throwError(errorMessage, node);\n            }\n        };\n        var useCoercedNumericType = function () {\n            node.typeSpec = _this.coerceNumericTypes(leftTypeSpec, rightTypeSpec);\n        };\n        switch (node.op) {\n            case ast_1.BinaryOp.ADD:\n                if (types_1.isString(leftTypeSpec) && types_1.isString(rightTypeSpec)) {\n                    node.typeSpec = types_1.stringSpec();\n                }\n                else {\n                    requireNumericOperands();\n                    useCoercedNumericType();\n                }\n                break;\n            case ast_1.BinaryOp.SUB:\n            case ast_1.BinaryOp.MUL:\n            case ast_1.BinaryOp.EXP:\n            case ast_1.BinaryOp.INTDIV:\n            case ast_1.BinaryOp.MOD:\n                requireNumericOperands();\n                useCoercedNumericType();\n                break;\n            case ast_1.BinaryOp.DIV:\n                requireNumericOperands();\n                node.typeSpec = this.coerceNumericTypes(leftTypeSpec, rightTypeSpec, types_1.singleSpec());\n                break;\n            case ast_1.BinaryOp.AND:\n            case ast_1.BinaryOp.OR:\n                requireNumericOperands();\n                node.typeSpec = types_1.integerSpec();\n                break;\n            case ast_1.BinaryOp.EQ:\n            case ast_1.BinaryOp.NE:\n            case ast_1.BinaryOp.GT:\n            case ast_1.BinaryOp.GTE:\n            case ast_1.BinaryOp.LT:\n            case ast_1.BinaryOp.LTE:\n                if (!types_1.areMatchingElementaryTypes(leftTypeSpec, rightTypeSpec)) {\n                    this.throwError(errorMessage, node);\n                }\n                node.typeSpec = types_1.integerSpec();\n                break;\n            default:\n                this.throwError(\"Unknown operator \" + node.op, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitUnaryOpExpr = function (node) {\n        this.accept(node.rightExpr);\n        var rightTypeSpec = node.rightExpr.typeSpec;\n        switch (node.op) {\n            case ast_1.UnaryOp.NEG:\n                this.requireNumericExpr(node.rightExpr);\n                node.typeSpec = rightTypeSpec;\n                break;\n            case ast_1.UnaryOp.NOT:\n                this.requireNumericExpr(node.rightExpr);\n                node.typeSpec = types_1.integerSpec();\n                break;\n            case ast_1.UnaryOp.PARENS:\n                node.typeSpec = rightTypeSpec;\n                break;\n            default:\n                this.throwError(\"Unknown operator \" + node.op, node);\n        }\n    };\n    SemanticAnalyzer.prototype.visitSubscriptExpr = function (node) {\n        // Hack: treat empty parens (used to pass array to procedures) as reference to the array\n        // variable itself.\n        if (node.indexExprs.length === 0) {\n            this.accept(node.arrayExpr);\n            Object.assign(node, node.arrayExpr);\n            return;\n        }\n        this.acceptAll(node.indexExprs);\n        for (var i = 0; i < node.indexExprs.length; ++i) {\n            var indexExpr = node.indexExprs[i];\n            if (!types_1.isNumeric(indexExpr.typeSpec)) {\n                this.throwError(\"Array index #\" + (i + 1) + \" should be numeric instead of \" + indexExpr.typeSpec.type, indexExpr);\n            }\n        }\n        // Add typeSpec hint for arrayExpr. This will be used to create the underlying variable symbol\n        // if not already found.\n        node.arrayExpr.typeSpec = types_1.arraySpec(this.getDefaultTypeSpecFromName(node.arrayExpr.name), node.indexExprs.map(function () { return DEFAULT_DIMENSION_SPEC; }));\n        this.accept(node.arrayExpr);\n        var arrayTypeSpec = node.arrayExpr.typeSpec;\n        if (!types_1.isArray(arrayTypeSpec)) {\n            this.throwError('Expected array variable in subscript expression, ' +\n                (\"got \" + types_1.typeSpecName(node.arrayExpr.typeSpec)), node.arrayExpr);\n        }\n        if (arrayTypeSpec.dimensionSpecs.length && // Dimension is unknown for array arguments.\n            arrayTypeSpec.dimensionSpecs.length !== node.indexExprs.length) {\n            this.throwError('Wrong number of index expressions: ' +\n                (\"expected \" + arrayTypeSpec.dimensionSpecs.length + \", \") +\n                (\"got \" + node.indexExprs.length), node);\n        }\n        node.typeSpec = node.arrayExpr.typeSpec.elementTypeSpec;\n    };\n    SemanticAnalyzer.prototype.visitMemberExpr = function (node) {\n        this.accept(node.udtExpr);\n        var udtTypeSpec = node.udtExpr.typeSpec;\n        if (!types_1.isUdt(udtTypeSpec)) {\n            this.throwError(\"Expected user-defined type in member expression, got \" + types_1.typeSpecName(udtTypeSpec), node);\n        }\n        var fieldSpec = symbol_table_1.lookupSymbol(udtTypeSpec.fieldSpecs, node.fieldName);\n        if (!fieldSpec) {\n            this.throwError(\"Field \\\"\" + node.fieldName + \"\\\" does not exist \" +\n                (\"on type \\\"\" + types_1.typeSpecName(udtTypeSpec) + \"\\\"\"), node);\n        }\n        node.fieldName = fieldSpec.name; // Normalize case\n        node.typeSpec = fieldSpec.typeSpec;\n    };\n    SemanticAnalyzer.prototype.visitProcCall = function (resolvedProc, node) {\n        node.argTypeProps = [];\n        var paramTypeSpecs;\n        switch (resolvedProc.defType) {\n            case types_1.ProcDefType.BUILTIN:\n                paramTypeSpecs = resolvedProc.builtinProc.paramTypeSpecs;\n                break;\n            case types_1.ProcDefType.MODULE:\n                paramTypeSpecs = resolvedProc.proc.paramSymbols.map(function (_a) {\n                    var typeSpec = _a.typeSpec;\n                    return typeSpec;\n                });\n                break;\n            default:\n                this.throwError(\"Unknown FnDefType: \" + JSON.stringify(resolvedProc), node);\n        }\n        node.procDefType = resolvedProc.defType;\n        if (paramTypeSpecs.length !== node.argExprs.length) {\n            this.throwError(\"Incorrect number of arguments to \\\"\" + node.name + \"\\\": \" +\n                (\"expected \" + paramTypeSpecs.length + \", got \" + node.argExprs.length), node);\n        }\n        for (var i = 0; i < node.argExprs.length; ++i) {\n            var paramTypeSpec = paramTypeSpecs[i];\n            var argExpr = node.argExprs[i];\n            var argTypeSpec = argExpr.typeSpec;\n            var shouldPassByRef = ast_1.isLhsExpr(argExpr) &&\n                // Constants cannot be allowed to be modified by the proc, so must use pass-by-value.\n                !(argExpr.type === ast_1.ExprType.VAR_REF &&\n                    argExpr.symbol.varType === symbol_table_1.VarType.CONST) &&\n                // For built-in procs, we always pass by value in order to take advantage of automatic type\n                // casting (e.g. single -> integer).\n                resolvedProc.defType !== types_1.ProcDefType.BUILTIN;\n            var isCompatible = void 0;\n            if (shouldPassByRef) {\n                // If argument is an LHS expression, the types must match exactly as it may be assigned to\n                // from inside the proc.\n                isCompatible =\n                    lodash_1.default.isEqual(paramTypeSpec, argTypeSpec) ||\n                        (types_1.isArray(paramTypeSpec) &&\n                            types_1.isArray(argTypeSpec) &&\n                            lodash_1.default.isEqual(paramTypeSpec.elementTypeSpec, argTypeSpec.elementTypeSpec));\n            }\n            else {\n                // If argument is not an LHS expression, the types just need to be generally compatible.\n                isCompatible =\n                    types_1.areMatchingSingularTypes(paramTypeSpec, argTypeSpec) ||\n                        (types_1.isArray(paramTypeSpec) &&\n                            types_1.isArray(argTypeSpec) &&\n                            (types_1.areMatchingSingularTypes(paramTypeSpec.elementTypeSpec, argTypeSpec.elementTypeSpec) ||\n                                // Allow builtins to accept arrays of any element type.\n                                resolvedProc.defType === types_1.ProcDefType.BUILTIN));\n            }\n            if (!isCompatible) {\n                this.throwError(\"Incompatible argument \" + (i + 1) + \" to function \\\"\" + node.name + \"\\\": \" +\n                    (\"expected \" + types_1.typeSpecName(paramTypeSpec) + \", \") +\n                    (\"got \" + types_1.typeSpecName(argTypeSpec)), node);\n            }\n            node.argTypeProps.push({ paramTypeSpec: paramTypeSpec, shouldPassByRef: shouldPassByRef });\n        }\n    };\n    /** Computes the output numeric type after an arithmetic operation. */\n    SemanticAnalyzer.prototype.coerceNumericTypes = function () {\n        var typeSpecs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            typeSpecs[_i] = arguments[_i];\n        }\n        var RULES = [\n            { operands: [types_1.integerSpec(), types_1.integerSpec()], result: types_1.integerSpec() },\n            { operands: [types_1.integerSpec(), types_1.longSpec()], result: types_1.longSpec() },\n            { operands: [types_1.integerSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.integerSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.longSpec(), types_1.integerSpec()], result: types_1.longSpec() },\n            { operands: [types_1.longSpec(), types_1.longSpec()], result: types_1.longSpec() },\n            { operands: [types_1.longSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.longSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.singleSpec(), types_1.integerSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.longSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.singleSpec()], result: types_1.singleSpec() },\n            { operands: [types_1.singleSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.integerSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.longSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.singleSpec()], result: types_1.doubleSpec() },\n            { operands: [types_1.doubleSpec(), types_1.doubleSpec()], result: types_1.doubleSpec() },\n        ];\n        if (typeSpecs.length === 0) {\n            throw new Error('Missing arguments');\n        }\n        if (!typeSpecs.every(types_1.isNumeric)) {\n            throw new Error(\"Expected numeric types: \" + JSON.stringify(typeSpecs));\n        }\n        var resultTypeSpec = typeSpecs[0];\n        var _loop_2 = function (i) {\n            var matchingRule = RULES.find(function (_a) {\n                var _b = _a.operands, typeSpec1 = _b[0], typeSpec2 = _b[1];\n                return lodash_1.default.isEqual(typeSpec1, resultTypeSpec) &&\n                    lodash_1.default.isEqual(typeSpec2, typeSpecs[i]);\n            });\n            if (matchingRule) {\n                resultTypeSpec = matchingRule.result;\n            }\n            else {\n                throw new Error('Unknown numeric type combination: ' +\n                    (types_1.typeSpecName(resultTypeSpec) + \" and \" + types_1.typeSpecName(typeSpecs[i])));\n            }\n        };\n        for (var i = 1; i < typeSpecs.length; ++i) {\n            _loop_2(i);\n        }\n        return resultTypeSpec;\n    };\n    SemanticAnalyzer.prototype.getLocalSymbols = function () {\n        // TODO: Handle multiline DEF FN procs.\n        return this.currentProc\n            ? this.currentProc.localSymbols\n            : this.module.localSymbols;\n    };\n    SemanticAnalyzer.prototype.lookupSymbol = function (name) {\n        var _a, _b;\n        var symbol = null;\n        if (this.currentProc) {\n            symbol = symbol_table_1.lookupSymbol(this.currentProc.paramSymbols, name);\n        }\n        return ((_b = (_a = symbol !== null && symbol !== void 0 ? symbol : symbol_table_1.lookupSymbol(this.getLocalSymbols(), name)) !== null && _a !== void 0 ? _a : symbol_table_1.lookupSymbol(this.module.globalSymbols, name)) !== null && _b !== void 0 ? _b : null);\n    };\n    SemanticAnalyzer.prototype.createLocalVarSymbol = function (args) {\n        return __assign(__assign({}, args), { varType: this.currentProc && this.currentProc.isDefaultStatic\n                ? symbol_table_1.VarType.STATIC_VAR\n                : symbol_table_1.VarType.VAR, varScope: symbol_table_1.VarScope.LOCAL });\n    };\n    SemanticAnalyzer.prototype.addLocalSymbol = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return (_a = this.getLocalSymbols()).push.apply(_a, args);\n    };\n    SemanticAnalyzer.prototype.getTypeSpecForVarDeclOrParam = function (node) {\n        var name = node.name, typeExpr = node.typeExpr;\n        switch (typeExpr.type) {\n            case ast_1.DataTypeExprType.ELEMENTARY:\n                if (!typeExpr.typeSpec) {\n                    typeExpr.typeSpec = this.getDefaultTypeSpecFromName(name);\n                }\n                return typeExpr.typeSpec;\n            case ast_1.DataTypeExprType.ARRAY:\n                for (var _i = 0, _a = typeExpr.dimensionSpecExprs; _i < _a.length; _i++) {\n                    var _b = _a[_i], minIdxExpr = _b.minIdxExpr, maxIdxExpr = _b.maxIdxExpr;\n                    var idxExprs = __spreadArray(__spreadArray([], (minIdxExpr ? [minIdxExpr] : [])), [maxIdxExpr]);\n                    this.acceptAll(idxExprs);\n                    for (var _c = 0, idxExprs_1 = idxExprs; _c < idxExprs_1.length; _c++) {\n                        var idxExpr = idxExprs_1[_c];\n                        if (!types_1.isNumeric(idxExpr.typeSpec)) {\n                            this.throwError(\"Array dimension size must be numeric, not \" + idxExpr.typeSpec.type, idxExpr);\n                        }\n                    }\n                }\n                if (typeExpr.elementTypeExpr) {\n                    if (!ast_1.isSingularTypeExpr(typeExpr.elementTypeExpr)) {\n                        this.throwError(\"Invalid array element type: \" + JSON.stringify(typeExpr.elementTypeExpr), typeExpr.elementTypeExpr);\n                    }\n                }\n                else {\n                    typeExpr.elementTypeExpr = {\n                        type: ast_1.DataTypeExprType.ELEMENTARY,\n                        typeSpec: this.getDefaultTypeSpecFromName(name),\n                        loc: typeExpr.loc,\n                    };\n                }\n                return {\n                    type: types_1.DataType.ARRAY,\n                    elementTypeSpec: this.getTypeSpecForVarDeclOrParam(__assign(__assign({}, node), { typeExpr: typeExpr.elementTypeExpr })),\n                    dimensionSpecs: typeExpr.dimensionSpecExprs.map(function () { return [0, 0]; }),\n                };\n            case ast_1.DataTypeExprType.UDT:\n                var udt = this.lookupUdtOrThrow(typeExpr, typeExpr.name);\n                return udt.typeSpec;\n            default:\n                this.throwError(\"Unknown DataTypeExpr type: \" + JSON.stringify(typeExpr), node);\n        }\n    };\n    SemanticAnalyzer.prototype.getDefaultTypeSpecFromName = function (name) {\n        var _a;\n        return ((_a = TYPE_SUFFIX_MAP[name[name.length - 1]]) !== null && _a !== void 0 ? _a : this.defTypeMap[name[0].toLowerCase()]);\n    };\n    SemanticAnalyzer.prototype.lookupFn = function (name, argTypeSpecs) {\n        var proc = symbol_table_1.lookupSymbol(this.module.procs, name);\n        if (proc) {\n            return {\n                defType: types_1.ProcDefType.MODULE,\n                proc: proc,\n                returnTypeSpec: ast_1.isFnProcOrDefFnProc(proc) ? proc.returnTypeSpec : null,\n            };\n        }\n        var builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_FNS, name, argTypeSpecs, {\n            // This allows us to throw a more useful error message in visitProcCall().\n            shouldReturnIfArgTypeMismatch: true,\n        });\n        if (builtinProc) {\n            return {\n                defType: types_1.ProcDefType.BUILTIN,\n                builtinProc: builtinProc,\n                returnTypeSpec: builtinProc.returnTypeSpec,\n            };\n        }\n        return null;\n    };\n    SemanticAnalyzer.prototype.lookupSub = function (name, argTypeSpecs) {\n        var proc = symbol_table_1.lookupSymbol(this.module.procs, name);\n        if (proc) {\n            return {\n                defType: types_1.ProcDefType.MODULE,\n                proc: proc,\n            };\n        }\n        var builtinProc = builtins_1.lookupBuiltin(builtins_1.BUILTIN_SUBS, name, argTypeSpecs, {\n            // This allows us to throw a more useful error message in visitProcCall().\n            shouldReturnIfArgTypeMismatch: true,\n        });\n        if (builtinProc) {\n            return {\n                defType: types_1.ProcDefType.BUILTIN,\n                builtinProc: builtinProc,\n            };\n        }\n        return null;\n    };\n    SemanticAnalyzer.prototype.lookupUdtOrThrow = function (node, name) {\n        var udt = symbol_table_1.lookupSymbol(this.module.udts, name);\n        if (!udt) {\n            this.throwError(\"Type not found: \\\"\" + name + \"\\\"\", node);\n        }\n        return udt;\n    };\n    SemanticAnalyzer.prototype.setUpDefTypeMap = function () {\n        for (var c = 'a'.charCodeAt(0); c <= 'z'.charCodeAt(0); ++c) {\n            this.defTypeMap[String.fromCharCode(c)] = types_1.singleSpec();\n        }\n        this.acceptAll(lodash_1.default.filter(this.module.stmts, ['type', ast_1.StmtType.DEF_TYPE]));\n    };\n    SemanticAnalyzer.prototype.lookupLabelOrThrow = function (node, context, label) {\n        var foundLabel = context.labels.find(function (existingLabel) { return existingLabel.toLowerCase() === label.toLowerCase(); });\n        if (!foundLabel) {\n            this.throwError(\"Label not found: \\\"\" + label + \"\\\"\", node);\n        }\n        return foundLabel;\n    };\n    return SemanticAnalyzer;\n}(ast_1.AstVisitor));\nexports.SemanticAnalyzer = SemanticAnalyzer;\nfunction runSemanticAnalysis(module, opts) {\n    if (opts === void 0) { opts = {}; }\n    return new SemanticAnalyzer(module, opts).run();\n}\nexports.default = runSemanticAnalysis;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDataItem = exports.dataItemTypeName = void 0;\nvar types_1 = require(\"./types\");\nfunction dataItemTypeName(_a) {\n    var _ = _a[0], value = _a[1];\n    return value === null ? 'null' : typeof value;\n}\nexports.dataItemTypeName = dataItemTypeName;\n/** Converts a data item to the expected type. */\nfunction getDataItem(item, expectedTypeSpec) {\n    var _ = item[0], value = item[1];\n    if (types_1.isNumeric(expectedTypeSpec)) {\n        switch (typeof value) {\n            case 'number':\n                return value;\n            case 'object':\n                return 0;\n            default:\n                throwDataItemTypeError(item, expectedTypeSpec);\n        }\n    }\n    else if (types_1.isString(expectedTypeSpec)) {\n        switch (typeof value) {\n            case 'string':\n                return value;\n            case 'object':\n                return '';\n            default:\n                throwDataItemTypeError(item, expectedTypeSpec);\n        }\n    }\n    else {\n        throw new Error(\"Unknown expected type spec: \" + JSON.stringify(expectedTypeSpec));\n    }\n}\nexports.getDataItem = getDataItem;\nfunction throwDataItemTypeError(item, expectedTypeSpec) {\n    var _a = item[0], line = _a[0], col = _a[1], _ = item[1];\n    throw new Error(\"expected \" + types_1.typeSpecName(expectedTypeSpec) + \", \" +\n        (\"got \" + dataItemTypeName(item) + \" data item \") +\n        (\"(defined at \" + line + \":\" + col + \")\"));\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ansi_escapes_1 = __importDefault(require(\"ansi-escapes\"));\nvar ansi_styles_1 = __importDefault(require(\"ansi-styles\"));\nvar ansi_terminal_key_code_map_1 = __importDefault(require(\"./ansi-terminal-key-code-map\"));\nvar runtime_1 = require(\"./runtime\");\n/** RuntimePlatform implementing screen manipulation using ANSI escape codes.\n *\n * Ideally this functionality could be made into a mixin, but 1) it relies on this.print() etc and\n * so must be a class and 2) abstract classes don't support mixins yet:\n * https://github.com/microsoft/TypeScript/issues/35356\n */\nvar AnsiTerminalPlatform = /** @class */ (function (_super) {\n    __extends(AnsiTerminalPlatform, _super);\n    function AnsiTerminalPlatform() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnsiTerminalPlatform.prototype.moveCursorTo = function (x, y) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.cursorTo(x, y))];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setCursorVisibility = function (isCursorVisible) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(isCursorVisible ? ansi_escapes_1.default.cursorShow : ansi_escapes_1.default.cursorHide)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.clearScreen = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.eraseScreen)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.moveCursorTo(0, 0)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setFgColor = function (colorName) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_styles_1.default[colorName].open)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.setBgColor = function (colorName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var bgColorName;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        bgColorName = \"bg\" + colorName[0].toUpperCase() + colorName.substr(1);\n                        return [4 /*yield*/, this.print(ansi_styles_1.default[bgColorName].open)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AnsiTerminalPlatform.prototype.beep = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.print(ansi_escapes_1.default.beep)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** Translates an ANSI / VT100 key code to the DOS equivalent. */\n    AnsiTerminalPlatform.prototype.translateKeyCode = function (c) {\n        var _a;\n        return (_a = ansi_terminal_key_code_map_1.default[c]) !== null && _a !== void 0 ? _a : c;\n    };\n    return AnsiTerminalPlatform;\n}(runtime_1.RuntimePlatform));\nexports.default = AnsiTerminalPlatform;\n","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** Returns a VT100 escape sequence prefixed by \"ESC [\". */\nfunction ESC(c) {\n    return \"\\u001B[\" + c;\n}\n/** Returns a DOS keyboard scan code prefixed by NUL. */\nfunction NUL(n) {\n    return String.fromCharCode(0, n);\n}\n/** Map ANSI / VT100 sequences to DOS keyboard scan codes. */\nvar ANSI_TERMINAL_KEY_CODE_MAP = (_a = {},\n    _a[ESC('A')] = NUL(72),\n    _a[ESC('B')] = NUL(80),\n    _a[ESC('C')] = NUL(77),\n    _a[ESC('D')] = NUL(75),\n    _a);\nexports.default = ANSI_TERMINAL_KEY_CODE_MAP;\n","export interface ExampleSpec {\n  fileName: string;\n  title: string;\n  description: string;\n  content: string;\n}\n\nconst EXAMPLE_SPECS: Array<ExampleSpec> = [\n  {\n    fileName: 'guess.bas',\n    title: 'GUESS.BAS',\n    description: 'Simple number guessing game',\n  },\n  {\n    fileName: 'nibbles.bas',\n    title: 'NIBBLES.BAS',\n    description: 'Classic snake game',\n  },\n  {\n    fileName: 'cal.bas',\n    title: 'CAL.BAS',\n    description: 'Perpetual calendar program',\n  },\n  {\n    fileName: 'check.bas',\n    title: 'CHECK.BAS',\n    description: 'Checkbook balancing program',\n  },\n  {\n    fileName: 'strtonum.bas',\n    title: 'STRTONUM.BAS',\n    description: 'Converts a string to a number',\n  },\n].map((spec) => ({\n  ...spec,\n  content: require(`!!raw-loader!../examples/${spec.fileName}`).default,\n}));\n\nexport default EXAMPLE_SPECS;\n\nexport const DEFAULT_EXAMPLE = EXAMPLE_SPECS[0];\n","import Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport {Ace} from 'ace-builds';\nimport _ from 'lodash';\nimport {DropzoneArea} from 'material-ui-dropzone';\nimport BookshelfIcon from 'mdi-material-ui/Bookshelf';\nimport FileCodeIcon from 'mdi-material-ui/FileCode';\nimport LaptopIcon from 'mdi-material-ui/Laptop';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useRef, useState} from 'react';\nimport EXAMPLES from './examples';\n\ninterface SelectedFileSpec {\n  title: string;\n  content: string;\n}\n\nfunction ConfirmationDialog({\n  isOpen,\n  onClose,\n  title,\n  content,\n  onConfirm,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  content: string;\n  onConfirm: () => void;\n}) {\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{content}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            onClose();\n            onConfirm();\n          }, [onClose, onConfirm])}\n          color=\"primary\"\n        >\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction ExamplesTab({\n  onSelect,\n}: {\n  onSelect: (fileSpec: SelectedFileSpec) => void;\n}) {\n  const onExampleClick = useCallback(\n    (exampleIdx: number) => {\n      onSelect(EXAMPLES[exampleIdx]);\n    },\n    [onSelect]\n  );\n\n  return (\n    <List subheader={<li />}>\n      {EXAMPLES.map(({fileName, title, description}, idx) => (\n        <ListItem\n          key={fileName}\n          button={true}\n          onClick={() => onExampleClick(idx)}\n        >\n          <ListItemAvatar>\n            <Avatar>\n              <FileCodeIcon color=\"action\" />\n            </Avatar>\n          </ListItemAvatar>\n          <ListItemText primary={title} secondary={description} />\n        </ListItem>\n      ))}\n    </List>\n  );\n}\n\nfunction UploadTab({\n  onSelect,\n}: {\n  onSelect: (fileSpec: SelectedFileSpec) => void;\n}) {\n  const onChange = useCallback(\n    async (selectedFiles: Array<File>) => {\n      if (selectedFiles.length > 0) {\n        const selectedFile = selectedFiles[0];\n        onSelect({\n          title: selectedFile.name,\n          content: await selectedFile.text(),\n        });\n      }\n    },\n    [onSelect]\n  );\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: 1,\n        height: '100%',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <DropzoneArea\n        acceptedFiles={['.bas']}\n        filesLimit={1}\n        showPreviews={false}\n        showPreviewsInDropzone={false}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nconst OpenDialog = observer(\n  ({\n    isOpen,\n    onClose,\n    editor,\n  }: {\n    isOpen: boolean;\n    onClose: () => void;\n    editor: Ace.Editor | null;\n  }) => {\n    const theme = useTheme();\n    const isFullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const selectedFileSpec = useRef<SelectedFileSpec | null>(null);\n\n    const [\n      isOverwriteConfirmationDialogOpen,\n      setIsOverwriteConfirmationDialogOpen,\n    ] = useState(false);\n\n    const openSelectedFile = useCallback(() => {\n      if (!editor || !selectedFileSpec.current) {\n        return;\n      }\n      editor.setValue(selectedFileSpec.current.content);\n      selectedFileSpec.current = null;\n      onClose();\n    }, [editor, onClose]);\n\n    const onSelect = useCallback(\n      (fileSpec: SelectedFileSpec) => {\n        if (!editor) {\n          return;\n        }\n        const trimmedSource = editor.getValue().trim();\n        const shouldConfirm =\n          !!trimmedSource &&\n          !_.some(EXAMPLES, ({content}) => trimmedSource === content.trim());\n\n        selectedFileSpec.current = fileSpec;\n        if (shouldConfirm) {\n          setIsOverwriteConfirmationDialogOpen(true);\n        } else {\n          openSelectedFile();\n        }\n      },\n      [editor, openSelectedFile]\n    );\n\n    const [activeTab, setActiveTab] = useState<'examples' | 'upload'>(\n      'examples'\n    );\n\n    return (\n      <>\n        <Dialog\n          fullScreen={isFullScreen}\n          open={isOpen}\n          onClose={onClose}\n          fullWidth={true}\n          maxWidth=\"sm\"\n          scroll=\"paper\"\n        >\n          <DialogTitle>Open program</DialogTitle>\n          <div\n            style={{\n              display: 'flex',\n            }}\n          >\n            <Tabs\n              orientation=\"vertical\"\n              variant=\"scrollable\"\n              value={activeTab}\n              onChange={(event, activeTab) => setActiveTab(activeTab)}\n              style={{\n                borderRight: `1px solid ${theme.palette.divider}`,\n              }}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n            >\n              <Tab\n                label=\"Examples\"\n                icon={<BookshelfIcon />}\n                value={'examples'}\n              />\n              <Tab label=\"Computer\" icon={<LaptopIcon />} value={'upload'} />\n            </Tabs>\n            <div\n              style={{\n                backgroundColor: theme.palette.background.paper,\n                // @ts-ignore\n                overflowY: 'overlay',\n                flex: 1,\n                height: 300,\n                paddingLeft: 20,\n                paddingRight: 20,\n              }}\n            >\n              {activeTab === 'examples' && <ExamplesTab onSelect={onSelect} />}\n              {activeTab === 'upload' && <UploadTab onSelect={onSelect} />}\n            </div>\n          </div>\n          <DialogActions>\n            <Button onClick={onClose} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <ConfirmationDialog\n          isOpen={isOverwriteConfirmationDialogOpen}\n          onClose={() => setIsOverwriteConfirmationDialogOpen(false)}\n          onConfirm={openSelectedFile}\n          title={`Open ${selectedFileSpec.current?.title}`}\n          content=\"This will overwrite the current editor contents. Are you sure?\"\n        />\n      </>\n    );\n  }\n);\n\nexport default OpenDialog;\n","import _ from 'lodash';\nimport {\n  action,\n  computed,\n  makeObservable,\n  observable,\n  reaction,\n  toJS,\n} from 'mobx';\n\nexport interface SourceFile {\n  name: string;\n  content: string;\n}\n\nexport enum ConfigKey {\n  SOURCE_FILES = 'v1/sourceFiles',\n  CURRENT_SOURCE_FILE_NAME = 'v1/currentSourceFileName',\n  EDITOR_FONT_FAMILY = 'v1/editorFontFamily',\n  EDITOR_FONT_SIZE = 'v1/editorFontSize',\n  EDITOR_THEME = 'v1/editorTheme',\n  EDITOR_KEYBINDINGS = 'v1/editorKeybindings',\n  SCREEN_FONT_FAMILY = 'v1/outputScreenFontFamily',\n  SCREEN_FONT_SIZE = 'v1/outputScreenFontSize',\n  SCREEN_LETTER_SPACING = 'v1/outputScreenLetterSpacing',\n  SCREEN_LINE_HEIGHT = 'v1/outputScreenLineHeight',\n  EXECUTION_DELAY = 'v1/executionDelayUs',\n}\n\nconst DEFAULT_CONFIG = {\n  [ConfigKey.SOURCE_FILES]: [{name: 'default', content: ''}],\n  [ConfigKey.CURRENT_SOURCE_FILE_NAME]: 'default',\n  [ConfigKey.EDITOR_FONT_FAMILY]: 'Cascadia Mono',\n  [ConfigKey.EDITOR_FONT_SIZE]: 14,\n  [ConfigKey.EDITOR_THEME]: 'nord_dark',\n  [ConfigKey.EDITOR_KEYBINDINGS]: '',\n  [ConfigKey.SCREEN_FONT_FAMILY]: 'Cascadia Mono',\n  [ConfigKey.SCREEN_FONT_SIZE]: 14,\n  [ConfigKey.SCREEN_LETTER_SPACING]: 0,\n  [ConfigKey.SCREEN_LINE_HEIGHT]: 1.0,\n  [ConfigKey.EXECUTION_DELAY]: 0,\n};\n\nexport const EDITOR_THEME_GROUPS = [\n  {label: 'Light themes', value: 'light'},\n  {label: 'Dark themes', value: 'dark'},\n];\n\nexport const EDITOR_THEMES = [\n  {label: 'Ambiance', value: 'ambiance', group: 'dark'},\n  {label: 'Chaos', value: 'chaos', group: 'dark'},\n  {label: 'Chrome', value: 'chrome', group: 'light'},\n  {label: 'Clouds', value: 'clouds', group: 'light'},\n  {label: 'Clouds midnight', value: 'clouds_midnight', group: 'dark'},\n  {label: 'Cobalt', value: 'cobalt', group: 'dark'},\n  {label: 'Crimson Editor', value: 'crimson_editor', group: 'light'},\n  {label: 'Dawn', value: 'dawn', group: 'light'},\n  {label: 'Dracula', value: 'dracula', group: 'dark'},\n  {label: 'Dreamweaver', value: 'dreamweaver', group: 'light'},\n  {label: 'Eclipse', value: 'eclipse', group: 'light'},\n  {label: 'Github', value: 'github', group: 'light'},\n  {label: 'Gob', value: 'gob', group: 'dark'},\n  {label: 'Gruvbox', value: 'gruvbox', group: 'dark'},\n  {label: 'Idle Fingers', value: 'idle_fingers', group: 'dark'},\n  {label: 'Iplastic', value: 'iplastic', group: 'light'},\n  {label: 'Katzenmilch', value: 'katzenmilch', group: 'light'},\n  {label: 'KR Theme', value: 'kr_theme', group: 'dark'},\n  {label: 'Kuroir', value: 'kuroir', group: 'light'},\n  {label: 'Merbivore', value: 'merbivore', group: 'dark'},\n  {label: 'Merbivore Soft', value: 'merbivore_soft', group: 'dark'},\n  {label: 'Mono Industrial', value: 'mono_industrial', group: 'dark'},\n  {label: 'Monokai', value: 'monokai', group: 'dark'},\n  {label: 'Nord Dark', value: 'nord_dark', group: 'dark'},\n  {label: 'Pastel On Dark', value: 'pastel_on_dark', group: 'dark'},\n  {label: 'Solarized Dark', value: 'solarized_dark', group: 'dark'},\n  {label: 'Solarized Light', value: 'solarized_light', group: 'light'},\n  {label: 'SQL Server', value: 'sqlserver', group: 'light'},\n  {label: 'Terminal', value: 'terminal', group: 'dark'},\n  {label: 'Textmate', value: 'textmate', group: 'light'},\n  {label: 'Tomorrow', value: 'tomorrow', group: 'light'},\n  {label: 'Tomorrow Night Blue', value: 'tomorrow_night_blue', group: 'dark'},\n  {\n    label: 'Tomorrow Night Bright',\n    value: 'tomorrow_night_bright',\n    group: 'dark',\n  },\n  {\n    label: 'Tomorrow Night Eighties',\n    value: 'tomorrow_night_eighties',\n    group: 'dark',\n  },\n  {label: 'Tomorrow Night', value: 'tomorrow_night', group: 'dark'},\n  {label: 'Twilight', value: 'twilight', group: 'dark'},\n  {label: 'Vibrant Ink', value: 'vibrant_ink', group: 'dark'},\n  {label: 'Xcode', value: 'xcode', group: 'light'},\n];\n\nexport const EDITOR_KEYBINDINGS = [\n  {label: 'Default', value: ''},\n  {label: 'Vim', value: 'vim'},\n  {label: 'Emacs', value: 'emacs'},\n  {label: 'Sublime Text', value: 'sublime'},\n  {label: 'Visual Studio Code', value: 'vscode'},\n];\n\nclass ConfigManager {\n  config = DEFAULT_CONFIG;\n\n  constructor() {\n    makeObservable(this, {\n      config: observable,\n      setKey: action,\n      load: action,\n      sourceFiles: computed,\n      currentSourceFile: computed,\n      setContent: action,\n    });\n\n    this.load();\n\n    reaction(\n      () => toJS(this.config),\n      () => this.save()\n    );\n  }\n\n  getKey(key: ConfigKey): any {\n    return this.config[key];\n  }\n\n  setKey(key: ConfigKey, value: any) {\n    (this.config as {[key: string]: any})[key] = value;\n  }\n\n  save() {\n    for (const key of Object.values(ConfigKey)) {\n      const defaultValue = JSON.stringify(DEFAULT_CONFIG[key]);\n      const currentValue = JSON.stringify(this.config[key]);\n      if (currentValue === defaultValue) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, currentValue);\n      }\n    }\n  }\n\n  load() {\n    if (typeof localStorage === 'undefined') {\n      console.warn(`localStorage not available`);\n      return;\n    }\n    for (const key of Object.values(ConfigKey)) {\n      const rawValue = localStorage.getItem(key);\n      if (rawValue) {\n        let value: any;\n        try {\n          value = JSON.parse(rawValue);\n        } catch (e) {\n          console.warn(`Failed to parse value for key \"${key}\": \"${rawValue}\"`);\n          continue;\n        }\n        this.setKey(key, value);\n      }\n    }\n\n    // Ensure current source file is sane.\n    if (!this.currentSourceFile) {\n      this.sourceFiles.push({\n        name: this.getKey(ConfigKey.CURRENT_SOURCE_FILE_NAME),\n        content: '',\n      });\n    }\n\n    console.log(`Loaded config:`, toJS(this.config));\n  }\n\n  get sourceFiles(): Array<SourceFile> {\n    return this.getKey(ConfigKey.SOURCE_FILES);\n  }\n\n  get currentSourceFile(): SourceFile {\n    return _.find(this.sourceFiles, [\n      'name',\n      this.getKey(ConfigKey.CURRENT_SOURCE_FILE_NAME),\n    ])!;\n  }\n\n  setContent(sourceFile: SourceFile, newContent: string) {\n    sourceFile.content = newContent;\n  }\n}\n\nconst configManager = new ConfigManager();\nexport default configManager;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Radio from '@material-ui/core/Radio';\nimport Slider from '@material-ui/core/Slider';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport TextField from '@material-ui/core/TextField';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport _ from 'lodash';\nimport FileDocumentEditIcon from 'mdi-material-ui/FileDocumentEdit';\nimport HammerWrenchIcon from 'mdi-material-ui/HammerWrench';\nimport MonitorIcon from 'mdi-material-ui/Monitor';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {\n  ConfigKey,\n  EDITOR_KEYBINDINGS,\n  EDITOR_THEMES,\n  EDITOR_THEME_GROUPS,\n} from './config-manager';\n\nconst SETTING_EDITOR_INPUT_WIDTH = 400;\n\nfunction TextSettingEditorDialog({\n  configKey,\n  title,\n  isOpen,\n  onClose,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as string);\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <TextField\n          autoFocus={true}\n          required={true}\n          fullWidth={true}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          style={{width: SETTING_EDITOR_INPUT_WIDTH, maxWidth: '100%'}}\n          InputProps={{style: {fontSize: '0.9rem'}}}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value.trim());\n            onClose();\n          }, [configKey, value, onClose])}\n          disabled={!value.trim()}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction SliderSettingEditorDialog({\n  isOpen,\n  onClose,\n  title,\n  configKey,\n  min,\n  max,\n  step,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n  min: number;\n  max: number;\n  step: number;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as number);\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <Slider\n          value={value}\n          onChange={(e, value) => setValue(value as number)}\n          min={min}\n          max={max}\n          step={step}\n          marks={true}\n          valueLabelDisplay=\"on\"\n          style={{\n            width: SETTING_EDITOR_INPUT_WIDTH,\n            maxWidth: '100%',\n            marginTop: 40,\n          }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value);\n            onClose();\n          }, [configKey, value, onClose])}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction SingleChoiceSettingEditorDialog({\n  isOpen,\n  onClose,\n  title,\n  configKey,\n  groups,\n  choices,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  configKey: ConfigKey;\n  groups?: Array<{label: string; value: string}>;\n  choices: Array<{label: string; value: string; group?: string}>;\n}) {\n  const [value, setValue] = useState(configManager.getKey(configKey) as string);\n  const listRef = useRef<HTMLUListElement | null>(null);\n  const selectedListItemRef = useRef<HTMLDivElement | null>(null);\n  const didScrollToSelectedListItem = useRef(false);\n\n  const scrollToSelectedListItem = useCallback(() => {\n    if (!isOpen) {\n      didScrollToSelectedListItem.current = false;\n      return;\n    }\n    if (\n      !listRef.current ||\n      !selectedListItemRef.current ||\n      didScrollToSelectedListItem.current\n    ) {\n      return;\n    }\n    selectedListItemRef.current.scrollIntoView(true);\n    // Scroll up a bit more because the sticky list subheader covers the top of the list viewport.\n    const isScrolledToBottom =\n      listRef.current.scrollHeight -\n        listRef.current.scrollTop -\n        listRef.current.clientHeight <\n      1;\n    if (!isScrolledToBottom) {\n      listRef.current.scrollTop -= 150;\n    }\n    didScrollToSelectedListItem.current = true;\n  }, [isOpen]);\n  useEffect(scrollToSelectedListItem);\n\n  return (\n    <Dialog open={isOpen} onClose={onClose}>\n      <DialogTitle>{title}</DialogTitle>\n      <DialogContent dividers={true}>\n        <List\n          subheader={<li />}\n          style={{\n            overflowX: 'hidden',\n          }}\n          ref={(node: HTMLUListElement | null) => {\n            listRef.current = node;\n            scrollToSelectedListItem();\n          }}\n        >\n          {(groups || [null]).map((group, idx) => (\n            <li key={group?.value ?? idx} style={{backgroundColor: 'inherit'}}>\n              <ul style={{padding: 0, backgroundColor: 'inherit'}}>\n                {group && (\n                  <ListSubheader color=\"primary\">{group.label}</ListSubheader>\n                )}\n                {choices.map((choice) => {\n                  if (group && group.value !== choice.group) {\n                    return null;\n                  }\n                  const isSelected = choice.value === value;\n                  const onSelect = () => setValue(choice.value);\n                  return (\n                    <ListItem\n                      key={choice.value}\n                      selected={isSelected}\n                      button={true}\n                      onClick={onSelect}\n                      style={{width: SETTING_EDITOR_INPUT_WIDTH}}\n                      ref={\n                        isSelected\n                          ? (node) => {\n                              selectedListItemRef.current = node;\n                              scrollToSelectedListItem();\n                            }\n                          : null\n                      }\n                    >\n                      <ListItemText\n                        primary={choice.label}\n                        primaryTypographyProps={{style: {fontSize: '0.9rem'}}}\n                      />\n                      <ListItemSecondaryAction>\n                        <Radio\n                          checked={isSelected}\n                          onSelect={onSelect}\n                          color=\"primary\"\n                        />\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  );\n                })}\n              </ul>\n            </li>\n          ))}\n        </List>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={useCallback(() => {\n            configManager.setKey(configKey, value);\n            onClose();\n          }, [configKey, value, onClose])}\n          color=\"primary\"\n        >\n          Save\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst SettingsDialog = observer(\n  ({isOpen, onClose}: {isOpen: boolean; onClose: () => void}) => {\n    const theme = useTheme();\n    const isFullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const [activeTab, setActiveTab] = useState<\n      'editor' | 'outputScreen' | 'execution'\n    >('editor');\n\n    const [isEditorFontDialogOpen, setIsEditorFontDialogOpen] = useState(false);\n    const [isEditorFontSizeDialogOpen, setIsEditorFontSizeDialogOpen] =\n      useState(false);\n    const [isEditorThemeDialogOpen, setIsEditorThemeDialogOpen] =\n      useState(false);\n    const [isEditorKeybindingsDialogOpen, setIsEditorKeybindingsDialogOpen] =\n      useState(false);\n\n    const [isScreenFontDialogOpen, setIsScreenFontDialogOpen] = useState(false);\n    const [isScreenFontSizeDialogOpen, setIsScreenFontSizeDialogOpen] =\n      useState(false);\n    const [\n      isScreenLetterSpacingDialogOpen,\n      setIsScreenLetterSpacingDialogOpen,\n    ] = useState(false);\n    const [isScreenLineHeightDialogOpen, setIsScreenLineHeightDialogOpen] =\n      useState(false);\n\n    const [isExecutionDelayDialogOpen, setIsExecutionDelayDialogOpen] =\n      useState(false);\n\n    return (\n      <>\n        <Dialog\n          fullScreen={isFullScreen}\n          open={isOpen}\n          onClose={onClose}\n          fullWidth={true}\n          maxWidth=\"sm\"\n          scroll=\"paper\"\n        >\n          <DialogTitle>Settings</DialogTitle>\n          <DialogContent dividers={true}>\n            <div\n              style={{\n                display: 'flex',\n              }}\n            >\n              <Tabs\n                orientation=\"vertical\"\n                variant=\"scrollable\"\n                value={activeTab}\n                onChange={(event, activeTab) => setActiveTab(activeTab)}\n                style={{\n                  borderRight: `1px solid ${theme.palette.divider}`,\n                }}\n                indicatorColor=\"primary\"\n                textColor=\"primary\"\n              >\n                <Tab\n                  label=\"Editor\"\n                  icon={<FileDocumentEditIcon />}\n                  value={'editor'}\n                />\n                <Tab\n                  label=\"Output\"\n                  icon={<MonitorIcon />}\n                  value={'outputScreen'}\n                />\n                <Tab\n                  label=\"Execution\"\n                  icon={<HammerWrenchIcon />}\n                  value={'execution'}\n                />\n              </Tabs>\n              <div\n                style={{\n                  backgroundColor: theme.palette.background.paper,\n                  // @ts-ignore\n                  overflowY: 'overlay',\n                  flex: 1,\n                  height: 300,\n                  paddingLeft: 20,\n                  paddingRight: 20,\n                }}\n              >\n                <List subheader={<li />}>\n                  {activeTab === 'editor' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorThemeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor theme\"\n                          secondary={\n                            _.find(EDITOR_THEMES, [\n                              'value',\n                              configManager.getKey(ConfigKey.EDITOR_THEME),\n                            ])?.label\n                          }\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorFontDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor font\"\n                          secondary={configManager.getKey(\n                            ConfigKey.EDITOR_FONT_FAMILY\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorFontSizeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor font size\"\n                          secondary={configManager.getKey(\n                            ConfigKey.EDITOR_FONT_SIZE\n                          )}\n                        />{' '}\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsEditorKeybindingsDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Editor keybindings\"\n                          secondary={\n                            _.find(EDITOR_KEYBINDINGS, [\n                              'value',\n                              configManager.getKey(\n                                ConfigKey.EDITOR_KEYBINDINGS\n                              ),\n                            ])?.label\n                          }\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                  {activeTab === 'outputScreen' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenFontDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen font\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_FONT_FAMILY\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenFontSizeDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen font size\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_FONT_SIZE\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenLetterSpacingDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen letter spacing\"\n                          secondary={configManager.getKey(\n                            ConfigKey.SCREEN_LETTER_SPACING\n                          )}\n                        />\n                      </ListItem>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsScreenLineHeightDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Output screen line height\"\n                          secondary={`${configManager.getKey(\n                            ConfigKey.SCREEN_LINE_HEIGHT\n                          )}x`}\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                  {activeTab === 'execution' && (\n                    <>\n                      <ListItem\n                        button={true}\n                        onClick={() => setIsExecutionDelayDialogOpen(true)}\n                      >\n                        <ListItemText\n                          primary=\"Statement execution delay\"\n                          secondary={`${configManager.getKey(\n                            ConfigKey.EXECUTION_DELAY\n                          )} s`}\n                        />\n                      </ListItem>\n                    </>\n                  )}\n                </List>\n              </div>\n            </div>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={onClose} color=\"primary\">\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <TextSettingEditorDialog\n          isOpen={isEditorFontDialogOpen}\n          onClose={() => setIsEditorFontDialogOpen(false)}\n          title=\"Editor font\"\n          configKey={ConfigKey.EDITOR_FONT_FAMILY}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isEditorFontSizeDialogOpen}\n          onClose={() => setIsEditorFontSizeDialogOpen(false)}\n          title=\"Editor font size\"\n          configKey={ConfigKey.EDITOR_FONT_SIZE}\n          min={6}\n          max={24}\n          step={1}\n        />\n        <SingleChoiceSettingEditorDialog\n          isOpen={isEditorThemeDialogOpen}\n          onClose={() => setIsEditorThemeDialogOpen(false)}\n          title=\"Editor theme\"\n          configKey={ConfigKey.EDITOR_THEME}\n          groups={EDITOR_THEME_GROUPS}\n          choices={EDITOR_THEMES}\n        />\n        <SingleChoiceSettingEditorDialog\n          isOpen={isEditorKeybindingsDialogOpen}\n          onClose={() => setIsEditorKeybindingsDialogOpen(false)}\n          title=\"Editor keybindings\"\n          configKey={ConfigKey.EDITOR_KEYBINDINGS}\n          choices={EDITOR_KEYBINDINGS}\n        />\n\n        <TextSettingEditorDialog\n          isOpen={isScreenFontDialogOpen}\n          onClose={() => setIsScreenFontDialogOpen(false)}\n          title=\"Output screen font\"\n          configKey={ConfigKey.SCREEN_FONT_FAMILY}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenFontSizeDialogOpen}\n          onClose={() => setIsScreenFontSizeDialogOpen(false)}\n          title=\"Output screen font size\"\n          configKey={ConfigKey.SCREEN_FONT_SIZE}\n          min={6}\n          max={24}\n          step={1}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenLetterSpacingDialogOpen}\n          onClose={() => setIsScreenLetterSpacingDialogOpen(false)}\n          title=\"Output screen letter spacing\"\n          configKey={ConfigKey.SCREEN_LETTER_SPACING}\n          min={0}\n          max={8}\n          step={1}\n        />\n        <SliderSettingEditorDialog\n          isOpen={isScreenLineHeightDialogOpen}\n          onClose={() => setIsScreenLineHeightDialogOpen(false)}\n          title=\"Output screen line height\"\n          configKey={ConfigKey.SCREEN_LINE_HEIGHT}\n          min={1.0}\n          max={2.0}\n          step={0.05}\n        />\n\n        <SliderSettingEditorDialog\n          isOpen={isExecutionDelayDialogOpen}\n          onClose={() => setIsExecutionDelayDialogOpen(false)}\n          title=\"Statement execution delay\"\n          configKey={ConfigKey.EXECUTION_DELAY}\n          min={0}\n          max={10}\n          step={1}\n        />\n      </>\n    );\n  }\n);\n\nexport default SettingsDialog;\n","import AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport LaunchIcon from '@material-ui/icons/Launch';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport {Ace} from 'ace-builds';\nimport {saveAs} from 'file-saver';\nimport React, {useCallback, useState} from 'react';\nimport OpenDialog from './open-dialog';\nimport SettingsDialog from './settings-dialog';\n\nfunction AppHeader({\n  isReady,\n  editor,\n}: {\n  isReady: boolean;\n  editor: Ace.Editor | null;\n}) {\n  const onSaveClick = useCallback(() => {\n    if (!isReady || !editor) {\n      return;\n    }\n    const blob = new Blob([editor.getValue()], {\n      type: 'text/plain;charset=utf-8',\n    });\n    saveAs(blob, 'program.bas');\n  }, [isReady, editor]);\n\n  const theme = useTheme();\n\n  const [isSettingsDialogOpen, setIsSettingsDialogOpen] = useState(false);\n  const [isOpenDialogOpen, setIsOpenDialogOpen] = useState(false);\n\n  return (\n    <>\n      <AppBar position=\"relative\" color=\"default\">\n        <Toolbar>\n          <Typography variant=\"h6\" style={{flexGrow: 1}}>\n            qbjc playground\n          </Typography>\n          {isReady && (\n            <>\n              <Tooltip title=\"Open program\">\n                <IconButton\n                  aria-label=\"Open program\"\n                  color=\"inherit\"\n                  onClick={() => setIsOpenDialogOpen(true)}\n                >\n                  <FolderIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Save program\">\n                <IconButton\n                  aria-label=\"Save program\"\n                  color=\"inherit\"\n                  onClick={onSaveClick}\n                >\n                  <SaveIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Settings\">\n                <IconButton\n                  aria-label=\"Edit settings\"\n                  color=\"inherit\"\n                  onClick={() => setIsSettingsDialogOpen(true)}\n                >\n                  <SettingsIcon />\n                </IconButton>\n              </Tooltip>\n            </>\n          )}\n          <Tooltip\n            title={\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                }}\n              >\n                View on GitHub\n                <LaunchIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    marginLeft: '0.1rem',\n                  }}\n                />\n              </div>\n            }\n          >\n            <IconButton\n              aria-label=\"View on GitHub\"\n              color=\"inherit\"\n              href=\"https://github.com/jichu4n/qbjc\"\n              target=\"_blank\"\n            >\n              <GitHubIcon />\n            </IconButton>\n          </Tooltip>\n        </Toolbar>\n      </AppBar>\n\n      <OpenDialog\n        isOpen={isOpenDialogOpen}\n        onClose={() => setIsOpenDialogOpen(false)}\n        editor={editor}\n      />\n      <SettingsDialog\n        isOpen={isSettingsDialogOpen}\n        onClose={() => setIsSettingsDialogOpen(false)}\n      />\n    </>\n  );\n}\n\nexport default AppHeader;\n","import CircularProgress from '@material-ui/core/CircularProgress';\nimport {useTheme} from '@material-ui/core/styles';\nimport React, {useEffect, useState} from 'react';\n\nfunction AppSplashScreen({isReady}: {isReady: boolean}) {\n  enum Status {\n    VISIBLE = 'visible',\n    TRANSITIONING = 'transitioning',\n    HIDDEN = 'hidden',\n  }\n  const TRANSITION_DELAY_MS = 600;\n  const [status, setStatus] = useState<Status>(Status.VISIBLE);\n  const theme = useTheme();\n\n  useEffect(() => {\n    if (isReady && status === Status.VISIBLE) {\n      setStatus(Status.TRANSITIONING);\n      setTimeout(() => setStatus(Status.HIDDEN), TRANSITION_DELAY_MS);\n    }\n  }, [isReady, status, Status]);\n\n  return (\n    <div\n      style={{\n        position: 'fixed',\n        left: 0,\n        top: 0,\n        width: '100%',\n        height: '100%',\n        zIndex: 200,\n        backgroundColor: theme.palette.background.paper,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        transition: `opacity ${TRANSITION_DELAY_MS}ms`,\n        ...(status === Status.VISIBLE\n          ? {\n              opacity: 1,\n            }\n          : {}),\n        ...(status === Status.TRANSITIONING\n          ? {\n              opacity: 0,\n            }\n          : {}),\n        ...(status === Status.HIDDEN\n          ? {\n              display: 'none',\n            }\n          : {}),\n      }}\n    >\n      <CircularProgress />\n    </div>\n  );\n}\n\nexport default AppSplashScreen;\n","import Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ace, {Ace} from 'ace-builds';\nimport 'ace-builds/webpack-resolver';\nimport {saveAs} from 'file-saver';\nimport _ from 'lodash';\nimport CodeBracesBoxIcon from 'mdi-material-ui/CodeBracesBox';\nimport NodejsIcon from 'mdi-material-ui/Nodejs';\nimport TextBoxOutline from 'mdi-material-ui/TextBoxOutline';\nimport {autorun, IReactionDisposer} from 'mobx';\nimport {compile, CompileResult} from 'qbjc';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport configManager, {ConfigKey} from './config-manager';\n\nenum CompileResultType {\n  MODULE = 'module',\n  BUNDLE = 'bundle',\n}\n\nconst COMPILE_RESULT_TYPE_SPECS = [\n  {\n    compileResultType: CompileResultType.MODULE,\n    iconClass: TextBoxOutline,\n    label: 'ES6 module',\n  },\n  {\n    compileResultType: CompileResultType.BUNDLE,\n    iconClass: NodejsIcon,\n    label: 'Standalone Node.js program',\n  },\n] as const;\n\nfunction CompileResultTypeSelect({\n  value,\n  onChange,\n  style = {},\n}: {\n  value: CompileResultType;\n  onChange: (newValue: CompileResultType) => void;\n  style?: React.CSSProperties;\n}) {\n  const [menuAnchor, setMenuAnchor] = React.useState<HTMLElement | null>(null);\n  const onButtonClick = useCallback((event: React.MouseEvent<HTMLElement>) => {\n    setMenuAnchor(event.currentTarget);\n  }, []);\n  const onMenuSelect = useCallback(\n    (newValue: CompileResultType) => {\n      setMenuAnchor(null);\n      onChange(newValue);\n    },\n    [onChange]\n  );\n  const onMenuClose = useCallback(() => {\n    setMenuAnchor(null);\n  }, []);\n\n  const {iconClass: IconClass, label} = _.find(COMPILE_RESULT_TYPE_SPECS, [\n    'compileResultType',\n    value,\n  ])!;\n  return (\n    <>\n      <Button\n        startIcon={<IconClass />}\n        endIcon={<KeyboardArrowDownIcon fontSize=\"small\" />}\n        onClick={onButtonClick}\n        style={style}\n      >\n        {label}\n      </Button>\n      <Menu\n        anchorEl={menuAnchor}\n        keepMounted={true}\n        open={!!menuAnchor}\n        onClose={onMenuClose}\n      >\n        {COMPILE_RESULT_TYPE_SPECS.map(\n          ({compileResultType, iconClass: IconClass, label}) => (\n            <MenuItem\n              key={compileResultType}\n              selected={compileResultType === value}\n              onClick={() => onMenuSelect(compileResultType)}\n            >\n              <ListItemIcon>\n                <IconClass />\n              </ListItemIcon>\n              <Typography variant=\"inherit\">{label}</Typography>\n            </MenuItem>\n          )\n        )}\n      </Menu>\n    </>\n  );\n}\n\nexport default function CompileResultDialog({\n  compileResult: moduleCompileResult,\n  isOpen,\n  onClose: _onClose,\n}: {\n  compileResult: CompileResult | null;\n  isOpen: boolean;\n  onClose: () => void;\n}) {\n  const theme = useTheme();\n\n  const [compileResultType, setCompileResultType] = useState<CompileResultType>(\n    CompileResultType.MODULE\n  );\n  const [bundleCompileResult, setBundleCompileResult] =\n    useState<CompileResult | null>(null);\n\n  const editorRef = useRef<Ace.Editor | null>(null);\n\n  const [isFullScreen, setIsFullScreen] = useState(false);\n  const enterFullScreen = useCallback(() => {\n    setIsFullScreen(true);\n    setTimeout(() => editorRef.current?.resize(), 0);\n  }, []);\n  const exitFullScreen = useCallback(() => {\n    setIsFullScreen(false);\n    setTimeout(() => editorRef.current?.resize(), 0);\n  }, []);\n\n  const onCompileResultChange = useCallback(() => {\n    const editor = editorRef.current;\n    if (!editor) {\n      return;\n    }\n    if (!moduleCompileResult) {\n      editor.setValue('');\n      if (bundleCompileResult) {\n        setBundleCompileResult(null);\n      }\n      return;\n    }\n    if (\n      !bundleCompileResult ||\n      bundleCompileResult.source !== moduleCompileResult.source\n    ) {\n      compile({\n        source: moduleCompileResult.source,\n        sourceFileName: 'program.bas',\n        enableBundling: true,\n      }).then(setBundleCompileResult);\n    }\n    const newValue =\n      (compileResultType === CompileResultType.MODULE\n        ? moduleCompileResult.code\n        : bundleCompileResult?.code) || '';\n    if (newValue && editor.getValue() !== newValue) {\n      editor.setValue(newValue);\n    }\n  }, [compileResultType, moduleCompileResult, bundleCompileResult]);\n\n  useEffect(() => {\n    onCompileResultChange();\n  }, [onCompileResultChange]);\n\n  const editorConfigChangeListenerDisposerRef =\n    useRef<IReactionDisposer | null>(null);\n  const init = useCallback(\n    (node: HTMLDivElement | null) => {\n      if (!node || editorRef.current || !isOpen) {\n        return;\n      }\n      const editor = ace.edit(node, {\n        useWorker: false, // Disable syntax warnings\n      });\n      editorConfigChangeListenerDisposerRef.current = autorun(() => {\n        editor.setOptions({\n          fontFamily: configManager.getKey(ConfigKey.EDITOR_FONT_FAMILY),\n          fontSize: `${configManager.getKey(ConfigKey.EDITOR_FONT_SIZE)}px`,\n        });\n        editor.setTheme(\n          `ace/theme/${configManager.getKey(ConfigKey.EDITOR_THEME)}`\n        );\n        const keybindings = configManager.getKey(ConfigKey.EDITOR_KEYBINDINGS);\n        editor.setKeyboardHandler(\n          keybindings ? `ace/keyboard/${keybindings}` : ''\n        );\n      });\n      editor.setShowPrintMargin(false);\n      editor.session.setMode('ace/mode/javascript');\n      editor.setReadOnly(true);\n\n      editor.clearSelection();\n      editor.moveCursorTo(0, 0);\n      editor.focus();\n      editorRef.current = editor;\n\n      onCompileResultChange();\n    },\n    [isOpen, onCompileResultChange]\n  );\n\n  const onClose = useCallback(() => {\n    if (editorConfigChangeListenerDisposerRef.current) {\n      editorConfigChangeListenerDisposerRef.current();\n      editorConfigChangeListenerDisposerRef.current = null;\n    }\n    if (editorRef.current) {\n      editorRef.current.destroy();\n      editorRef.current = null;\n    }\n    _onClose();\n  }, [_onClose]);\n\n  const onSaveClick = useCallback(() => {\n    const editor = editorRef.current;\n    if (!editor) {\n      return;\n    }\n    const blob = new Blob([editor.getValue()], {\n      type: 'text/plain;charset=utf-8',\n    });\n    saveAs(blob, 'program.js');\n  }, []);\n\n  return (\n    <Dialog\n      onClose={onClose}\n      open={isOpen}\n      fullWidth={true}\n      fullScreen={isFullScreen}\n      maxWidth=\"lg\"\n    >\n      <DialogTitle\n        disableTypography={true}\n        style={{display: 'flex', alignItems: 'center'}}\n      >\n        <CodeBracesBoxIcon style={{marginRight: '0.4rem'}} />\n        <Typography variant=\"h6\" style={{flexGrow: 1}}>\n          Compiled code\n        </Typography>\n        <CompileResultTypeSelect\n          value={compileResultType}\n          onChange={setCompileResultType}\n          style={{\n            marginRight: theme.spacing(1),\n          }}\n        />\n        <Tooltip title=\"Save compiled JavaScript program\">\n          <IconButton onClick={onSaveClick}>\n            <SaveIcon />\n          </IconButton>\n        </Tooltip>\n        {isFullScreen ? (\n          <Tooltip title=\"Exit full screen\">\n            <IconButton onClick={exitFullScreen}>\n              <FullscreenExitIcon />\n            </IconButton>\n          </Tooltip>\n        ) : (\n          <Tooltip title=\"View as full screen\">\n            <IconButton onClick={enterFullScreen}>\n              <FullscreenIcon />\n            </IconButton>\n          </Tooltip>\n        )}\n        <Tooltip title=\"Close\">\n          <IconButton\n            onClick={onClose}\n            style={{marginRight: -theme.spacing(2)}}\n          >\n            <CloseIcon />\n          </IconButton>\n        </Tooltip>\n      </DialogTitle>\n      <DialogContent\n        dividers={true}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: '80vh',\n          padding: 0,\n        }}\n      >\n        <div\n          ref={init}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n            // height in the parent but prevents it from growing beyond the parent size when changing\n            // lineHeight. \\_()_/\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n        ></div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import ace, {Ace} from 'ace-builds';\nimport 'ace-builds/webpack-resolver';\nimport {autorun} from 'mobx';\nimport React, {useCallback, useRef} from 'react';\nimport configManager, {ConfigKey} from './config-manager';\nimport {DEFAULT_EXAMPLE} from './examples';\n\nfunction Editor({\n  onReady = () => {},\n  style = {},\n}: {onReady?: (editor: Ace.Editor) => void; style?: React.CSSProperties} = {}) {\n  const editorRef = useRef<Ace.Editor | null>(null);\n  const init = useCallback(\n    (node: HTMLDivElement | null) => {\n      if (!node || editorRef.current) {\n        return;\n      }\n      const editor = ace.edit(node);\n      autorun(() => {\n        editor.setOptions({\n          fontFamily: configManager.getKey(ConfigKey.EDITOR_FONT_FAMILY),\n          fontSize: `${configManager.getKey(ConfigKey.EDITOR_FONT_SIZE)}px`,\n        });\n        editor.setTheme(\n          `ace/theme/${configManager.getKey(ConfigKey.EDITOR_THEME)}`\n        );\n        const keybindings = configManager.getKey(ConfigKey.EDITOR_KEYBINDINGS);\n        editor.setKeyboardHandler(\n          keybindings ? `ace/keyboard/${keybindings}` : ''\n        );\n      });\n      editor.setShowPrintMargin(false);\n      editor.session.setMode('ace/mode/vbscript');\n\n      const initialContent = configManager.currentSourceFile.content.trim()\n        ? configManager.currentSourceFile.content\n        : DEFAULT_EXAMPLE.content;\n      editor.setValue(initialContent);\n      editor.clearSelection();\n      editor.moveCursorTo(0, 0);\n      editor.focus();\n      editor.on('change', () =>\n        configManager.setContent(\n          configManager.currentSourceFile,\n          editor.getValue()\n        )\n      );\n      editorRef.current = editor;\n      onReady(editor);\n    },\n    [onReady]\n  );\n\n  return <div ref={init} style={style}></div>;\n}\n\nexport default Editor;\n","import Paper from '@material-ui/core/Paper';\nimport {useTheme} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, {ReactNode} from 'react';\n\nfunction PaneHeader({\n  title,\n  icon,\n  children,\n}: {\n  title: string;\n  icon?: ReactNode;\n  children?: ReactNode;\n}) {\n  const theme = useTheme();\n  return (\n    <Paper\n      elevation={2}\n      square={true}\n      style={{\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        backgroundColor: theme.palette.background.default,\n      }}\n    >\n      <div style={{display: 'flex', padding: '0 8px 0 12px'}}>{icon}</div>\n      <Typography\n        variant=\"overline\"\n        color=\"textSecondary\"\n        style={{flexGrow: 1, paddingRight: '12px'}}\n      >\n        {title}\n      </Typography>\n      {children}\n    </Paper>\n  );\n}\n\nexport default PaneHeader;\n","import {Ace} from 'ace-builds';\nimport {action, computed, makeObservable, observable, runInAction} from 'mobx';\nimport {compile, CompileResult, Loc} from 'qbjc';\nimport {BrowserExecutor} from 'qbjc/browser';\nimport {Terminal} from 'xterm';\nimport configManager, {ConfigKey} from './config-manager';\n\nexport enum QbjcMessageType {\n  /** General error message. */\n  ERROR = 'error',\n  /** General informational message with no special formatting. */\n  INFO = 'info',\n  /** Specialized message representing program execution. */\n  EXECUTION = 'execution',\n}\n\nexport interface QbjcMessage {\n  /** Parsed location in the source code. */\n  loc?: Loc;\n  /** Message type. */\n  type: QbjcMessageType;\n  /** Message text. */\n  message: string;\n  /** For EXECUTION messages - the compiled code. */\n  compileResult?: CompileResult;\n}\n\nclass QbjcManager {\n  /** Whether we're currently compiling / running code. */\n  isRunning: boolean = false;\n\n  /** Compiler errors and status messages. */\n  messages: Array<QbjcMessage> = [];\n\n  /** Connects this QbjcManager to the provided editor and terminal. */\n  init({editor, terminal}: {editor?: Ace.Editor; terminal?: Terminal}) {\n    if (editor) {\n      this.editor = editor;\n    }\n    if (terminal) {\n      this.terminal = terminal;\n    }\n  }\n\n  /** Whether the required components (editor and terminal) are connected. */\n  get isReady() {\n    return !!this.editor && !!this.terminal;\n  }\n\n  async run() {\n    if (!this.editor || !this.terminal || this.isRunning) {\n      return;\n    }\n    const source = this.editor.getValue();\n    if (!source.trim()) {\n      return;\n    }\n\n    this.isRunning = true;\n    let compileResult: CompileResult;\n    try {\n      compileResult = await compile({\n        source,\n        sourceFileName: 'program.bas',\n      });\n      console.log(compileResult.code);\n    } catch (e) {\n      console.error(`Compile error: ${e.message ?? JSON.stringify(e)}`);\n      runInAction(() => {\n        this.isRunning = false;\n      });\n      if (e.message) {\n        this.pushMessage({\n          loc: e.loc,\n          type: QbjcMessageType.ERROR,\n          message: e.message,\n        });\n      }\n      return;\n    }\n\n    this.pushMessage({\n      type: QbjcMessageType.EXECUTION,\n      message: 'Running...',\n      compileResult: compileResult,\n    });\n    const startTs = new Date();\n    this.terminal.focus();\n    this.executor = new BrowserExecutor(this.terminal, {\n      stmtExecutionDelayUs: configManager.getKey(ConfigKey.EXECUTION_DELAY),\n    });\n    try {\n      await this.executor.executeModule(compileResult.code);\n    } finally {\n      const endTs = new Date();\n      runInAction(() => {\n        this.isRunning = false;\n      });\n      this.pushMessage({\n        type: QbjcMessageType.INFO,\n        message:\n          'Exited in ' +\n          `${((endTs.getTime() - startTs.getTime()) / 1000).toFixed(3)}s`,\n      });\n      this.executor = null;\n      this.editor.focus();\n    }\n  }\n\n  stop() {\n    if (!this.isRunning || !this.executor) {\n      return;\n    }\n    this.executor.stopExecution();\n  }\n\n  goToMessageLocInEditor(loc: Loc) {\n    if (!this.editor || !loc) {\n      return;\n    }\n    const {line, col} = loc;\n    this.editor.moveCursorTo(line - 1, col - 1);\n    this.editor.selection.selectWordRight();\n  }\n\n  pushMessage(message: QbjcMessage) {\n    this.messages.push(message);\n  }\n\n  clearMessages() {\n    this.messages.splice(0, this.messages.length);\n  }\n\n  constructor() {\n    makeObservable(this, {\n      init: action,\n      isReady: computed,\n      isRunning: observable,\n      messages: observable,\n      run: action,\n      pushMessage: action,\n      clearMessages: action,\n      editor: observable.ref,\n      terminal: observable.ref,\n    });\n  }\n\n  /** Ace editor. */\n  editor: Ace.Editor | null = null;\n\n  /** xterm.js terminal. */\n  terminal: Terminal | null = null;\n\n  /** Current executor. */\n  private executor: BrowserExecutor | null = null;\n}\n\nexport default QbjcManager;\n","import Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport {Theme, useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport BlockIcon from '@material-ui/icons/Block';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport PlayCircleIcon from '@material-ui/icons/PlayCircleFilled';\nimport CodeBracesBoxIcon from 'mdi-material-ui/CodeBracesBox';\nimport MessageTextIcon from 'mdi-material-ui/MessageText';\nimport {runInAction} from 'mobx';\nimport {observer} from 'mobx-react';\nimport {CompileResult, Loc} from 'qbjc';\nimport React, {useCallback, useEffect, useRef} from 'react';\nimport PaneHeader from './pane-header';\nimport {QbjcMessage, QbjcMessageType} from './qbjc-manager';\n\nfunction getMessageDisplayProps(theme: Theme, messageType: QbjcMessageType) {\n  const MESSAGE_DISPLAY_PROPS = {\n    [QbjcMessageType.ERROR]: {\n      iconClass: ErrorIcon,\n      color: theme.palette.warning.dark,\n    },\n    [QbjcMessageType.INFO]: {\n      iconClass: null,\n      color: theme.palette.text.hint,\n    },\n    [QbjcMessageType.EXECUTION]: {\n      iconClass: PlayCircleIcon,\n      color: theme.palette.text.hint,\n    },\n  };\n  return MESSAGE_DISPLAY_PROPS[messageType];\n}\n\nconst MessagesPane = observer(\n  ({\n    messages,\n    onLocClick,\n    onShowCompileResultClick,\n    style = {},\n  }: {\n    messages: Array<QbjcMessage>;\n    onLocClick: (loc: Loc) => void;\n    onShowCompileResultClick: (compileResult: CompileResult) => void;\n    style?: React.CSSProperties;\n  }) => {\n    const theme = useTheme();\n\n    const scrollContainerRef = useRef<HTMLDivElement | null>(null);\n    const isScrolledToBottomRef = useRef<boolean>(true);\n    const prevNumMessagesRef = useRef<number>(0);\n\n    useEffect(() => {\n      const {current: scrollContainerEl} = scrollContainerRef;\n      const {current: prevNumMessages} = prevNumMessagesRef;\n      const {current: isScrolledToBottom} = isScrolledToBottomRef;\n      const numMessages = messages.length;\n      if (!scrollContainerEl || numMessages === prevNumMessages) {\n        return;\n      }\n      if (isScrolledToBottom) {\n        scrollContainerEl.scrollTop = scrollContainerEl.scrollHeight;\n      }\n      prevNumMessagesRef.current = numMessages;\n    });\n\n    return (\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          ...style,\n        }}\n      >\n        <PaneHeader\n          title=\"Messages\"\n          icon={\n            <MessageTextIcon\n              style={{\n                fontSize: theme.typography.overline.fontSize,\n              }}\n            />\n          }\n        >\n          <Tooltip title=\"Clear messages\">\n            <IconButton\n              onClick={() =>\n                runInAction(() => {\n                  messages.length = 0;\n                })\n              }\n            >\n              <BlockIcon\n                style={{\n                  fontSize: theme.typography.overline.fontSize,\n                  color: theme.palette.text.secondary,\n                }}\n              />\n            </IconButton>\n          </Tooltip>\n        </PaneHeader>\n        <div\n          ref={scrollContainerRef}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the\n            // full height in the parent but prevents it from growing to accomodate the list\n            // content. \\_()_/\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n          onScroll={useCallback(() => {\n            const {current: scrollContainerEl} = scrollContainerRef;\n            if (!scrollContainerEl) {\n              return;\n            }\n            isScrolledToBottomRef.current =\n              scrollContainerEl.scrollHeight -\n                scrollContainerEl.scrollTop -\n                scrollContainerEl.clientHeight <\n              1;\n          }, [])}\n        >\n          <List dense={true} disablePadding={true}>\n            {messages.map(({loc, message, type, compileResult}, idx) => {\n              const {iconClass: Icon, color} = getMessageDisplayProps(\n                theme,\n                type\n              );\n              let iconElement: React.ReactNode = null;\n              if (Icon) {\n                iconElement = (\n                  <Icon\n                    htmlColor={color}\n                    style={{fontSize: theme.typography.body2.fontSize}}\n                  />\n                );\n              }\n              return (\n                <ListItem\n                  key={idx}\n                  button={true}\n                  divider={true}\n                  style={{paddingTop: 0, paddingBottom: 0}}\n                  onClick={() => (loc ? onLocClick(loc) : null)}\n                >\n                  {iconElement && <ListItemIcon>{iconElement}</ListItemIcon>}\n                  <ListItemText\n                    primary={message}\n                    primaryTypographyProps={{\n                      variant: 'caption',\n                      style: {fontSize: '0.7rem'},\n                    }}\n                    inset={!iconElement}\n                    style={{\n                      color,\n                      marginTop: 3,\n                      marginBottom: 3,\n                      marginLeft: -28,\n                    }}\n                  />\n                  {compileResult && (\n                    <ListItemSecondaryAction style={{marginRight: -6}}>\n                      <Tooltip title=\"View compiled JavaScript code\">\n                        <Button\n                          startIcon={\n                            <CodeBracesBoxIcon\n                              style={{\n                                fontSize: theme.typography.overline.fontSize,\n                                color: theme.palette.text.secondary,\n                                marginRight: -2,\n                              }}\n                            />\n                          }\n                          onClick={() =>\n                            onShowCompileResultClick(compileResult)\n                          }\n                          style={{\n                            marginRight: -2,\n                            fontSize: '0.6rem',\n                            color,\n                          }}\n                        >\n                          Compiled code\n                        </Button>\n                      </Tooltip>\n                    </ListItemSecondaryAction>\n                  )}\n                </ListItem>\n              );\n            })}\n          </List>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default MessagesPane;\n","import CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport {useTheme} from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport BlockIcon from '@material-ui/icons/Block';\nimport _ from 'lodash';\nimport MonitorIcon from 'mdi-material-ui/Monitor';\nimport {autorun} from 'mobx';\nimport {observer} from 'mobx-react';\nimport React, {useCallback, useEffect, useRef} from 'react';\nimport {Terminal} from 'xterm';\nimport {FitAddon} from 'xterm-addon-fit';\nimport * as XtermWebfont from 'xterm-webfont';\nimport 'xterm/css/xterm.css';\nimport configManager, {ConfigKey} from './config-manager';\nimport PaneHeader from './pane-header';\n\nconst OutputScreenPane = observer(\n  ({\n    isRunning,\n    onReady = () => {},\n    style = {},\n    dimensions = null,\n  }: {\n    isRunning: boolean;\n    onReady?: (terminal: Terminal) => void;\n    style?: React.CSSProperties;\n    dimensions?: any;\n  }) => {\n    const theme = useTheme();\n    const terminalRef = useRef<Terminal | null>(null);\n    const fitAddOnRef = useRef<FitAddon | null>(null);\n    const init = useCallback(\n      async (node: HTMLDivElement | null) => {\n        if (!node || terminalRef.current) {\n          return;\n        }\n        const terminal = new Terminal({\n          // Output from compiled program will only specify \\n for new lines, which need to be\n          // translated to \\r\\n.\n          convertEol: true,\n          // Must set initial font family to allow xterm-webfont to wait for this\n          // font to load.\n          fontFamily: configManager.getKey(ConfigKey.SCREEN_FONT_FAMILY),\n        });\n        terminalRef.current = terminal;\n        const fitAddon = new FitAddon();\n        terminal.loadAddon(fitAddon);\n        terminal.loadAddon(new XtermWebfont());\n        // @ts-ignore: method added by xterm-webfont addon\n        await terminal.loadWebfontAndOpen(node);\n        autorun(() => {\n          terminal.setOption(\n            'fontFamily',\n            configManager.getKey(ConfigKey.SCREEN_FONT_FAMILY)\n          );\n          terminal.setOption(\n            'fontSize',\n            configManager.getKey(ConfigKey.SCREEN_FONT_SIZE)\n          );\n          terminal.setOption(\n            'letterSpacing',\n            configManager.getKey(ConfigKey.SCREEN_LETTER_SPACING)\n          );\n          terminal.setOption(\n            'lineHeight',\n            configManager.getKey(ConfigKey.SCREEN_LINE_HEIGHT)\n          );\n          fitAddon.fit();\n        });\n        window.addEventListener(\n          'resize',\n          _.debounce(() => fitAddon.fit(), 200)\n        );\n        terminal.onResize(({rows, cols}) =>\n          console.log(`Resized terminal to ${cols}x${rows}`)\n        );\n        fitAddOnRef.current = fitAddon;\n        onReady(terminal);\n      },\n      [onReady]\n    );\n    const prevDimensionsJson = useRef('');\n    const dimensionsJson = JSON.stringify(dimensions);\n    useEffect(() => {\n      if (\n        prevDimensionsJson.current === dimensionsJson ||\n        !terminalRef.current ||\n        !fitAddOnRef.current\n      ) {\n        return;\n      }\n      fitAddOnRef.current.fit();\n      prevDimensionsJson.current = dimensionsJson;\n    }, [dimensionsJson]);\n\n    return (\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          ...style,\n        }}\n      >\n        <PaneHeader\n          title=\"Output\"\n          icon={\n            <MonitorIcon\n              style={{\n                fontSize: theme.typography.overline.fontSize,\n              }}\n            />\n          }\n        >\n          {isRunning ? (\n            <div style={{marginRight: 12, paddingTop: 8, paddingBottom: 8}}>\n              <Tooltip title=\"Running program...\">\n                <CircularProgress color=\"inherit\" size={10} />\n              </Tooltip>\n            </div>\n          ) : (\n            <Tooltip title=\"Clear output\">\n              <IconButton onClick={() => terminalRef.current?.reset()}>\n                <BlockIcon\n                  style={{\n                    fontSize: theme.typography.overline.fontSize,\n                    color: theme.palette.text.secondary,\n                  }}\n                />\n              </IconButton>\n            </Tooltip>\n          )}\n        </PaneHeader>\n        <div\n          ref={init}\n          style={{\n            // This magic combo of flexGrow, height: 0, and overflowY makes this div take up the full\n            // height in the parent but prevents it from growing beyond the parent size when changing\n            // lineHeight. \\_()_/\n            flexGrow: 1,\n            height: 0,\n            // @ts-ignore\n            overflowY: 'overlay',\n          }}\n        ></div>\n      </div>\n    );\n  }\n);\n\nexport default OutputScreenPane;\n","import Fab from '@material-ui/core/Fab';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport {observer} from 'mobx-react';\nimport React, {useCallback} from 'react';\nimport QbjcManager from './qbjc-manager';\n\nconst RunFab = observer(({qbjcManager}: {qbjcManager: QbjcManager}) => {\n  const isRunning = qbjcManager.isRunning;\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        right: '2rem',\n        bottom: '2rem',\n      }}\n    >\n      <div style={{position: 'relative'}}>\n        <Tooltip title={isRunning ? 'Stop program' : 'Run program'}>\n          <Fab\n            onClick={useCallback(async () => {\n              if (isRunning) {\n                qbjcManager.stop();\n              } else {\n                await qbjcManager.run();\n              }\n            }, [qbjcManager, isRunning])}\n            color={isRunning ? 'secondary' : 'primary'}\n            style={{\n              zIndex: 10,\n            }}\n          >\n            {isRunning ? <StopIcon /> : <PlayArrowIcon />}\n          </Fab>\n        </Tooltip>\n        {/*\n        isRunning && (\n          <CircularProgress\n            size={68}\n            style={{position: 'absolute', top: -6, left: -6, zIndex: 1}}\n          />\n        )\n        */}\n      </div>\n    </div>\n  );\n});\n\nexport default RunFab;\n","import '@fontsource/cascadia-mono';\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\nimport blue from '@material-ui/core/colors/blue';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {createTheme, ThemeProvider} from '@material-ui/core/styles';\nimport {observer} from 'mobx-react';\nimport {CompileResult} from 'qbjc';\nimport React, {useCallback, useRef, useState} from 'react';\nimport {Helmet} from 'react-helmet';\nimport Split from 'react-split';\nimport AppHeader from './app-header';\nimport AppSplashScreen from './app-splash-screen';\nimport './app.css';\nimport CompileResultDialog from './compile-result-dialog';\nimport Editor from './editor';\nimport MessagesPane from './messages-pane';\nimport OutputScreenPane from './output-screen-pane';\nimport QbjcManager from './qbjc-manager';\nimport RunFab from './run-fab';\nimport './split.css';\n\nconst darkTheme = createTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      light: blue[300],\n      main: blue[400],\n      dark: blue[700],\n      contrastText: 'white',\n    },\n  },\n});\n\nconst SPLIT_GUTTER_SIZE = 6;\n\nconst App = observer(() => {\n  const qbjcManagerRef = useRef<QbjcManager>(new QbjcManager());\n  const qbjcManager = qbjcManagerRef.current;\n\n  const [dimensions, setDimensions] = useState<{\n    horizontalSplit?: Array<number>;\n    rightVerticalSplit?: Array<number>;\n  } | null>({});\n\n  const [isCompileResultDialogOpen, setIsCompileResultDialogOpen] =\n    useState(false);\n  const [displayedCompileResult, setDisplayedCompileResult] =\n    useState<CompileResult | null>(null);\n  const showCompileResultDialog = useCallback(\n    (compileResult: CompileResult) => {\n      setDisplayedCompileResult(compileResult);\n      setIsCompileResultDialogOpen(true);\n    },\n    []\n  );\n  const hideCompileResultDialog = useCallback(() => {\n    setIsCompileResultDialogOpen(false);\n    setDisplayedCompileResult(null);\n  }, []);\n\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <CssBaseline />\n      <AppSplashScreen isReady={qbjcManager.isReady} />\n      <Helmet>\n        <title>\n          qbjc Playground{qbjcManager.isRunning ? ' - Running...' : ''}\n        </title>\n      </Helmet>\n\n      <div\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: '100%',\n          width: '100%',\n          backgroundColor: darkTheme.palette.background.default,\n        }}\n      >\n        <AppHeader isReady={qbjcManager.isReady} editor={qbjcManager.editor} />\n\n        <Split\n          minSize={300}\n          sizes={[50, 50]}\n          onDragEnd={(sizes: Array<number>) => {\n            setDimensions({\n              ...dimensions,\n              horizontalSplit: sizes,\n            });\n          }}\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            flexGrow: 1,\n            marginTop: 5,\n          }}\n          gutterSize={SPLIT_GUTTER_SIZE}\n        >\n          <div style={{position: 'relative'}}>\n            <Editor\n              onReady={(editor) => qbjcManager.init({editor})}\n              style={{\n                width: '100%',\n                height: '100%',\n                // @ts-ignore\n                overflow: 'overlay',\n              }}\n            />\n            <RunFab qbjcManager={qbjcManager} />\n          </div>\n\n          <Split\n            direction=\"vertical\"\n            sizes={[80, 20]}\n            minSize={100}\n            expandToMin={true}\n            onDragEnd={(sizes: Array<number>) => {\n              setDimensions({\n                ...dimensions,\n                rightVerticalSplit: sizes,\n              });\n            }}\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n            }}\n            gutterSize={SPLIT_GUTTER_SIZE}\n          >\n            <OutputScreenPane\n              onReady={(terminal) => qbjcManager.init({terminal})}\n              dimensions={dimensions}\n              isRunning={qbjcManager.isRunning}\n            />\n            <MessagesPane\n              messages={qbjcManager.messages}\n              onLocClick={useCallback(\n                (loc) => qbjcManager.goToMessageLocInEditor(loc),\n                [qbjcManager]\n              )}\n              onShowCompileResultClick={showCompileResultDialog}\n            />\n          </Split>\n        </Split>\n      </div>\n\n      <CompileResultDialog\n        compileResult={displayedCompileResult}\n        isOpen={isCompileResultDialogOpen}\n        onClose={hideCompileResultDialog}\n      />\n    </ThemeProvider>\n  );\n});\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** An error with source file and location info. */\nvar ErrorWithLoc = /** @class */ (function (_super) {\n    __extends(ErrorWithLoc, _super);\n    function ErrorWithLoc(message, _a) {\n        var _b = _a === void 0 ? {} : _a, sourceFileName = _b.sourceFileName, loc = _b.loc;\n        var _this = _super.call(this, message) || this;\n        if (loc) {\n            var sourceFileNamePrefix = sourceFileName ? sourceFileName + \":\" : '';\n            var locPrefix = loc.line + \":\" + loc.col;\n            _this.message = \"\" + sourceFileNamePrefix + locPrefix + \" - \" + _this.message;\n            _this.loc = loc;\n        }\n        return _this;\n    }\n    return ErrorWithLoc;\n}(Error));\nexports.default = ErrorWithLoc;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupSymbols = exports.lookupSymbol = exports.VarScope = exports.VarType = void 0;\n/** Type of a variable symbol. */\nvar VarType;\n(function (VarType) {\n    /** Regular variable. */\n    VarType[\"VAR\"] = \"var\";\n    /** Static variable. */\n    VarType[\"STATIC_VAR\"] = \"staticVar\";\n    /** Constant. */\n    VarType[\"CONST\"] = \"const\";\n    /** FUNCTION or SUB argument. */\n    VarType[\"ARG\"] = \"arg\";\n})(VarType = exports.VarType || (exports.VarType = {}));\n/** Scope of a variable symbol. */\nvar VarScope;\n(function (VarScope) {\n    VarScope[\"LOCAL\"] = \"local\";\n    VarScope[\"GLOBAL\"] = \"global\";\n})(VarScope = exports.VarScope || (exports.VarScope = {}));\nfunction lookupSymbol(symbolTable, name) {\n    var _a;\n    return ((_a = symbolTable.find(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); })) !== null && _a !== void 0 ? _a : null);\n}\nexports.lookupSymbol = lookupSymbol;\nfunction lookupSymbols(symbolTable, name) {\n    return symbolTable.filter(function (symbol) { return symbol.name.toLowerCase() === name.toLowerCase(); });\n}\nexports.lookupSymbols = lookupSymbols;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PrintArgType = exports.ExecutionDirectiveType = void 0;\nvar ExecutionDirectiveType;\n(function (ExecutionDirectiveType) {\n    ExecutionDirectiveType[\"GOTO\"] = \"goto\";\n    ExecutionDirectiveType[\"GOSUB\"] = \"gosub\";\n    ExecutionDirectiveType[\"RETURN\"] = \"return\";\n    ExecutionDirectiveType[\"END\"] = \"end\";\n    ExecutionDirectiveType[\"EXIT_PROC\"] = \"exitProc\";\n})(ExecutionDirectiveType = exports.ExecutionDirectiveType || (exports.ExecutionDirectiveType = {}));\n/** Type of an argument to print(). */\nvar PrintArgType;\n(function (PrintArgType) {\n    PrintArgType[\"COMMA\"] = \"comma\";\n    PrintArgType[\"SEMICOLON\"] = \"semicolon\";\n    PrintArgType[\"VALUE\"] = \"value\";\n})(PrintArgType = exports.PrintArgType || (exports.PrintArgType = {}));\n"],"sourceRoot":""}